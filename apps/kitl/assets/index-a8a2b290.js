(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Zr=(e,t)=>e===t,Qe=Symbol("solid-proxy"),Xn=Symbol("solid-track"),et={equals:Zr};let Zn=nr;const ie=1,tt=2,Qn={owned:null,cleanups:null,context:null,owner:null},kt={};var A=null;let bt=null,E=null,O=null,oe=null,dt=0;function Ce(e,t){const n=E,r=A,o=e.length===0,s=t===void 0?r:t,i=o?Qn:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=o?e:()=>e(()=>D(()=>ht(i)));A=i,E=null;try{return he(l,!0)}finally{E=n,A=r}}function v(e,t){t=t?Object.assign({},et,t):et;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),tr(n,o));return[er.bind(n),r]}function mn(e,t,n){const r=ut(e,t,!0,ie);De(r)}function x(e,t,n){const r=ut(e,t,!1,ie);De(r)}function j(e,t,n){Zn=so;const r=ut(e,t,!1,ie);(!n||!n.render)&&(r.user=!0),oe?oe.push(r):De(r)}function M(e,t,n){n=n?Object.assign({},et,n):et;const r=ut(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,De(r),er.bind(r)}function Qr(e){return e&&typeof e=="object"&&"then"in e}function eo(e,t,n){let r,o,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,s=t||{}):(r=e,o=t,s=n||{});let i=null,l=kt,a=!1,c="initialValue"in s,u=typeof r=="function"&&M(r);const h=new Set,[g,y]=(s.storage||v)(s.initialValue),[C,V]=v(void 0),[re,ke]=v(void 0,{equals:!1}),[W,K]=v(c?"ready":"unresolved");function L(N,I,B,be){return i===N&&(i=null,be!==void 0&&(c=!0),(N===l||I===l)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(be,{value:I})),l=kt,le(I,B)),I}function le(N,I){he(()=>{I===void 0&&y(()=>N),K(I!==void 0?"errored":c?"ready":"unresolved"),V(I);for(const B of h.keys())B.decrement();h.clear()},!1)}function Pe(){const N=no,I=g(),B=C();if(B!==void 0&&!i)throw B;return E&&!E.user&&N&&mn(()=>{re(),i&&(N.resolved||h.has(N)||(N.increment(),h.add(N)))}),I}function $t(N=!0){if(N!==!1&&a)return;a=!1;const I=u?u():r;if(I==null||I===!1){L(i,D(g));return}const B=l!==kt?l:D(()=>o(I,{value:g(),refetching:N}));return Qr(B)?(i=B,"value"in B?(B.status==="success"?L(i,B.value,void 0,I):L(i,void 0,void 0,I),B):(a=!0,queueMicrotask(()=>a=!1),he(()=>{K(c?"refreshing":"pending"),ke()},!1),B.then(be=>L(B,be,void 0,I),be=>L(B,void 0,or(be),I)))):(L(i,B,void 0,I),B)}return Object.defineProperties(Pe,{state:{get:()=>W()},error:{get:()=>C()},loading:{get(){const N=W();return N==="pending"||N==="refreshing"}},latest:{get(){if(!c)return Pe();const N=C();if(N&&!i)throw N;return g()}}}),u?mn(()=>$t(!1)):$t(!1),[Pe,{refetch:$t,mutate:y}]}function R(e){return he(e,!1)}function D(e){if(E===null)return e();const t=E;E=null;try{return e()}finally{E=t}}function Fe(e){j(()=>D(e))}function Jt(e){return A===null||(A.cleanups===null?A.cleanups=[e]:A.cleanups.push(e)),e}function to(e){const t=M(e),n=M(()=>Pt(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let no;function er(){if(this.sources&&this.state)if(this.state===ie)De(this);else{const e=O;O=null,he(()=>rt(this),!1),O=e}if(E){const e=this.observers?this.observers.length:0;E.sources?(E.sources.push(this),E.sourceSlots.push(e)):(E.sources=[this],E.sourceSlots=[e]),this.observers?(this.observers.push(E),this.observerSlots.push(E.sources.length-1)):(this.observers=[E],this.observerSlots=[E.sources.length-1])}return this.value}function tr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&he(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=bt&&bt.running;i&&bt.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?O.push(s):oe.push(s),s.observers&&rr(s)),i||(s.state=ie)}if(O.length>1e6)throw O=[],new Error},!1)),t}function De(e){if(!e.fn)return;ht(e);const t=dt;ro(e,e.value,t)}function ro(e,t,n){let r;const o=A,s=E;E=A=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=ie,e.owned&&e.owned.forEach(ht),e.owned=null),e.updatedAt=n+1,sr(i)}finally{E=s,A=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?tr(e,r):e.value=r,e.updatedAt=n)}function ut(e,t,n,r=ie,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:A,context:A?A.context:null,pure:n};return A===null||A!==Qn&&(A.owned?A.owned.push(s):A.owned=[s]),s}function nt(e){if(e.state===0)return;if(e.state===tt)return rt(e);if(e.suspense&&D(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<dt);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===ie)De(e);else if(e.state===tt){const r=O;O=null,he(()=>rt(e,t[0]),!1),O=r}}function he(e,t){if(O)return e();let n=!1;t||(O=[]),oe?n=!0:oe=[],dt++;try{const r=e();return oo(n),r}catch(r){n||(oe=null),O=null,sr(r)}}function oo(e){if(O&&(nr(O),O=null),e)return;const t=oe;oe=null,t.length&&he(()=>Zn(t),!1)}function nr(e){for(let t=0;t<e.length;t++)nt(e[t])}function so(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:nt(r)}for(t=0;t<n;t++)nt(e[t])}function rt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===ie?r!==t&&(!r.updatedAt||r.updatedAt<dt)&&nt(r):o===tt&&rt(r,t)}}}function rr(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=tt,n.pure?O.push(n):oe.push(n),n.observers&&rr(n))}}function ht(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ht(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function or(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function sr(e,t=A){throw or(e)}function Pt(e){if(typeof e=="function"&&!e.length)return Pt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Pt(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const Bt=Symbol("fallback");function ot(e){for(let t=0;t<e.length;t++)e[t]()}function io(e,t,n={}){let r=[],o=[],s=[],i=0,l=t.length>1?[]:null;return Jt(()=>ot(s)),()=>{let a=e()||[],c,u;return a[Xn],D(()=>{let g=a.length,y,C,V,re,ke,W,K,L,le;if(g===0)i!==0&&(ot(s),s=[],r=[],o=[],i=0,l&&(l=[])),n.fallback&&(r=[Bt],o[0]=Ce(Pe=>(s[0]=Pe,n.fallback())),i=1);else if(i===0){for(o=new Array(g),u=0;u<g;u++)r[u]=a[u],o[u]=Ce(h);i=g}else{for(V=new Array(g),re=new Array(g),l&&(ke=new Array(g)),W=0,K=Math.min(i,g);W<K&&r[W]===a[W];W++);for(K=i-1,L=g-1;K>=W&&L>=W&&r[K]===a[L];K--,L--)V[L]=o[K],re[L]=s[K],l&&(ke[L]=l[K]);for(y=new Map,C=new Array(L+1),u=L;u>=W;u--)le=a[u],c=y.get(le),C[u]=c===void 0?-1:c,y.set(le,u);for(c=W;c<=K;c++)le=r[c],u=y.get(le),u!==void 0&&u!==-1?(V[u]=o[c],re[u]=s[c],l&&(ke[u]=l[c]),u=C[u],y.set(le,u)):s[c]();for(u=W;u<g;u++)u in V?(o[u]=V[u],s[u]=re[u],l&&(l[u]=ke[u],l[u](u))):o[u]=Ce(h);o=o.slice(0,i=g),r=a.slice(0)}return o});function h(g){if(s[u]=g,l){const[y,C]=v(u);return l[u]=C,t(a[u],y)}return t(a[u])}}}function lo(e,t,n={}){let r=[],o=[],s=[],i=[],l=0,a;return Jt(()=>ot(s)),()=>{const c=e()||[];return c[Xn],D(()=>{if(c.length===0)return l!==0&&(ot(s),s=[],r=[],o=[],l=0,i=[]),n.fallback&&(r=[Bt],o[0]=Ce(h=>(s[0]=h,n.fallback())),l=1),o;for(r[0]===Bt&&(s[0](),s=[],r=[],o=[],l=0),a=0;a<c.length;a++)a<r.length&&r[a]!==c[a]?i[a](()=>c[a]):a>=r.length&&(o[a]=Ce(u));for(;a<r.length;a++)s[a]();return l=i.length=s.length=c.length,r=c.slice(0),o=o.slice(0,l)});function u(h){s[a]=h;const[g,y]=v(c[a]);return i[a]=y,t(g,a)}}}function d(e,t){return D(()=>e(t||{}))}function Ye(){return!0}const Tt={get(e,t,n){return t===Qe?n:e.get(t)},has(e,t){return t===Qe?!0:e.has(t)},set:Ye,deleteProperty:Ye,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Ye,deleteProperty:Ye}},ownKeys(e){return e.keys()}};function xt(e){return(e=typeof e=="function"?e():e)?e:{}}function ao(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Lt(...e){let t=!1;for(let s=0;s<e.length;s++){const i=e[s];t=t||!!i&&Qe in i,e[s]=typeof i=="function"?(t=!0,M(i)):i}if(t)return new Proxy({get(s){for(let i=e.length-1;i>=0;i--){const l=xt(e[i])[s];if(l!==void 0)return l}},has(s){for(let i=e.length-1;i>=0;i--)if(s in xt(e[i]))return!0;return!1},keys(){const s=[];for(let i=0;i<e.length;i++)s.push(...Object.keys(xt(e[i])));return[...new Set(s)]}},Tt);const n={},r={},o=new Set;for(let s=e.length-1;s>=0;s--){const i=e[s];if(!i)continue;const l=Object.getOwnPropertyNames(i);for(let a=0,c=l.length;a<c;a++){const u=l[a];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(i,u);if(!o.has(u))h.get?(o.add(u),Object.defineProperty(n,u,{enumerable:!0,configurable:!0,get:ao.bind(r[u]=[h.get.bind(i)])})):(h.value!==void 0&&o.add(u),n[u]=h.value);else{const g=r[u];g?h.get?g.push(h.get.bind(i)):h.value!==void 0&&g.push(()=>h.value):n[u]===void 0&&(n[u]=h.value)}}}return n}function ir(e,...t){if(Qe in e){const o=new Set(t.length>1?t.flat():t[0]),s=t.map(i=>new Proxy({get(l){return i.includes(l)?e[l]:void 0},has(l){return i.includes(l)&&l in e},keys(){return i.filter(l=>l in e)}},Tt));return s.push(new Proxy({get(i){return o.has(i)?void 0:e[i]},has(i){return o.has(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.has(i))}},Tt)),s}const n={},r=t.map(()=>({}));for(const o of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,o),i=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let l=!1,a=0;for(const c of t)c.includes(o)&&(l=!0,i?r[a][o]=s.value:Object.defineProperty(r[a],o,s)),++a;l||(i?n[o]=s.value:Object.defineProperty(n,o,s))}return[...r,n]}const lr=e=>`Stale read from <${e}>.`;function X(e){const t="fallback"in e&&{fallback:()=>e.fallback};return M(io(()=>e.each,e.children,t||void 0))}function wn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return M(lo(()=>e.each,e.children,t||void 0))}function P(e){const t=e.keyed,n=M(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return M(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?D(()=>o(t?r:()=>{if(!D(n))throw lr("Show");return e.when})):o}return e.fallback},void 0,void 0)}function Xt(e){let t=!1;const n=(s,i)=>s[0]===i[0]&&(t?s[1]===i[1]:!s[1]==!i[1])&&s[2]===i[2],r=to(()=>e.children),o=M(()=>{let s=r();Array.isArray(s)||(s=[s]);for(let i=0;i<s.length;i++){const l=s[i].when;if(l)return t=!!s[i].keyed,[i,l,s[i]]}return[-1]},void 0,{equals:n});return M(()=>{const[s,i,l]=o();if(s<0)return e.fallback;const a=l.children;return typeof a=="function"&&a.length>0?D(()=>a(t?i:()=>{if(D(o)[0]!==s)throw lr("Match");return l.when})):a},void 0,void 0)}function de(e){return e}const co=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],uo=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...co]),ho=new Set(["innerHTML","textContent","innerText","children"]),fo=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),go=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function mo(e,t){const n=go[e];return typeof n=="object"?n[t]?n.$:void 0:n}const wo=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),yo=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),po={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function vo(e,t,n){let r=n.length,o=t.length,s=r,i=0,l=0,a=t[o-1].nextSibling,c=null;for(;i<o||l<s;){if(t[i]===n[l]){i++,l++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?l?n[l-1].nextSibling:n[s-l]:a;for(;l<s;)e.insertBefore(n[l++],u)}else if(s===l)for(;i<o;)(!c||!c.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[l]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[l++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!c){c=new Map;let h=l;for(;h<s;)c.set(n[h],h++)}const u=c.get(t[i]);if(u!=null)if(l<u&&u<s){let h=i,g=1,y;for(;++h<o&&h<s&&!((y=c.get(t[h]))==null||y!==u+g);)g++;if(g>u-l){const C=t[i];for(;l<u;)e.insertBefore(n[l++],C)}else e.replaceChild(n[l++],t[i++])}else i++;else t[i++].remove()}}}const yn="_$DX_DELEGATE";function $o(e,t,n,r={}){let o;return Ce(s=>{o=s,t===document?e():f(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function w(e,t,n){let r;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,n?i.content.firstChild.firstChild:i.content.firstChild},s=t?()=>D(()=>document.importNode(r||(r=o()),!0)):()=>(r||(r=o())).cloneNode(!0);return s.cloneNode=s,s}function Z(e,t=window.document){const n=t[yn]||(t[yn]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,_o))}}function te(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function ko(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function F(e,t){t==null?e.removeAttribute("class"):e.className=t}function ee(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n)}function bo(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const l=o[s];!l||l==="undefined"||t[l]||(pn(e,l,!1),delete n[l])}for(s=0,i=r.length;s<i;s++){const l=r[s],a=!!t[l];!l||l==="undefined"||n[l]===a||!a||(pn(e,l,!0),n[l]=a)}return n}function We(e,t,n){if(!t)return n?te(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function ar(e,t={},n,r){const o={};return r||x(()=>o.children=_e(e,t.children,o.children)),x(()=>t.ref&&t.ref(e)),x(()=>xo(e,t,n,!0,o,!0)),o}function T(e,t,n){return D(()=>e(t,n))}function f(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return _e(e,t,r,n);x(o=>_e(e,t(),o,n),r)}function xo(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=vn(e,i,null,o[i],n,s)}for(const i in t){if(i==="children"){r||_e(e,t.children);continue}const l=t[i];o[i]=vn(e,i,l,o[i],n,s)}}function Co(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function pn(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function vn(e,t,n,r,o,s){let i,l,a,c,u;if(t==="style")return We(e,n,r);if(t==="classList")return bo(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r),n&&e.addEventListener(h,n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),g=wo.has(h);if(!g&&r){const y=Array.isArray(r)?r[0]:r;e.removeEventListener(h,y)}(g||n)&&(ee(e,h,n,g),g&&Z([h]))}else if(t.slice(0,5)==="attr:")te(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(a=ho.has(t))||!o&&((c=mo(t,e.tagName))||(l=uo.has(t)))||(i=e.nodeName.includes("-")))u&&(t=t.slice(5),l=!0),t==="class"||t==="className"?F(e,n):i&&!l&&!a?e[Co(t)]=n:e[c||t]=n;else{const h=o&&t.indexOf(":")>-1&&po[t.split(":")[0]];h?ko(e,h,t,n):te(e,fo[t]||t,n)}return n}function _o(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function _e(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),i){let l=n[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),n=xe(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=xe(e,n,r);else{if(s==="function")return x(()=>{let l=t();for(;typeof l=="function";)l=l();n=_e(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],a=n&&Array.isArray(n);if(Ot(l,t,n,o))return x(()=>n=_e(e,l,n,r,!0)),()=>n;if(l.length===0){if(n=xe(e,n,r),i)return n}else a?n.length===0?$n(e,l,r):vo(e,n,l):(n&&xe(e),$n(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=xe(e,n,r,t);xe(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Ot(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let l=t[s],a=n&&n[s],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=Ot(e,l,a)||o;else if(c==="function")if(r){for(;typeof l=="function";)l=l();o=Ot(e,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||o}else e.push(l),o=!0;else{const u=String(l);a&&a.nodeType===3&&a.data===u?e.push(a):e.push(document.createTextNode(u))}}return o}function $n(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function xe(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const l=t[i];if(o!==l){const a=l.parentNode===e;!s&&!i?a?e.replaceChild(o,l):e.insertBefore(o,n):a&&l.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const So=!1,Mo="http://www.w3.org/2000/svg";function Eo(e,t=!1){return t?document.createElementNS(Mo,e):document.createElement(e)}function Ne(e){const[t,n]=ir(e,["component"]),r=M(()=>t.component);return M(()=>{const o=r();switch(typeof o){case"function":return D(()=>o(n));case"string":const s=yo.has(o),i=Eo(o,s);return ar(i,n,s),i}})}var Do=()=>["%csolid-devtools","color: #fff; background: #2c4f7c; padding: 1px 4px;"];function No(...e){console.warn(...Do(),...e)}No('`import "solid-devtools";` is an entry point for the vite plugin.\nIf you\'re seeing this message you probably forgot to add the plugin to your vite config.');(()=>{let e=100;const t=()=>{const o=getComputedStyle(document.documentElement).getPropertyValue("--kitl-c-bg");if(console.log("bgColor",o),!o){if(e>1e4)return;e*=2,setTimeout(t,e);return}const s=document.querySelector('meta[name="theme-color"]');s&&s.setAttribute("content",o)},n=o=>{o?(console.log("Dark mode"),document.documentElement.setAttribute("color-theme","dark")):(console.log("Light mode"),document.documentElement.setAttribute("color-theme","light")),setTimeout(t)},r=window.matchMedia("(prefers-color-scheme: dark)");r.addEventListener("change",o=>n(o.matches)),n(r.matches),window.addEventListener("load",t)})();const Io="modulepreload",Ao=function(e,t){return new URL(e,t).href},kn={},bn=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Ao(s,r),s in kn)return;kn[s]=!0;const i=s.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!r)for(let u=o.length-1;u>=0;u--){const h=o[u];if(h.href===s&&(!i||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":Io,i||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),i)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})},Po=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))})},[cr,Bo]=v({locale:"",strings:new Map}),To=()=>cr().locale,dr=(e,t,n)=>{for(const r in n){const o=n[r],s=t?`${t}.${r}`:r;typeof o=="object"?dr(e,s,o):e.set(s,o)}},Lo=async e=>{const t=navigator.languages.map(n=>{const r=n.indexOf("-");return r===-1?n:n.slice(0,r)});for(const n of[e,...t,"en"])if(n)try{const r=await Po(Object.assign({"./strings/en.json":()=>bn(()=>import("./en-b1dbc6cc.js"),[],import.meta.url),"./strings/ko.json":()=>bn(()=>import("./ko-54e50217.js"),[],import.meta.url)}),`./strings/${n}.json`),o=new Map;return dr(o,"",r),Bo({locale:n,strings:o}),!0}catch{continue}},m=e=>cr().strings.get(e)||e,Oo=e=>{const[t]=eo(async()=>await Lo(e.language)),n=To();return d(Xt,{fallback:"Unk",get children(){return[d(de,{get when(){return t()},get children(){return e.children}}),d(de,{when:n==="",children:"Failed to load locale."}),d(de,{when:n===void 0,children:"Loading..."})]}})};var p=(e=>(e.fg="fg",e.bg="bg",e.primary="primary",e.secondary="secondary",e.success="success",e.danger="danger",e.warning="warning",e.info="info",e))(p||{});const zo=w("<button>"),k=e=>(()=>{const t=zo();ee(t,"click",e.onClick,!0);const n=e.ref;return typeof n=="function"?T(n,t):e.ref=t,f(t,()=>e.children),x(r=>{const o=`no-user-select btn btn-${e.outline?"ol-":""}${e.color} ${e.class??""} ${e.small?"btn-sm":""}`,s=e.disabled;return o!==r._v$&&F(t,r._v$=o),s!==r._v$2&&(t.disabled=r._v$2=s),r},{_v$:void 0,_v$2:void 0}),t})();Z(["click"]);const Ho=w(`<svg stroke-width=0.125 viewBox="0 0 1 1">// Check shape<path d="
							M 0.2 0.5
							L 0.45 0.75
							L 0.9 0.25
						">`),Ro=w('<label class=checkbox><div class="checkbox-box no-user-select cursor-pointer"></div><input type=checkbox name=checkbox>'),jo=e=>{const[t,n]=v(e.value),r=o=>{const s=o.target;console.log(s.checked),n(s.checked),e.onChange?.(s.checked)};return(()=>{const o=Ro(),s=o.firstChild,i=s.nextSibling;f(s,d(P,{get when(){return t()},get children(){return Ho()}})),i.addEventListener("change",r);const l=e.ref;return typeof l=="function"?T(l,i):e.ref=i,f(o,()=>e.children,null),x(()=>i.checked=e.value),o})()},Fo=w("<div>"),U=e=>(()=>{const t=Fo();return ee(t,"drop",e.onDrop),ee(t,"click",e.onClick,!0),f(t,()=>e.children),x(()=>F(t,`input-group ${e.class??""}`)),t})();Z(["click"]);const Wo=w("<input type=text>"),ge=e=>(()=>{const t=Wo();ee(t,"blur",e.onBlur),ee(t,"keydown",e.onKeyDown,!0),ee(t,"change",e.onChange),ee(t,"click",e.onClick,!0);const n=e.ref;return typeof n=="function"?T(n,t):e.ref=t,x(r=>{const o=e.readonly,s=`form-control ${e.class??""}`,i=e.placeholder;return o!==r._v$&&(t.readOnly=r._v$=o),s!==r._v$2&&F(t,r._v$2=s),i!==r._v$3&&te(t,"placeholder",r._v$3=i),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),x(()=>t.value=e.value??""),t})();Z(["click","keydown"]);const Ko=w("<span>"),ur=e=>(()=>{const t=Ko();return x(()=>F(t,`spinner ${e.class}`)),t})(),Uo=e=>[e.ctrlKey?"C":"",e.altKey?"A":"",e.shiftKey?"S":"",e.metaKey?"M":"",e.key].join("-"),hr=e=>t=>{if(typeof t!==e)throw new Error(`Expected ${e}, got ${typeof t}`);return t},G=hr("string"),st=hr("number"),we=e=>t=>{if(t!==void 0)return e(t)},Le=e=>t=>{if(!Array.isArray(t))throw new Error(`Expected array, got ${typeof t}`);return t.map(e)},Vo=e=>({x:st(e.x),y:st(e.y)}),zt={x:0,y:0},Yo=e=>({x:Math.round(e.x),y:Math.round(e.y)}),Re=(e,t)=>e*e+t*t,Ht=(e,t)=>Math.sqrt(Re(e,t)),xn=(e,t,n)=>{const r=n.w/2,o=n.h/2,s=n.x+r,i=n.y+o,l=Math.abs(r-o);let a=e-s,c=t-i,u=0,h=0;if(a<-r&&(a=-r,u=-1),a>r&&(a=r,u=1),c<-o&&(c=-o,h=-1),c>o&&(c=o,h=1),r>o&&Math.abs(a)>l){const g=a>0?l:-l,y=a-g,C=Ht(y,c)/o;return[s+g+y/C,i+c/C,y/o,c/(C*o)]}if(o>r&&Math.abs(c)>l){const g=c>0?l:-l,y=c-g,C=Ht(a,y)/r;return[s+a/C,i+g+y/C,a/(C*r),y/r]}return[s+a,i+c,u,h]},Rt=(e,t,n)=>{const[r,o,s,i]=xn(t.x+t.w/2,t.y+t.h/2,e),[l,a,c,u]=xn(r,o,t),h=.2*Ht(r-l,o-a);return`M ${l-n*c} ${a-n*u} C ${l+c*h} ${a+u*h}, ${r+s*h} ${o+i*h}, ${r-n*s} ${o-n*i}`},Cn=(e,t)=>{const r=e.x+e.w/2,o=t.x+t.w/2;return`M ${r} ${e.y} C ${r} ${e.y-30}, ${o} ${t.y-30}, ${o} ${t.y}`},Go=e=>Math.random().toString(36).slice(e),qo=()=>Go(7),Jo=()=>{const e=new Date;return Math.round(e.getTime()/1e3+e.getTimezoneOffset()*60).toString(36)},_n=()=>`${Jo()}-${qo()}`,fr=e=>({module:G(e.module),name:G(e.name)}),Sn='()[]{},;\\@#"',gr=new Map;for(let e=0;e<Sn.length;e++)gr.set(Sn[e],!0);const Xo=e=>{let t="";for(let n=0;n<e.length;n++)gr.has(e[n])||(t+=e[n]);return t},Zo=e=>{let t="",n=!1,r=0;for(;r<e.length&&(e.charCodeAt(r)<=32||e[r]==="_");)r+=1;for(;r<e.length;r++)e.charCodeAt(r)<=32||e[r]==="_"?n||(n=!0):(n&&(t+="_"),t+=e[r],n=!1);return t},Qo=e=>Xo(Zo(e)),es=e=>e.replace(/_/g," "),mr=e=>es(Qo(e));var $=(e=>(e.Alpha="a",e.Beta="b",e.Delta="d",e.Lambda="l",e.Pi="p",e))($||{});const Mn=new Set(["d"]),ts=new Set(["b"]),ns=new Set(["b"]),Oe=new Set(["d","p"]),ye=e=>({id:G(e.id),handle:we(G)(e.handle)}),rs=e=>({type:"a",val:e.val,pat:we(ye)(e.pat)}),os=e=>({type:"b",name:fr(e.name),lhs:st(e.lhs),args:Le(ye)(e.args)}),ss=e=>({type:"d",comment:G(e.comment),val:we(ye)(e.val)}),is=e=>({type:"l",fallback:we(ye)(e.fallback),params:Le(G)(e.params),ret:we(ye)(e.ret)}),ls=e=>({type:"p",name:fr(e.name),pat:we(ye)(e.pat),elems:st(e.elems)}),as={a:rs,b:os,d:ss,l:is,p:ls},cs=e=>({id:G(e.id),pos:Vo(e.pos),x:as[e.x.type](e.x)}),Ge=JSON.stringify,Ct=e=>{switch(typeof e){case"string":return e.length>20;case"object":return e===null?!1:Array.isArray(e)?e.length>1:Object.keys(e).length>1}return!1},ae=(e,t=0)=>{if(typeof e!="object"||e===null)return Ge(e);const n=" ".repeat(2*(t+1)),r=`,
`+n;if(Array.isArray(e)){const i=e;return i.length===0?"[]":i.length===1?Ct(i[0])?`[ ${ae(i[0],t+1)} ]`:`[${ae(i[0],t+1)}]`:`[ ${i.map(l=>ae(l,t+1)).join(r)} ]`}const o=e,s=Object.keys(o);if(s.length===0)return"{}";if(s.length===1){const i=s[0],l=Ge(i),a=o[i];return Ct(a)?`{ ${l}:
  ${n}${ae(a,t+2)}}`:`{${l}: ${ae(a,t+1)}}`}return`{ ${Object.entries(o).map(([i,l])=>Ct(l)?`${Ge(i)}:
  ${n}${ae(l,t+2)}`:`${Ge(i)}: ${ae(l,t+1)}`).join(r)} }`},H=e=>e.charCodeAt(0),Zt=e=>{const t=new Set;for(let n=0;n<e.length;n++)t.add(e.charCodeAt(n));return t},ds=H(`
`),us=H("["),hs=H("]"),fs=H("{"),gs=H("}"),ms=H('"'),ws=H("'"),ys=H("\\"),ps=H("u"),vs=H("x"),wr=Zt(`[]{},"':
`),$s=Zt("+-0123456789."),ks=Zt(`"'`),bs=new Map([[H("b"),"\b"],[H("f"),"\f"],[H("n"),`
`],[H("r"),"\r"],[H("t"),"	"]]),xs=/[-+]?((0x[0-9a-fA-F]+)|([0-9]+(\.[0-9]+)?))([eE][-+]?[0-9]+)?/y,Cs=/(false|true|null)\b/iy,_s=new Map([["false",!1],["true",!0],["null",null]]),yr=/\s*/y,it=/[\s,]*/y,Ss=/[\s:]*/y,ue=e=>e.s.charCodeAt(e.p);class Ke extends Error{s;p;line;column;constructor(t,n){let r=1,o=1;for(let s=0;s<t.p;s++)t.s.charCodeAt(s)===ds&&(r++,o=0),o++;super(`${r}:${o}: ${n}`),this.name="ParseError",this.s=t.s,this.p=t.p,this.line=r,this.column=o}}const Qt=(e,t)=>(t.lastIndex=e.p,t.exec(e.s)),me=(e,t)=>{const n=Qt(e,t);n&&(e.p+=n[0].length)},Ms=e=>{e.p++,me(e,it);const t=[];for(;e.p<e.l&&ue(e)!==hs;)t.push(en(e)),me(e,it);return e.p++,t},Es=e=>{e.p++,me(e,it);const t={};for(;e.p<e.l&&ue(e)!==gs;){let n;if(ks.has(ue(e)))n=jt(e);else{const r=e.p;e.p=e.s.indexOf(":",e.p),e.p===-1&&(e.p=e.l),n=e.s.slice(r,e.p).trim()}me(e,Ss),t[n]=en(e),me(e,it)}return e.p++,t},En=(e,t)=>{const n=e.s.slice(e.p+1,e.p+t+1),r=parseInt(n,16);if(e.p+=t,isNaN(r))throw new Ke(e,`Invalid unicode escape '${n}'`);return String.fromCharCode(r)},jt=e=>{const t=ue(e);e.p++;let n="";for(;e.p<e.l;e.p++){const r=ue(e);if(r===t)return e.p++,n;if(r===ys){e.p++;const o=ue(e);switch(o){case ps:n+=En(e,4);break;case vs:n+=En(e,2);break;default:n+=bs.get(o)||String.fromCharCode(o)}}else n+=String.fromCharCode(r)}return n},Ds=e=>{const t=Qt(e,xs),n=t?t[0]:"",r=n?Number(n):NaN;if(e.p+=n.length,isNaN(r))throw new Ke(e,`Invalid number '${n}'`);return r},Ns=(e,t)=>{const n=Qt(e,Cs);if(n!==null)return e.p+=n[0].length,_s.get(n[0].toLowerCase());if(t)throw new Ke(e,`Unexpected character '${e.s[e.p]}'`);const r=e.p;for(;e.p<e.l&&!wr.has(ue(e));)e.p++;return e.s.slice(r,e.p).trim()},Dn={[ms]:jt,[ws]:jt,[us]:Ms,[fs]:Es},en=(e,t)=>{me(e,yr);const n=ue(e);if(n in Dn)return Dn[n](e);if(wr.has(n))throw new Ke(e,`Unexpected character '${e.s[e.p]}' for value`);return $s.has(n)?Ds(e):Ns(e,t)},Is=e=>{const t={s:e,p:0,l:e.length},n=en(t,!0);if(me(t,yr),t.p<t.l)throw new Ke(t,`Unexpected character '${t.s[t.p]}', expect EOF`);return n},Nn=e=>{const t=parseInt(e);return isNaN(t)?0:t},In=e=>{const t=e.split("@",2);return{name:t[0].trim(),module:t[1]?t[1].trim():""}},As=e=>{switch(console.log(e),e.type){case $.Alpha:return JSON.stringify(e.val,null,2);case $.Beta:{const t=e.name,n=t.module?` @ ${t.module}`:"",r=e.args.length<=0?"":e.lhs<=0?` , ${e.args.length}`:` , ${e.lhs} , ${Math.max(0,e.args.length-e.lhs)}`;return`${t.name}${n}${r}`}case $.Delta:return`${e.comment}`;case $.Lambda:return e.params.map(t=>"\\"+t).join(" ");case $.Pi:{const t=e.name,n=t.module?` @ ${t.module}`:"",r=e.elems<=0?"":`,${e.elems}`;return`? ${t.name}${n}${r}`}}},Ps=e=>{const t=e.trim();try{return{type:$.Alpha,val:Is(t)}}catch{}switch(t[0]){case"\\":{const r=t.slice(1).split("\\").reduce((o,s)=>{const i=s.trim();return i&&o.push(i),o},[]);return{type:$.Lambda,params:r.length<1?["x"]:r}}case"?":{const r=t.slice(1).split(","),o=In(r[0]),s=Nn(r[1]);return{type:$.Pi,name:o,elems:s}}default:{const r=t.split(","),o=In(r[0]);let s=Nn(r[1]),i=parseInt(r[2]);return isNaN(i)&&(i=s,s=0),{type:$.Beta,name:o,lhs:s,args:new Array(s+i).fill({id:""})}}}},Bs="0.0",An=["value","tag","type","alias"],Ts={value:()=>({type:"value",nodes:[],comment:""}),tag:()=>({type:"tag",elems:[]}),type:()=>({type:"type",unions:[]}),alias:()=>({type:"alias",origin:""})},tn={value:e=>({type:"value",nodes:Le(cs)(e.nodes),val:we(ye)(e.val),comment:G(e.comment)}),tag:e=>({type:"tag",elems:Le(G)(e.elems)}),type:e=>({type:"type",unions:Le(G)(e.unions)}),alias:e=>({type:"alias",origin:G(e.origin)})},Ls=e=>{const t={};for(const n in e)t[n]=tn[e[n].type](e[n]);return t},Os=e=>({version:G(e.version),defs:Ls(e.defs)}),pr=e=>({version:Bs,defs:e}),vr=e=>["defs",e],nn=e=>{const t=e.split(/[\\/]+/),n=t[0].length<1,r=[];for(const o of t)switch(o){case"":case".":break;case"..":r.pop();break;default:r.push(o)}return n&&r.unshift(""),r},ze=e=>e.length<1?".":e.length<=1&&e[0].length<1?"/":e.join("/"),zs=e=>e.length>0&&e[0].length<1,rn=e=>{const t=nn(e);return[ze(t),t]},on=e=>{const t=e.indexOf(":");return t<0?["local",e]:[e.slice(0,t),e.slice(t+1)]},$r=e=>{const[t,n]=on(e),[r,o]=rn(n);return[t,r,o]},kr=e=>{const[,,t]=$r(e);return t[t.length-1]},Hs=e=>{let t=e.lastIndexOf(".");return t<0&&(t=e.length),[e.slice(0,t),e.slice(t+1)]},Rs=(e,t)=>{if(t<1)return e;let n=e.indexOf(".");return n<0&&(n=e.length),`${e.slice(0,n)}-${t}${e.slice(n)}`};var Je=(e=>(e[e.Unknown=0]="Unknown",e[e.Kitl=1]="Kitl",e[e.Image=2]="Image",e))(Je||{});const js=new Map([[1,["kitl"]],[2,["png","jpg","jpeg","gif","svg","webp"]]]),br={};js.forEach((e,t)=>{for(const n of e)br[n]=t});const Fs=e=>br[e]||0,Se=e=>new TextEncoder().encode(e),Ws=e=>new TextDecoder().decode(e),Ks=async e=>{const t=await new Promise((n,r)=>{const o=new FileReader;o.onload=()=>{n(o.result)},o.onerror=r,o.readAsDataURL(new Blob([e]))});return t.slice(t.indexOf(",")+1)},Us=(e,t)=>{const n=URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})),r=document.createElement("a");r.href=n,r.download=e,r.click(),URL.revokeObjectURL(n)},Vs=(e,t,n)=>e<t?t:e>n?n:e,Ys=e=>{const t=" KMGTPE";let n=0;if(e<1024)return`${e} B`;for(;e>=1024&&n<t.length;)e/=1024,++n;return`${e.toFixed(2)} ${t[n]}B`},Gs=e=>{const t=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?e.toLocaleTimeString():e.toLocaleDateString()},qs=()=>{throw"Empty function invoked"},Js=w("<div class=toast-container>"),Xs=w("<div>");let sn=function(e){return e[e.Success=0]="Success",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.Progress=3]="Progress",e}({});const Zs=["✅","⚠️","🚫","⏳"],xr=[qs],ft=(e,t)=>{xr[0](e,t)},q=e=>ft(e,{type:sn.Success}),J=e=>ft(e,{type:sn.Error}),Qs=e=>ft(e,{type:sn.Progress}),ei=e=>{const t=e.creation??xr,[n,r]=v({cnt:0,toasts:[]});return t[0]=(o,s)=>{r(i=>{const l=i.toasts,a=i.cnt,c=Math.max(400,s?.ttl??2e3),u=(g,y)=>window.setTimeout(()=>r(C=>({...C,toasts:g(C.toasts)})),y),h=u(g=>g.filter(y=>y.id!==a),c);return u(g=>g.map(y=>y.id===a?{...y,class:"toast-a-out"}:y),c-200),l.push({id:a,type:s?.type,class:"toast-a-in",message:o,timeout:h}),{cnt:i.cnt+1,toasts:l}})},(()=>{const o=Js();return f(o,d(X,{get each(){return n().toasts},children:s=>(()=>{const i=Xs();return f(i,()=>s.type!==void 0?`${Zs[s.type]} `:"",null),f(i,()=>s.message,null),x(()=>F(i,`toast ${s.class}`)),i})()})),o})()};let Ft=0;const ti=()=>{Ft=0},Cr=()=>Ft=(Ft+57.295779513)%360,ni="hrm-c-bd-empty",ri="⎇",Pn="⟡",oi="⊥",si="⟾",ii="↯",Bn="⧉";var S=(e=>(e[e.Source=0]="Source",e[e.Sink=1]="Sink",e))(S||{});const li=w("<svg stroke-width=0>");function b(e,t){const n=Lt(e.a,t),[r,o]=ir(n,["src"]),[s,i]=v(""),l=M(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return j(()=>i(l())),Jt(()=>{i("")}),(()=>{const a=li();return ar(a,Lt({get stroke(){return e.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},o,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return s()}}),!0,!0),f(a,()=>So),a})()}function ai(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-back-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 14l-4 -4l4 -4"/><path d="M5 10h11a4 4 0 1 1 0 8h-1"/>'},e)}function ci(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-forward-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 14l4 -4l-4 -4"/><path d="M19 10h-11a4 4 0 1 0 0 8h1"/>'},e)}function ln(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-right",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0"/><path d="M13 18l6 -6"/><path d="M13 6l6 6"/>'},e)}function di(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-backspace",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 6a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-11l-5 -5a1.5 1.5 0 0 1 0 -2l5 -5z"/><path d="M12 10l4 4m0 -4l-4 4"/>'},e)}function _r(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-binary-tree",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M16 4a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M16 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M11 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M21 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M5.058 18.306l2.88 -4.606"/><path d="M10.061 10.303l2.877 -4.604"/><path d="M10.065 13.705l2.876 4.6"/><path d="M15.063 5.7l2.881 4.61"/>'},e)}function ui(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-caret-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 14l-6 -6l-6 6h12"/>'},e)}function gt(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-checkbox",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 11l3 3l8 -8"/><path d="M20 12v6a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h9"/>'},e)}function Wt(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-clipboard",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"/><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"/>'},e)}function Kt(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-copy",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"/><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"/>'},e)}function Tn(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-cut",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M9.15 14.85l8.85 -10.85"/><path d="M6 4l8.85 10.85"/>'},e)}function hi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-deselect",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 8h3a1 1 0 0 1 1 1v3"/><path d="M16 16h-7a1 1 0 0 1 -1 -1v-7"/><path d="M12 20v.01"/><path d="M16 20v.01"/><path d="M8 20v.01"/><path d="M4 20v.01"/><path d="M4 16v.01"/><path d="M4 12v.01"/><path d="M4 8v.01"/><path d="M8 4v.01"/><path d="M12 4v.01"/><path d="M16 4v.01"/><path d="M20 4v.01"/><path d="M20 8v.01"/><path d="M20 12v.01"/><path d="M20 16v.01"/><path d="M3 3l18 18"/>'},e)}function Sr(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-device-floppy",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"/><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M14 4l0 4l-6 0l0 -4"/>'},e)}function fi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-download",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"/><path d="M7 11l5 5l5 -5"/><path d="M12 4l0 12"/>'},e)}function an(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-edit",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"/><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"/><path d="M16 5l3 3"/>'},e)}function gi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-file-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/><path d="M12 11l0 6"/><path d="M9 14l6 0"/>'},e)}function mi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-file",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/>'},e)}function wi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5"/><path d="M16 19h6"/><path d="M19 16v6"/>'},e)}function Mr(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-search",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 19h-6a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v2.5"/><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M20.2 20.2l1.8 1.8"/>'},e)}function yi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5"/><path d="M19 22v-6"/><path d="M22 19l-3 -3l-3 3"/>'},e)}function pi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2"/>'},e)}function Er(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-menu",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8l16 0"/><path d="M4 16l16 0"/>'},e)}function vi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14"/><path d="M5 12l14 0"/>'},e)}function $i(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-question-mark",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8a3.5 3 0 0 1 3.5 -3h1a3.5 3 0 0 1 3.5 3a3 3 0 0 1 -2 3a3 4 0 0 0 -2 4"/><path d="M12 19l0 .01"/>'},e)}function ki(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-refresh",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"/><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/>'},e)}function cn(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-rocket",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"/><path d="M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"/><path d="M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/>'},e)}function bi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-scissors",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 7m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M6 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M8.6 8.6l10.4 10.4"/><path d="M8.6 15.4l10.4 -10.4"/>'},e)}function xi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-square-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M9 12l6 0"/><path d="M12 9l0 6"/>'},e)}function Ci(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-tools",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/>'},e)}function _i(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash-off",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3l18 18"/><path d="M4 7h3m4 0h9"/><path d="M10 11l0 6"/><path d="M14 14l0 3"/><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l.077 -.923"/><path d="M18.384 14.373l.616 -7.373"/><path d="M9 5v-1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>'},e)}function lt(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0"/><path d="M10 11l0 6"/><path d="M14 11l0 6"/><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"/><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>'},e)}function Si(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-upload",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"/><path d="M7 9l5 -5l5 5"/><path d="M12 4l0 12"/>'},e)}function Mi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12"/><path d="M6 6l12 12"/>'},e)}function Ei(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-in-area",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 13v4"/><path d="M13 15h4"/><path d="M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"/><path d="M22 22l-3 -3"/><path d="M6 18h-1a2 2 0 0 1 -2 -2v-1"/><path d="M3 11v-1"/><path d="M3 6v-1a2 2 0 0 1 2 -2h1"/><path d="M10 3h1"/><path d="M15 3h1a2 2 0 0 1 2 2v1"/>'},e)}function Di(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-in",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M7 10l6 0"/><path d="M10 7l0 6"/><path d="M21 21l-6 -6"/>'},e)}function Ni(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-out",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M7 10l6 0"/><path d="M21 21l-6 -6"/>'},e)}function Ii(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-reset",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 21l-6 -6"/><path d="M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"/><path d="M3 4v4h4"/>'},e)}const Ln=16,Ai=250,Pi=16,Bi=600,Ti=window.setTimeout,Li=window.clearTimeout,On=e=>({shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey}),_t=e=>{e.preventDefault(),e.stopPropagation()},fe=(e,t)=>{const n={pointers:new Map,maxPointers:0,lastClick:{x:0,y:0,timestamp:0}},r=s=>{n.longPress&&n.longPress.id===s&&(Li(n.longPress.u),n.longPress=void 0),n.pointers.delete(s)},o={pointerenter:s=>{e.onEnter?.(s.pointerId)},pointercancel:s=>{r(s.pointerId),e.onCancel?.(s.pointerId)},pointerleave:s=>{r(s.pointerId),e.onLeave?.(s.pointerId)},pointerdown:s=>{_t(s);const i=s.pointerId;e.onDown?.({id:i,x:s.clientX,y:s.clientY,pointers:n.pointers.size,modifiers:On(s)}),s.target.releasePointerCapture(i),e.capture?s.currentTarget.setPointerCapture(i):s.currentTarget.releasePointerCapture(i);const l={id:i,x:s.clientX,y:s.clientY,moved:!1,timestamp:Date.now()};r(s.pointerId),n.pointers.set(i,l),n.maxPointers=Math.max(n.maxPointers,n.pointers.size),n.pointers.size===1&&(n.longPress={id:i,x:s.clientX,y:s.clientY,u:Ti(()=>{n.longPress&&n.pointers.size===1&&n.pointers.has(i)&&!n.pointers.get(i).moved&&(n.longPress=void 0,e.onLongPress?.({id:i,x:s.clientX,y:s.clientY}),n.pointers.delete(i))},Bi)})},pointermove:s=>{_t(s);const i=s.pointerId;e.onMove?.({id:i,x:s.clientX,y:s.clientY});const l=n.pointers.get(i);if(!l)return;const a=s.clientX-l.x,c=s.clientY-l.y;if(!(!l.moved&&Re(a,c)<Ln*Ln)){if(e.onDrag){const u={id:i,x:s.clientX,y:s.clientY,ox:l.x,oy:l.y,dx:a,dy:c},[h,g]=n.pointers.keys();g&&(u.pivot=n.pointers.get(h===i?g:h)),e.onDrag(u)}l.moved=!0,l.x=s.clientX,l.y=s.clientY}},pointerup:s=>{_t(s);const i=s.pointerId,l=n.pointers.get(i),a={id:i,x:s.clientX,y:s.clientY,pointers:n.maxPointers,modifiers:On(s),dragged:n.pointers.get(i)?.moved};if(e.onUp?.(a),!l)return;r(s.pointerId);const c=Date.now();n.pointers.size===0&&(e.onClick?.(a),c-n.lastClick.timestamp<Ai&&Re(a.x-n.lastClick.x,a.y-n.lastClick.y)<Pi**2&&e.onDoubleClick?.(a),n.lastClick={x:s.clientX,y:s.clientY,timestamp:c},n.maxPointers=0)}};for(const[s,i]of Object.entries(o))t.addEventListener(s,i,{passive:!1})},Oi=w('<div class="no-user-select hrm-pane abs-parent"><div class=hrm-view></div><div class=hrm-pane-controls>'),zi=w("<button>"),zn=e=>`translate(${e.x}px, ${e.y}px) scale(${e.z})`,Hi=e=>{let t,n;j(()=>{e.g.viewRef=t});const r=(i,l,a)=>e.g.transform[1](c=>({x:c.x*a+i,y:c.y*a+l,z:c.z*a})),o=1.1,s=[[d(Di,{}),()=>r((n?.offsetWidth??0)*(1-o)/2,(n?.offsetHeight??0)*(1-o)/2,o)],[d(Ni,{}),()=>r((n?.offsetWidth??0)*(1-1/o)/2,(n?.offsetHeight??0)*(1-1/o)/2,1/o)],[d(Ii,{}),()=>e.g.transform[1](()=>({x:0,y:0,z:1}))],[d(Ei,{}),()=>e.g.zoomAll()]];return j(()=>{if(n){fe({capture:!0,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onLongPress:e.onLongPress,onDrag:i=>{const l=i.pivot;if(l){const a=Math.sqrt(Re(l.x-i.x,l.y-i.y)/Re(l.x-i.ox,l.y-i.oy)),c=a-1;r((i.dx-(l.x+i.ox)*c)/2,(i.dy-(l.y+i.oy)*c)/2,a)}else r(i.dx,i.dy,1)}},n),n.addEventListener("wheel",i=>{if(n)if(i.preventDefault(),i.ctrlKey||i.metaKey){const l=Math.pow(2,i.deltaY/-100),a=n.getBoundingClientRect();r((i.clientX-a.left)*(1-l),(i.clientY-a.top)*(1-l),l)}else r(-i.deltaX,-i.deltaY,1)},{passive:!1});for(const[,i,l]of s)l&&fe({capture:!0,onClick:i},l)}}),(()=>{const i=Oi(),l=i.firstChild,a=l.nextSibling,c=n;typeof c=="function"?T(c,i):n=i;const u=t;return typeof u=="function"?T(u,l):t=l,f(l,()=>e.children),f(a,d(X,{each:s,children:h=>(()=>{const g=zi(),y=h[2];return typeof y=="function"?T(y,g):h[2]=g,f(g,()=>h[0]),g})()})),x(()=>zn(e.g.transform[0]())!=null?l.style.setProperty("transform",zn(e.g.transform[0]())):l.style.removeProperty("transform")),i})()},Ri=w("<div>"),ji=e=>{const[t,n]=e.handleW;let r;return j(()=>{r&&(t(),n(o=>{let s,i;if(o.data.type===S.Source)s=o.data.color,i=e.g.nodeColorBd(s);else if(o.data.sourceID){const l=e.g.nodes().get(o.data.sourceID);if(l){const a=l[0]();s=a.color,o.data.sourceHandle!==void 0&&(s=a.handles[o.data.sourceHandle][0]().color??s),i=e.g.nodeColorBg(s)}}return s===o.color&&o.ref===r?o:{...o,ref:r,color:s,style:i}}))}),j(()=>{r&&fe({capture:!1,onEnter:o=>{const s=e.g.connectingEdge[0]();s&&s.pointerID===o&&t().data.type===S.Source!==s.isSource&&e.g.setTempConnectingEnd(e.nodeID,r,e.handleID)},onLeave:()=>{e.g.connectingEnd[0]().ref===r&&e.g.unsetTempConnectingEnd(r)},onDown:o=>{e.g.addConnectingEnd(o.id,e.nodeID,e.handleID,e.g.viewPos(o.x,o.y))},onUp:()=>{e.g.finConnecting(e.nodeID,e.handleID)},onDoubleClick:()=>{e.g.deleteEdge(e.nodeID,e.handleID)}},r)}),(()=>{const o=Ri(),s=r;return typeof s=="function"?T(s,o):r=o,f(o,()=>t().name),x(i=>{const l=`hrm-node-item hrm-handle hrm-pill ${t().style?"":ni}`,a=t().style;return l!==i._v$&&F(o,i._v$=l),i._v$2=We(o,a,i._v$2),i},{_v$:void 0,_v$2:void 0}),o})()},Fi=new Map([["_|_","⊥"],["-:","∹"],["-<","⤙"],["-<<","⤛"],["->","→"],["->>","↠"],["->|","⇥"],["-|","⊣"],["-|","⊣"],["::","∷"],["::=","⩴"],[":=","≔"],["!=","≠"],["!|=","⊭"],["!||-","⊮"],["!||=","⊯"],["!~=","≄"],["!~~","≉"],["<-->","⟷"],["<-","←"],["<-<","↢"],["<->","↔"],["<-|","↤"],["<.>","⊙"],["<*>","⊗"],["<+>","⊕"],["<<-","↞"],["<<","≪"],["<=","≤"],["<==>","⟺"],["<=>","⇔"],["<=|","⤆"],["<|","◁"],["<~","⇜"],["=:","≕"],["==>","⟹"],["=>","⇒"],[">-","⤚"],[">=","≥"],[">>-","⤜"],[">>","≫"],["|-->","⟼"],["|-","⊢"],["|->","↦"],["|<-","⇤"],["|=","⊨"],["|=>","⤇"],["|>","▷"],["||-","⊩"],["||=","⊫"],["|||-","⊪"],["~=","≃"],["~>","⇝"],["~~","≈"]]),Wi=e=>Fi.get(e)||e,Ki=w("<div class=hrm-node-name-module>"),Ui=w("<div class=hrm-node-name><div class=hrm-node-name-name>"),Vi=w("<div class=hrm-node-mark>"),Yi=w("<div class=hrm-node-json>"),Gi=w('<div class="hrm-node-item hrm-node-body">'),qi=w('<div class="hrm-node-details shadow-d"><div class=hrm-node-json>'),Ji=w('<div class="hrm-node-details shadow-d"><pre class="hrm-node-comment no-user-select no-pointer-events">'),Hn=e=>e.length>16?`"${e.slice(0,16)}...`:`"${e}"`,Xi=e=>{switch(typeof e){case"string":return Hn(e);case"object":{if(e===null)return"null";if(Array.isArray(e))return e.length>0?`[...(${e.length})]`:"[]";const t=Object.keys(e);return t.length>0?`{${Hn(t[0])}:...(${t.length})}`:"{}"}}return JSON.stringify(e)},Rn=e=>(()=>{const t=Ui(),n=t.firstChild;return f(n,()=>Wi(e.name.name)),f(t,d(P,{get when(){return e.name.module&&e.name.module!=="_"},get children(){const r=Ki();return f(r,()=>"@"+e.name.module),r}}),null),x(()=>n.classList.toggle("hrm-node-name-builtin",e.name.module==="_")),t})(),St=e=>(()=>{const t=Vi();return f(t,()=>e.mark),t})(),Zi=e=>{const t={[$.Alpha]:()=>(()=>{const n=Yi();return f(n,()=>Xi(e.data.val)),n})(),[$.Beta]:()=>d(Rn,{get name(){return e.data.name}}),[$.Delta]:()=>d(St,{mark:oi}),[$.Lambda]:()=>d(St,{mark:si}),[$.Pi]:()=>[d(St,{mark:ii}),d(Rn,{get name(){return e.data.name}})]};return(()=>{const n=Gi();return f(n,d(Ne,{get component(){return t[e.data.type]}})),n})()},Qi=e=>{let t;const[n]=e.nodeW,r={[$.Alpha]:()=>(()=>{const o=qi(),s=o.firstChild,i=t;return typeof i=="function"?T(i,o):t=o,o.style.setProperty("transform","translate(0%, -100%)"),f(s,()=>ae(e.data.val)),x(l=>{const a=`${n().position.x+16}px`,c=`${n().position.y}px`;return a!==l._v$&&((l._v$=a)!=null?o.style.setProperty("left",a):o.style.removeProperty("left")),c!==l._v$2&&((l._v$2=c)!=null?o.style.setProperty("top",c):o.style.removeProperty("top")),l},{_v$:void 0,_v$2:void 0}),o})(),[$.Delta]:()=>(()=>{const o=Ji(),s=o.firstChild,i=t;return typeof i=="function"?T(i,o):t=o,f(s,()=>e.data.comment),x(l=>{const a=`${n().position.x+16}px`,c=`${n().position.y+n().size.h}px`;return a!==l._v$3&&((l._v$3=a)!=null?o.style.setProperty("left",a):o.style.removeProperty("left")),c!==l._v$4&&((l._v$4=c)!=null?o.style.setProperty("top",c):o.style.removeProperty("top")),l},{_v$3:void 0,_v$4:void 0}),o})()};return d(Ne,{get component(){return r[n().data.type]}})},el=w("<div>+"),jn=e=>{let t;const[n,r]=v(!1);return j(()=>{t&&fe({onEnter:o=>{r(!0);const s=e.g.connectingEdge[0]();s&&s.pointerID===o&&s.isSource&&e.g.setTempConnectingEnd(e.nodeID,t,e.handleID)},onLeave:()=>{r(!1),e.g.connectingEnd[0]().ref===t&&e.g.unsetTempConnectingEnd(t)},onUp:()=>{e.g.finConnecting(e.nodeID,e.handleID)}},t)}),(()=>{const o=el(),s=t;return typeof s=="function"?T(s,o):t=o,x(()=>F(o,`hrm-node-item hrm-handle-new hrm-pill ${e.handleID<0?"lhs":"rhs"} ${n()?"opacity-100":""}`)),o})()},tl=w('<div class="hrm-node-handle hrm-pill">'),nl=w('<div class="hrm-node abs-lt hrm-pill no-user-select"><div class="hrm-node-row no-user-select">'),rl=e=>{const[t,n]=v(!1),[r,o]=v(!1);console.log("[HrmNode] render");let s,i;j(()=>{if(!s)return;const c=s;e.nodeW[1](u=>({...u,ref:c,size:{w:c.offsetWidth,h:c.offsetHeight}}))}),Fe(()=>{s&&fe({capture:!0,onEnter:c=>{const u=e.g.connectingEdge[0]();u&&u.pointerID===c&&!u.isSource&&e.g.setTempConnectingEnd(e.id,s,void 0)},onLeave:()=>{e.g.connectingEnd[0]().ref===i&&e.g.unsetTempConnectingEnd(i)},onUp:c=>{e.g.connectingEdge[0]()&&e.g.addConnectingEnd(c.id,e.id,void 0,e.g.viewPos(c.x,c.y))},onClick:c=>{const u=c.modifiers.shift||c.modifiers.ctrl;c.dragged||(u||e.g.selectMode?e.g.selectOneNode(e.id,u):o(h=>!h))},onDrag:c=>{e.nodeW[0]().selected?e.g.translateSelectedNodes(c.dx,c.dy,e.g.transform[0]().z):e.g.translateOneNode(e.id,c.dx,c.dy,e.g.transform[0]().z)},onDoubleClick:()=>{e.g.editNode(e.id)},onLongPress:()=>{e.g.selectOneNodeWithMode(e.id)}},s)}),j(()=>{i&&fe({onEnter:()=>{n(!0)},onLeave:()=>{n(!1)},onDown:c=>{e.g.addConnectingEnd(c.id,e.id,void 0,e.g.viewPos(c.x,c.y))}},i)});const l=(c,u)=>d(ji,{get g(){return e.g},get nodeID(){return e.id},get node(){return e.nodeW[0]()},get handleID(){return u()},handleW:c}),a=(c,u)=>l(c,()=>u()+e.nodeW[0]().handles.lhs);return[(()=>{const c=nl(),u=c.firstChild,h=s;return typeof h=="function"?T(h,c):s=c,f(c,d(P,{get when(){return ts.has(e.nodeW[0]().data.type)},get children(){return d(jn,{get g(){return e.g},get nodeID(){return e.id},handleID:-1/0,get node(){return e.nodeW[0]()}})}}),u),f(u,d(X,{get each(){return e.nodeW[0]().handles.slice(0,e.nodeW[0]().handles.lhs)},children:l}),null),f(u,d(Zi,{get data(){return e.nodeW[0]().data}}),null),f(u,d(X,{get each(){return e.nodeW[0]().handles.slice(e.nodeW[0]().handles.lhs)},children:a}),null),f(c,d(P,{get when(){return ns.has(e.nodeW[0]().data.type)},get children(){return d(jn,{get g(){return e.g},get nodeID(){return e.id},handleID:1/0,get node(){return e.nodeW[0]()}})}}),null),f(c,d(P,{get when(){return!Oe.has(e.nodeW[0]().data.type)},get children(){const g=tl(),y=i;return typeof y=="function"?T(y,g):i=g,x(()=>g.classList.toggle("opacity-100",!!t())),g}}),null),x(g=>{const y=!!Oe.has(e.nodeW[0]().data.type),C=!!e.nodeW[0]().selected,V={left:`${e.nodeW[0]().position.x}px`,top:`${e.nodeW[0]().position.y}px`,...e.g.nodeColorBd(e.nodeW[0]().color)};return y!==g._v$&&c.classList.toggle("hrm-node-root",g._v$=y),C!==g._v$2&&c.classList.toggle("selected",g._v$2=C),g._v$3=We(c,V,g._v$3),g},{_v$:void 0,_v$2:void 0,_v$3:void 0}),c})(),d(P,{get when(){return r()},get children(){return d(Qi,{get nodeW(){return e.nodeW},get data(){return e.nodeW[0]().data},onClick:()=>o(!1)})}})]},ol=w('<svg><path class="hrm-edge-path hrm-edge-path-bd"stroke-width=4px fill=transparent></svg>',!1,!0),sl=w("<svg><path class=hrm-edge-path stroke-width=2px fill=transparent></svg>",!1,!0),il=w("<svg><path class=cursor-pointer stroke-width=1rem fill=transparent></svg>",!1,!0),ll=e=>{const[t,n]=v([]);let r;j(()=>{e.nodeW[0]();const s=e.handleW[0]();if(s.data.type!==S.Sink)return"";const i=s.data.sourceID,l=s.data.sourceHandle;if(i===void 0)return"";const a=e.g.viewRectOf(i,l),c=e.g.viewRect(s.ref);if(!a||!c)return"";n(e.nodeID===i?[Cn(a,c),Cn(a,c)]:[Rt(a,c,.5),Rt(a,c,-.5)])}),Fe(()=>{if(r)return fe({onDoubleClick:()=>{e.g.deleteEdge(e.nodeID,e.handleID)}},r)});const o=()=>{const s=e.handleW[0]().color;return s?e.g.nodeColorStroke(s):{}};return[(()=>{const s=ol();return x(()=>te(s,"d",t()[1])),s})(),(()=>{const s=sl();return x(i=>{const l=o(),a=t()[0];return i._v$=We(s,l,i._v$),a!==i._v$2&&te(s,"d",i._v$2=a),i},{_v$:void 0,_v$2:void 0}),s})(),(()=>{const s=il(),i=r;return typeof i=="function"?T(i,s):r=s,x(()=>te(s,"d",t()[0])),s})()]},al=e=>d(P,{get when(){return M(()=>e.handleW[0]().data.type===S.Sink)()&&e.handleW[0]().data.sourceID},get children(){return d(ll,e)}}),cl=e=>d(X,{get each(){return e.nodeW[0]().handles},children:(t,n)=>d(al,{get g(){return e.g},get nodeW(){return e.nodeW},handleW:t,get nodeID(){return e.id},get handleID(){return n()}})}),dl=w('<svg class="hrm-edges no-user-select no-pointer-events">'),ul=e=>[d(wn,{get each(){return[...e.g.nodes()]},children:t=>d(rl,{get g(){return e.g},get id(){return t()[0]},get nodeW(){return t()[1]}})}),(()=>{const t=dl();return f(t,d(wn,{get each(){return[...e.g.nodes()]},children:n=>d(cl,{get g(){return e.g},get id(){return n()[0]},get nodeW(){return n()[1]}})})),t})()];const hl=w('<svg class="hrm-edges no-user-select no-pointer-events"><path class="hrm-edge-path hrm-c-stroke-empty"stroke-width=2px fill=transparent>'),fl=w('<div class="hrm-editing-edge-handle no-pointer-events hrm-pill">'),gl=e=>{const t=()=>{const o=e.g.connectingEdge[0]();return o?e.g.viewRectOf(o.nodeID,o.handleID):void 0},n=()=>{const o=e.g.connectingEdge[0]();if(!o)return;const s=e.g.connectingEnd[0](),i=e.g.nodes().get(o.nodeID),l=e.g.viewRectOf(o.nodeID,o.handleID);if(!i||!l)return;const a=e.g.viewRect(s.ref);if(a)return Rt(l,a,0)},r=()=>{const o=t();if(o)return{visibility:"visible",left:`${o.x}px`,top:`${o.y}px`,width:`${o.w}px`,height:`${o.h}px`}};return[(()=>{const o=hl(),s=o.firstChild;return x(()=>te(s,"d",n())),o})(),(()=>{const o=fl();return x(s=>We(o,r(),s)),o})()]},ml=w('<div class="hrm-container abs-parent"tabindex=0>'),wl=e=>{let t;j(()=>{console.log("Update rootRef",t),e.state.rootRef=t});const n=()=>{e.state.rootRef&&(e.state.rootRef.scrollLeft!=0||e.state.rootRef.scrollTop!=0)&&e.state.rootRef.scrollTo(0,0)},r=s=>{if(s.target!==e.state.rootRef)return;const i=Uo(s);console.log(i),e.state.handleKey(i)},o=s=>{s.currentTarget.focus()};return(()=>{const s=ml();s.addEventListener("pointerenter",o),s.$$keydown=r,s.addEventListener("scroll",n);const i=t;return typeof i=="function"?T(i,s):t=s,f(s,d(Hi,{get g(){return e.state},onClick:()=>e.state.deselectAll(),onDoubleClick:l=>{const a=e.state.viewPos(l.x,l.y),c=e.state.addEmptyNode(a);e.state.editNode(c)},onLongPress:()=>{ft("[Hrm] Long press")},get children(){return[d(ul,{get g(){return e.state}}),d(gl,{get g(){return e.state}})]}})),s})()};Z(["keydown"]);const yl=(e,t,n)=>.299*e+.587*t+.114*n,Mt=(e,t,n)=>{n<0&&(n+=1),n>1&&(n-=1);let r;return n<1/2?(r=t,n<1/6&&(r=e+(t-e)*6*n)):(r=e,n<2/3&&(r=e+(t-e)*(2/3-n)*6)),Math.round(r*255)},pl=(e,t,n)=>{if(t===0)return[n,n,n];const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;return[Mt(o,r,e+1/3),Mt(o,r,e),Mt(o,r,e-1/3)]},Et=(e,t,n)=>`hsl(${e}, ${t*100}%, ${n*100}%)`,vl=(e,t)=>{if(e.type===$.Delta)return{...e,comment:t};const n=Ps(t);if(e.type===n.type)switch(n.type){case $.Beta:return{...n,args:e.args};case $.Pi:return{...n,pat:e.pat};case $.Lambda:return{...n,fallback:e.fallback,ret:e.ret}}return n},Fn=e=>v({name:e,data:{type:S.Source,color:Cr()}}),ce=(e,t)=>v({name:e,data:{type:S.Sink,sourceID:t?.id,sourceHandle:t?.handle}}),$l=e=>{let t=0,n;switch(e.x.type){case $.Alpha:n=[ce(Bn,e.x.pat)],t=1;break;case $.Beta:n=e.x.args.map((r,o)=>ce(String(o),r)),t=Vs(e.x.lhs,0,e.x.args.length);break;case $.Delta:n=[ce(Pn,e.x.val)],t=1;break;case $.Lambda:t=1+e.x.params.length,n=[ce(ri,e.x.fallback),...e.x.params.map(r=>Fn(r)),ce(Pn,e.x.ret)];break;case $.Pi:n=[ce(Bn,e.x.pat)];for(let r=0;r<e.x.elems;r++)n.push(Fn(String(r+1)));t=1;break}return n.lhs=t,n},He=e=>v({color:Cr(),data:e.x,handles:$l(e),position:e.pos,size:{w:0,h:0},selected:!1}),Xe=e=>{ti();const t=new Map;for(const n of e)t.set(n.id,He(n));return t},Wn=e=>{if(e.type===S.Sink&&e.sourceID)return{id:e.sourceID,handle:e.sourceHandle}},kl=e=>{const t=n=>Wn(e.handles[n][0]().data);switch(e.data.type){case $.Alpha:return{type:$.Alpha,val:e.data.val,pat:t(0)};case $.Beta:return{type:$.Beta,name:e.data.name,lhs:e.handles.lhs,args:e.handles.reduce((n,r)=>{const o=Wn(r[0]().data);return o&&n.push(o),n},[])};case $.Delta:return{type:$.Delta,comment:e.data.comment,val:t(0)};case $.Lambda:return{type:$.Lambda,fallback:t(0),params:e.handles.slice(1,-1).map(n=>n[0]().name),ret:t(e.handles.length-1)};case $.Pi:return{type:$.Pi,pat:t(0),name:e.data.name,elems:e.data.elems}}},Ze=(e,t)=>({id:e,pos:Yo(t.position),x:kl(t)}),Ut=e=>{const t=[];for(const[n,r]of e.entries())t.push(Ze(n,r[0]()));return t},Kn=e=>{switch(e.data.type){case $.Beta:for(let t=0;t<e.handles.length;t++)e.handles[t][1](n=>({...n,name:String(t)}));break;default:throw"Unimplemented"}},Dr=e=>{const t=Xe(e.nodes),n={type:$.Delta,val:e.val,comment:e.comment},r=He({id:"#def",pos:{...zt},x:n});return t.set("#def",r),t},bl=e=>{const t=Ut(e),n=t.filter(s=>s.x.type!==$.Delta),r=t.find(s=>s.x.type===$.Delta),o={type:"value",nodes:n,comment:""};if(r){for(const s of n)s.pos.x-=r.pos.x,s.pos.y-=r.pos.y;o.comment=r.x.comment,o.val=r.x.val}return o},xl=(e,t)=>{const[n,r]=v(t);let o=t,s;return[()=>(n(),o),a=>{typeof a=="function"?o=a(o):o=a,s===void 0&&(s=window.setTimeout(()=>{s=void 0,r(o)},e))}]};let Nr="";const Ir=navigator.clipboard!==void 0&&navigator.clipboard.readText!==void 0&&navigator.clipboard.writeText!==void 0,Cl=e=>{Ir?navigator.clipboard.writeText(e):Nr=e},_l=()=>Ir?navigator.clipboard.readText():Promise.resolve(Nr),Sl=()=>new Map([["C-a","selectAll"],["M-a","selectAll"],["Backspace","deleteSelectedNodes"],["Delete","deleteSelectedNodes"],["a","addEmptyNode"],["C-=","zoomIn"],["C--","zoomOut"]]);class Ar{path;name;nodes;setNodes;transform;rootRef;viewRef;selectedNodes;connectingEdge;connectingEnd;history;historyIndex;selectMode=!1;keymap=new Map;onEditNode;constructor(t,n,r){const[o,s]=v(r,{equals:!1});this.path=t,this.name=n,this.nodes=o,this.setNodes=s,this.selectedNodes=v(0),this.connectingEdge=v(),this.connectingEnd=v({pos:zt}),this.transform=xl(16,{x:0,y:0,z:1}),this.history=[Ut(this.nodes())],this.historyIndex=0,this.keymap=Sl()}thaw(t){this.setNodes(Xe(t)),this.history=[t],this.historyIndex=0}freeze(){return Ut(this.nodes())}getSL(){const t=getComputedStyle(document.documentElement),n=Number(t.getPropertyValue("--hrm-node-saturate")),r=Number(t.getPropertyValue("--hrm-node-lightness"));return[n,r]}nodeColorBg(t){const[n,r]=this.getSL(),o=yl(...pl(t,n,r))>192?"#000":"#fff",s=Et(t,n,r);return{color:o,"background-color":s,"border-color":s}}nodeColorBd(t){const[n,r]=this.getSL();return{"border-color":Et(t,n,r)}}nodeColorStroke(t){const[n,r]=this.getSL();return{stroke:Et(t,n,r)}}saveHistory(){this.historyIndex++,this.history.length>this.historyIndex&&(this.history=this.history.slice(0,this.historyIndex)),this.history.push(this.freeze())}undo(){this.historyIndex>0&&this.setNodes(Xe(this.history[--this.historyIndex]))}redo(){this.historyIndex<this.history.length-1&&this.setNodes(Xe(this.history[++this.historyIndex]))}size(){if(!this.rootRef)return;const t=this.rootRef.getBoundingClientRect();return{w:t.width,h:t.height}}centerPos(){const t=this.size();if(!t)return;const n=D(this.transform[0]);return{x:-n.x/n.z+t.w/2/n.z,y:-n.y/n.z+t.h/2/n.z}}viewPos(t,n){if(!this.viewRef)return;const r=this.viewRef.getBoundingClientRect(),o=D(this.transform[0]);return{x:(t-r.left)/o.z,y:(n-r.top)/o.z}}viewRect(t){if(!t||!this.viewRef)return;const n=this.viewRef.getBoundingClientRect(),r=t.getBoundingClientRect(),o=D(this.transform[0]);return{x:(r.left-n.left)/o.z,y:(r.top-n.top)/o.z,w:r.width/o.z,h:r.height/o.z}}usedRect(){const t={x:0,y:0,w:0,h:0},r=this.nodes().values().next().value;if(!r)return t;t.x=r[0]().position.x,t.y=r[0]().position.y;for(const[,o]of this.nodes()){const s=o[0](),i=s.position,l=s.size;t.x>i.x&&(t.w+=t.x-i.x,t.x=i.x),t.y>i.y&&(t.h+=t.y-i.y,t.y=i.y),t.w=Math.max(t.w,i.x+l.w-t.x),t.h=Math.max(t.h,i.y+l.h-t.y)}return t}viewRectOf(t,n){const r=this.nodes().get(t);if(!r)return;const o=r[0](),s=n===void 0?o.ref:o.handles[n][0]().ref;if(s)return this.viewRect(s)}addEmptyNode(t){t||(t=this.centerPos()??{x:0,y:0});const n=_n(),r=[],o=this.connectingEdge[0]();if(o)if(o.isSource)r.push({id:o.nodeID,handle:o.handleID});else{const l=this.nodes().get(o.nodeID);l&&l[0]().handles[o.handleID][1](c=>({...c,data:{type:S.Sink,sourceID:n}}))}this.connectingEdge[1](void 0);const s={type:$.Beta,name:{name:"<|",module:"_"},lhs:r.length,args:r},i={id:n,pos:t,x:s};return this.setNodes(l=>(l.set(i.id,He(i)),l)),this.saveHistory(),i.id}translateOneNode(t,n,r,o){const s=this.nodes().get(t);s&&s[1](i=>({...i,position:{x:i.position.x+n/o,y:i.position.y+r/o}}))}translateSelectedNodes(t,n,r){for(const[,o]of this.nodes())o[1](s=>s.selected?{...s,position:{x:s.position.x+t/r,y:s.position.y+n/r}}:s)}selectAll(){R(()=>{const t=this.nodes();for(const[,n]of t)n[1](r=>r.selected?r:{...r,selected:!0});this.selectedNodes[1](t.size)})}deselectAll(){R(()=>{for(const[,t]of this.nodes())t[1](n=>n.selected?{...n,selected:!1}:n);this.selectedNodes[1](0)})}selectOneNode(t,n){console.log(t),n||=this.selectMode,R(()=>{let r=!1;this.connectingEdge[1](void 0);for(const[o,s]of this.nodes())o===t?(r=!s[0]().selected,s[1](i=>({...i,selected:!i.selected}))):n||s[1](i=>i.selected?{...i,selected:!1}:i);this.selectedNodes[1](o=>n?r?o+1:o-1:r?1:0)})}selectOneNodeWithMode(t,n){this.selectOneNode(t,n)}deleteSelectedNodes(){this.setNodes(t=>{const n=new Set;for(const[r,o]of t){const s=o[0]();s.selected&&!Mn.has(s.data.type)&&n.add(r)}this.selectedNodes[1](r=>r-n.size);for(const[r,o]of t)if(n.has(r))t.delete(r);else{const i=o[0]().handles;for(const[,l]of i)l(a=>{if(a.data.type===S.Sink){const c=a.data.sourceID;if(c&&n.has(c))return{...a,data:{type:S.Sink}}}return a})}return t}),this.saveHistory()}deleteEdge(t,n){const r=this.nodes().get(t);r&&r[0]().handles[n][1](o=>o.data.type!==S.Sink?o:{...o,data:{type:S.Sink}})}resetConnectingState(){R(()=>{this.connectingEdge[1](void 0),this.connectingEnd[1]({pos:zt})})}setTempConnectingEnd(t,n,r){R(()=>{const o=this.connectingEdge[0]();o&&(o.nodeID!==t||o.handleID!==r)&&this.connectingEnd[1](s=>({...s,ref:n}))})}unsetTempConnectingEnd(t){R(()=>{this.connectingEdge[0]()&&this.connectingEnd[1](r=>r.ref===t?{...r,ref:void 0}:r)})}finConnecting(t,n){const r=this.connectingEdge[0]();r&&(r.nodeID!==t||r.handleID!==n)&&(r.isSource&&n!==void 0?this.connectEdge(t,n,r.nodeID,r.handleID):!r.isSource&&r.handleID!==void 0&&this.connectEdge(r.nodeID,r.handleID,t,n))}makeLeftHandle(t){const n=this.nodes().get(t);return n&&(n[1](r=>(r.handles.unshift(ce("")),r.handles.lhs++,{...r})),Kn(n[0]())),0}makeRightHandle(t){const n=this.nodes().get(t);if(!n)return 0;const r=n[0](),o=r.handles.length;return n[1](s=>(s.handles.push(ce("")),{...s})),Kn(r),o}connectEdge(t,n,r,o){R(()=>{n===-1/0&&(n=this.makeLeftHandle(t)),n===1/0&&(n=this.makeRightHandle(t));const s=this.nodes(),i=s.get(t),l=s.get(r);if(!i||!l)return;if(o===void 0){if(Oe.has(l[0]().data.type))return}else{const c=l[0]().handles[o];if(!c||c[0]().data.type!==S.Source)return}i[0]().handles[n][1](c=>c.data.type!==S.Sink?c:{...c,data:{type:S.Sink,sourceID:r,sourceHandle:o}}),this.resetConnectingState(),this.saveHistory()})}updateConnectingEnd(t){this.connectingEnd[1](n=>({...n,pos:t}))}addConnectingEnd(t,n,r,o){this.deselectAll();const s=this.nodes().get(n);if(!s)return;const[i]=s;let l=!0;if(r!==void 0){const c=i().handles[r];if(!c)return;l=c[0]().data.type===S.Source}const a=this.connectingEdge[0]();if(a&&a.nodeID===n&&a.handleID===r){this.resetConnectingState();return}if(a&&!l===a.isSource)return l?this.connectEdge(a.nodeID,a.handleID,n,r):this.connectEdge(n,r,a.nodeID,a.handleID);R(()=>{this.connectingEdge[1]({pointerID:t,isSource:l,nodeID:n,handleID:r}),o&&this.connectingEnd[1](c=>({...c,pos:o}))})}isValidHandle(t,n){if(n.data.type!==S.Sink||!n.data.sourceID)return!0;const r=t.get(n.data.sourceID);if(!r)return!1;const o=r[0](),s=n.data.sourceHandle;if(Oe.has(o.data.type)||s===void 0)return!0;const i=o.handles;return 0<=s&&i.length?i[s][0]().data.type===S.Source:!1}editNode(t){setTimeout(()=>{this.onEditNode?.(t)},30)}getNodeStringData(t){const n=this.nodes().get(t);return n?As(Ze(t,n[0]()).x):""}applyEditNode(t,n){R(()=>{const r=this.nodes().get(t);if(!r)return;const o=r[0](),s=o.color,i=Ze(t,r[0]()),l={...i,x:vl(i.x,n)},a=He(l);a[1](u=>({...u,color:s}));const c=a[0]().handles;for(const[,u]of this.nodes())for(const[,h]of u[0]().handles.entries()){const g=h[0]();g.data.type===S.Sink&&g.data.sourceID===t&&(g.data.sourceHandle===void 0&&Oe.has(o.data.type)||g.data.sourceHandle!==void 0&&(g.data.sourceHandle>=c.length||c[g.data.sourceHandle][0]().data.type!==S.Source))&&h[1](y=>({...y,data:{type:S.Sink}}))}this.setNodes(u=>(u.set(t,a),u))})}cutSelectedNodes(){this.copySelectedNodes(),this.deleteSelectedNodes()}copySelectedNodes(){const t=this.nodes(),n=[];for(const[o,s]of t)s[0]().selected&&n.push(Ze(o,s[0]()));const r=JSON.stringify(n);Cl(r)}async pasteNodes(){const t=this.centerPos()??{x:0,y:0},n=await _l();let r=JSON.parse(n);const o=new Map;try{const s={x:0,y:0};r=r.filter(i=>!Mn.has(i.x.type));for(const i of r)s.x+=i.pos.x,s.y+=i.pos.y;s.x/=r.length,s.y/=r.length;for(const i of r){const l=_n();o.set(i.id,l),i.id=l,i.pos.x+=t.x-s.x,i.pos.y+=t.y-s.y}}catch{J("Clipboard contents are invalid.");return}R(()=>{this.setNodes(s=>{for(const i of r){const l=He(i);for(const[,a]of l[0]().handles)a(c=>c.data.type!==S.Sink||c.data.sourceID===void 0?c:o.has(c.data.sourceID)?(console.log("rename",c.data.sourceID,o.get(c.data.sourceID)),{...c,data:{...c.data,sourceID:o.get(c.data.sourceID)}}):this.isValidHandle(s,c)?c:{...c,data:{type:S.Sink}});s.set(i.id,l)}return s})})}handleKey(t){const n=this.keymap.get(t);n&&n in this&&this[n]()}zoomIn(){this.transform[1](t=>({...t,z:t.z*1.1}))}zoomOut(){this.transform[1](t=>({...t,z:t.z/1.1}))}zoomAll(){const t=this.usedRect(),n=this.size();if(!t||!n)return;t.w=Math.max(t.w,1),t.h=Math.max(t.h,1);const r=n.w/t.w,o=n.h/t.h,s=Math.min(r,o,8),i=-t.x*s+(n.w-t.w*s)/2,l=-t.y*s+(n.h-t.h*s)/2;this.transform[1]({x:i,y:l,z:s})}resetZoom(){this.transform[1](()=>({x:0,y:0,z:1}))}}const Ml=w('<div class="editor-root-hrm abs-parent">'),El=e=>(()=>{const t=Ml();return f(t,d(wl,{get state(){return e.state}})),t})(),Dl=w("<div class=dropdown><button></button><div>"),Nl=w("<hr>"),dn=e=>{const[t,n]=v(!1);return(()=>{const r=Dl(),o=r.firstChild,s=o.nextSibling;return o.$$click=()=>{n(i=>!i)},f(o,()=>e.children),s.$$click=()=>{n(!1)},f(s,d(X,{get each(){return e.list},children:(i,l)=>[d(P,{get when(){return l()>0},get children(){return Nl()}}),d(X,{each:i,children:a=>a})]})),x(i=>{const l=`btn btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`,a=`dropdown-menu ${t()?"visible":"hidden"}`;return l!==i._v$&&F(o,i._v$=l),a!==i._v$2&&F(s,i._v$2=a),i},{_v$:void 0,_v$2:void 0}),r})()};Z(["click"]);const Il=w("<div class=m-modal-handle>"),Al=w("<div tabindex=0><div class=m-modal-content>");let se=function(e){return e[e.Center=0]="Center",e[e.Bottom=1]="Bottom",e}({});const Pl={[se.Center]:"m-modal-center",[se.Bottom]:"m-modal-bottom"},Ue=e=>{let t;const n=o=>{e.onClose&&o.target===o.currentTarget&&e.onClose()},r=o=>{e.onClose&&o.key==="Escape"&&e.onClose()};return Fe(()=>{t?.focus(),setTimeout(()=>{t?.classList.add("show")},100)}),(()=>{const o=Al(),s=o.firstChild;o.$$keydown=r,o.$$click=n;const i=t;return typeof i=="function"?T(i,o):t=o,f(s,d(P,{get when(){return e.position===se.Bottom},get children(){return Il()}}),null),f(s,()=>e.children,null),x(l=>{const a=`m-modal ${Pl[e.position??se.Center]} ${e.transition?"transition":""}`,c=!!e.transition,u=!!e.fullHeight;return a!==l._v$&&F(o,l._v$=a),c!==l._v$2&&s.classList.toggle("transition",l._v$2=c),u!==l._v$3&&s.classList.toggle("h-100",l._v$3=u),l},{_v$:void 0,_v$2:void 0,_v$3:void 0}),o})()};Z(["click","keydown"]);const Dt=w("<h3> <!> "),Bl=e=>d(Ue,{get position(){return se.Bottom},transition:!0,get onClose(){return e.onClose},get children(){return[(()=>{const t=Dt(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.layout"),r),t})(),d(k,{get color(){return p.primary},get children(){return m("graphTools.tool.layoutDefault")}}),d(k,{get color(){return p.secondary},get children(){return m("graphTools.tool.layoutLinear")}}),(()=>{const t=Dt(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.optimization"),r),t})(),d(k,{get color(){return p.warning},get children(){return m("graphTools.tool.selectUnreachables")}}),(()=>{const t=Dt(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.validate"),r),t})(),d(k,{get color(){return p.danger},get children(){return m("graphTools.tool.validateGraph")}})]}});var _=(e=>(e[e.NotFound=0]="NotFound",e[e.File=1]="File",e[e.Directory=2]="Directory",e))(_||{});const Un={0:"NotFound",1:"File",2:"Directory"},Tl={type:0,path:"",size:0,lastModified:new Date};class Ll extends Error{constructor(t,n,r){super(`Storage item type mismatch: ${t}, (${n.map(o=>Un[o]).join(", ")}) !== ${Un[r]}`)}}const ve=(e,t,n)=>{if(!t.includes(n))throw new Ll(e,t,n)},Ol="kitl-idbfs",zl=1,Vt="meta",Yt="data",Vn={path:"",type:_.NotFound,size:0,lastModified:0},Hl=["get","getAll","put","delete","clear"],Yn=(e,t)=>Object.fromEntries(Hl.map(n=>[n,(...r)=>new Promise((o,s)=>{const i=e.objectStore(t)[n](...r);i.onsuccess=()=>o(i.result),i.onerror=()=>s(i.error)})])),ne=e=>{const[t,n]=rn(e);if(!zs(n))throw new Error("Path must be absolute");return[t,n]},Rl=e=>{if(!e.readwrite)throw new Error("Failed to process: IDBFS is created as readonly mode.")},Ie=async(e,t)=>{const[n]=ne(t);try{const r=await e.meta.get(n);return r===void 0?Vn:r}catch{return Vn}},pe=async(e,t,n,r)=>{console.log("rawWrite",n,t,r.byteLength),await e.meta.put({path:n,type:t,size:r.byteLength,lastModified:Date.now()}),await e.data.put({path:n,data:r})},un=async e=>{await e.meta.clear(),await e.data.clear(),await pe(e,_.Directory,"/",Se(""))},mt=async(e,t)=>{try{return(await Ie(e,t)).type}catch{return _.NotFound}},jl=async(e,t)=>{Rl(e);const[,n]=ne(t);let r=n.length;for(;r>=1;--r){const i=ze(n.slice(0,r)),l=await mt(e,i);if(l===_.Directory)break;ve(i,[_.NotFound],l)}const o=ze(n.slice(0,r)),s=await wt(e,o);for(s.push(n[r]),await pe(e,_.Directory,o,Se(s.join(`
`))),++r;r<=n.length;++r){const i=ze(n.slice(0,r)),l=r<n.length?Se(n[r]):new Uint8Array(0);await pe(e,_.Directory,i,l)}},wt=async(e,t)=>{const[n]=ne(t),r=await Ie(e,n);ve(n,[_.Directory],r.type);const o=await e.data.get(n);return Ws(o.data).split(`
`).map(s=>s.trim()).filter(s=>s.length>0)},Fl=async(e,t)=>{const n=await wt(e,t),r=[];for(const o of n){const[s]=rn(`${t}/${o}`),i=await Ie(e,s);r.push({...i,lastModified:new Date(i.lastModified)})}return r},Pr=async(e,t,n)=>{const[r]=ne(t),o=await Ie(e,r);ve(r,[_.Directory],o.type);const s=new Set(await wt(e,r));s.add(n),await pe(e,_.Directory,r,Se(Array.from(s).join(`
`)))},Nt=async(e,t,n)=>{const[r,o]=ne(t),s=await mt(e,t);return ve(t,[_.File,_.NotFound],s),s===_.NotFound&&await Pr(e,t+"/..",o[o.length-1]),await pe(e,_.File,r,n),await Ie(e,t)},It=async(e,t)=>{const[n]=ne(t),r=await mt(e,n);return ve(n,[_.File],r),(await e.data.get(n)).data},Br=async(e,t)=>{const[n]=ne(t),r=n+"/";return(await e.meta.getAll()).map(s=>s.path).filter(s=>s===t||s.startsWith(r))},Tr=async(e,t)=>{const[n,r]=ne(t);if(n.length<=1)return await un(e);const o=ze(r.slice(0,r.length-1)),s=await e.meta.get(o);ve(n,[_.Directory],s.type),(await Br(e,n)).forEach(l=>{e.meta.delete(l),e.data.delete(l)});const i=await wt(e,o);await pe(e,_.Directory,o,Se(i.filter(l=>l!==r[r.length-1]).join(`
`)))},Lr=async(e,t,n)=>{const[r]=ne(t),[o]=ne(n);if(o===r||o.startsWith(r+"/"))throw new Error("Cannot copy to a subdirectory");const s=(await Br(e,r)).map(i=>i.slice(r.length));for(const i of s){const l=r+i,a=o+i,c=await e.meta.get(l),u=await e.data.get(l);await pe(e,c.type,a,u.data)}n!=="/"&&await Pr(e,o+"/..",o.split("/").pop())},Wl=async(e,t,n)=>{await Lr(e,t,n),await Tr(e,t)},Kl=()=>new Promise((e,t)=>{const n=indexedDB.open(Ol,zl);n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error),n.onupgradeneeded=r=>{const o=n.result,s=i=>o.createObjectStore(i,{keyPath:"path"});r.oldVersion===0?(s(Vt),s(Yt),e(o)):t(n.error)}}),Y=async e=>{const t=await(await Kl()).transaction([Vt,Yt],e?"readwrite":"readonly");return{readwrite:!!e,meta:Yn(t,Vt),data:Yn(t,Yt)}},Or=async()=>{const e=await Y(!0);try{const t=await mt(e,"/");ve("/",[_.Directory],t)}catch{console.warn("IDBFS is broken. Format it."),await un(e)}};Or();const At=e=>({...e,lastModified:new Date(e.lastModified)});class Ul{constructor(){Or()}ping(){return 1}execute(t){return""}getExecutionState(t){return{}}async format(){const t=await Y(!0);return await un(t)}async stat(t){const n=await Y(!1);return At(await Ie(n,t))}async mkdir(t){const n=await Y(!0);await jl(n,t)}async list(t){const n=await Y(!1);return await Fl(n,t)}async read(t){const n=await Y(!1);return await It(n,t)}async write(t,n){const r=await Y(!0);return At(await Nt(r,t,n))}async remove(t){const n=await Y(!0);await Tr(n,t)}async move(t,n){const r=await Y(!0);await Wl(r,t,n)}async copy(t,n){const r=await Y(!0);await Lr(r,t,n)}async readJson(t,n){const r=await Y(!1),o=await It(r,t);let i=JSON.parse(new TextDecoder().decode(o));for(const l of n)i=i[l];return i}async writeJson(t,n,r){let o;const s=await Y(!0),i=n.length;if(i===0)o=await Nt(s,t,new TextEncoder().encode(JSON.stringify(r)));else{const l=await It(s,t),a=JSON.parse(new TextDecoder().decode(l));let c=a;for(let u=0;u<i-1;u++)c=c[n[u]];c[n[i-1]]=r,o=await Nt(s,t,new TextEncoder().encode(JSON.stringify(a)))}return At(o)}}class Vl{local;clients;constructor(){this.local=new Ul,this.clients=new Map,this.addClient("local",this.local)}async addClient(t,n){this.clients.set(t,n),(await n.stat("/.kitl")).type!==_.Directory&&(await n.remove("/.kitl"),await n.mkdir("/.kitl")),(await n.stat("/.kitl/scratch.kitl")).type!==_.File&&(await n.remove("/.kitl/scratch.kitl"),await n.write("/.kitl/scratch.kitl",Se(JSON.stringify(pr({})))))}parsePath(t){const[n,r]=on(t);return[this.clients.get(n),r]}async stat(t){const[n,r]=this.parsePath(t);return await n.stat(r)}async list(t){const[n,r]=this.parsePath(t);return await n.list(r)}async mkdir(t){const[n,r]=this.parsePath(t);return await n.mkdir(r)}async read(t){const[n,r]=this.parsePath(t);return await n.read(r)}async write(t,n){const[r,o]=this.parsePath(t);return await r.write(o,n)}async remove(t){const[n,r]=this.parsePath(t);return await n.remove(r)}async copy(t,n){const[r,o]=this.parsePath(t),[s,i]=this.parsePath(n);if(r===s)return await r.copy(o,i);switch((await r.stat(o)).type){case _.Directory:{await s.mkdir(i);const a=await r.list(o);for(const c of a){const u=kr(c.path);await this.copy(`${t}/${u}`,`${n}/${u}`)}}break;default:{const a=await r.read(o);await s.write(i,a)}}}async move(t,n){const[r,o]=this.parsePath(t),[s,i]=this.parsePath(n);if(r===s)return await r.move(o,i);this.copy(t,n),await r.remove(o)}async readJson(t,n){const[r,o]=this.parsePath(t);return await r.readJson(o,n)}async writeJson(t,n,r){const[o,s]=this.parsePath(t);return await o.writeJson(s,n,r)}}const z=new Vl,Yl=1024*128,zr=()=>({items:[],isCutted:!1}),Gl=e=>({path:v(e),storageItem:v(),data:v(),ls:v(),copyState:v(zr()),uploads:v(new Set,{equals:!1})}),ql=e=>{confirm(m("fileBrowser.prompt.resetLocal"))&&(z.local.format(),Ae(e,"local:/"))},Hr=async e=>{const t=e.path[0],n=await z.stat(t());e.storageItem[1](n)},Gt=async e=>{const t=e.path[0];if(e.storageItem[0]()?.type===_.Directory){const o=await z.list(t());o.sort((s,i)=>s.type===i.type?s.path.localeCompare(i.path):s.type===_.Directory?-1:1),R(()=>{e.ls[1](o),e.data[1](new Uint8Array)});return}const r=await z.read(t());R(()=>{e.data[1](r),e.ls[1]([])})},Ae=(e,t)=>{const[n,r]=$r(t);t=`${n}:${r}`,R(()=>{e.path[1](t),e.storageItem[1](void 0),e.data[1](void 0),e.ls[1](void 0)}),Hr(e).catch(()=>{console.warn("Failed to load meta ",t),e.storageItem[1](Tl)})},Jl=e=>{const t=e.path[0]();Ae(e,t+"/..")},$e=e=>{const t=e.path[0]();Ae(e,t)},Xl=e=>{const t=e.storageItem[0]();return t&&t.size>Yl},Zl=async(e,t)=>{const n=e.path[0];await z.mkdir(n()+"/"+t)},Ql=async(e,t)=>{const n=e.path[0];await z.write(n()+"/"+t,new Uint8Array)},yt=(e,t)=>{t=t??"new";const n=e.ls[0]();if(n===void 0)return t;const r=new Set(n.map(i=>nn(i.path).pop()));let o=t,s=0;for(;r.has(o);)o=Rs(t,s++);return o},ea=(e,t,n)=>{e.uploads[1](o=>o.add(t));const r=new FileReader;r.onload=()=>{z.write(t,new Uint8Array(r.result)).then(()=>{e.uploads[1](o=>(o.delete(t),Ae(e,e.path[0]()),q(`${m("fileBrowser.toast.uploadSuccess")}: ${t}`),o))}).catch(()=>{e.uploads[1](o=>(o.delete(t),o)),J(`${m("fileBrowser.toast.uploadError")}: ${t}`)})},r.onerror=()=>{e.uploads[1](o=>(o.delete(t),o)),alert(`${m("fileBrowser.toast.uploadReadError")}: ${t}`)},r.readAsArrayBuffer(n)},ta=(e,t,n)=>{e.ls[1](r=>r&&r.map(o=>(o.path===t&&(o.selected=n),o)))},at=e=>{const t=e.path[0]().split(":")[0],n=e.ls[0]();return n?n.filter(r=>r.selected).map(r=>`${t}:${r.path}`):[]};class pt extends Error{constructor(){super("Nothing selected")}}const Rr=(e,t)=>{if(at(e).length===0)throw new pt;e.copyState[1]({items:at(e),isCutted:t})},na=async e=>{const t=e.path[0];if(!e.storageItem[0]())return;const r=t(),o=new Set((e.ls[0]()??[]).map(i=>i.path.split("/").pop())),s=e.copyState[0]();for(const i of s.items){let l=i.split("/").pop();o.has(l)&&!confirm(m("fileBrowser.prompt.pasteOverwrite"))&&(l=yt(e,l));const a=r+"/"+l;console.log("Paste",i,a),await z[s.isCutted?"move":"copy"](i,a)}s.isCutted&&e.copyState[1](zr())},ra=async e=>{if(confirm(m("fileBrowser.prompt.deleteSelected")))for(const t of at(e))await z.remove(t)},oa=async(e,t)=>{await z.move(e,e+"/../"+t)},sa=async e=>{const t=at(e);if(t.length<1)throw new pt;for(const n of t){const r=n.split("/").pop();if(!r)return;const o=`${m("fileBrowser.prompt.renameSelected")}:
${n}`,s=prompt(o,r);if(!s)return;await oa(n,s)}$e(e)},jr=async(e,t)=>{const n=e.path[0](),r=e.storageItem[0]();if(!r)return;const o=await z.stat(n);o&&((r.lastModified<o.lastModified||r.size!==o.size)&&!confirm(m("fileBrowser.prompt.saveConflict"))||(await z.write(n,new TextEncoder().encode(t)),e.storageItem[1](await z.stat(n)),q(m("toast.saveSuccess"))))},Gn=w("<a>&nbsp; "),ia=e=>{const t=()=>[[(()=>{const o=Gn(),s=o.firstChild;return o.$$click=()=>$e(e.state),f(o,d(ki,{}),s),f(o,()=>m("menu.refresh"),null),o})()],[(()=>{const o=Gn(),s=o.firstChild;return o.$$click=()=>ql(e.state),f(o,d(_i,{}),s),f(o,()=>m("fileBrowser.menu.formatLocalStorage"),null),o})()]];let n;const r=()=>{Ae(e.state,n.value)};return d(U,{class:"sticky-top shadow-1 mb-2",get children(){return[d(dn,{get color(){return p.primary},get list(){return t()},get children(){return d(Er,{})}}),d(k,{get color(){return p.secondary},onClick:()=>Jl(e.state),get children(){return d(yi,{})}}),d(ge,{ref(o){const s=n;typeof s=="function"?s(o):n=o},class:"flex-1",get value(){return e.state.path[0]()},onBlur:r,onKeyDown:o=>{o.key==="Enter"&&n.blur()}}),d(k,{get color(){return p.danger},get onClick(){return e.state.onClose},get children(){return d(Mi,{})}})]}})};Z(["click"]);const la=w("<input type=file class=d-none>"),aa=e=>{let t,n;const r=i=>{n=i,typeof e.ref=="function"&&e.ref(i)},o=i=>{e.onFiles&&e.onFiles(i.target.files),t.value=n.value};return d(U,{get class(){return e.class},onDrop:i=>{i.preventDefault(),i.stopPropagation(),e.onFiles&&e.onFiles(i.dataTransfer.files)},get children(){return[d(ge,{class:"flex-1",ref(i){const l=t;typeof l=="function"?l(i):t=i},get placeholder(){return e.placeholder},onClick:()=>{n?.click()}}),(()=>{const i=la();return i.addEventListener("change",o),T(r,i),i})(),d(k,{get color(){return p.primary},onClick:()=>{n?.click()},children:"..."})]}})},Be=w("<a>&nbsp; "),ca=w("<tr><td></td><td class=word-break-all><a>&nbsp;</a></td><td class=text-right><br>"),da=w("<table class=w-100><thead><tr><th></th><th></th><th class=text-right><br> </th></tr></thead><tbody>"),ua=w("<div>"),qe=e=>()=>{try{Rr(e,!1),q(m("toast.copySuccess"))}catch(t){if(!(t instanceof pt))throw t;J(m("fileBrowser.toast.nothingSelected"))}},qn=e=>()=>{try{Rr(e,!0),q(m("toast.cutSuccess")),$e(e)}catch(t){if(!(t instanceof pt))throw t;J(m("fileBrowser.toast.nothingSelected"))}},ha=e=>async()=>{try{await na(e),q(m("toast.pasteSuccess"))}catch(t){J(m("fileBrowser.toast.pasteError")),console.warn("Failed to paste files",t);return}$e(e)},fa=e=>async()=>{try{await ra(e),q(m("toast.deleteSuccess"))}catch{J(m("fileBrowser.toast.deleteError"))}$e(e)},ga=e=>async()=>{try{await Ql(e,yt(e)),q(m("fileBrowser.toast.newFileSuccess"))}catch(t){J(m("fileBrowser.toast.newFileError")),console.warn("Failed to create new file",t)}$e(e)},ma=e=>async()=>{try{await Zl(e,yt(e)),q(m("fileBrowser.toast.newFolderSuccess"))}catch(t){J(m("fileBrowser.toast.newFolderError")),console.warn("Failed to create new file",t)}$e(e)},wa=e=>async t=>{for(const n of t){if(n===void 0)return;const r=yt(e,n.name),o=`${e.path[0]()}/${r}`;ea(e,o,n),Qs(m("fileBrowser.toast.uploadingFiles"))}},ya=e=>d(U,{class:"my-1",get children(){return[d(dn,{get color(){return p.primary},get list(){return[[(()=>{const t=Be(),n=t.firstChild;return t.$$click=()=>sa(e.state),f(t,d(an,{}),n),f(t,()=>m("fileBrowser.menu.rename"),null),t})()],[(()=>{const t=Be(),n=t.firstChild;return t.$$click=()=>qe(e.state),f(t,d(Kt,{}),n),f(t,()=>m("menu.copy"),null),t})(),(()=>{const t=Be(),n=t.firstChild;return t.$$click=()=>qn(e.state),f(t,d(Tn,{}),n),f(t,()=>m("menu.cut"),null),t})(),(()=>{const t=Be(),n=t.firstChild;return t.$$click=()=>qe(e.state),f(t,d(Wt,{}),n),f(t,()=>m("menu.paste"),null),t})()],[(()=>{const t=Be(),n=t.firstChild;return t.$$click=()=>qe(e.state),f(t,d(lt,{}),n),f(t,()=>m("menu.delete"),null),t})()]]},get children(){return d(Er,{})}}),d(k,{get color(){return p.secondary},get onClick(){return ha(e.state)},class:"flex-1",get children(){return d(Wt,{})}}),d(k,{get color(){return p.secondary},get onClick(){return qe(e.state)},class:"flex-1",get children(){return d(Kt,{})}}),d(k,{get color(){return p.warning},get onClick(){return qn(e.state)},class:"flex-1",get children(){return d(Tn,{})}}),d(k,{get color(){return p.danger},get onClick(){return fa(e.state)},class:"flex-1",get children(){return d(lt,{})}})]}}),pa=e=>[d(U,{class:"my-1",get children(){return[d(k,{get color(){return p.primary},get onClick(){return ma(e.state)},class:"flex-1",get children(){return[d(wi,{}),"  ",M(()=>m("fileBrowser.folder"))]}}),d(k,{get color(){return p.secondary},get onClick(){return ga(e.state)},class:"flex-1",get children(){return[d(gi,{}),"  ",M(()=>m("fileBrowser.file"))]}})]}}),d(aa,{get placeholder(){return m("fileBrowser.uploadPlaceholder")},get onFiles(){return wa(e.state)}})],va=e=>{const t=()=>{const r=nn(e.meta.path);return r[r.length-1]},n=()=>{switch(e.meta.type){case _.Directory:return d(pi,{});case _.File:return d(mi,{});default:return d($i,{})}};return(()=>{const r=ca(),o=r.firstChild,s=o.nextSibling,i=s.firstChild,l=i.firstChild,a=s.nextSibling,c=a.firstChild;return f(o,d(jo,{onChange:u=>{ta(e.state,e.meta.path,u)}})),i.$$click=()=>{Ae(e.state,`${e.host}:${e.meta.path}`)},f(i,n,l),f(i,t,null),f(a,()=>Ys(e.meta.size),c),f(a,()=>Gs(e.meta.lastModified),null),r})()},$a=e=>{const t=()=>{const[r]=on(e.state.path[0]());return r},n=()=>{const r=e.state.ls[0]();return r===void 0||r.length===0};return j(()=>{Gt(e.state)}),[d(ya,e),d(P,{get when(){return!n()},get fallback(){return(()=>{const r=ua();return f(r,()=>m("fileBrowser.directory.empty")),r})()},get children(){const r=da(),o=r.firstChild,s=o.firstChild,i=s.firstChild,l=i.nextSibling,a=l.nextSibling,c=a.firstChild;c.nextSibling;const u=o.nextSibling;return f(l,()=>m("fileBrowser.name")),f(a,()=>m("fileBrowser.size"),c),f(a,()=>m("fileBrowser.modified"),null),f(u,d(X,{get each(){return e.state.ls[0]()},children:h=>d(va,{get state(){return e.state},get host(){return t()},meta:h})})),r}}),d(pa,{get state(){return e.state}})]};Z(["click"]);const ka=w('<div class="m-2 text-center em-2">'),Fr=e=>(()=>{const t=ka();return f(t,d(ur,{}),null),f(t,()=>e.children,null),t})(),ba=w("<img class=browser-image>"),xa=e=>{const[t,n]=v("");j(()=>{const o=e.state.data[0]();o!==void 0&&Ks(o).then(n)});const r=()=>e.state.data[0]()===void 0?"":`data:image;base64,${t()}`;return(()=>{const o=ba();return x(()=>te(o,"src",r())),o})()},Ca=w("<div class=code-area><textarea disabled></textarea><textarea>"),hn=(e,t)=>e.lastIndexOf(`
`,t)+1,fn=(e,t,n,r)=>e.slice(0,t)+r+e.slice(n),_a=(e,t,n)=>{const r=hn(e,t),o=e.slice(r,n).split(`
`);return[fn(e,r,n,"  "+o.join(`
  `)),t+2,n+2*o.length]},Sa=(e,t,n)=>{const r=hn(e,t);let o=t,s=n;const i=e.slice(r,n).split(`
`).map((l,a)=>{const c=l.startsWith("  ")?2:l.startsWith("	")?1:0;return a===0&&(o-=c),s-=c,l.slice(c)});return[fn(e,r,n,i.join(`
`)),o,s]},gn=e=>{let t,n;const r=l=>{t=l,typeof e.ref=="function"&&e.ref(l)},o=l=>{!e.autoresize||!n||(n.value=l.value,n.style.width=`${l.clientWidth}px`,l.style.height=n.scrollHeight+"px")};Fe(()=>{e.autoresize&&o(t),e.autofocus&&setTimeout(()=>{t?.focus()})});const s=l=>{if(e.onKeyDown&&e.onKeyDown(l))return;const a=l.currentTarget;switch(l.key){case"Tab":{l.preventDefault();const c=(l.shiftKey?Sa:_a)(a.value,a.selectionStart,a.selectionEnd);a.value=c[0],a.selectionStart=c[1],a.selectionEnd=c[2]}break;case"Enter":{l.preventDefault();const c=l.currentTarget,u=c.selectionStart,h=c.value,g=/[ \t]*/y;g.lastIndex=hn(h,u-1);const y=g.exec(h)?.[0]??"";c.value=fn(h,u,c.selectionEnd,`
`+y),c.selectionStart=c.selectionEnd=u+1+y.length}break}o(l.target)},i=l=>{o(l.currentTarget)};return(()=>{const l=Ca(),a=l.firstChild,c=a.nextSibling,u=n;return typeof u=="function"?T(u,a):n=a,c.$$keydown=s,ee(c,"input",e.onInput,!0),ee(c,"change",e.onChange),c.addEventListener("focus",i),T(r,c),x(h=>{const g=`form-control abs-lt ${e.class} code-area-hidden no-pointer-events no-user-select`,y=e.autofocus,C=e.disabled,V=`form-control ${e.class}`,re=e.placeholder;return g!==h._v$&&F(a,h._v$=g),y!==h._v$2&&(c.autofocus=h._v$2=y),C!==h._v$3&&(c.disabled=h._v$3=C),V!==h._v$4&&F(c,h._v$4=V),re!==h._v$5&&te(c,"placeholder",h._v$5=re),h},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),x(()=>c.value=e.value),l})()};Z(["input","keydown"]);const Ma=e=>{const[t,n]=v(!1),r=()=>n(!0),o=()=>{t()&&(jr(e.state,s.value),n(!1))};let s;const i=()=>{const a=e.state.data[0]();return a?new TextDecoder("utf-8").decode(a):"<NOT LOADED>"};return[d(()=>d(U,{class:"my-1",get children(){return d(k,{get color(){return t()?p.primary:p.secondary},onClick:o,get disabled(){return!t()},class:"flex-1",get children(){return[d(Si,{})," ",M(()=>m("menu.save"))]}})}}),{}),d(gn,{ref(a){const c=s;typeof c=="function"?c(a):s=a},autoresize:!0,get value(){return i()},onChange:r,onInput:r})]},Ea=w("<div>"),je=e=>(()=>{const t=Ea();return f(t,()=>e.children),x(()=>F(t,`form-control btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`)),t})();function Wr(e){const t=e.buttons.findIndex(s=>s.value===e.initialValue),[n,r]=v(t),o=s=>{r(s),e.onChange?.(e.buttons[s].value)};return d(U,{get class(){return e.class},get children(){return d(X,{get each(){return e.buttons},children:(s,i)=>d(k,{get color(){return s.color},get outline(){return n()!==i()},get class(){return s.class},onClick:()=>o(i()),get children(){return s.label}})})}})}const Da=w("<hr>"),Na=w("<div>"),Me={value:p.primary,tag:p.success,type:p.warning,alias:p.secondary},Ve=(e,t)=>n=>({...n,defs:{...n.defs,[e]:t}}),Jn=e=>t=>{const n={...t.defs};return delete n[e],{...t,defs:n}},Ee=(e,t)=>R(()=>{t.forEach(n=>e.root[1](n)),e.modified[1](!0)}),Kr=(e,t)=>{if(t=mr(t),!t)throw J(m("fileBrowser.toast.invalidDefCreationName")),new Error("Invalid name");if(e.root[0]().defs[t])throw J(m("fileBrowser.toast.defAlreadyExists")),new Error("Already exists");return t},Ia=e=>{let t="",n=pr({});const r=e.data[0]();if(r!==void 0&&r.byteLength!==0)try{const c=JSON.parse(new TextDecoder("utf-8").decode(r));n=Os(c)}catch{J(m("fileBrowser.toast.invalidKitl")),t=m("fileBrowser.toast.invalidKitl")}const[o,s]=v(!1),[i,l]=v(n),a=c=>(s(!0),l(c));return{modified:[o,s],errorMessage:v(t),root:[i,a]}},vt=e=>{const[t,n]=v(!1);let r;const[o,s]=v(!1),i=()=>Ee(e.contents,[Jn(e.name)]),l=()=>{const a=Kr(e.contents,r?.value??"");a!==e.name&&Ee(e.contents,[Ve(a,e.contents.root[0]().defs[e.name]),Jn(e.name)]),s(!1)};return[d(U,{class:"my-1",get children(){return[d(je,{get color(){return Me[e.type]},get children(){return m(`defType.${e.type}`)}}),d(ge,{class:"flex-1",get value(){return e.name},get readonly(){return!o()},ref(a){const c=r;typeof c=="function"?c(a):r=a},onKeyDown:a=>{a.key==="Enter"&&l()},onClick:()=>{s(!0)}}),d(P,{get when(){return e.label!==void 0},get children(){return d(je,{get color(){return p.secondary},get children(){return e.label}})}}),d(P,{get when(){return o()},get fallback(){return d(k,{get color(){return p.danger},onClick:i,get children(){return d(lt,{})}})},get children(){return d(k,{get color(){return p.primary},onClick:l,get children(){return d(gt,{})}})}}),d(k,{get color(){return p.secondary},onClick:()=>e.onOpen?e.onOpen():n(a=>!a),get children(){return d(P,{get when(){return t()},get fallback(){return d(an,{})},get children(){return d(ui,{})}})}})]}}),d(P,{get when(){return t()},get children(){return e.children}})]},Aa=e=>d(vt,{type:"value",get name(){return e.name},get contents(){return e.contents},onOpen:async()=>{if(e.contents.modified[0]()){alert("Please save your changes first");return}e.state.editValueDef&&(await e.state.editValueDef(e.state.path[0](),e.name),e.state.onClose?.())}}),Ur=e=>(e?.value??"").split(",").map(mr).filter(t=>t),Pa=e=>{const t=()=>e.def;let n;const r=()=>{const o=Ur(n);Ee(e.contents,[Ve(e.name,{type:"tag",elems:o})])};return d(vt,{type:"tag",get name(){return e.name},get contents(){return e.contents},get label(){return""+t().elems.length},get children(){return d(U,{class:"ml-3 my-1",get children(){return[d(je,{get color(){return Me[e.def.type]},get children(){return d(ln,{})}}),d(ge,{class:"flex-1",get value(){return t().elems.join(",")},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),d(k,{get color(){return p.primary},onClick:r,get children(){return d(gt,{})}})]}})}})},Ba=e=>{const t=()=>e.def;let n;const r=()=>{const o=Ur(n);Ee(e.contents,[Ve(e.name,{type:"type",unions:o})])};return d(vt,{type:"type",get name(){return e.name},get contents(){return e.contents},get label(){return""+t().unions.length},get children(){return d(U,{class:"ml-3 my-1",get children(){return[d(je,{get color(){return Me[e.def.type]},get children(){return d(ln,{})}}),d(ge,{class:"flex-1",get value(){return t().unions.join(",")},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),d(k,{get color(){return p.primary},onClick:r,get children(){return d(gt,{})}})]}})}})},Ta=e=>{const t=()=>e.def;let n;const r=()=>{const o=n?.value;if(!o){J(m("fileBrowser.toast.invalidDefCreationName"));return}Ee(e.contents,[Ve(e.name,{type:"alias",origin:o})])};return d(vt,{type:"alias",get name(){return e.name},get contents(){return e.contents},get children(){return d(U,{class:"ml-3 my-1",get children(){return[d(je,{get color(){return Me[e.def.type]},get children(){return d(ln,{})}}),d(ge,{class:"flex-1",get value(){return t().origin},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),d(k,{get color(){return p.primary},onClick:r,get children(){return d(gt,{})}})]}})}})},La={type:Ba,tag:Pa,value:Aa,alias:Ta},Oa=e=>{const t=Ia(e.state),n=()=>Object.entries(t.root[0]().defs).sort((s,i)=>s[0].localeCompare(i[0])),r=()=>{const s=async()=>{const i=JSON.stringify(t.root[0]());await jr(e.state,i),t.modified[1](!1)};return d(U,{class:"my-1",get children(){return d(k,{get color(){return t.modified[0]()?p.primary:p.secondary},class:"flex-1",onClick:s,get disabled(){return!t.modified[0]()},get children(){return[d(Sr,{})," ",M(()=>m("menu.save"))]}})}})},o=()=>{const s=Object.entries(Me).map((u,h)=>({color:u[1],label:m(`defType.${u[0]}`),value:h,class:"flex-1"}));let i;const[l,a]=v(0),c=()=>{const u=Kr(t,i?.value??"");Ee(t,[Ve(u,Ts[An[l()]]())]),i.value=""};return["Creation",d(Wr,{buttons:s,initialValue:0,onChange:u=>{a(u)}}),d(U,{class:"my-1",get children(){return[d(ge,{class:"flex-1",get placeholder(){return m("term.name")},ref(u){const h=i;typeof h=="function"?h(u):i=u},onKeyDown:u=>{u.key==="Enter"&&c()}}),d(k,{get color(){return Me[An[l()]]},onClick:c,get children(){return d(xi,{})}})]}})]};return[d(P,{get when(){return t.errorMessage[0]()},get children(){return t.errorMessage[0]()}}),d(r,{}),d(o,{content:t}),Da(),(()=>{const s=Na();return f(s,d(X,{get each(){return n()},children:i=>d(Ne,{get component(){return La[i[1].type]},get state(){return e.state},contents:t,get name(){return i[0]},get def(){return i[1]}})})),s})()]},za=w('<div class="w-100 text-center"><br>(<!> bytes).<br>'),Ha=new Map([[Je.Unknown,Ma],[Je.Kitl,Oa],[Je.Image,xa]]),Ra=e=>{const t=Xl(e.state),[n,r]=v(!t);t||Gt(e.state);const o=async()=>{r(!0),Gt(e.state)},s=()=>e.state.path[0](),i=()=>kr(s()),l=()=>Hs(i())[1],a=()=>Ha.get(Fs(l()));return d(Xt,{get children(){return[d(de,{get when(){return!n()},get children(){const c=za(),u=c.firstChild,h=u.nextSibling,g=h.nextSibling;return g.nextSibling.nextSibling,f(c,()=>m("fileBrowser.fileTooLarge.message"),u),f(c,()=>e.state.storageItem[0]().size,g),f(c,d(k,{get color(){return p.primary},onClick:o,get children(){return m("fileBrowser.fileTooLarge.show")}}),null),f(c,d(k,{get color(){return p.secondary},onClick:async()=>{const C=await z.read(s());Us(i(),C)},get children(){return[d(fi,{})," ",M(()=>m("fileBrowser.fileTooLarge.download"))]}}),null),c}}),d(de,{get when(){return!e.state.data[0]()},get children(){return d(Fr,{children:"Loading data..."})}}),d(de,{when:!0,get children(){return d(Ne,{get component(){return a()},get state(){return e.state}})}})]}})},ja=w("<div> Not Found "),Fa=new Map([[_.NotFound,()=>ja()],[_.Directory,$a],[_.File,Ra]]),Wa=e=>d(P,{get when(){return e.state.storageItem[0]()!==void 0},get fallback(){return d(Fr,{children:"Loading metadata..."})},get children(){return d(Ne,{get component(){return Fa.get(e.state.storageItem[0]().type)},get state(){return e.state}})}}),Ka=w("<h3> "),Ua=w("<ul>"),Va=w("<li>"),Ya=e=>{const t=()=>e.state.uploads[0]();return d(P,{get when(){return t().size>0},get children(){return[(()=>{const n=Ka(),r=n.firstChild;return f(n,d(ur,{}),r),f(n,()=>m("fileBrowser.title.uploading"),null),n})(),(()=>{const n=Ua();return f(n,d(X,{get each(){return Array.from(t())},children:r=>(()=>{const o=Va();return f(o,r),o})()})),n})()]}})};const Ga=w("<div class=em-075>⚠️ "),qa=e=>d(P,{get when(){return e.state.path[0]().startsWith("local:")},get children(){const t=Ga();return t.firstChild,f(t,()=>m("fileBrowser.warningLocal"),null),t}}),Ja=e=>{const t=Gl(e.initialPath);return t.onClose=()=>e.onClose(),t.editValueDef=(n,r)=>e.editValueDef(n,r),Hr(t),[d(ia,{state:t}),d(qa,{state:t}),d(Ya,{state:t}),d(Wa,{state:t})]},Xa=e=>d(Ue,{get onClose(){return e.onClose},transition:!0,get position(){return se.Bottom},get children(){return d(Ja,{get initialPath(){return e.initialPath},get onClose(){return e.onClose},get editValueDef(){return e.editValueDef}})}}),Za=w("<pre>");var ct=function(e){return e[e.Launch=0]="Launch",e[e.History=1]="History",e}(ct||{});const Qa=[{color:p.primary,label:"Launch",value:ct.Launch},{color:p.info,label:"History",value:ct.History}],ec=e=>{let t;const[n,r]=v(""),o=()=>{if(!t)return;const s=t.value;r("<Running...>");const i=new Function(s);r(i())};return d(Ue,{get position(){return se.Bottom},transition:!0,get onClose(){return e.onClose},get children(){return[d(Wr,{buttons:Qa,get initialValue(){return ct.Launch}}),d(gn,{ref(s){const i=t;typeof i=="function"?i(s):t=s},autoresize:!0,value:"",placeholder:"JS Code here, return will be the result"}),d(k,{get color(){return p.primary},onClick:o,class:"w-100",get children(){return[d(cn,{}),"Launch"]}}),(()=>{const s=Za();return f(s,n),s})()]}})},tc=e=>{let t;return d(Ue,{get position(){return se.Bottom},transition:!0,get onClose(){return e.onClose},get children(){return[d(k,{get color(){return p.primary},class:"w-100",onClick:()=>e.onApply(t.value),get children(){return m("menu.apply")}}),d(gn,{ref(n){const r=t;typeof r=="function"?r(n):t=n},get value(){return e.initValue},autoresize:!0})]}})},nc=e=>d(Ue,{get position(){return se.Bottom},transition:!0,get onClose(){return e.onClose},get children(){return[d(k,{get color(){return p.primary},class:"mb-1 w-100",onClick:()=>{Jr(e.state)},get children(){return[d(cn,{})," ",M(()=>m("mainEditor.menu.launch"))]}}),d(k,{get color(){return p.info},class:"mb-1 w-100",onClick:()=>{qr(e.state)},get children(){return[d(_r,{})," ",M(()=>m("mainEditor.menu.graphTools"))]}}),d(k,{get color(){return p.secondary},class:"mb-1 w-100",onClick:()=>{Gr(e.state)},get children(){return[d(Mr,{})," ",M(()=>m("mainEditor.menu.browser"))]}})]}});let Q=function(e){return e[e.Meta=0]="Meta",e[e.Browser=1]="Browser",e[e.Launch=2]="Launch",e[e.GraphTools=3]="GraphTools",e[e.NodeEdit=4]="NodeEdit",e}({});const rc={[Q.Meta]:nc,[Q.Launch]:ec,[Q.GraphTools]:Bl,[Q.Browser]:Xa,[Q.NodeEdit]:tc};class oc{constructor(){this.state=v()}close(){this.state[1](void 0)}open(t){this.state[1](t)}}const sc=e=>{const t=()=>e.state.modalActions[0]().state[0]();return d(P,{get when(){return t()},get children(){return d(Ne,Lt({get component(){return rc[t().type]}},()=>t()))}})};var qt=(e=>(e[e.Default=0]="Default",e[e.Edit=1]="Edit",e))(qt||{});const ic=()=>{const e=()=>({type:"value",nodes:[],comment:"Test"});return new Ar("local:/.kitl/scratch.kitl","default",Dr(e()))},Vr=e=>{const t=D(e.hrm[0]);t.onEditNode=n=>hc(e,n),j(()=>t.selectedNodes[0]()<1?dc(e):Yr(e,1)),setTimeout(()=>{t.zoomAll()},16)},lc=()=>{const e={toolSet:v(0),lastToolSet:0,hrm:v(ic()),modalActions:v(new oc)};return Vr(e),e},ac=async(e,t,n)=>{const r=await z.readJson(t,vr(n)),o=tn.value(r),s=new Ar(t,n,Dr(o));e.hrm[1](s),Vr(e)},cc=async e=>{const t=e.hrm[0](),n=bl(e.hrm[0]().nodes()),r=tn.value(n);await z.writeJson(t.path,vr(t.name),r)},Yr=(e,t)=>{const n=D(e.toolSet[0]);n!==t&&(e.lastToolSet=n,e.toolSet[1](t),e.hrm[0]().selectMode=t===1)},dc=e=>{e.toolSet[1](e.lastToolSet)},uc=e=>{e.modalActions[0]().open({type:Q.Meta,state:e,onClose:()=>e.modalActions[0]().close()})},Gr=e=>{e.modalActions[0]().open({type:Q.Browser,initialPath:e.hrm[0]().path,editValueDef:(t,n)=>ac(e,t,n),onClose:()=>e.modalActions[0]().close()})},qr=e=>{e.modalActions[0]().open({type:Q.GraphTools,state:e.hrm[0](),onClose:()=>e.modalActions[0]().close()})},hc=(e,t)=>{const n=e.hrm[0]();e.modalActions[0]().open({type:Q.NodeEdit,id:t,initValue:n.getNodeStringData(t),onApply:r=>{n.applyEditNode(t,r),e.modalActions[0]().close()},onClose:()=>e.modalActions[0]().close()})},Jr=e=>{e.modalActions[0]().open({type:Q.Launch,state:e.hrm[0](),onClose:()=>e.modalActions[0]().close()})},Te=w("<a> "),fc=w("<div class=editor-root-hrm-header-container><div class=editor-root-hrm-badges>"),Xr=()=>[{name:m("mainEditor.menu.defaultTools"),icon:d(Ci,{})},{name:m("mainEditor.menu.selectTools"),icon:d(an,{})}],gc=e=>Xr()[e].icon,mc=(e,t)=>{switch(e){case qt.Default:return[d(ge,{class:"flex-1",readonly:!0,get value(){return`${t.name} @ ${t.path}`}}),d(k,{get color(){return p.warning},onClick:()=>t.undo(),get children(){return d(ai,{})}}),d(k,{get color(){return p.warning},onClick:()=>t.redo(),get children(){return d(ci,{})}})];case qt.Edit:return[d(k,{get color(){return p.warning},class:"flex-1",onClick:()=>t.deselectAll(),get children(){return d(hi,{})}}),d(k,{get color(){return p.secondary},class:"flex-1",onClick:()=>{t.cutSelectedNodes(),q(m("toast.cutSuccess"))},get children(){return d(bi,{})}}),d(k,{get color(){return p.secondary},class:"flex-1",onClick:()=>{t.copySelectedNodes(),q(m("toast.copySuccess"))},get children(){return d(Kt,{})}}),d(k,{get color(){return p.secondary},class:"flex-1",onClick:async()=>{await t.pasteNodes(),q(m("toast.pasteSuccess"))},get children(){return d(Wt,{})}}),d(k,{get color(){return p.danger},class:"flex-1",onClick:()=>t.deleteSelectedNodes(),get children(){return d(di,{})}})]}},wc=e=>Xr().map((t,n)=>(()=>{const r=Te(),o=r.firstChild;return r.$$click=()=>{Yr(e,n)},f(r,()=>t.icon,o),f(r,()=>t.name,null),r})()),yc=e=>{const t=()=>[wc(e.state),[(()=>{const n=Te(),r=n.firstChild;return n.$$click=async()=>{await cc(e.state),q(m("toast.saveSuccess"))},f(n,d(Sr,{}),r),f(n,()=>m("menu.save"),null),n})()],[(()=>{const n=Te(),r=n.firstChild;return n.$$click=()=>Gr(e.state),f(n,d(Mr,{}),r),f(n,()=>m("mainEditor.menu.browser"),null),n})(),(()=>{const n=Te(),r=n.firstChild;return n.$$click=()=>Jr(e.state),f(n,d(cn,{}),r),f(n,()=>m("mainEditor.menu.launch"),null),n})(),(()=>{const n=Te(),r=n.firstChild;return n.$$click=()=>qr(e.state),f(n,d(_r,{}),r),f(n,()=>m("mainEditor.menu.graphTools"),null),n})()]];return(()=>{const n=fc(),r=n.firstChild;return f(n,d(U,{class:"editor-root-hrm-header shadow-2",get children(){return[d(dn,{get color(){return p.primary},get list(){return t()},get children(){return gc(e.state.toolSet[0]())}}),M(()=>mc(e.state.toolSet[0](),e.state.hrm[0]()))]}}),r),f(r,d(k,{get color(){return p.primary},outline:!0,small:!0,onClick:()=>alert("unimpl"),children:"Test"})),n})()};Z(["click"]);const pc=e=>{let t;const n=()=>e.state.hrm[0](),r=()=>n().selectedNodes[0]()>0;return Fe(()=>{t&&fe({onClick:()=>{if(r())n().deleteSelectedNodes();else{const o=n().addEmptyNode();n().editNode(o)}},onLongPress:()=>{navigator.vibrate(10),uc(e.state)}},t)}),d(k,{ref(o){const s=t;typeof s=="function"?s(o):t=o},class:"hrm-fab shadow-2	",get color(){return r()?p.danger:p.primary},get children(){return d(Xt,{get children(){return[d(de,{get when(){return r()},get children(){return d(lt,{})}}),d(de,{when:!0,get children(){return d(vi,{})}})]}})}})},vc=w("<div class=editor-root>"),$c=()=>{const e=lc();return(()=>{const t=vc();return f(t,d(El,{get state(){return e.hrm[0]()}}),null),f(t,d(yc,{state:e}),null),f(t,d(pc,{state:e}),null),f(t,d(sc,{state:e}),null),t})()},kc=()=>d(Oo,{get children(){return[d(ei,{}),d($c,{})]}}),bc=document.getElementById("root");$o(()=>d(kc,{}),bc);
