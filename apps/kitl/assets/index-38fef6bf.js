(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Fr=(e,t)=>e===t,qe=Symbol("solid-proxy"),jr=Symbol("solid-track"),Xe={equals:Fr};let Rn=Vn;const oe=1,Je=2,Fn={owned:null,cleanups:null,context:null,owner:null},yt={};var N=null;let pt=null,S=null,L=null,re=null,it=0;function We(e,t){const n=S,r=N,o=e.length===0,s=t===void 0?r:t,i=o?Fn:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=o?e:()=>e(()=>A(()=>ct(i)));N=i,S=null;try{return ue(l,!0)}finally{S=n,N=r}}function v(e,t){t=t?Object.assign({},Xe,t):Xe;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),Kn(n,o));return[Un.bind(n),r]}function an(e,t,n){const r=lt(e,t,!0,oe);Se(r)}function C(e,t,n){const r=lt(e,t,!1,oe);Se(r)}function R(e,t,n){Rn=qr;const r=lt(e,t,!1,oe);(!n||!n.render)&&(r.user=!0),re?re.push(r):Se(r)}function M(e,t,n){n=n?Object.assign({},Xe,n):Xe;const r=lt(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Se(r),Un.bind(r)}function Ur(e){return e&&typeof e=="object"&&"then"in e}function Kr(e,t,n){let r,o,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,s=t||{}):(r=e,o=t,s=n||{});let i=null,l=yt,a=!1,d="initialValue"in s,u=typeof r=="function"&&M(r);const h=new Set,[g,p]=(s.storage||v)(s.initialValue),[x,Y]=v(void 0),[ne,ke]=v(void 0,{equals:!1}),[j,U]=v(d?"ready":"unresolved");function T(D,I,B,be){return i===D&&(i=null,be!==void 0&&(d=!0),(D===l||I===l)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(be,{value:I})),l=yt,ie(I,B)),I}function ie(D,I){ue(()=>{I===void 0&&p(()=>D),U(I!==void 0?"errored":d?"ready":"unresolved"),Y(I);for(const B of h.keys())B.decrement();h.clear()},!1)}function Ie(){const D=Wr,I=g(),B=x();if(B!==void 0&&!i)throw B;return S&&!S.user&&D&&an(()=>{ne(),i&&(D.resolved||h.has(D)||(D.increment(),h.add(D)))}),I}function wt(D=!0){if(D!==!1&&a)return;a=!1;const I=u?u():r;if(I==null||I===!1){T(i,A(g));return}const B=l!==yt?l:A(()=>o(I,{value:g(),refetching:D}));return Ur(B)?(i=B,"value"in B?(B.status==="success"?T(i,B.value,void 0,I):T(i,void 0,void 0,I),B):(a=!0,queueMicrotask(()=>a=!1),ue(()=>{U(d?"refreshing":"pending"),ke()},!1),B.then(be=>T(B,be,void 0,I),be=>T(B,void 0,Yn(be),I)))):(T(i,B,void 0,I),B)}return Object.defineProperties(Ie,{state:{get:()=>j()},error:{get:()=>x()},loading:{get(){const D=j();return D==="pending"||D==="refreshing"}},latest:{get(){if(!d)return Ie();const D=x();if(D&&!i)throw D;return g()}}}),u?an(()=>wt(!1)):wt(!1),[Ie,{refetch:wt,mutate:p}]}function K(e){return ue(e,!1)}function A(e){if(S===null)return e();const t=S;S=null;try{return e()}finally{S=t}}function Wt(e){R(()=>A(e))}function jn(e){return N===null||(N.cleanups===null?N.cleanups=[e]:N.cleanups.push(e)),e}function Vr(e){const t=M(e),n=M(()=>Dt(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Wr;function Un(){if(this.sources&&this.state)if(this.state===oe)Se(this);else{const e=L;L=null,ue(()=>Qe(this),!1),L=e}if(S){const e=this.observers?this.observers.length:0;S.sources?(S.sources.push(this),S.sourceSlots.push(e)):(S.sources=[this],S.sourceSlots=[e]),this.observers?(this.observers.push(S),this.observerSlots.push(S.sources.length-1)):(this.observers=[S],this.observerSlots=[S.sources.length-1])}return this.value}function Kn(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&ue(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=pt&&pt.running;i&&pt.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?L.push(s):re.push(s),s.observers&&Wn(s)),i||(s.state=oe)}if(L.length>1e6)throw L=[],new Error},!1)),t}function Se(e){if(!e.fn)return;ct(e);const t=it;Yr(e,e.value,t)}function Yr(e,t,n){let r;const o=N,s=S;S=N=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=oe,e.owned&&e.owned.forEach(ct),e.owned=null),e.updatedAt=n+1,Gn(i)}finally{S=s,N=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Kn(e,r):e.value=r,e.updatedAt=n)}function lt(e,t,n,r=oe,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:N,context:N?N.context:null,pure:n};return N===null||N!==Fn&&(N.owned?N.owned.push(s):N.owned=[s]),s}function Ze(e){if(e.state===0)return;if(e.state===Je)return Qe(e);if(e.suspense&&A(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<it);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===oe)Se(e);else if(e.state===Je){const r=L;L=null,ue(()=>Qe(e,t[0]),!1),L=r}}function ue(e,t){if(L)return e();let n=!1;t||(L=[]),re?n=!0:re=[],it++;try{const r=e();return Gr(n),r}catch(r){n||(re=null),L=null,Gn(r)}}function Gr(e){if(L&&(Vn(L),L=null),e)return;const t=re;re=null,t.length&&ue(()=>Rn(t),!1)}function Vn(e){for(let t=0;t<e.length;t++)Ze(e[t])}function qr(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ze(r)}for(t=0;t<n;t++)Ze(e[t])}function Qe(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===oe?r!==t&&(!r.updatedAt||r.updatedAt<it)&&Ze(r):o===Je&&Qe(r,t)}}}function Wn(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Je,n.pure?L.push(n):re.push(n),n.observers&&Wn(n))}}function ct(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ct(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Yn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Gn(e,t=N){throw Yn(e)}function Dt(e){if(typeof e=="function"&&!e.length)return Dt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Dt(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const Xr=Symbol("fallback");function dn(e){for(let t=0;t<e.length;t++)e[t]()}function Jr(e,t,n={}){let r=[],o=[],s=[],i=0,l=t.length>1?[]:null;return jn(()=>dn(s)),()=>{let a=e()||[],d,u;return a[jr],A(()=>{let g=a.length,p,x,Y,ne,ke,j,U,T,ie;if(g===0)i!==0&&(dn(s),s=[],r=[],o=[],i=0,l&&(l=[])),n.fallback&&(r=[Xr],o[0]=We(Ie=>(s[0]=Ie,n.fallback())),i=1);else if(i===0){for(o=new Array(g),u=0;u<g;u++)r[u]=a[u],o[u]=We(h);i=g}else{for(Y=new Array(g),ne=new Array(g),l&&(ke=new Array(g)),j=0,U=Math.min(i,g);j<U&&r[j]===a[j];j++);for(U=i-1,T=g-1;U>=j&&T>=j&&r[U]===a[T];U--,T--)Y[T]=o[U],ne[T]=s[U],l&&(ke[T]=l[U]);for(p=new Map,x=new Array(T+1),u=T;u>=j;u--)ie=a[u],d=p.get(ie),x[u]=d===void 0?-1:d,p.set(ie,u);for(d=j;d<=U;d++)ie=r[d],u=p.get(ie),u!==void 0&&u!==-1?(Y[u]=o[d],ne[u]=s[d],l&&(ke[u]=l[d]),u=x[u],p.set(ie,u)):s[d]();for(u=j;u<g;u++)u in Y?(o[u]=Y[u],s[u]=ne[u],l&&(l[u]=ke[u],l[u](u))):o[u]=We(h);o=o.slice(0,i=g),r=a.slice(0)}return o});function h(g){if(s[u]=g,l){const[p,x]=v(u);return l[u]=x,t(a[u],p)}return t(a[u])}}}function c(e,t){return A(()=>e(t||{}))}function Ue(){return!0}const It={get(e,t,n){return t===qe?n:e.get(t)},has(e,t){return t===qe?!0:e.has(t)},set:Ue,deleteProperty:Ue,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Ue,deleteProperty:Ue}},ownKeys(e){return e.keys()}};function vt(e){return(e=typeof e=="function"?e():e)?e:{}}function Zr(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Nt(...e){let t=!1;for(let s=0;s<e.length;s++){const i=e[s];t=t||!!i&&qe in i,e[s]=typeof i=="function"?(t=!0,M(i)):i}if(t)return new Proxy({get(s){for(let i=e.length-1;i>=0;i--){const l=vt(e[i])[s];if(l!==void 0)return l}},has(s){for(let i=e.length-1;i>=0;i--)if(s in vt(e[i]))return!0;return!1},keys(){const s=[];for(let i=0;i<e.length;i++)s.push(...Object.keys(vt(e[i])));return[...new Set(s)]}},It);const n={},r={},o=new Set;for(let s=e.length-1;s>=0;s--){const i=e[s];if(!i)continue;const l=Object.getOwnPropertyNames(i);for(let a=0,d=l.length;a<d;a++){const u=l[a];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(i,u);if(!o.has(u))h.get?(o.add(u),Object.defineProperty(n,u,{enumerable:!0,configurable:!0,get:Zr.bind(r[u]=[h.get.bind(i)])})):(h.value!==void 0&&o.add(u),n[u]=h.value);else{const g=r[u];g?h.get?g.push(h.get.bind(i)):h.value!==void 0&&g.push(()=>h.value):n[u]===void 0&&(n[u]=h.value)}}}return n}function qn(e,...t){if(qe in e){const o=new Set(t.length>1?t.flat():t[0]),s=t.map(i=>new Proxy({get(l){return i.includes(l)?e[l]:void 0},has(l){return i.includes(l)&&l in e},keys(){return i.filter(l=>l in e)}},It));return s.push(new Proxy({get(i){return o.has(i)?void 0:e[i]},has(i){return o.has(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.has(i))}},It)),s}const n={},r=t.map(()=>({}));for(const o of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,o),i=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let l=!1,a=0;for(const d of t)d.includes(o)&&(l=!0,i?r[a][o]=s.value:Object.defineProperty(r[a],o,s)),++a;l||(i?n[o]=s.value:Object.defineProperty(n,o,s))}return[...r,n]}const Xn=e=>`Stale read from <${e}>.`;function V(e){const t="fallback"in e&&{fallback:()=>e.fallback};return M(Jr(()=>e.each,e.children,t||void 0))}function P(e){const t=e.keyed,n=M(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return M(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?A(()=>o(t?r:()=>{if(!A(n))throw Xn("Show");return e.when})):o}return e.fallback},void 0,void 0)}function Yt(e){let t=!1;const n=(s,i)=>s[0]===i[0]&&(t?s[1]===i[1]:!s[1]==!i[1])&&s[2]===i[2],r=Vr(()=>e.children),o=M(()=>{let s=r();Array.isArray(s)||(s=[s]);for(let i=0;i<s.length;i++){const l=s[i].when;if(l)return t=!!s[i].keyed,[i,l,s[i]]}return[-1]},void 0,{equals:n});return M(()=>{const[s,i,l]=o();if(s<0)return e.fallback;const a=l.children;return typeof a=="function"&&a.length>0?A(()=>a(t?i:()=>{if(A(o)[0]!==s)throw Xn("Match");return l.when})):a},void 0,void 0)}function ae(e){return e}const Qr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],eo=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Qr]),to=new Set(["innerHTML","textContent","innerText","children"]),no=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ro=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function oo(e,t){const n=ro[e];return typeof n=="object"?n[t]?n.$:void 0:n}const so=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),io=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),lo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function co(e,t,n){let r=n.length,o=t.length,s=r,i=0,l=0,a=t[o-1].nextSibling,d=null;for(;i<o||l<s;){if(t[i]===n[l]){i++,l++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?l?n[l-1].nextSibling:n[s-l]:a;for(;l<s;)e.insertBefore(n[l++],u)}else if(s===l)for(;i<o;)(!d||!d.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[l]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[l++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!d){d=new Map;let h=l;for(;h<s;)d.set(n[h],h++)}const u=d.get(t[i]);if(u!=null)if(l<u&&u<s){let h=i,g=1,p;for(;++h<o&&h<s&&!((p=d.get(t[h]))==null||p!==u+g);)g++;if(g>u-l){const x=t[i];for(;l<u;)e.insertBefore(n[l++],x)}else e.replaceChild(n[l++],t[i++])}else i++;else t[i++].remove()}}}const un="_$DX_DELEGATE";function ao(e,t,n,r={}){let o;return We(s=>{o=s,t===document?e():f(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function w(e,t,n){let r;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,n?i.content.firstChild.firstChild:i.content.firstChild},s=t?()=>A(()=>document.importNode(r||(r=o()),!0)):()=>(r||(r=o())).cloneNode(!0);return s.cloneNode=s,s}function J(e,t=window.document){const n=t[un]||(t[un]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,mo))}}function ee(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function uo(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function F(e,t){t==null?e.removeAttribute("class"):e.className=t}function Q(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n)}function ho(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const l=o[s];!l||l==="undefined"||t[l]||(hn(e,l,!1),delete n[l])}for(s=0,i=r.length;s<i;s++){const l=r[s],a=!!t[l];!l||l==="undefined"||n[l]===a||!a||(hn(e,l,!0),n[l]=a)}return n}function He(e,t,n){if(!t)return n?ee(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function Jn(e,t={},n,r){const o={};return r||C(()=>o.children=Ce(e,t.children,o.children)),C(()=>t.ref&&t.ref(e)),C(()=>fo(e,t,n,!0,o,!0)),o}function O(e,t,n){return A(()=>e(t,n))}function f(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Ce(e,t,r,n);C(o=>Ce(e,t(),o,n),r)}function fo(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=fn(e,i,null,o[i],n,s)}for(const i in t){if(i==="children"){r||Ce(e,t.children);continue}const l=t[i];o[i]=fn(e,i,l,o[i],n,s)}}function go(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function hn(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function fn(e,t,n,r,o,s){let i,l,a,d,u;if(t==="style")return He(e,n,r);if(t==="classList")return ho(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r),n&&e.addEventListener(h,n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),g=so.has(h);if(!g&&r){const p=Array.isArray(r)?r[0]:r;e.removeEventListener(h,p)}(g||n)&&(Q(e,h,n,g),g&&J([h]))}else if(t.slice(0,5)==="attr:")ee(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(a=to.has(t))||!o&&((d=oo(t,e.tagName))||(l=eo.has(t)))||(i=e.nodeName.includes("-")))u&&(t=t.slice(5),l=!0),t==="class"||t==="className"?F(e,n):i&&!l&&!a?e[go(t)]=n:e[d||t]=n;else{const h=o&&t.indexOf(":")>-1&&lo[t.split(":")[0]];h?uo(e,h,t,n):ee(e,no[t]||t,n)}return n}function mo(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Ce(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),i){let l=n[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),n=xe(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=xe(e,n,r);else{if(s==="function")return C(()=>{let l=t();for(;typeof l=="function";)l=l();n=Ce(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],a=n&&Array.isArray(n);if(Bt(l,t,n,o))return C(()=>n=Ce(e,l,n,r,!0)),()=>n;if(l.length===0){if(n=xe(e,n,r),i)return n}else a?n.length===0?gn(e,l,r):co(e,n,l):(n&&xe(e),gn(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=xe(e,n,r,t);xe(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Bt(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let l=t[s],a=n&&n[s],d;if(!(l==null||l===!0||l===!1))if((d=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=Bt(e,l,a)||o;else if(d==="function")if(r){for(;typeof l=="function";)l=l();o=Bt(e,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||o}else e.push(l),o=!0;else{const u=String(l);a&&a.nodeType===3&&a.data===u?e.push(a):e.push(document.createTextNode(u))}}return o}function gn(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function xe(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const l=t[i];if(o!==l){const a=l.parentNode===e;!s&&!i?a?e.replaceChild(o,l):e.insertBefore(o,n):a&&l.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const wo=!1,yo="http://www.w3.org/2000/svg";function po(e,t=!1){return t?document.createElementNS(yo,e):document.createElement(e)}function ze(e){const[t,n]=qn(e,["component"]),r=M(()=>t.component);return M(()=>{const o=r();switch(typeof o){case"function":return A(()=>o(n));case"string":const s=io.has(o),i=po(o,s);return Jn(i,n,s),i}})}var vo=()=>["%csolid-devtools","color: #fff; background: #2c4f7c; padding: 1px 4px;"];function $o(...e){console.warn(...vo(),...e)}$o('`import "solid-devtools";` is an entry point for the vite plugin.\nIf you\'re seeing this message you probably forgot to add the plugin to your vite config.');(()=>{let e=100;const t=()=>{const o=getComputedStyle(document.documentElement).getPropertyValue("--kitl-c-bg");if(console.log("bgColor",o),!o){if(e>1e4)return;e*=2,setTimeout(t,e);return}const s=document.querySelector('meta[name="theme-color"]');s&&s.setAttribute("content",o)},n=o=>{o?(console.log("Dark mode"),document.documentElement.setAttribute("color-theme","dark")):(console.log("Light mode"),document.documentElement.setAttribute("color-theme","light")),setTimeout(t)},r=window.matchMedia("(prefers-color-scheme: dark)");r.addEventListener("change",o=>n(o.matches)),n(r.matches),window.addEventListener("load",t)})();const ko="modulepreload",bo=function(e,t){return new URL(e,t).href},mn={},wn=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=bo(s,r),s in mn)return;mn[s]=!0;const i=s.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!r)for(let u=o.length-1;u>=0;u--){const h=o[u];if(h.href===s&&(!i||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":ko,i||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),i)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})},xo=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))})},[Zn,Co]=v({locale:"",strings:new Map}),_o=()=>Zn().locale,Qn=(e,t,n)=>{for(const r in n){const o=n[r],s=t?`${t}.${r}`:r;typeof o=="object"?Qn(e,s,o):e.set(s,o)}},Mo=async e=>{const t=navigator.languages.map(n=>{const r=n.indexOf("-");return r===-1?n:n.slice(0,r)});for(const n of[e,...t,"en"])if(n)try{const r=await xo(Object.assign({"./strings/en.json":()=>wn(()=>import("./en-27070307.js"),[],import.meta.url),"./strings/ko.json":()=>wn(()=>import("./ko-439269b1.js"),[],import.meta.url)}),`./strings/${n}.json`),o=new Map;return Qn(o,"",r),Co({locale:n,strings:o}),!0}catch{continue}},m=e=>Zn().strings.get(e)||e,So=e=>{const[t]=Kr(async()=>await Mo(e.language)),n=_o();return c(Yt,{fallback:"Unk",get children(){return[c(ae,{get when(){return t()},get children(){return e.children}}),c(ae,{when:n==="",children:"Failed to load locale."}),c(ae,{when:n===void 0,children:"Loading..."})]}})};var y=(e=>(e.fg="fg",e.bg="bg",e.primary="primary",e.secondary="secondary",e.success="success",e.danger="danger",e.warning="warning",e.info="info",e))(y||{});const Eo=w("<button>"),$=e=>(()=>{const t=Eo();Q(t,"click",e.onClick,!0);const n=e.ref;return typeof n=="function"?O(n,t):e.ref=t,f(t,()=>e.children),C(r=>{const o=`no-user-select btn btn-${e.outline?"ol-":""}${e.color} ${e.class??""} ${e.small?"btn-sm":""}`,s=e.disabled;return o!==r._v$&&F(t,r._v$=o),s!==r._v$2&&(t.disabled=r._v$2=s),r},{_v$:void 0,_v$2:void 0}),t})();J(["click"]);const Do=w('<div class="checkbox no-user-select cursor-pointer"><label><input type=checkbox name=checkbox>'),Io=e=>{const t=n=>{const r=n.target;console.log(r.checked),e.onChange?.(r.checked)};return(()=>{const n=Do(),r=n.firstChild,o=r.firstChild;o.addEventListener("change",t);const s=e.ref;return typeof s=="function"?O(s,o):e.ref=o,f(r,()=>e.children,null),C(()=>o.checked=e.value),n})()},No=w("<div>"),W=e=>(()=>{const t=No();return Q(t,"drop",e.onDrop),Q(t,"click",e.onClick,!0),f(t,()=>e.children),C(()=>F(t,`input-group ${e.class??""}`)),t})();J(["click"]);const Bo=w("<input type=text>"),ge=e=>(()=>{const t=Bo();Q(t,"blur",e.onBlur),Q(t,"keydown",e.onKeyDown,!0),Q(t,"change",e.onChange),Q(t,"click",e.onClick,!0);const n=e.ref;return typeof n=="function"?O(n,t):e.ref=t,C(r=>{const o=e.readonly,s=`form-control ${e.class??""}`,i=e.placeholder;return o!==r._v$&&(t.readOnly=r._v$=o),s!==r._v$2&&F(t,r._v$2=s),i!==r._v$3&&ee(t,"placeholder",r._v$3=i),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),C(()=>t.value=e.value??""),t})();J(["click","keydown"]);const Ao=w("<span>"),er=e=>(()=>{const t=Ao();return C(()=>F(t,`spinner ${e.class}`)),t})(),Po=e=>[e.ctrlKey?"C":"",e.altKey?"A":"",e.shiftKey?"S":"",e.metaKey?"M":"",e.key].join("-"),tr=e=>t=>{if(typeof t!==e)throw new Error(`Expected ${e}, got ${typeof t}`);return t},q=tr("string"),et=tr("number"),we=e=>t=>{if(t!==void 0)return e(t)},Ae=e=>t=>{if(!Array.isArray(t))throw new Error(`Expected array, got ${typeof t}`);return t.map(e)},To=e=>({x:et(e.x),y:et(e.y)}),At={x:0,y:0},Lo=e=>({x:Math.round(e.x),y:Math.round(e.y)}),Te=(e,t)=>e*e+t*t,Pt=(e,t)=>Math.sqrt(Te(e,t)),yn=(e,t,n)=>{const r=n.w/2,o=n.h/2,s=n.x+r,i=n.y+o,l=Math.abs(r-o);let a=e-s,d=t-i,u=0,h=0;if(a<-r&&(a=-r,u=-1),a>r&&(a=r,u=1),d<-o&&(d=-o,h=-1),d>o&&(d=o,h=1),r>o&&Math.abs(a)>l){const g=a>0?l:-l,p=a-g,x=Pt(p,d)/o;return[s+g+p/x,i+d/x,p/o,d/(x*o)]}if(o>r&&Math.abs(d)>l){const g=d>0?l:-l,p=d-g,x=Pt(a,p)/r;return[s+a/x,i+g+p/x,a/(x*r),p/r]}return[s+a,i+d,u,h]},Tt=(e,t,n)=>{const[r,o,s,i]=yn(t.x+t.w/2,t.y+t.h/2,e),[l,a,d,u]=yn(r,o,t),h=.2*Pt(r-l,o-a);return`M ${l-n*d} ${a-n*u} C ${l+d*h} ${a+u*h}, ${r+s*h} ${o+i*h}, ${r-n*s} ${o-n*i}`},pn=(e,t)=>{const r=e.x+e.w/2,o=t.x+t.w/2;return`M ${r} ${e.y} C ${r} ${e.y-30}, ${o} ${t.y-30}, ${o} ${t.y}`},Oo=e=>Math.random().toString(36).slice(e),Ho=()=>Oo(7),zo=()=>{const e=new Date;return Math.round(e.getTime()/1e3+e.getTimezoneOffset()*60).toString(36)},Ro=()=>`${zo()}-${Ho()}`,nr=e=>({module:q(e.module),name:q(e.name)}),vn='()[]{},;\\@#"',rr=new Map;for(let e=0;e<vn.length;e++)rr.set(vn[e],!0);const Fo=e=>{let t="";for(let n=0;n<e.length;n++)rr.has(e[n])||(t+=e[n]);return t},jo=e=>{let t="",n=!1,r=0;for(;r<e.length&&(e.charCodeAt(r)<=32||e[r]==="_");)r+=1;for(;r<e.length;r++)e.charCodeAt(r)<=32||e[r]==="_"?n||(n=!0):(n&&(t+="_"),t+=e[r],n=!1);return t},Uo=e=>Fo(jo(e)),Ko=e=>e.replace(/_/g," "),or=e=>Ko(Uo(e));var b=(e=>(e.Alpha="a",e.Beta="b",e.Delta="d",e.Lambda="l",e.Pi="p",e))(b||{});const Vo=new Set(["d"]),Wo=new Set(["b"]),Yo=new Set(["b"]),Lt=new Set(["d","p"]),ye=e=>({id:q(e.id),handle:we(q)(e.handle)}),Go=e=>({type:"a",val:e.val,pat:we(ye)(e.pat)}),qo=e=>({type:"b",name:nr(e.name),lhs:et(e.lhs),args:Ae(ye)(e.args)}),Xo=e=>({type:"d",comment:q(e.comment),val:we(ye)(e.val)}),Jo=e=>({type:"l",fallback:we(ye)(e.fallback),params:Ae(q)(e.params),ret:we(ye)(e.ret)}),Zo=e=>({type:"p",name:nr(e.name),pat:we(ye)(e.pat),elems:et(e.elems)}),Qo={a:Go,b:qo,d:Xo,l:Jo,p:Zo},es=e=>({id:q(e.id),pos:To(e.pos),x:Qo[e.x.type](e.x)}),Ke=JSON.stringify,$t=e=>{switch(typeof e){case"string":return e.length>20;case"object":return e===null?!1:Array.isArray(e)?e.length>1:Object.keys(e).length>1}return!1},le=(e,t=0)=>{if(typeof e!="object"||e===null)return Ke(e);const n=" ".repeat(2*(t+1)),r=`,
`+n;if(Array.isArray(e)){const i=e;return i.length===0?"[]":i.length===1?$t(i[0])?`[ ${le(i[0],t+1)} ]`:`[${le(i[0],t+1)}]`:`[ ${i.map(l=>le(l,t+1)).join(r)} ]`}const o=e,s=Object.keys(o);if(s.length===0)return"{}";if(s.length===1){const i=s[0],l=Ke(i),a=o[i];return $t(a)?`{ ${l}:
  ${n}${le(a,t+2)}}`:`{${l}: ${le(a,t+1)}}`}return`{ ${Object.entries(o).map(([i,l])=>$t(l)?`${Ke(i)}:
  ${n}${le(l,t+2)}`:`${Ke(i)}: ${le(l,t+1)}`).join(r)} }`},z=e=>e.charCodeAt(0),Gt=e=>{const t=new Set;for(let n=0;n<e.length;n++)t.add(e.charCodeAt(n));return t},ts=z(`
`),ns=z("["),rs=z("]"),os=z("{"),ss=z("}"),is=z('"'),ls=z("'"),cs=z("\\"),as=z("u"),ds=z("x"),sr=Gt(`[]{},"':
`),us=Gt("+-0123456789."),hs=Gt(`"'`),fs=new Map([[z("b"),"\b"],[z("f"),"\f"],[z("n"),`
`],[z("r"),"\r"],[z("t"),"	"]]),gs=/[-+]?((0x[0-9a-fA-F]+)|([0-9]+(\.[0-9]+)?))([eE][-+]?[0-9]+)?/y,ms=/(false|true|null)\b/iy,ws=new Map([["false",!1],["true",!0],["null",null]]),ir=/\s*/y,tt=/[\s,]*/y,ys=/[\s:]*/y,de=e=>e.s.charCodeAt(e.p);class Re extends Error{s;p;line;column;constructor(t,n){let r=1,o=1;for(let s=0;s<t.p;s++)t.s.charCodeAt(s)===ts&&(r++,o=0),o++;super(`${r}:${o}: ${n}`),this.name="ParseError",this.s=t.s,this.p=t.p,this.line=r,this.column=o}}const qt=(e,t)=>(t.lastIndex=e.p,t.exec(e.s)),me=(e,t)=>{const n=qt(e,t);n&&(e.p+=n[0].length)},ps=e=>{e.p++,me(e,tt);const t=[];for(;e.p<e.l&&de(e)!==rs;)t.push(Xt(e)),me(e,tt);return e.p++,t},vs=e=>{e.p++,me(e,tt);const t={};for(;e.p<e.l&&de(e)!==ss;){let n;if(hs.has(de(e)))n=Ot(e);else{const r=e.p;e.p=e.s.indexOf(":",e.p),e.p===-1&&(e.p=e.l),n=e.s.slice(r,e.p).trim()}me(e,ys),t[n]=Xt(e),me(e,tt)}return e.p++,t},$n=(e,t)=>{const n=e.s.slice(e.p+1,e.p+t+1),r=parseInt(n,16);if(e.p+=t,isNaN(r))throw new Re(e,`Invalid unicode escape '${n}'`);return String.fromCharCode(r)},Ot=e=>{const t=de(e);e.p++;let n="";for(;e.p<e.l;e.p++){const r=de(e);if(r===t)return e.p++,n;if(r===cs){e.p++;const o=de(e);switch(o){case as:n+=$n(e,4);break;case ds:n+=$n(e,2);break;default:n+=fs.get(o)||String.fromCharCode(o)}}else n+=String.fromCharCode(r)}return n},$s=e=>{const t=qt(e,gs),n=t?t[0]:"",r=n?Number(n):NaN;if(e.p+=n.length,isNaN(r))throw new Re(e,`Invalid number '${n}'`);return r},ks=(e,t)=>{const n=qt(e,ms);if(n!==null)return e.p+=n[0].length,ws.get(n[0].toLowerCase());if(t)throw new Re(e,`Unexpected character '${e.s[e.p]}'`);const r=e.p;for(;e.p<e.l&&!sr.has(de(e));)e.p++;return e.s.slice(r,e.p).trim()},kn={[is]:Ot,[ls]:Ot,[ns]:ps,[os]:vs},Xt=(e,t)=>{me(e,ir);const n=de(e);if(n in kn)return kn[n](e);if(sr.has(n))throw new Re(e,`Unexpected character '${e.s[e.p]}' for value`);return us.has(n)?$s(e):ks(e,t)},bs=e=>{const t={s:e,p:0,l:e.length},n=Xt(t,!0);if(me(t,ir),t.p<t.l)throw new Re(t,`Unexpected character '${t.s[t.p]}', expect EOF`);return n},bn=e=>{const t=parseInt(e);return isNaN(t)?0:t},xn=e=>{const t=e.split("@",2);return{name:t[0].trim(),module:t[1]?t[1].trim():""}},xs=e=>{switch(e.type){case b.Alpha:return JSON.stringify(e.val,null,2);case b.Beta:{const t=e.name,n=t.module?`@${t.module}`:"",r=e.args.length<=0?"":`,${e.lhs},${Math.max(0,e.args.length-e.lhs)}`;return`${t.name}${n}${r}`}case b.Delta:return`${e.comment}`;case b.Lambda:return e.params.map(t=>"\\"+t).join(" ");case b.Pi:{const t=e.name,n=t.module?`@${t.module}`:"",r=e.elems<=0?"":`,${e.elems}`;return`? ${t.name}${n}${r}`}}},Cs=e=>{const t=e.trim();try{return{type:b.Alpha,val:bs(t)}}catch{}switch(t[0]){case"\\":{const r=t.slice(1).split("\\").reduce((o,s)=>{const i=s.trim();return i&&o.push(i),o},[]);return{type:b.Lambda,params:r.length<1?["x"]:r}}case"?":{const r=t.slice(1).split(","),o=xn(r[0]),s=bn(r[1]);return{type:b.Pi,name:o,elems:s}}default:{const r=t.split(","),o=xn(r[0]);let s=bn(r[1]),i=parseInt(r[2]);return isNaN(i)&&(i=s,s=0),{type:b.Beta,name:o,lhs:s,args:new Array(s+i).fill({id:""})}}}},_s="0.0",Cn=["value","tag","type","alias"],Ms={value:()=>({type:"value",nodes:[],comment:""}),tag:()=>({type:"tag",elems:[]}),type:()=>({type:"type",unions:[]}),alias:()=>({type:"alias",origin:""})},Jt={value:e=>({type:"value",nodes:Ae(es)(e.nodes),val:we(ye)(e.val),comment:q(e.comment)}),tag:e=>({type:"tag",elems:Ae(q)(e.elems)}),type:e=>({type:"type",unions:Ae(q)(e.unions)}),alias:e=>({type:"alias",origin:q(e.origin)})},Ss=e=>{const t={};for(const n in e)t[n]=Jt[e[n].type](e[n]);return t},Es=e=>({version:q(e.version),defs:Ss(e.defs)}),Ds=e=>({version:_s,defs:e}),lr=e=>["defs",e],Zt=e=>{const t=e.split(/[\\/]+/),n=t[0].length<1,r=[];for(const o of t)switch(o){case"":case".":break;case"..":r.pop();break;default:r.push(o)}return n&&r.unshift(""),r},Pe=e=>e.length<1?".":e.length<=1&&e[0].length<1?"/":e.join("/"),Is=e=>e.length>0&&e[0].length<1,Qt=e=>{const t=Zt(e);return[Pe(t),t]},en=e=>{const t=e.indexOf(":");return t<0?["local",e]:[e.slice(0,t),e.slice(t+1)]},cr=e=>{const[t,n]=en(e),[r,o]=Qt(n);return[t,r,o]},ar=e=>{const[,,t]=cr(e);return t[t.length-1]},Ns=e=>{let t=e.lastIndexOf(".");return t<0&&(t=e.length),[e.slice(0,t),e.slice(t+1)]},Bs=(e,t)=>{if(t<1)return e;let n=e.indexOf(".");return n<0&&(n=e.length),`${e.slice(0,n)}-${t}${e.slice(n)}`};var Ye=(e=>(e[e.Unknown=0]="Unknown",e[e.Kitl=1]="Kitl",e[e.Image=2]="Image",e))(Ye||{});const As=new Map([[1,["kitl"]],[2,["png","jpg","jpeg","gif","svg","webp"]]]),dr={};As.forEach((e,t)=>{for(const n of e)dr[n]=t});const Ps=e=>dr[e]||0,Le=e=>new TextEncoder().encode(e),Ts=e=>new TextDecoder().decode(e),Ls=async e=>{const t=await new Promise((n,r)=>{const o=new FileReader;o.onload=()=>{n(o.result)},o.onerror=r,o.readAsDataURL(new Blob([e]))});return t.slice(t.indexOf(",")+1)},Os=(e,t)=>{const n=URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})),r=document.createElement("a");r.href=n,r.download=e,r.click(),URL.revokeObjectURL(n)},Hs=(e,t,n)=>e<t?t:e>n?n:e,zs=e=>{const t=" KMGTPE";let n=0;if(e<1024)return`${e} B`;for(;e>=1024&&n<t.length;)e/=1024,++n;return`${e.toFixed(2)} ${t[n]}B`},Rs=e=>{const t=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?e.toLocaleTimeString():e.toLocaleDateString()},Fs=()=>{throw"Empty function invoked"},js=w("<div class=toast-container>"),Us=w("<div>");let tn=function(e){return e[e.Success=0]="Success",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.Progress=3]="Progress",e}({});const Ks=["âœ…","âš ï¸","ðŸš«","â³"],ur=[Fs],at=(e,t)=>{ur[0](e,t)},se=e=>at(e,{type:tn.Success}),X=e=>at(e,{type:tn.Error}),Vs=e=>at(e,{type:tn.Progress}),Ws=e=>{const t=e.creation??ur,[n,r]=v({cnt:0,toasts:[]});return t[0]=(o,s)=>{r(i=>{const l=i.toasts,a=i.cnt,d=Math.max(400,s?.ttl??2e3),u=(g,p)=>window.setTimeout(()=>r(x=>({...x,toasts:g(x.toasts)})),p),h=u(g=>g.filter(p=>p.id!==a),d);return u(g=>g.map(p=>p.id===a?{...p,class:"toast-a-out"}:p),d-200),l.push({id:a,type:s?.type,class:"toast-a-in",message:o,timeout:h}),{cnt:i.cnt+1,toasts:l}})},(()=>{const o=js();return f(o,c(V,{get each(){return n().toasts},children:s=>(()=>{const i=Us();return f(i,()=>s.type!==void 0?`${Ks[s.type]} `:"",null),f(i,()=>s.message,null),C(()=>F(i,`toast ${s.class}`)),i})()})),o})()};let Ht=0;const Ys=()=>{Ht=0},hr=()=>Ht=(Ht+57.295779513)%360,Gs="hrm-c-bd-empty",qs="âŽ‡",_n="âŸ¡",Xs="âŠ¥",Js="âŸ¾",Zs="â†¯",Mn="â§‰";var E=(e=>(e[e.Source=0]="Source",e[e.Sink=1]="Sink",e))(E||{});const Qs=w("<svg stroke-width=0>");function k(e,t){const n=Nt(e.a,t),[r,o]=qn(n,["src"]),[s,i]=v(""),l=M(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return R(()=>i(l())),jn(()=>{i("")}),(()=>{const a=Qs();return Jn(a,Nt({get stroke(){return e.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},o,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return s()}}),!0,!0),f(a,()=>wo),a})()}function ei(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-back-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 14l-4 -4l4 -4"/><path d="M5 10h11a4 4 0 1 1 0 8h-1"/>'},e)}function ti(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-forward-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 14l4 -4l-4 -4"/><path d="M19 10h-11a4 4 0 1 0 0 8h1"/>'},e)}function nn(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-right",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0"/><path d="M13 18l6 -6"/><path d="M13 6l6 6"/>'},e)}function ni(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-backspace",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 6a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-11l-5 -5a1.5 1.5 0 0 1 0 -2l5 -5z"/><path d="M12 10l4 4m0 -4l-4 4"/>'},e)}function fr(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-binary-tree",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M16 4a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M16 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M11 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M21 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M5.058 18.306l2.88 -4.606"/><path d="M10.061 10.303l2.877 -4.604"/><path d="M10.065 13.705l2.876 4.6"/><path d="M15.063 5.7l2.881 4.61"/>'},e)}function ri(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-caret-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 14l-6 -6l-6 6h12"/>'},e)}function dt(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-checkbox",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 11l3 3l8 -8"/><path d="M20 12v6a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h9"/>'},e)}function zt(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-clipboard",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"/><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"/>'},e)}function Rt(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-copy",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"/><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"/>'},e)}function Sn(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-cut",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M9.15 14.85l8.85 -10.85"/><path d="M6 4l8.85 10.85"/>'},e)}function oi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-deselect",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 8h3a1 1 0 0 1 1 1v3"/><path d="M16 16h-7a1 1 0 0 1 -1 -1v-7"/><path d="M12 20v.01"/><path d="M16 20v.01"/><path d="M8 20v.01"/><path d="M4 20v.01"/><path d="M4 16v.01"/><path d="M4 12v.01"/><path d="M4 8v.01"/><path d="M8 4v.01"/><path d="M12 4v.01"/><path d="M16 4v.01"/><path d="M20 4v.01"/><path d="M20 8v.01"/><path d="M20 12v.01"/><path d="M20 16v.01"/><path d="M3 3l18 18"/>'},e)}function gr(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-device-floppy",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"/><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M14 4l0 4l-6 0l0 -4"/>'},e)}function si(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-download",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"/><path d="M7 11l5 5l5 -5"/><path d="M12 4l0 12"/>'},e)}function rn(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-edit",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"/><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"/><path d="M16 5l3 3"/>'},e)}function ii(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-file-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/><path d="M12 11l0 6"/><path d="M9 14l6 0"/>'},e)}function li(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-file",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/>'},e)}function ci(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5"/><path d="M16 19h6"/><path d="M19 16v6"/>'},e)}function mr(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-search",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 19h-6a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v2.5"/><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M20.2 20.2l1.8 1.8"/>'},e)}function ai(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5"/><path d="M19 22v-6"/><path d="M22 19l-3 -3l-3 3"/>'},e)}function di(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2"/>'},e)}function wr(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-menu",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8l16 0"/><path d="M4 16l16 0"/>'},e)}function ui(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14"/><path d="M5 12l14 0"/>'},e)}function hi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-question-mark",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8a3.5 3 0 0 1 3.5 -3h1a3.5 3 0 0 1 3.5 3a3 3 0 0 1 -2 3a3 4 0 0 0 -2 4"/><path d="M12 19l0 .01"/>'},e)}function fi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-refresh",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"/><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/>'},e)}function yr(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-rocket",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"/><path d="M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"/><path d="M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/>'},e)}function gi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-scissors",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 7m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M6 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M8.6 8.6l10.4 10.4"/><path d="M8.6 15.4l10.4 -10.4"/>'},e)}function mi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-square-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M9 12l6 0"/><path d="M12 9l0 6"/>'},e)}function wi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-tools",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/>'},e)}function yi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash-off",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3l18 18"/><path d="M4 7h3m4 0h9"/><path d="M10 11l0 6"/><path d="M14 14l0 3"/><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l.077 -.923"/><path d="M18.384 14.373l.616 -7.373"/><path d="M9 5v-1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>'},e)}function nt(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0"/><path d="M10 11l0 6"/><path d="M14 11l0 6"/><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"/><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>'},e)}function pi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-upload",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"/><path d="M7 9l5 -5l5 5"/><path d="M12 4l0 12"/>'},e)}function vi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12"/><path d="M6 6l12 12"/>'},e)}function $i(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-in-area",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 13v4"/><path d="M13 15h4"/><path d="M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"/><path d="M22 22l-3 -3"/><path d="M6 18h-1a2 2 0 0 1 -2 -2v-1"/><path d="M3 11v-1"/><path d="M3 6v-1a2 2 0 0 1 2 -2h1"/><path d="M10 3h1"/><path d="M15 3h1a2 2 0 0 1 2 2v1"/>'},e)}function ki(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-in",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M7 10l6 0"/><path d="M10 7l0 6"/><path d="M21 21l-6 -6"/>'},e)}function bi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-out",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M7 10l6 0"/><path d="M21 21l-6 -6"/>'},e)}function xi(e){return k({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-reset",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 21l-6 -6"/><path d="M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"/><path d="M3 4v4h4"/>'},e)}const Ci=6,_i=250,Mi=16,Si=660,Ei=window.setTimeout,Di=window.clearTimeout,En=e=>({shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey}),kt=e=>{e.preventDefault(),e.stopPropagation()},he=(e,t)=>{const n={pointers:new Map,maxPointers:0,lastClick:{x:0,y:0,timestamp:0}},r=s=>{n.longPress&&n.longPress.id===s&&(Di(n.longPress.u),n.longPress=void 0),n.pointers.delete(s)},o={pointerenter:s=>{e.onEnter?.(s.pointerId)},pointercancel:s=>{r(s.pointerId),e.onCancel?.(s.pointerId)},pointerleave:s=>{r(s.pointerId),e.onLeave?.(s.pointerId)},pointerdown:s=>{kt(s);const i=s.pointerId;e.onDown?.({id:i,x:s.clientX,y:s.clientY,pointers:n.pointers.size,modifiers:En(s)}),s.target.releasePointerCapture(i),e.capture?s.currentTarget.setPointerCapture(i):s.currentTarget.releasePointerCapture(i);const l={id:i,x:s.clientX,y:s.clientY,moved:!1,timestamp:Date.now()};r(s.pointerId),n.pointers.set(i,l),n.maxPointers=Math.max(n.maxPointers,n.pointers.size),n.pointers.size===1&&(n.longPress={id:i,x:s.clientX,y:s.clientY,u:Ei(()=>{n.longPress&&n.pointers.size===1&&n.pointers.has(i)&&!n.pointers.get(i).moved&&(n.longPress=void 0,e.onLongPress?.({id:i,x:s.clientX,y:s.clientY}),n.pointers.delete(i))},Si)})},pointermove:s=>{kt(s);const i=s.pointerId;e.onMove?.({id:i,x:s.clientX,y:s.clientY});const l=n.pointers.get(i);if(!l)return;const a=s.clientX-l.x,d=s.clientY-l.y;if(!(!l.moved&&Te(a,d)<Ci)){if(e.onDrag){const u={id:i,x:s.clientX,y:s.clientY,ox:l.x,oy:l.y,dx:a,dy:d},[h,g]=n.pointers.keys();g&&(u.pivot=n.pointers.get(h===i?g:h)),e.onDrag(u)}l.moved=!0,l.x=s.clientX,l.y=s.clientY}},pointerup:s=>{kt(s);const i=s.pointerId,l=n.pointers.get(i),a={id:i,x:s.clientX,y:s.clientY,pointers:n.maxPointers,modifiers:En(s),dragged:n.pointers.get(i)?.moved};if(e.onUp?.(a),!l)return;r(s.pointerId);const d=Date.now();n.pointers.size===0&&(e.onClick?.(a),d-n.lastClick.timestamp<_i&&Te(a.x-n.lastClick.x,a.y-n.lastClick.y)<Mi**2&&e.onDoubleClick?.(a),n.lastClick={x:s.clientX,y:s.clientY,timestamp:d},n.maxPointers=0)}};for(const[s,i]of Object.entries(o))t.addEventListener(s,i,{passive:!1})},Ii=w('<div class="no-user-select hrm-pane abs-parent"><div class=hrm-view></div><div class=hrm-pane-controls>'),Ni=w("<button>"),Dn=e=>`translate(${e.x}px, ${e.y}px) scale(${e.z})`,Bi=e=>{let t,n;R(()=>{e.g.viewRef=t});const r=(i,l,a)=>e.g.transform[1](d=>({x:d.x*a+i,y:d.y*a+l,z:d.z*a})),o=1.1,s=[[c(ki,{}),()=>r((n?.offsetWidth??0)*(1-o)/2,(n?.offsetHeight??0)*(1-o)/2,o)],[c(bi,{}),()=>r((n?.offsetWidth??0)*(1-1/o)/2,(n?.offsetHeight??0)*(1-1/o)/2,1/o)],[c(xi,{}),()=>e.g.transform[1](()=>({x:0,y:0,z:1}))],[c($i,{}),()=>{const i=e.g.usedRect(),l=e.g.size();if(!i||!l)return;i.w=Math.max(i.w,1),i.h=Math.max(i.h,1);const a=l.w/i.w,d=l.h/i.h,u=Math.min(a,d),h=-i.x*u+(l.w-i.w*u)/2,g=-i.y*u+(l.h-i.h*u)/2;e.g.transform[1]({x:h,y:g,z:u})}]];return R(()=>{if(n){he({capture:!0,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onLongPress:e.onLongPress,onDrag:i=>{const l=i.pivot;if(l){const a=Math.sqrt(Te(l.x-i.x,l.y-i.y)/Te(l.x-i.ox,l.y-i.oy)),d=a-1;r((i.dx-(l.x+i.ox)*d)/2,(i.dy-(l.y+i.oy)*d)/2,a)}else r(i.dx,i.dy,1)}},n),n.addEventListener("wheel",i=>{if(n)if(i.preventDefault(),i.ctrlKey||i.metaKey){const l=Math.pow(2,i.deltaY/-100),a=n.getBoundingClientRect();r((i.clientX-a.left)*(1-l),(i.clientY-a.top)*(1-l),l)}else r(-i.deltaX,-i.deltaY,1)},{passive:!1});for(const[,i,l]of s)l&&he({capture:!0,onClick:i},l)}}),(()=>{const i=Ii(),l=i.firstChild,a=l.nextSibling,d=n;typeof d=="function"?O(d,i):n=i;const u=t;return typeof u=="function"?O(u,l):t=l,f(l,()=>e.children),f(a,c(V,{each:s,children:h=>(()=>{const g=Ni(),p=h[2];return typeof p=="function"?O(p,g):h[2]=g,f(g,()=>h[0]),g})()})),C(()=>Dn(e.g.transform[0]())!=null?l.style.setProperty("transform",Dn(e.g.transform[0]())):l.style.removeProperty("transform")),i})()},Ai=w("<div>"),Pi=e=>{const[t,n]=e.handleW;let r;return R(()=>{r&&(t(),n(o=>{let s,i;if(o.data.type===E.Source)s=o.data.color,i=e.g.nodeColorBd(s);else if(o.data.sourceID){const l=e.g.nodes().get(o.data.sourceID);if(l){const a=l[0]();s=a.color,o.data.sourceHandle!==void 0&&(s=a.handles[o.data.sourceHandle][0]().color??s),i=e.g.nodeColorBg(s)}}return s===o.color&&o.ref===r?o:{...o,ref:r,color:s,style:i}}))}),R(()=>{r&&he({capture:!1,onEnter:o=>{const s=e.g.connectingEdge[0]();s&&s.pointerID===o&&t().data.type===E.Source!==s.isSource&&e.g.setTempConnectingEnd(e.nodeID,r,e.handleID)},onLeave:()=>{e.g.connectingEnd[0]().ref===r&&e.g.unsetTempConnectingEnd(r)},onDown:o=>{e.g.addConnectingEnd(o.id,e.nodeID,e.handleID,e.g.viewPos(o.x,o.y))},onUp:()=>{e.g.finConnecting(e.nodeID,e.handleID)},onDoubleClick:()=>{e.g.deleteEdge(e.nodeID,e.handleID)}},r)}),(()=>{const o=Ai(),s=r;return typeof s=="function"?O(s,o):r=o,f(o,()=>t().name),C(i=>{const l=`hrm-node-item hrm-handle hrm-pill ${t().style?"":Gs}`,a=t().style;return l!==i._v$&&F(o,i._v$=l),i._v$2=He(o,a,i._v$2),i},{_v$:void 0,_v$2:void 0}),o})()},Ti=new Map([["_|_","âŠ¥"],["-:","âˆ¹"],["-<","â¤™"],["-<<","â¤›"],["->","â†’"],["->>","â† "],["->|","â‡¥"],["-|","âŠ£"],["-|","âŠ£"],["::","âˆ·"],["::=","â©´"],[":=","â‰”"],["!=","â‰ "],["!|=","âŠ­"],["!||-","âŠ®"],["!||=","âŠ¯"],["!~=","â‰„"],["!~~","â‰‰"],["<-->","âŸ·"],["<-","â†"],["<-<","â†¢"],["<->","â†”"],["<-|","â†¤"],["<.>","âŠ™"],["<*>","âŠ—"],["<+>","âŠ•"],["<<-","â†ž"],["<<","â‰ª"],["<=","â‰¤"],["<==>","âŸº"],["<=>","â‡”"],["<=|","â¤†"],["<|","â—"],["<~","â‡œ"],["=:","â‰•"],["==>","âŸ¹"],["=>","â‡’"],[">-","â¤š"],[">=","â‰¥"],[">>-","â¤œ"],[">>","â‰«"],["|-->","âŸ¼"],["|-","âŠ¢"],["|->","â†¦"],["|<-","â‡¤"],["|=","âŠ¨"],["|=>","â¤‡"],["|>","â–·"],["||-","âŠ©"],["||=","âŠ«"],["|||-","âŠª"],["~=","â‰ƒ"],["~>","â‡"],["~~","â‰ˆ"]]),Li=e=>Ti.get(e)||e,Oi=w("<div class=hrm-node-name-module>"),Hi=w("<div class=hrm-node-name><div class=hrm-node-name-name>"),zi=w("<div class=hrm-node-mark>"),Ri=w("<div class=hrm-node-json>"),Fi=w('<pre class="hrm-node-comment no-user-select no-pointer-events">'),ji=w('<div class="hrm-node-item hrm-node-body">'),In=e=>(()=>{const t=Hi(),n=t.firstChild;return f(n,()=>Li(e.name.name)),f(t,c(P,{get when(){return e.name.module&&e.name.module!=="_"},get children(){const r=Oi();return f(r,()=>"@"+e.name.module),r}}),null),C(()=>n.classList.toggle("hrm-node-name-builtin",e.name.module==="_")),t})(),bt=e=>(()=>{const t=zi();return f(t,()=>e.mark),t})(),Ui=e=>{const t={[b.Alpha]:()=>(()=>{const n=Ri();return f(n,()=>le(e.data.val)),n})(),[b.Beta]:()=>c(In,{get name(){return e.data.name}}),[b.Delta]:()=>[c(bt,{mark:Xs}),c(P,{get when(){return e.data.comment},get children(){const n=Fi();return f(n,()=>e.data.comment),n}})],[b.Lambda]:()=>c(bt,{mark:Js}),[b.Pi]:()=>[c(bt,{mark:Zs}),c(In,{get name(){return e.data.name}})]};return(()=>{const n=ji();return f(n,c(ze,{get component(){return t[e.data.type]}})),n})()},Ki=w("<div> + "),Nn=e=>{let t;const[n,r]=v(!1);return R(()=>{t&&he({onEnter:o=>{r(!0);const s=e.g.connectingEdge[0]();s&&s.pointerID===o&&s.isSource&&e.g.setTempConnectingEnd(e.nodeID,t,e.handleID)},onLeave:()=>{r(!1),e.g.connectingEnd[0]().ref===t&&e.g.unsetTempConnectingEnd(t)},onUp:()=>{e.g.finConnecting(e.nodeID,e.handleID)}},t)}),(()=>{const o=Ki(),s=t;return typeof s=="function"?O(s,o):t=o,C(()=>F(o,`hrm-node-item hrm-handle-new hrm-pill ${e.handleID<0?"lhs":"rhs"} ${n()?"opacity-100":""}`)),o})()},Vi=w("<div>"),Wi=w('<div class="hrm-node abs-lt hrm-pill no-user-select"><div class="hrm-node-row no-user-select">'),Yi=e=>{const[t,n]=v(!1),[r,o]=e.nodeW;console.log("[HrmNode] render");let s,i;R(()=>{if(!s)return;const d=s;o(u=>({...u,ref:d,size:{w:d.offsetWidth,h:d.offsetHeight},selected:!1})),he({capture:!0,onEnter:u=>{const h=e.g.connectingEdge[0]();h&&h.pointerID===u&&!h.isSource&&e.g.setTempConnectingEnd(e.id,s,void 0)},onLeave:()=>{e.g.connectingEnd[0]().ref===i&&e.g.unsetTempConnectingEnd(i)},onUp:u=>{e.g.connectingEdge[0]()&&e.g.addConnectingEnd(u.id,e.id,void 0,e.g.viewPos(u.x,u.y))},onClick:u=>{const h=u.modifiers.shift||u.modifiers.ctrl;!u.dragged&&(h||e.g.selectMode)&&e.g.selectOneNode(e.id,h)},onDrag:u=>{r().selected?e.g.translateSelectedNodes(u.dx,u.dy,e.g.transform[0]().z):e.g.translateOneNode(e.id,u.dx,u.dy,e.g.transform[0]().z)},onDoubleClick:()=>{setTimeout(()=>{e.g.editNode(e.id)},100)},onLongPress:()=>{e.g.selectOneNodeWithMode(e.id)}},s)}),R(()=>{i&&he({onEnter:()=>{n(!0)},onLeave:()=>{n(!1)},onDown:d=>{e.g.addConnectingEnd(d.id,e.id,void 0,e.g.viewPos(d.x,d.y))}},i)});const l=(d,u)=>c(Pi,{get g(){return e.g},get nodeID(){return e.id},get node(){return r()},get handleID(){return u()},handleW:d}),a=(d,u)=>l(d,()=>u()+r().handles.lhs);return(()=>{const d=Wi(),u=d.firstChild,h=s;return typeof h=="function"?O(h,d):s=d,f(d,c(P,{get when(){return Wo.has(r().data.type)},get children(){return c(Nn,{get g(){return e.g},get nodeID(){return e.id},handleID:-1/0,get node(){return r()}})}}),u),f(u,c(V,{get each(){return r().handles.slice(0,r().handles.lhs)},children:l}),null),f(u,c(Ui,{get data(){return r().data}}),null),f(u,c(V,{get each(){return r().handles.slice(r().handles.lhs)},children:a}),null),f(d,c(P,{get when(){return Yo.has(r().data.type)},get children(){return c(Nn,{get g(){return e.g},get nodeID(){return e.id},handleID:1/0,get node(){return r()}})}}),null),f(d,c(P,{get when(){return!Lt.has(r().data.type)},get children(){const g=Vi(),p=i;return typeof p=="function"?O(p,g):i=g,C(()=>F(g,`hrm-node-handle hrm-pill ${t()?"opacity-100":""}`)),g}}),null),C(g=>{const p=!!Lt.has(r().data.type),x=!!r().selected,Y={left:`${r().position.x}px`,top:`${r().position.y}px`,...e.g.nodeColorBd(r().color)};return p!==g._v$&&d.classList.toggle("hrm-node-root",g._v$=p),x!==g._v$2&&d.classList.toggle("selected",g._v$2=x),g._v$3=He(d,Y,g._v$3),g},{_v$:void 0,_v$2:void 0,_v$3:void 0}),d})()},Gi=w('<svg><path class="hrm-edge-path hrm-edge-path-bd"stroke-width=6px fill=transparent></svg>',!1,!0),qi=w("<svg><path class=hrm-edge-path stroke-width=3px fill=transparent></svg>",!1,!0),Xi=w("<svg><path class=cursor-pointer stroke-width=1rem fill=transparent></svg>",!1,!0),Ji=e=>{const[t,n]=v([]);console.log("[HrmEdge] render");let r;const[o]=e.nodeW,[s]=e.handleW;R(()=>{console.log("[HrmEdge] Effect (path)"),o();const l=s();if(l.data.type!==E.Sink)return"";const a=l.data.sourceID,d=l.data.sourceHandle;if(a===void 0)return"";const u=e.g.viewRectOf(a,d),h=e.g.viewRect(l.ref);if(!u||!h)return"";n(e.nodeID===a?[pn(u,h),pn(u,h)]:[Tt(u,h,.5),Tt(u,h,-.5)])}),R(()=>{if(r)return he({onDoubleClick:()=>{e.g.deleteEdge(e.nodeID,e.handleID)}},r)});const i=()=>{const l=s().color;return l?e.g.nodeColorStroke(l):{}};return[(()=>{const l=Gi();return C(()=>ee(l,"d",t()[1])),l})(),(()=>{const l=qi();return C(a=>{const d=i(),u=t()[0];return a._v$=He(l,d,a._v$),u!==a._v$2&&ee(l,"d",a._v$2=u),a},{_v$:void 0,_v$2:void 0}),l})(),(()=>{const l=Xi(),a=r;return typeof a=="function"?O(a,l):r=l,C(()=>ee(l,"d",t()[0])),l})()]},Zi=e=>{const[t]=e.handleW;return c(P,{get when(){return M(()=>t().data.type===E.Sink)()&&t().data.sourceID},get children(){return c(Ji,e)}})},Qi=e=>{const[t]=e.nodeW;return c(V,{get each(){return t().handles},children:(n,r)=>c(Zi,{get g(){return e.g},get nodeW(){return e.nodeW},handleW:n,get nodeID(){return e.id},get handleID(){return r()}})})},el=w('<svg class="hrm-edges no-user-select no-pointer-events">'),tl=e=>[c(V,{get each(){return[...e.g.nodes()]},children:([t,n])=>c(Yi,{get g(){return e.g},id:t,nodeW:n})}),(()=>{const t=el();return f(t,c(V,{get each(){return[...e.g.nodes()]},children:([n,r])=>c(Qi,{get g(){return e.g},id:n,nodeW:r})})),t})()];const nl=w('<svg class="hrm-edges no-user-select no-pointer-events"><path class="hrm-edge-path hrm-c-stroke-empty"stroke-width=2px fill=transparent>'),rl=w('<div class="hrm-editing-edge-handle no-pointer-events hrm-pill">'),ol=e=>{const t=()=>{const o=e.g.connectingEdge[0]();return o?e.g.viewRectOf(o.nodeID,o.handleID):void 0},n=()=>{const o=e.g.connectingEdge[0]();if(!o)return;const s=e.g.connectingEnd[0](),i=e.g.nodes().get(o.nodeID),l=e.g.viewRectOf(o.nodeID,o.handleID);if(!i||!l)return;const a=e.g.viewRect(s.ref);if(a)return Tt(l,a,0)},r=()=>{const o=t();if(o)return{visibility:"visible",left:`${o.x}px`,top:`${o.y}px`,width:`${o.w}px`,height:`${o.h}px`}};return[(()=>{const o=nl(),s=o.firstChild;return C(()=>ee(s,"d",n())),o})(),(()=>{const o=rl();return C(s=>He(o,r(),s)),o})()]},sl=w('<div class="hrm-container abs-parent"tabindex=0>'),il=e=>{let t;R(()=>{console.log("Update rootRef",t),e.state.rootRef=t});const n=()=>{e.state.rootRef&&(e.state.rootRef.scrollLeft!=0||e.state.rootRef.scrollTop!=0)&&e.state.rootRef.scrollTo(0,0)},r=s=>{if(s.target!==e.state.rootRef)return;const i=Po(s);console.log(i),e.state.handleKey(i)},o=s=>{s.currentTarget.focus()};return(()=>{const s=sl();s.addEventListener("pointerenter",o),s.$$keydown=r,s.addEventListener("scroll",n);const i=t;return typeof i=="function"?O(i,s):t=s,f(s,c(Bi,{get g(){return e.state},onClick:()=>e.state.deselectAll(),onDoubleClick:l=>{const a=e.state.viewPos(l.x,l.y),d=e.state.addEmptyNode(a);e.state.editNode(d)},onLongPress:()=>{at("[Hrm] Long press")},get children(){return[c(tl,{get g(){return e.state}}),c(ol,{get g(){return e.state}})]}})),s})()};J(["keydown"]);const ll=(e,t,n)=>.299*e+.587*t+.114*n,xt=(e,t,n)=>{n<0&&(n+=1),n>1&&(n-=1);let r;return n<1/2?(r=t,n<1/6&&(r=e+(t-e)*6*n)):(r=e,n<2/3&&(r=e+(t-e)*(2/3-n)*6)),Math.round(r*255)},cl=(e,t,n)=>{if(t===0)return[n,n,n];const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;return[xt(o,r,e+1/3),xt(o,r,e),xt(o,r,e-1/3)]},Ct=(e,t,n)=>`hsl(${e}, ${t*100}%, ${n*100}%)`,Bn=e=>v({name:e,data:{type:E.Source,color:hr()}}),ce=(e,t)=>v({name:e,data:{type:E.Sink,sourceID:t?.id,sourceHandle:t?.handle}}),al=e=>{let t=0,n;switch(e.x.type){case b.Alpha:n=[ce(Mn,e.x.pat)],t=1;break;case b.Beta:n=e.x.args.map((r,o)=>ce(String(o),r)),t=Hs(e.x.lhs,0,e.x.args.length);break;case b.Delta:n=[ce(_n,e.x.val)];break;case b.Lambda:t=1+e.x.params.length,n=[ce(qs,e.x.fallback),...e.x.params.map(r=>Bn(r)),ce(_n,e.x.ret)];break;case b.Pi:n=[ce(Mn,e.x.pat)];for(let r=0;r<e.x.elems;r++)n.push(Bn(String(r+1)));t=1;break}return n.lhs=t,n},rt=e=>v({color:hr(),data:e.x,handles:al(e),position:e.pos,size:{w:0,h:0},selected:!1}),Ge=e=>{Ys();const t=new Map;for(const n of e)t.set(n.id,rt(n));return t},An=e=>{if(e.type===E.Sink&&e.sourceID)return{id:e.sourceID,handle:e.sourceHandle}},dl=e=>{const t=n=>An(e.handles[n][0]().data);switch(e.data.type){case b.Alpha:return{type:b.Alpha,val:e.data.val,pat:t(0)};case b.Beta:return{type:b.Beta,name:e.data.name,lhs:e.handles.lhs,args:e.handles.reduce((n,r)=>{const o=An(r[0]().data);return o&&n.push(o),n},[])};case b.Delta:return{type:b.Delta,comment:e.data.comment,val:t(0)};case b.Lambda:return{type:b.Lambda,fallback:t(0),params:e.handles.slice(1,-1).map(n=>n[0]().name),ret:t(e.handles.length-1)};case b.Pi:return{type:b.Pi,pat:t(0),name:e.data.name,elems:e.data.elems}}},pr=(e,t)=>({id:e,pos:Lo(t.position),x:dl(t)}),Ft=e=>{const t=[];for(const[n,r]of e.entries())t.push(pr(n,r[0]()));return t},Pn=e=>{switch(e.data.type){case b.Beta:for(let t=0;t<e.handles.length;t++)e.handles[t][1](n=>({...n,name:String(t)}));break;default:throw"Unimplemented"}},vr=e=>{const t=Ge(e.nodes),n={type:b.Delta,val:e.val,comment:e.comment},r=rt({id:"#def",pos:{...At},x:n});return t.set("#def",r),t},ul=e=>{const t=Ft(e),n=t.filter(s=>s.x.type!==b.Delta),r=t.find(s=>s.x.type===b.Delta),o={type:"value",nodes:n,comment:""};if(r){for(const s of n)s.pos.x-=r.pos.x,s.pos.y-=r.pos.y;o.comment=r.x.comment,o.val=r.x.val}return o},hl=(e,t)=>{const[n,r]=v(t);let o=t,s;return[()=>(n(),o),a=>{typeof a=="function"?o=a(o):o=a,s===void 0&&(s=window.setTimeout(()=>{s=void 0,r(o)},e))}]},fl=()=>new Map([["C-a","selectAll"],["M-a","selectAll"],["Backspace","deleteSelectedNodes"],["Delete","deleteSelectedNodes"],["a","addEmptyNode"],["C-=","zoomIn"],["C--","zoomOut"]]);class $r{path;name;nodes;setNodes;transform;rootRef;viewRef;selectedNodes;connectingEdge;connectingEnd;history;historyIndex;selectMode=!1;keymap=new Map;onEditNode;constructor(t,n,r){const[o,s]=v(r,{equals:!1});this.path=t,this.name=n,this.nodes=o,this.setNodes=s,this.selectedNodes=v(0),this.connectingEdge=v(),this.connectingEnd=v({pos:At}),this.transform=hl(16,{x:0,y:0,z:1}),this.history=[Ft(this.nodes())],this.historyIndex=0,this.keymap=fl()}thaw(t){this.setNodes(Ge(t)),this.history=[t],this.historyIndex=0}freeze(){return Ft(this.nodes())}getSL(){const t=getComputedStyle(document.documentElement),n=Number(t.getPropertyValue("--hrm-node-saturate")),r=Number(t.getPropertyValue("--hrm-node-lightness"));return[n,r]}nodeColorBg(t){const[n,r]=this.getSL(),o=ll(...cl(t,n,r))>192?"#000":"#fff",s=Ct(t,n,r);return{color:o,"background-color":s,"border-color":s}}nodeColorBd(t){const[n,r]=this.getSL();return{"border-color":Ct(t,n,r)}}nodeColorStroke(t){const[n,r]=this.getSL();return{stroke:Ct(t,n,r)}}saveHistory(){this.historyIndex++,this.history.length>this.historyIndex&&(this.history=this.history.slice(0,this.historyIndex)),this.history.push(this.freeze())}undo(){this.historyIndex>0&&this.setNodes(Ge(this.history[--this.historyIndex]))}redo(){this.historyIndex<this.history.length-1&&this.setNodes(Ge(this.history[++this.historyIndex]))}size(){if(!this.rootRef)return;const t=this.rootRef.getBoundingClientRect();return{w:t.width,h:t.height}}viewPos(t,n){if(!this.viewRef)return;const r=this.viewRef.getBoundingClientRect(),o=A(this.transform[0]);return console.log(r,o,t,n),{x:(t-r.left)/o.z,y:(n-r.top)/o.z}}viewRect(t){if(!t||!this.viewRef)return;const n=this.viewRef.getBoundingClientRect(),r=t.getBoundingClientRect(),o=A(this.transform[0]);return{x:(r.left-n.left)/o.z,y:(r.top-n.top)/o.z,w:r.width/o.z,h:r.height/o.z}}fitTransformFor(t){if(!t)return;const n=t.getBoundingClientRect(),r=this.rootRef.getBoundingClientRect();console.log(r);let o=0,s=0;n.right+o>r.right&&(o=r.right-n.right),n.left+o<r.left&&(o=r.left-n.left),n.bottom+s>r.bottom&&(s=r.bottom-n.bottom),n.top+s<r.top&&(s=r.top-n.top),this.transform[1](i=>({...i,x:i.x+o,y:i.y+s}))}usedRect(){const t={x:0,y:0,w:0,h:0};for(const[,n]of this.nodes()){const r=n[0](),o=r.position,s=r.size;t.x>o.x&&(t.w+=t.x-o.x,t.x=o.x),t.y>o.y&&(t.h+=t.y-o.y,t.y=o.y),t.w=Math.max(t.w,o.x+s.w-t.x),t.h=Math.max(t.h,o.y+s.h-t.y)}return t}viewRectOf(t,n){const r=this.nodes().get(t);if(!r)return;const o=r[0](),s=n===void 0?o.ref:o.handles[n][0]().ref;if(s)return this.viewRect(s)}addEmptyNode(t){if(!t){const l=this.transform[0](),a=this.rootRef;if(!a)t={x:0,y:0};else{const d=a.getBoundingClientRect();t={x:(d.width/2-l.x)/l.z,y:(d.height/2-l.y)/l.z}}}const n=Ro(),r=[],o=this.connectingEdge[0]();if(o)if(o.isSource)r.push({id:o.nodeID,handle:o.handleID});else{const l=this.nodes().get(o.nodeID);l&&l[0]().handles[o.handleID][1](d=>({...d,data:{type:E.Sink,sourceID:n}}))}this.connectingEdge[1](void 0);const s={type:b.Beta,name:{name:"<|",module:"_"},lhs:r.length,args:r},i={id:n,pos:t,x:s};return this.setNodes(l=>(l.set(i.id,rt(i)),l)),this.saveHistory(),i.id}translateOneNode(t,n,r,o){const s=this.nodes().get(t);s&&s[1](i=>({...i,position:{x:i.position.x+n/o,y:i.position.y+r/o}}))}translateSelectedNodes(t,n,r){for(const[,o]of this.nodes())o[1](s=>s.selected?{...s,position:{x:s.position.x+t/r,y:s.position.y+n/r}}:s)}selectAll(){K(()=>{const t=this.nodes();for(const[,n]of t)n[1](r=>r.selected?r:{...r,selected:!0});this.selectedNodes[1](t.size)})}deselectAll(){K(()=>{for(const[,t]of this.nodes())t[1](n=>n.selected?{...n,selected:!1}:n);this.selectedNodes[1](0)})}selectOneNode(t,n){n||=this.selectMode,K(()=>{let r=!1;this.connectingEdge[1](void 0);for(const[o,s]of this.nodes())o===t?(r=!s[0]().selected,s[1](i=>({...i,selected:!i.selected}))):n||s[1](i=>i.selected?{...i,selected:!1}:i);this.selectedNodes[1](o=>n?r?o+1:o-1:r?1:0)})}selectOneNodeWithMode(t,n){this.selectOneNode(t,n)}deleteSelectedNodes(){this.setNodes(t=>{const n=new Set;for(const[r,o]of t){const s=o[0]();s.selected&&!Vo.has(s.data.type)&&n.add(r)}this.selectedNodes[1](r=>r-n.size);for(const[r,o]of t)if(n.has(r))t.delete(r);else{const i=o[0]().handles;for(const[,l]of i)l(a=>{if(a.data.type===E.Sink){const d=a.data.sourceID;if(d&&n.has(d))return{...a,data:{type:E.Sink}}}return a})}return t}),this.saveHistory()}deleteEdge(t,n){const r=this.nodes().get(t);r&&r[0]().handles[n][1](o=>o.data.type!==E.Sink?o:{...o,data:{type:E.Sink}})}resetConnectingState(){K(()=>{this.connectingEdge[1](void 0),this.connectingEnd[1]({pos:At})})}setTempConnectingEnd(t,n,r){K(()=>{const o=this.connectingEdge[0]();o&&(o.nodeID!==t||o.handleID!==r)&&this.connectingEnd[1](s=>({...s,ref:n}))})}unsetTempConnectingEnd(t){K(()=>{this.connectingEdge[0]()&&this.connectingEnd[1](r=>r.ref===t?{...r,ref:void 0}:r)})}finConnecting(t,n){const r=this.connectingEdge[0]();r&&(r.nodeID!==t||r.handleID!==n)&&(r.isSource&&n!==void 0?this.connectEdge(t,n,r.nodeID,r.handleID):!r.isSource&&r.handleID!==void 0&&this.connectEdge(r.nodeID,r.handleID,t,n))}makeLeftHandle(t){const n=this.nodes().get(t);return n&&(n[1](r=>(r.handles.unshift(ce("")),r.handles.lhs++,{...r})),Pn(n[0]())),0}makeRightHandle(t){const n=this.nodes().get(t);if(!n)return 0;const r=n[0](),o=r.handles.length;return n[1](s=>(s.handles.push(ce("")),{...s})),Pn(r),o}connectEdge(t,n,r,o){K(()=>{n===-1/0&&(n=this.makeLeftHandle(t)),n===1/0&&(n=this.makeRightHandle(t));const s=this.nodes(),i=s.get(t),l=s.get(r);if(!i||!l)return;if(o===void 0){if(Lt.has(l[0]().data.type))return}else{const d=l[0]().handles[o];if(!d||d[0]().data.type!==E.Source)return}i[0]().handles[n][1](d=>d.data.type!==E.Sink?d:{...d,data:{type:E.Sink,sourceID:r,sourceHandle:o}}),this.resetConnectingState(),this.saveHistory()})}updateConnectingEnd(t){this.connectingEnd[1](n=>({...n,pos:t}))}addConnectingEnd(t,n,r,o){this.deselectAll();const s=this.nodes().get(n);if(!s)return;const[i]=s;let l=!0;if(r!==void 0){const d=i().handles[r];if(!d)return;l=d[0]().data.type===E.Source}const a=this.connectingEdge[0]();if(a&&a.nodeID===n&&a.handleID===r){this.resetConnectingState();return}if(a&&!l===a.isSource)return l?this.connectEdge(a.nodeID,a.handleID,n,r):this.connectEdge(n,r,a.nodeID,a.handleID);K(()=>{this.connectingEdge[1]({pointerID:t,isSource:l,nodeID:n,handleID:r}),o&&this.connectingEnd[1](d=>({...d,pos:o}))})}editNode(t){this.onEditNode?.(t)}getNodeStringData(t){const n=this.nodes().get(t);if(!n)return"";const r=n[0]();return xs(r.data)}applyEditNode(t,n){K(()=>{const r=this.nodes().get(t);if(!r)return;const o={...pr(t,r[0]()),x:Cs(n)},s=rt(o),i=this.nodes().get(t);if(!i)return;s[1](d=>({...d,color:i[0]().color}));const l=[];for(const d of i?i[0]().handles:[]){const u=d[0]();u.data.type===E.Sink&&u.data.sourceID&&l.push(u.data)}const a=s[0]().handles;for(let d=0;d<a.length;d++)a[d][1](u=>{if(u.data.type!==E.Sink)return u;const h={type:E.Sink},g=l[d];return g&&(h.sourceID=g.sourceID,h.sourceHandle=g.sourceHandle),{...u,data:h}});this.setNodes(d=>(d.set(t,s),d))})}handleKey(t){const n=this.keymap.get(t);n&&n in this&&this[n]()}zoomIn(){this.transform[1](t=>({...t,z:t.z*1.1}))}zoomOut(){this.transform[1](t=>({...t,z:t.z/1.1}))}resetZoom(){this.transform[1](()=>({x:0,y:0,z:1}))}}const gl=w('<div class="editor-root-hrm abs-parent">'),ml=e=>(()=>{const t=gl();return f(t,c(il,{get state(){return e.state}})),t})(),wl=w("<div class=dropdown><button></button><div>"),yl=w("<hr>"),on=e=>{const[t,n]=v(!1);return(()=>{const r=wl(),o=r.firstChild,s=o.nextSibling;return o.$$click=()=>{n(i=>!i)},f(o,()=>e.children),s.$$click=()=>{n(!1)},f(s,c(V,{get each(){return e.list},children:(i,l)=>[c(P,{get when(){return l()>0},get children(){return yl()}}),c(V,{each:i,children:a=>a})]})),C(i=>{const l=`btn btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`,a=`dropdown-menu ${t()?"visible":"hidden"}`;return l!==i._v$&&F(o,i._v$=l),a!==i._v$2&&F(s,i._v$2=a),i},{_v$:void 0,_v$2:void 0}),r})()};J(["click"]);const pl=w("<div><div class=m-modal-content>");let fe=function(e){return e[e.Center=0]="Center",e[e.Bottom=1]="Bottom",e}({});const vl={[fe.Center]:"m-modal-center",[fe.Bottom]:"m-modal-bottom"},Fe=e=>{let t;const n=r=>{e.onClose&&r.target===r.currentTarget&&e.onClose()};return Wt(()=>{setTimeout(()=>{t?.classList.add("show")},100)}),(()=>{const r=pl(),o=r.firstChild;r.$$click=n;const s=t;return typeof s=="function"?O(s,r):t=r,f(o,()=>e.children),C(i=>{const l=`m-modal ${vl[e.position??fe.Center]} ${e.transition?"transition":""}`,a=!!e.transition,d=!!e.fullHeight;return l!==i._v$&&F(r,i._v$=l),a!==i._v$2&&o.classList.toggle("transition",i._v$2=a),d!==i._v$3&&o.classList.toggle("h-100",i._v$3=d),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()};J(["click"]);const _t=w("<h3> <!> "),$l=e=>c(Fe,{get position(){return fe.Bottom},transition:!0,get onClose(){return e.onClose},get children(){return[(()=>{const t=_t(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.layout"),r),t})(),c($,{get color(){return y.primary},get children(){return[M(()=>m("graphTools.tool.layoutDefault"))," "]}}),c($,{get color(){return y.secondary},get children(){return[M(()=>m("graphTools.tool.layoutLinear"))," "]}}),(()=>{const t=_t(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.optimization"),r),t})(),c($,{get color(){return y.warning},get children(){return[M(()=>m("graphTools.tool.selectUnreachables"))," "]}}),(()=>{const t=_t(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.validate"),r),t})(),c($,{get color(){return y.danger},get children(){return[M(()=>m("graphTools.tool.validateGraph"))," "]}})]}});var _=(e=>(e[e.NotFound=0]="NotFound",e[e.File=1]="File",e[e.Directory=2]="Directory",e))(_||{});const Tn={0:"NotFound",1:"File",2:"Directory"},kl={type:0,path:"",size:0,lastModified:new Date};class bl extends Error{constructor(t,n,r){super(`Storage item type mismatch: ${t}, (${n.map(o=>Tn[o]).join(", ")}) !== ${Tn[r]}`)}}const ve=(e,t,n)=>{if(!t.includes(n))throw new bl(e,t,n)},xl="kitl-idbfs",Cl=1,jt="meta",Ut="data",_l={path:"",type:_.NotFound,size:0,lastModified:0},Ml=["get","getAll","put","delete","clear"],Ln=(e,t)=>Object.fromEntries(Ml.map(n=>[n,(...r)=>new Promise((o,s)=>{const i=e.objectStore(t)[n](...r);i.onsuccess=()=>o(i.result),i.onerror=()=>s(i.error)})])),te=e=>{const[t,n]=Qt(e);if(!Is(n))throw new Error("Path must be absolute");return[t,n]},Sl=e=>{if(!e.readwrite)throw new Error("Failed to process: IDBFS is created as readonly mode.")},Ee=async(e,t)=>{const[n]=te(t);try{return await e.meta.get(n)}catch{return _l}},pe=async(e,t,n,r)=>{console.log("rawWrite",n,t,r.byteLength),await e.meta.put({path:n,type:t,size:r.byteLength,lastModified:Date.now()}),await e.data.put({path:n,data:r})},sn=async e=>{await e.meta.clear(),await e.data.clear(),await pe(e,_.Directory,"/",Le(""))},ut=async(e,t)=>{try{return(await Ee(e,t)).type}catch{return _.NotFound}},El=async(e,t)=>{Sl(e);const[,n]=te(t);let r=n.length;for(;r>=1;--r){const i=Pe(n.slice(0,r)),l=await ut(e,i);if(l===_.Directory)break;ve(i,[_.NotFound],l)}const o=Pe(n.slice(0,r)),s=await ht(e,o);for(s.push(n[r]),await pe(e,_.Directory,o,Le(s.join(`
`))),++r;r<=n.length;++r){const i=Pe(n.slice(0,r)),l=r<n.length?Le(n[r]):new Uint8Array(0);await pe(e,_.Directory,i,l)}},ht=async(e,t)=>{const[n]=te(t),r=await Ee(e,n);ve(n,[_.Directory],r.type);const o=await e.data.get(n);return Ts(o.data).split(`
`).map(s=>s.trim()).filter(s=>s.length>0)},Dl=async(e,t)=>{const n=await ht(e,t),r=[];for(const o of n){const[s]=Qt(`${t}/${o}`),i=await Ee(e,s);r.push({...i,lastModified:new Date(i.lastModified)})}return r},kr=async(e,t,n)=>{const[r]=te(t),o=await Ee(e,r);ve(r,[_.Directory],o.type);const s=new Set(await ht(e,r));s.add(n),await pe(e,_.Directory,r,Le(Array.from(s).join(`
`)))},Mt=async(e,t,n)=>{const[r,o]=te(t),s=await ut(e,t);return ve(t,[_.File,_.NotFound],s),s===_.NotFound&&await kr(e,t+"/..",o[o.length-1]),await pe(e,_.File,r,n),await Ee(e,t)},St=async(e,t)=>{const[n]=te(t),r=await ut(e,n);return ve(n,[_.File],r),(await e.data.get(n)).data},br=async(e,t)=>{const[n]=te(t),r=n+"/";return(await e.meta.getAll()).map(s=>s.path).filter(s=>s===t||s.startsWith(r))},xr=async(e,t)=>{const[n,r]=te(t);if(n.length<=1)return await sn(e);const o=Pe(r.slice(0,r.length-1)),s=await e.meta.get(o);ve(n,[_.Directory],s.type),(await br(e,n)).forEach(l=>{e.meta.delete(l),e.data.delete(l)});const i=await ht(e,o);await pe(e,_.Directory,o,Le(i.filter(l=>l!==r[r.length-1]).join(`
`)))},Cr=async(e,t,n)=>{const[r]=te(t),[o]=te(n);if(o===r||o.startsWith(r+"/"))throw new Error("Cannot copy to a subdirectory");const s=(await br(e,r)).map(i=>i.slice(r.length));for(const i of s){const l=r+i,a=o+i,d=await e.meta.get(l),u=await e.data.get(l);await pe(e,d.type,a,u.data)}n!=="/"&&await kr(e,o+"/..",o.split("/").pop())},Il=async(e,t,n)=>{await Cr(e,t,n),await xr(e,t)},Nl=()=>new Promise((e,t)=>{const n=indexedDB.open(xl,Cl);n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error),n.onupgradeneeded=r=>{const o=n.result,s=i=>o.createObjectStore(i,{keyPath:"path"});r.oldVersion===0?(s(jt),s(Ut),e(o)):t(n.error)}}),G=async e=>{const t=await(await Nl()).transaction([jt,Ut],e?"readwrite":"readonly");return{readwrite:!!e,meta:Ln(t,jt),data:Ln(t,Ut)}},_r=async()=>{const e=await G(!0);try{const t=await ut(e,"/");ve("/",[_.Directory],t)}catch{console.warn("IDBFS is broken. Format it."),await sn(e)}};_r();const Et=e=>({...e,lastModified:new Date(e.lastModified)});class Bl{constructor(){_r()}ping(){return 1}execute(t){return""}getExecutionState(t){return{}}async format(){const t=await G(!0);return await sn(t)}async stat(t){const n=await G(!1);return Et(await Ee(n,t))}async mkdir(t){const n=await G(!0);await El(n,t)}async list(t){const n=await G(!1);return await Dl(n,t)}async read(t){const n=await G(!1);return await St(n,t)}async write(t,n){const r=await G(!0);return Et(await Mt(r,t,n))}async remove(t){const n=await G(!0);await xr(n,t)}async move(t,n){const r=await G(!0);await Il(r,t,n)}async copy(t,n){const r=await G(!0);await Cr(r,t,n)}async readJson(t,n){const r=await G(!1),o=await St(r,t);let i=JSON.parse(new TextDecoder().decode(o));for(const l of n)i=i[l];return i}async writeJson(t,n,r){let o;const s=await G(!0),i=n.length;if(i===0)o=await Mt(s,t,new TextEncoder().encode(JSON.stringify(r)));else{const l=await St(s,t),a=JSON.parse(new TextDecoder().decode(l));let d=a;for(let u=0;u<i-1;u++)d=d[n[u]];d[n[i-1]]=r,o=await Mt(s,t,new TextEncoder().encode(JSON.stringify(a)))}return Et(o)}}class Al{local;clients;constructor(){this.local=new Bl,this.clients=new Map([["local",this.local]])}parsePath(t){const[n,r]=en(t);return[this.clients.get(n),r]}async stat(t){const[n,r]=this.parsePath(t);return await n.stat(r)}async list(t){const[n,r]=this.parsePath(t);return await n.list(r)}async mkdir(t){const[n,r]=this.parsePath(t);return await n.mkdir(r)}async read(t){const[n,r]=this.parsePath(t);return await n.read(r)}async write(t,n){const[r,o]=this.parsePath(t);return await r.write(o,n)}async remove(t){const[n,r]=this.parsePath(t);return await n.remove(r)}async copy(t,n){const[r,o]=this.parsePath(t),[s,i]=this.parsePath(n);if(r===s)return await r.copy(o,i);switch((await r.stat(o)).type){case _.Directory:{await s.mkdir(i);const a=await r.list(o);for(const d of a){const u=ar(d.path);await this.copy(`${t}/${u}`,`${n}/${u}`)}}break;default:{const a=await r.read(o);await s.write(i,a)}}}async move(t,n){const[r,o]=this.parsePath(t),[s,i]=this.parsePath(n);if(r===s)return await r.move(o,i);this.copy(t,n),await r.remove(o)}async readJson(t,n){const[r,o]=this.parsePath(t);return await r.readJson(o,n)}async writeJson(t,n,r){const[o,s]=this.parsePath(t);return await o.writeJson(s,n,r)}}const H=new Al,Pl=1024*128,Mr=()=>({items:[],isCutted:!1}),Tl=e=>({path:v(e),storageItem:v(),data:v(),ls:v(),copyState:v(Mr()),uploads:v(new Set,{equals:!1})}),Ll=e=>{confirm(m("fileBrowser.prompt.resetLocal"))&&(H.local.format(),De(e,"local:/"))},Sr=async e=>{const t=e.path[0],n=await H.stat(t());e.storageItem[1](n)},Kt=async e=>{const t=e.path[0];if(e.storageItem[0]()?.type===_.Directory){const o=await H.list(t());o.sort((s,i)=>s.type===i.type?s.path.localeCompare(i.path):s.type===_.Directory?-1:1),K(()=>{e.ls[1](o),e.data[1](new Uint8Array)});return}const r=await H.read(t());K(()=>{e.data[1](r),e.ls[1]([])})},De=(e,t)=>{const[n,r]=cr(t);t=`${n}:${r}`,K(()=>{e.path[1](t),e.storageItem[1](void 0),e.data[1](void 0),e.ls[1](void 0)}),Sr(e).catch(()=>{console.warn("Failed to load meta ",t),e.storageItem[1](kl)})},Ol=e=>{const t=e.path[0]();De(e,t+"/..")},$e=e=>{const t=e.path[0]();De(e,t)},Hl=e=>{const t=e.storageItem[0]();return t&&t.size>Pl},zl=async(e,t)=>{const n=e.path[0];await H.mkdir(n()+"/"+t)},Rl=async(e,t)=>{const n=e.path[0];await H.write(n()+"/"+t,new Uint8Array)},ft=(e,t)=>{t=t??"new";const n=e.ls[0]();if(n===void 0)return t;const r=new Set(n.map(i=>Zt(i.path).pop()));let o=t,s=0;for(;r.has(o);)o=Bs(t,s++);return o},Fl=(e,t,n)=>{e.uploads[1](o=>o.add(t));const r=new FileReader;r.onload=()=>{H.write(t,new Uint8Array(r.result)).then(()=>{e.uploads[1](o=>(o.delete(t),De(e,e.path[0]()),se(`${m("fileBrowser.toast.uploadSuccess")}: ${t}`),o))}).catch(()=>{e.uploads[1](o=>(o.delete(t),o)),X(`${m("fileBrowser.toast.uploadError")}: ${t}`)})},r.onerror=()=>{e.uploads[1](o=>(o.delete(t),o)),alert(`${m("fileBrowser.toast.uploadReadError")}: ${t}`)},r.readAsArrayBuffer(n)},jl=(e,t,n)=>{e.ls[1](r=>r&&r.map(o=>(o.path===t&&(o.selected=n),o)))},ot=e=>{const t=e.path[0]().split(":")[0],n=e.ls[0]();return n?n.filter(r=>r.selected).map(r=>`${t}:${r.path}`):[]};class gt extends Error{constructor(){super("Nothing selected")}}const Er=(e,t)=>{if(ot(e).length===0)throw new gt;e.copyState[1]({items:ot(e),isCutted:t})},Ul=async e=>{const t=e.path[0];if(!e.storageItem[0]())return;const r=t(),o=new Set((e.ls[0]()??[]).map(i=>i.path.split("/").pop())),s=e.copyState[0]();for(const i of s.items){let l=i.split("/").pop();o.has(l)&&!confirm(m("fileBrowser.prompt.pasteOverwrite"))&&(l=ft(e,l));const a=r+"/"+l;console.log("Paste",i,a),await H[s.isCutted?"move":"copy"](i,a)}s.isCutted&&e.copyState[1](Mr())},Kl=async e=>{if(confirm(m("fileBrowser.prompt.deleteSelected")))for(const t of ot(e))await H.remove(t)},Vl=async(e,t)=>{await H.move(e,e+"/../"+t)},Wl=async e=>{const t=ot(e);if(t.length<1)throw new gt;for(const n of t){const r=n.split("/").pop();if(!r)return;const o=`${m("fileBrowser.prompt.renameSelected")}:
${n}`,s=prompt(o,r);if(!s)return;await Vl(n,s)}$e(e)},Dr=async(e,t)=>{const n=e.path[0](),r=e.storageItem[0]();if(!r)return;const o=await H.stat(n);o&&((r.lastModified<o.lastModified||r.size!==o.size)&&!confirm(m("fileBrowser.prompt.saveConflict"))||(await H.write(n,new TextEncoder().encode(t)),e.storageItem[1](await H.stat(n)),se(m("fileBrowser.toast.saved"))))},On=w("<a>&nbsp; "),Yl=e=>{const t=()=>[[(()=>{const o=On(),s=o.firstChild;return o.$$click=()=>$e(e.state),f(o,c(fi,{}),s),f(o,()=>m("menu.refresh"),null),o})()],[(()=>{const o=On(),s=o.firstChild;return o.$$click=()=>Ll(e.state),f(o,c(yi,{}),s),f(o,()=>m("fileBrowser.menu.formatLocalStorage"),null),o})()]];let n;const r=()=>{De(e.state,n.value)};return c(W,{class:"sticky-top shadow-1 mb-2",get children(){return[c(on,{get color(){return y.primary},get list(){return t()},get children(){return c(wr,{})}}),c($,{get color(){return y.secondary},onClick:()=>Ol(e.state),get children(){return c(ai,{})}}),c(ge,{ref(o){const s=n;typeof s=="function"?s(o):n=o},class:"flex-1",get value(){return e.state.path[0]()},onBlur:r,onKeyDown:o=>{o.key==="Enter"&&n.blur()}}),c($,{get color(){return y.danger},get onClick(){return e.state.onClose},get children(){return c(vi,{})}})]}})};J(["click"]);const Gl=w("<input type=file class=d-none>"),ql=e=>{let t,n;const r=i=>{n=i,typeof e.ref=="function"&&e.ref(i)},o=i=>{e.onFiles&&e.onFiles(i.target.files),t.value=n.value};return c(W,{get class(){return e.class},onDrop:i=>{i.preventDefault(),i.stopPropagation(),e.onFiles&&e.onFiles(i.dataTransfer.files)},get children(){return[c(ge,{class:"flex-1",ref(i){const l=t;typeof l=="function"?l(i):t=i},get placeholder(){return e.placeholder},onClick:()=>{n?.click()}}),(()=>{const i=Gl();return i.addEventListener("change",o),O(r,i),i})(),c($,{get color(){return y.primary},onClick:()=>{n?.click()},children:"..."})]}})},Ne=w("<a>&nbsp; "),Xl=w("<tr><td></td><td class=word-break-all><a>&nbsp;</a></td><td class=text-right><br>"),Jl=w("<table class=w-100><thead><tr><th></th><th></th><th class=text-right><br> </th></tr></thead><tbody>"),Zl=w("<div>"),Ve=e=>()=>{try{Er(e,!1),se(m("fileBrowser.toast.copySuccess"))}catch(t){if(!(t instanceof gt))throw t;X(m("fileBrowser.toast.nothingSelected"))}},Hn=e=>()=>{try{Er(e,!0),se(m("fileBrowser.toast.cutSuccess")),$e(e)}catch(t){if(!(t instanceof gt))throw t;X(m("fileBrowser.toast.nothingSelected"))}},Ql=e=>async()=>{try{await Ul(e),se(m("fileBrowser.toast.pasteSuccess"))}catch(t){X(m("fileBrowser.toast.pasteError")),console.warn("Failed to paste files",t);return}$e(e)},ec=e=>async()=>{try{await Kl(e),se(m("fileBrowser.toast.deleteSuccess"))}catch{X(m("fileBrowser.toast.deleteError"))}$e(e)},tc=e=>async()=>{try{await Rl(e,ft(e)),se(m("fileBrowser.toast.newFileSuccess"))}catch(t){X(m("fileBrowser.toast.newFileError")),console.warn("Failed to create new file",t)}$e(e)},nc=e=>async()=>{try{await zl(e,ft(e)),se(m("fileBrowser.toast.newFolderSuccess"))}catch(t){X(m("fileBrowser.toast.newFolderError")),console.warn("Failed to create new file",t)}$e(e)},rc=e=>async t=>{for(const n of t){if(n===void 0)return;const r=ft(e,n.name),o=`${e.path[0]()}/${r}`;Fl(e,o,n),Vs(m("fileBrowser.toast.uploadingFiles"))}},oc=e=>c(W,{class:"my-1",get children(){return[c(on,{get color(){return y.primary},get list(){return[[(()=>{const t=Ne(),n=t.firstChild;return t.$$click=()=>Wl(e.state),f(t,c(rn,{}),n),f(t,()=>m("fileBrowser.menu.rename"),null),t})()],[(()=>{const t=Ne(),n=t.firstChild;return t.$$click=()=>Ve(e.state),f(t,c(Rt,{}),n),f(t,()=>m("menu.copy"),null),t})(),(()=>{const t=Ne(),n=t.firstChild;return t.$$click=()=>Hn(e.state),f(t,c(Sn,{}),n),f(t,()=>m("menu.cut"),null),t})(),(()=>{const t=Ne(),n=t.firstChild;return t.$$click=()=>Ve(e.state),f(t,c(zt,{}),n),f(t,()=>m("menu.paste"),null),t})()],[(()=>{const t=Ne(),n=t.firstChild;return t.$$click=()=>Ve(e.state),f(t,c(nt,{}),n),f(t,()=>m("menu.delete"),null),t})()]]},get children(){return c(wr,{})}}),c($,{get color(){return y.secondary},get onClick(){return Ql(e.state)},class:"flex-1",get children(){return c(zt,{})}}),c($,{get color(){return y.secondary},get onClick(){return Ve(e.state)},class:"flex-1",get children(){return c(Rt,{})}}),c($,{get color(){return y.warning},get onClick(){return Hn(e.state)},class:"flex-1",get children(){return c(Sn,{})}}),c($,{get color(){return y.danger},get onClick(){return ec(e.state)},class:"flex-1",get children(){return c(nt,{})}})]}}),sc=e=>[c(W,{class:"my-1",get children(){return[c($,{get color(){return y.primary},get onClick(){return nc(e.state)},class:"flex-1",get children(){return[c(ci,{}),"Â  ",M(()=>m("fileBrowser.folder"))]}}),c($,{get color(){return y.secondary},get onClick(){return tc(e.state)},class:"flex-1",get children(){return[c(ii,{}),"Â  ",M(()=>m("fileBrowser.file"))]}})]}}),c(ql,{get placeholder(){return m("fileBrowser.uploadPlaceholder")},get onFiles(){return rc(e.state)}})],ic=e=>{const t=()=>{const r=Zt(e.meta.path);return r[r.length-1]},n=()=>{switch(e.meta.type){case _.Directory:return c(di,{});case _.File:return c(li,{});default:return c(hi,{})}};return(()=>{const r=Xl(),o=r.firstChild,s=o.nextSibling,i=s.firstChild,l=i.firstChild,a=s.nextSibling,d=a.firstChild;return f(o,c(Io,{onChange:u=>{jl(e.state,e.meta.path,u)}})),i.$$click=()=>{De(e.state,`${e.host}:${e.meta.path}`)},f(i,n,l),f(i,t,null),f(a,()=>zs(e.meta.size),d),f(a,()=>Rs(e.meta.lastModified),null),r})()},lc=e=>{const t=()=>{const[r]=en(e.state.path[0]());return r},n=()=>{const r=e.state.ls[0]();return r===void 0||r.length===0};return R(()=>{Kt(e.state)}),[c(oc,e),c(P,{get when(){return!n()},get fallback(){return(()=>{const r=Zl();return f(r,()=>m("fileBrowser.directory.empty")),r})()},get children(){const r=Jl(),o=r.firstChild,s=o.firstChild,i=s.firstChild,l=i.nextSibling,a=l.nextSibling,d=a.firstChild;d.nextSibling;const u=o.nextSibling;return f(l,()=>m("fileBrowser.name")),f(a,()=>m("fileBrowser.size"),d),f(a,()=>m("fileBrowser.modified"),null),f(u,c(V,{get each(){return e.state.ls[0]()},children:h=>c(ic,{get state(){return e.state},get host(){return t()},meta:h})})),r}}),c(sc,{get state(){return e.state}})]};J(["click"]);const cc=w('<div class="m-2 text-center em-2">'),Ir=e=>(()=>{const t=cc();return f(t,c(er,{}),null),f(t,()=>e.children,null),t})(),ac=w("<img class=browser-image>"),dc=e=>{const[t,n]=v("");R(()=>{const o=e.state.data[0]();o!==void 0&&Ls(o).then(n)});const r=()=>e.state.data[0]()===void 0?"":`data:image;base64,${t()}`;return(()=>{const o=ac();return C(()=>ee(o,"src",r())),o})()},uc=w("<div class=code-area><textarea disabled></textarea><textarea>"),ln=(e,t)=>e.lastIndexOf(`
`,t)+1,cn=(e,t,n,r)=>e.slice(0,t)+r+e.slice(n),hc=(e,t,n)=>{const r=ln(e,t),o=e.slice(r,n).split(`
`);return[cn(e,r,n,"  "+o.join(`
  `)),t+2,n+2*o.length]},fc=(e,t,n)=>{const r=ln(e,t);let o=t,s=n;const i=e.slice(r,n).split(`
`).map((l,a)=>{const d=l.startsWith("  ")?2:l.startsWith("	")?1:0;return a===0&&(o-=d),s-=d,l.slice(d)});return[cn(e,r,n,i.join(`
`)),o,s]},Nr=e=>{let t,n;const r=l=>{t=l,typeof e.ref=="function"&&e.ref(l)},o=l=>{!e.autoresize||!n||(n.value=l.value,n.style.width=`${l.clientWidth}px`,l.style.height=n.scrollHeight+"px")};Wt(()=>{e.autoresize&&o(t),e.autofocus&&setTimeout(()=>{t?.focus()})});const s=l=>{if(e.onKeyDown&&e.onKeyDown(l))return;const a=l.currentTarget;switch(l.key){case"Tab":{l.preventDefault();const d=(l.shiftKey?fc:hc)(a.value,a.selectionStart,a.selectionEnd);a.value=d[0],a.selectionStart=d[1],a.selectionEnd=d[2]}break;case"Enter":{l.preventDefault();const d=l.currentTarget,u=d.selectionStart,h=d.value,g=/[ \t]*/y;g.lastIndex=ln(h,u-1);const p=g.exec(h)?.[0]??"";d.value=cn(h,u,d.selectionEnd,`
`+p),d.selectionStart=d.selectionEnd=u+1+p.length}break}o(l.target)},i=l=>{o(l.currentTarget)};return(()=>{const l=uc(),a=l.firstChild,d=a.nextSibling,u=n;return typeof u=="function"?O(u,a):n=a,d.$$keydown=s,Q(d,"input",e.onInput,!0),Q(d,"change",e.onChange),d.addEventListener("focus",i),O(r,d),C(h=>{const g=`form-control abs-lt ${e.class} code-area-hidden no-pointer-events no-user-select`,p=e.autofocus,x=e.disabled,Y=`form-control ${e.class}`,ne=e.placeholder;return g!==h._v$&&F(a,h._v$=g),p!==h._v$2&&(d.autofocus=h._v$2=p),x!==h._v$3&&(d.disabled=h._v$3=x),Y!==h._v$4&&F(d,h._v$4=Y),ne!==h._v$5&&ee(d,"placeholder",h._v$5=ne),h},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),C(()=>d.value=e.value),l})()};J(["input","keydown"]);const gc=e=>{const[t,n]=v(!1),r=()=>n(!0),o=()=>{t()&&(Dr(e.state,s.value),n(!1))};let s;const i=()=>{const a=e.state.data[0]();return a?new TextDecoder("utf-8").decode(a):"<NOT LOADED>"};return[c(()=>c(W,{class:"my-1",get children(){return c($,{get color(){return t()?y.primary:y.secondary},onClick:o,get disabled(){return!t()},class:"flex-1",get children(){return[c(pi,{}),"Â ",M(()=>m("menu.save"))]}})}}),{}),c(Nr,{ref(a){const d=s;typeof d=="function"?d(a):s=a},autoresize:!0,get value(){return i()},onChange:r,onInput:r})]},mc=w("<div>"),Oe=e=>(()=>{const t=mc();return f(t,()=>e.children),C(()=>F(t,`form-control btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`)),t})();function Br(e){const t=e.buttons.findIndex(s=>s.value===e.initialValue),[n,r]=v(t),o=s=>{r(s),e.onChange?.(e.buttons[s].value)};return c(W,{get class(){return e.class},get children(){return c(V,{get each(){return e.buttons},children:(s,i)=>c($,{get color(){return s.color},get outline(){return n()!==i()},get class(){return s.class},onClick:()=>o(i()),get children(){return s.label}})})}})}const wc=w("<hr>"),yc=w("<div>"),_e={value:y.primary,tag:y.success,type:y.warning,alias:y.secondary},je=(e,t)=>n=>({...n,defs:{...n.defs,[e]:t}}),zn=e=>t=>{const n={...t.defs};return delete n[e],{...t,defs:n}},Me=(e,t)=>K(()=>{t.forEach(n=>e.root[1](n)),e.modified[1](!0)}),Ar=(e,t)=>{if(t=or(t),!t)throw X(m("fileBrowser.toast.invalidDefCreationName")),new Error("Invalid name");if(e.root[0]().defs[t])throw X(m("fileBrowser.toast.defAlreadyExists")),new Error("Already exists");return t},pc=e=>{let t="",n=Ds({});const r=e.data[0]();if(r!==void 0&&r.byteLength!==0)try{const d=JSON.parse(new TextDecoder("utf-8").decode(r));n=Es(d)}catch{X(m("fileBrowser.toast.invalidKitl")),t=m("fileBrowser.toast.invalidKitl")}const[o,s]=v(!1),[i,l]=v(n),a=d=>(s(!0),l(d));return{modified:[o,s],errorMessage:v(t),root:[i,a]}},mt=e=>{const[t,n]=v(!1);let r;const[o,s]=v(!1),i=()=>Me(e.contents,[zn(e.name)]),l=()=>{const a=Ar(e.contents,r?.value??"");a!==e.name&&Me(e.contents,[je(a,e.contents.root[0]().defs[e.name]),zn(e.name)]),s(!1)};return[c(W,{class:"my-1",get children(){return[c(Oe,{get color(){return _e[e.type]},get children(){return m(`defType.${e.type}`)}}),c(ge,{class:"flex-1",get value(){return e.name},get readonly(){return!o()},ref(a){const d=r;typeof d=="function"?d(a):r=a},onKeyDown:a=>{a.key==="Enter"&&l()},onClick:()=>{s(!0)}}),c(P,{get when(){return e.label!==void 0},get children(){return c(Oe,{get color(){return y.secondary},get children(){return e.label}})}}),c(P,{get when(){return o()},get fallback(){return c($,{get color(){return y.danger},onClick:i,get children(){return c(nt,{})}})},get children(){return c($,{get color(){return y.primary},onClick:l,get children(){return c(dt,{})}})}}),c($,{get color(){return y.secondary},onClick:()=>e.onOpen?e.onOpen():n(a=>!a),get children(){return c(P,{get when(){return t()},get fallback(){return c(rn,{})},get children(){return c(ri,{})}})}})]}}),c(P,{get when(){return t()},get children(){return e.children}})]},vc=e=>c(mt,{type:"value",get name(){return e.name},get contents(){return e.contents},onOpen:async()=>{e.state.editValueDef&&(await e.state.editValueDef(e.state.path[0](),e.name),e.state.onClose?.())}}),Pr=e=>(e?.value??"").split(",").map(or).filter(t=>t),$c=e=>{const t=()=>e.def;let n;const r=()=>{const o=Pr(n);Me(e.contents,[je(e.name,{type:"tag",elems:o})])};return c(mt,{type:"tag",get name(){return e.name},get contents(){return e.contents},get label(){return""+t().elems.length},get children(){return c(W,{class:"ml-3 my-1",get children(){return[c(Oe,{get color(){return _e[e.def.type]},get children(){return c(nn,{})}}),c(ge,{class:"flex-1",get value(){return t().elems.join(",")},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),c($,{get color(){return y.primary},onClick:r,get children(){return c(dt,{})}})]}})}})},kc=e=>{const t=()=>e.def;let n;const r=()=>{const o=Pr(n);Me(e.contents,[je(e.name,{type:"type",unions:o})])};return c(mt,{type:"type",get name(){return e.name},get contents(){return e.contents},get label(){return""+t().unions.length},get children(){return c(W,{class:"ml-3 my-1",get children(){return[c(Oe,{get color(){return _e[e.def.type]},get children(){return c(nn,{})}}),c(ge,{class:"flex-1",get value(){return t().unions.join(",")},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),c($,{get color(){return y.primary},onClick:r,get children(){return c(dt,{})}})]}})}})},bc=e=>{const t=()=>e.def;let n;const r=()=>{const o=n?.value;if(!o){X(m("fileBrowser.toast.invalidDefCreationName"));return}Me(e.contents,[je(e.name,{type:"alias",origin:o})])};return c(mt,{type:"alias",get name(){return e.name},get contents(){return e.contents},get children(){return c(W,{class:"ml-3 my-1",get children(){return[c(Oe,{get color(){return _e[e.def.type]},get children(){return c(nn,{})}}),c(ge,{class:"flex-1",get value(){return t().origin},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),c($,{get color(){return y.primary},onClick:r,get children(){return c(dt,{})}})]}})}})},xc={type:kc,tag:$c,value:vc,alias:bc},Cc=e=>{const t=pc(e.state),n=()=>Object.entries(t.root[0]().defs).sort((s,i)=>s[0].localeCompare(i[0])),r=()=>{const s=async()=>{const i=JSON.stringify(t.root[0]());await Dr(e.state,i),t.modified[1](!1)};return c(W,{class:"my-1",get children(){return c($,{get color(){return t.modified[0]()?y.primary:y.secondary},class:"flex-1",onClick:s,get disabled(){return!t.modified[0]()},get children(){return[c(gr,{}),"Â ",M(()=>m("menu.save"))]}})}})},o=()=>{const s=Object.entries(_e).map((u,h)=>({color:u[1],label:m(`defType.${u[0]}`),value:h,class:"flex-1"}));let i;const[l,a]=v(0),d=()=>{const u=Ar(t,i?.value??"");Me(t,[je(u,Ms[Cn[l()]]())]),i.value=""};return["Creation",c(Br,{buttons:s,initialValue:0,onChange:u=>{a(u)}}),c(W,{class:"my-1",get children(){return[c(ge,{class:"flex-1",get placeholder(){return m("term.name")},ref(u){const h=i;typeof h=="function"?h(u):i=u},onKeyDown:u=>{u.key==="Enter"&&d()}}),c($,{get color(){return _e[Cn[l()]]},onClick:d,get children(){return c(mi,{})}})]}})]};return[c(P,{get when(){return t.errorMessage[0]()},get children(){return t.errorMessage[0]()}}),c(r,{}),c(o,{content:t}),wc(),(()=>{const s=yc();return f(s,c(V,{get each(){return n()},children:i=>c(ze,{get component(){return xc[i[1].type]},get state(){return e.state},contents:t,get name(){return i[0]},get def(){return i[1]}})})),s})()]},_c=w('<div class="w-100 text-center"><br>(<!> bytes).<br>'),Mc=new Map([[Ye.Unknown,gc],[Ye.Kitl,Cc],[Ye.Image,dc]]),Sc=e=>{const t=Hl(e.state),[n,r]=v(!t);t||Kt(e.state);const o=async()=>{r(!0),Kt(e.state)},s=()=>e.state.path[0](),i=()=>ar(s()),l=()=>Ns(i())[1],a=()=>Mc.get(Ps(l()));return c(Yt,{get children(){return[c(ae,{get when(){return!n()},get children(){const d=_c(),u=d.firstChild,h=u.nextSibling,g=h.nextSibling;return g.nextSibling.nextSibling,f(d,()=>m("fileBrowser.fileTooLarge.message"),u),f(d,()=>e.state.storageItem[0]().size,g),f(d,c($,{get color(){return y.primary},onClick:o,get children(){return m("fileBrowser.fileTooLarge.show")}}),null),f(d,c($,{get color(){return y.secondary},onClick:async()=>{const x=await H.read(s());Os(i(),x)},get children(){return[c(si,{}),"Â ",M(()=>m("fileBrowser.fileTooLarge.download"))]}}),null),d}}),c(ae,{get when(){return!e.state.data[0]()},get children(){return c(Ir,{children:"Loading data..."})}}),c(ae,{when:!0,get children(){return c(ze,{get component(){return a()},get state(){return e.state}})}})]}})},Ec=w("<div> Not Found "),Dc=new Map([[_.NotFound,()=>Ec()],[_.Directory,lc],[_.File,Sc]]),Ic=e=>c(P,{get when(){return e.state.storageItem[0]()!==void 0},get fallback(){return c(Ir,{children:"Loading metadata..."})},get children(){return c(ze,{get component(){return Dc.get(e.state.storageItem[0]().type)},get state(){return e.state}})}}),Nc=w("<h3> <!> <!> "),Bc=w("<ul>"),Ac=w("<li>"),Pc=e=>{const t=()=>e.state.uploads[0]();return c(P,{get when(){return t().size>0},get children(){return[(()=>{const n=Nc(),r=n.firstChild,o=r.nextSibling,s=o.nextSibling,i=s.nextSibling;return i.nextSibling,f(n,c(er,{}),o),f(n,()=>m("fileBrowser.title.uploading"),i),n})(),(()=>{const n=Bc();return f(n,c(V,{get each(){return Array.from(t())},children:r=>(()=>{const o=Ac();return f(o,r),o})()})),n})()]}})};const Tc=w("<div class=em-075>âš ï¸ "),Lc=e=>c(P,{get when(){return e.state.path[0]().startsWith("local:")},get children(){const t=Tc();return t.firstChild,f(t,()=>m("fileBrowser.warningLocal"),null),t}}),Oc=e=>{const t=Tl("local:/");return t.onClose=()=>e.onClose(),t.editValueDef=(n,r)=>e.editValueDef(n,r),Sr(t),[c(Yl,{state:t}),c(Lc,{state:t}),c(Pc,{state:t}),c(Ic,{state:t})]},Hc=e=>c(Fe,{get onClose(){return e.onClose},transition:!0,get position(){return fe.Bottom},get children(){return c(Oc,{get onClose(){return e.onClose},get editValueDef(){return e.editValueDef}})}});var st=function(e){return e[e.Launch=0]="Launch",e[e.History=1]="History",e}(st||{});const zc=[{color:y.primary,label:"Launch",value:st.Launch},{color:y.info,label:"History",value:st.History}],Rc=e=>c(Fe,{get position(){return fe.Bottom},transition:!0,get onClose(){return e.onClose},get children(){return[c(Br,{buttons:zc,get initialValue(){return st.Launch}}),"Hello"]}}),Fc=e=>{let t;return c(Fe,{get position(){return fe.Bottom},transition:!0,get onClose(){return e.onClose},get children(){return[c($,{get color(){return y.primary},class:"w-100",onClick:()=>e.onApply(t.value),get children(){return m("menu.apply")}}),c(Nr,{ref(n){const r=t;typeof r=="function"?r(n):t=n},get value(){return e.initValue},autoresize:!0})]}})},jc=e=>c(Fe,{get position(){return fe.Bottom},transition:!0,get onClose(){return e.onClose},get children(){return[c($,{get color(){return y.primary},class:"mb-1 w-100",onClick:()=>{zr(e.state)},get children(){return[c(yr,{}),"Â ",M(()=>m("mainEditor.menu.launch"))]}}),c($,{get color(){return y.info},class:"mb-1 w-100",onClick:()=>{Hr(e.state)},get children(){return[c(fr,{}),"Â ",M(()=>m("mainEditor.menu.graphTools"))]}}),c($,{get color(){return y.secondary},class:"mb-1 w-100",onClick:()=>{Or(e.state)},get children(){return[c(mr,{}),"Â ",M(()=>m("mainEditor.menu.browser"))]}})]}});let Z=function(e){return e[e.Meta=0]="Meta",e[e.Browser=1]="Browser",e[e.Launch=2]="Launch",e[e.GraphTools=3]="GraphTools",e[e.NodeEdit=4]="NodeEdit",e}({});const Uc={[Z.Meta]:jc,[Z.Launch]:Rc,[Z.GraphTools]:$l,[Z.Browser]:Hc,[Z.NodeEdit]:Fc};class Kc{constructor(){this.state=v()}close(){this.state[1](void 0)}open(t){this.state[1](t)}}const Vc=e=>{const t=()=>e.state.modalActions[0]().state[0]();return c(P,{get when(){return t()},get children(){return c(ze,Nt({get component(){return Uc[t().type]}},()=>t()))}})};var Vt=(e=>(e[e.Default=0]="Default",e[e.Edit=1]="Edit",e))(Vt||{});const Wc=()=>{const e=()=>({type:"value",nodes:[],comment:""});return new $r("local:/.scratch.kitl","default",vr(e()))},Tr=e=>{const t=A(e.hrm[0]);t.onEditNode=n=>Zc(e,n),R(()=>t.selectedNodes[0]()<1?Xc(e):Lr(e,1))},Yc=()=>{const e={toolSet:v(0),lastToolSet:0,hrm:v(Wc()),modalActions:v(new Kc)};return Tr(e),e},Gc=async(e,t,n)=>{const r=await H.readJson(t,lr(n)),o=Jt.value(r),s=new $r(t,n,vr(o));e.hrm[1](s),Tr(e)},qc=async e=>{const t=e.hrm[0](),n=ul(e.hrm[0]().nodes()),r=Jt.value(n);console.log(r),await H.writeJson(t.path,lr(t.name),r)},Lr=(e,t)=>{const n=A(e.toolSet[0]);n!==t&&(e.lastToolSet=n,e.toolSet[1](t),e.hrm[0]().selectMode=t===1)},Xc=e=>{e.toolSet[1](e.lastToolSet)},Jc=e=>{e.modalActions[0]().open({type:Z.Meta,state:e,onClose:()=>e.modalActions[0]().close()})},Or=e=>{e.modalActions[0]().open({type:Z.Browser,initialPath:"/",editValueDef:(t,n)=>Gc(e,t,n),onClose:()=>e.modalActions[0]().close()})},Hr=e=>{e.modalActions[0]().open({type:Z.GraphTools,state:e.hrm[0](),onClose:()=>e.modalActions[0]().close()})},Zc=(e,t)=>{const n=e.hrm[0]();e.modalActions[0]().open({type:Z.NodeEdit,id:t,initValue:n.getNodeStringData(t),onApply:r=>{n.applyEditNode(t,r),e.modalActions[0]().close()},onClose:()=>e.modalActions[0]().close()})},zr=e=>{e.modalActions[0]().open({type:Z.Launch,state:e.hrm[0](),onClose:()=>e.modalActions[0]().close()})},Be=w("<a> "),Qc=w("<div class=editor-root-hrm-header-container><div>"),Rr=()=>[{name:m("mainEditor.menu.defaultTools"),icon:c(wi,{})},{name:m("mainEditor.menu.selectTools"),icon:c(rn,{})}],ea=e=>Rr()[e].icon,ta=(e,t)=>{switch(e){case Vt.Default:return[c(ge,{class:"flex-1",readonly:!0,get value(){return`${t.name} @ ${t.path}`}}),c($,{get color(){return y.warning},onClick:()=>t.undo(),get children(){return c(ei,{})}}),c($,{get color(){return y.warning},onClick:()=>t.redo(),get children(){return c(ti,{})}})];case Vt.Edit:return[c($,{get color(){return y.warning},class:"flex-1",onClick:()=>t.deselectAll(),get children(){return c(oi,{})}}),c($,{get color(){return y.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return c(gi,{})}}),c($,{get color(){return y.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return c(Rt,{})}}),c($,{get color(){return y.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return c(zt,{})}}),c($,{get color(){return y.danger},class:"flex-1",onClick:()=>t.deleteSelectedNodes(),get children(){return c(ni,{})}})]}},na=e=>Rr().map((t,n)=>(()=>{const r=Be(),o=r.firstChild;return r.$$click=()=>{Lr(e,n)},f(r,()=>t.icon,o),f(r,()=>t.name,null),r})()),ra=e=>{const t=()=>[na(e.state),[(()=>{const n=Be(),r=n.firstChild;return n.$$click=async()=>{await qc(e.state),se(m("mainEditor.menu.saveSuccess"))},f(n,c(gr,{}),r),f(n,()=>m("menu.save"),null),n})()],[(()=>{const n=Be(),r=n.firstChild;return n.$$click=()=>Or(e.state),f(n,c(mr,{}),r),f(n,()=>m("mainEditor.menu.browser"),null),n})(),(()=>{const n=Be(),r=n.firstChild;return n.$$click=()=>zr(e.state),f(n,c(yr,{}),r),f(n,()=>m("mainEditor.menu.launch"),null),n})(),(()=>{const n=Be(),r=n.firstChild;return n.$$click=()=>Hr(e.state),f(n,c(fr,{}),r),f(n,()=>m("mainEditor.menu.graphTools"),null),n})()]];return(()=>{const n=Qc(),r=n.firstChild;return f(n,c(W,{class:"editor-root-hrm-header shadow-2",get children(){return[c(on,{get color(){return y.primary},get list(){return t()},get children(){return ea(e.state.toolSet[0]())}}),M(()=>ta(e.state.toolSet[0](),e.state.hrm[0]()))]}}),r),f(r,c($,{get color(){return y.primary},outline:!0,small:!0,onClick:()=>alert("unimpl"),children:"Test"})),n})()};J(["click"]);const oa=e=>{let t;const n=()=>e.state.hrm[0](),r=()=>n().selectedNodes[0]()>0;return Wt(()=>{t&&he({onClick:()=>{if(r())n().deleteSelectedNodes();else{const o=n().addEmptyNode();n().editNode(o)}},onLongPress:()=>{Jc(e.state)}},t)}),c($,{ref(o){const s=t;typeof s=="function"?s(o):t=o},class:"hrm-fab shadow-2	",get color(){return r()?y.danger:y.primary},get children(){return c(Yt,{get children(){return[c(ae,{get when(){return r()},get children(){return c(nt,{})}}),c(ae,{when:!0,get children(){return c(ui,{})}})]}})}})},sa=w("<div class=editor-root>"),ia=()=>{const e=Yc();return(()=>{const t=sa();return f(t,c(ml,{get state(){return e.hrm[0]()}}),null),f(t,c(ra,{state:e}),null),f(t,c(oa,{state:e}),null),f(t,c(Vc,{state:e}),null),t})()},la=()=>c(So,{get children(){return[c(Ws,{}),c(ia,{})]}}),ca=document.getElementById("root");ao(()=>c(la,{}),ca);
