(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Br=(e,t)=>e===t,Xe=Symbol("solid-proxy"),Ar=Symbol("solid-track"),Je={equals:Br};let zn=jn;const oe=1,Ze=2,Rn={owned:null,cleanups:null,context:null,owner:null},yt={};var I=null;let pt=null,E=null,P=null,re=null,st=0;function Ve(e,t){const n=E,r=I,o=e.length===0,s=t===void 0?r:t,i=o?Rn:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=o?e:()=>e(()=>O(()=>lt(i)));I=i,E=null;try{return ue(l,!0)}finally{E=n,I=r}}function k(e,t){t=t?Object.assign({},Je,t):Je;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),Fn(n,o));return[Hn.bind(n),r]}function an(e,t,n){const r=it(e,t,!0,oe);Se(r)}function C(e,t,n){const r=it(e,t,!1,oe);Se(r)}function W(e,t,n){zn=jr;const r=it(e,t,!1,oe);(!n||!n.render)&&(r.user=!0),re?re.push(r):Se(r)}function S(e,t,n){n=n?Object.assign({},Je,n):Je;const r=it(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Se(r),Hn.bind(r)}function Tr(e){return e&&typeof e=="object"&&"then"in e}function Pr(e,t,n){let r,o,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,s=t||{}):(r=e,o=t,s=n||{});let i=null,l=yt,c=!1,d="initialValue"in s,u=typeof r=="function"&&S(r);const h=new Set,[g,p]=(s.storage||k)(s.initialValue),[x,j]=k(void 0),[Y,ie]=k(void 0,{equals:!1}),[K,U]=k(d?"ready":"unresolved");function T(D,N,B,$e){return i===D&&(i=null,$e!==void 0&&(d=!0),(D===l||N===l)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated($e,{value:N})),l=yt,le(N,B)),N}function le(D,N){ue(()=>{N===void 0&&p(()=>D),U(N!==void 0?"errored":d?"ready":"unresolved"),j(N);for(const B of h.keys())B.decrement();h.clear()},!1)}function Ne(){const D=Rr,N=g(),B=x();if(B!==void 0&&!i)throw B;return E&&!E.user&&D&&an(()=>{Y(),i&&(D.resolved||h.has(D)||(D.increment(),h.add(D)))}),N}function wt(D=!0){if(D!==!1&&c)return;c=!1;const N=u?u():r;if(N==null||N===!1){T(i,O(g));return}const B=l!==yt?l:O(()=>o(N,{value:g(),refetching:D}));return Tr(B)?"value"in B?(B.status==="success"?T(i,B.value,void 0,N):T(i,void 0,void 0,N),B):(i=B,c=!0,queueMicrotask(()=>c=!1),ue(()=>{U(d?"refreshing":"pending"),ie()},!1),B.then($e=>T(B,$e,void 0,N),$e=>T(B,void 0,Un($e),N))):(T(i,B,void 0,N),B)}return Object.defineProperties(Ne,{state:{get:()=>K()},error:{get:()=>x()},loading:{get(){const D=K();return D==="pending"||D==="refreshing"}},latest:{get(){if(!d)return Ne();const D=x();if(D&&!i)throw D;return g()}}}),u?an(()=>wt(!1)):wt(!1),[Ne,{refetch:wt,mutate:p}]}function Z(e){return ue(e,!1)}function O(e){if(E===null)return e();const t=E;E=null;try{return e()}finally{E=t}}function Lr(e){W(()=>O(e))}function Or(e){return I===null||(I.cleanups===null?I.cleanups=[e]:I.cleanups.push(e)),e}function zr(e){const t=S(e),n=S(()=>Mt(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Rr;function Hn(){if(this.sources&&this.state)if(this.state===oe)Se(this);else{const e=P;P=null,ue(()=>et(this),!1),P=e}if(E){const e=this.observers?this.observers.length:0;E.sources?(E.sources.push(this),E.sourceSlots.push(e)):(E.sources=[this],E.sourceSlots=[e]),this.observers?(this.observers.push(E),this.observerSlots.push(E.sources.length-1)):(this.observers=[E],this.observerSlots=[E.sources.length-1])}return this.value}function Fn(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&ue(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=pt&&pt.running;i&&pt.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?P.push(s):re.push(s),s.observers&&Kn(s)),i||(s.state=oe)}if(P.length>1e6)throw P=[],new Error},!1)),t}function Se(e){if(!e.fn)return;lt(e);const t=I,n=E,r=st;E=I=e,Hr(e,e.value,r),E=n,I=t}function Hr(e,t,n){let r;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=oe,e.owned&&e.owned.forEach(lt),e.owned=null),e.updatedAt=n+1,Wn(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Fn(e,r):e.value=r,e.updatedAt=n)}function it(e,t,n,r=oe,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:I,context:I?I.context:null,pure:n};return I===null||I!==Rn&&(I.owned?I.owned.push(s):I.owned=[s]),s}function Qe(e){if(e.state===0)return;if(e.state===Ze)return et(e);if(e.suspense&&O(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<st);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===oe)Se(e);else if(e.state===Ze){const r=P;P=null,ue(()=>et(e,t[0]),!1),P=r}}function ue(e,t){if(P)return e();let n=!1;t||(P=[]),re?n=!0:re=[],st++;try{const r=e();return Fr(n),r}catch(r){n||(re=null),P=null,Wn(r)}}function Fr(e){if(P&&(jn(P),P=null),e)return;const t=re;re=null,t.length&&ue(()=>zn(t),!1)}function jn(e){for(let t=0;t<e.length;t++)Qe(e[t])}function jr(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Qe(r)}for(t=0;t<n;t++)Qe(e[t])}function et(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===oe?r!==t&&(!r.updatedAt||r.updatedAt<st)&&Qe(r):o===Ze&&et(r,t)}}}function Kn(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Ze,n.pure?P.push(n):re.push(n),n.observers&&Kn(n))}}function lt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)lt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Un(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Wn(e,t=I){throw Un(e)}function Mt(e){if(typeof e=="function"&&!e.length)return Mt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Mt(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const Kr=Symbol("fallback");function cn(e){for(let t=0;t<e.length;t++)e[t]()}function Ur(e,t,n={}){let r=[],o=[],s=[],i=0,l=t.length>1?[]:null;return Or(()=>cn(s)),()=>{let c=e()||[],d,u;return c[Ar],O(()=>{let g=c.length,p,x,j,Y,ie,K,U,T,le;if(g===0)i!==0&&(cn(s),s=[],r=[],o=[],i=0,l&&(l=[])),n.fallback&&(r=[Kr],o[0]=Ve(Ne=>(s[0]=Ne,n.fallback())),i=1);else if(i===0){for(o=new Array(g),u=0;u<g;u++)r[u]=c[u],o[u]=Ve(h);i=g}else{for(j=new Array(g),Y=new Array(g),l&&(ie=new Array(g)),K=0,U=Math.min(i,g);K<U&&r[K]===c[K];K++);for(U=i-1,T=g-1;U>=K&&T>=K&&r[U]===c[T];U--,T--)j[T]=o[U],Y[T]=s[U],l&&(ie[T]=l[U]);for(p=new Map,x=new Array(T+1),u=T;u>=K;u--)le=c[u],d=p.get(le),x[u]=d===void 0?-1:d,p.set(le,u);for(d=K;d<=U;d++)le=r[d],u=p.get(le),u!==void 0&&u!==-1?(j[u]=o[d],Y[u]=s[d],l&&(ie[u]=l[d]),u=x[u],p.set(le,u)):s[d]();for(u=K;u<g;u++)u in j?(o[u]=j[u],s[u]=Y[u],l&&(l[u]=ie[u],l[u](u))):o[u]=Ve(h);o=o.slice(0,i=g),r=c.slice(0)}return o});function h(g){if(s[u]=g,l){const[p,x]=k(u);return l[u]=x,t(c[u],p)}return t(c[u])}}}function a(e,t){return O(()=>e(t||{}))}function He(){return!0}const Dt={get(e,t,n){return t===Xe?n:e.get(t)},has(e,t){return t===Xe?!0:e.has(t)},set:He,deleteProperty:He,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:He,deleteProperty:He}},ownKeys(e){return e.keys()}};function vt(e){return(e=typeof e=="function"?e():e)?e:{}}function Wr(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function dn(...e){let t=!1;for(let s=0;s<e.length;s++){const i=e[s];t=t||!!i&&Xe in i,e[s]=typeof i=="function"?(t=!0,S(i)):i}if(t)return new Proxy({get(s){for(let i=e.length-1;i>=0;i--){const l=vt(e[i])[s];if(l!==void 0)return l}},has(s){for(let i=e.length-1;i>=0;i--)if(s in vt(e[i]))return!0;return!1},keys(){const s=[];for(let i=0;i<e.length;i++)s.push(...Object.keys(vt(e[i])));return[...new Set(s)]}},Dt);const n={},r={},o=new Set;for(let s=e.length-1;s>=0;s--){const i=e[s];if(!i)continue;const l=Object.getOwnPropertyNames(i);for(let c=0,d=l.length;c<d;c++){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(i,u);if(!o.has(u))h.get?(o.add(u),Object.defineProperty(n,u,{enumerable:!0,configurable:!0,get:Wr.bind(r[u]=[h.get.bind(i)])})):(h.value!==void 0&&o.add(u),n[u]=h.value);else{const g=r[u];g?h.get?g.push(h.get.bind(i)):h.value!==void 0&&g.push(()=>h.value):n[u]===void 0&&(n[u]=h.value)}}}return n}function Vn(e,...t){if(Xe in e){const o=new Set(t.length>1?t.flat():t[0]),s=t.map(i=>new Proxy({get(l){return i.includes(l)?e[l]:void 0},has(l){return i.includes(l)&&l in e},keys(){return i.filter(l=>l in e)}},Dt));return s.push(new Proxy({get(i){return o.has(i)?void 0:e[i]},has(i){return o.has(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.has(i))}},Dt)),s}const n={},r=t.map(()=>({}));for(const o of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,o),i=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let l=!1,c=0;for(const d of t)d.includes(o)&&(l=!0,i?r[c][o]=s.value:Object.defineProperty(r[c],o,s)),++c;l||(i?n[o]=s.value:Object.defineProperty(n,o,s))}return[...r,n]}const Yn=e=>`Stale read from <${e}>.`;function V(e){const t="fallback"in e&&{fallback:()=>e.fallback};return S(Ur(()=>e.each,e.children,t||void 0))}function A(e){const t=e.keyed,n=S(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return S(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?O(()=>o(t?r:()=>{if(!O(n))throw Yn("Show");return e.when})):o}return e.fallback},void 0,void 0)}function Wt(e){let t=!1;const n=(s,i)=>s[0]===i[0]&&(t?s[1]===i[1]:!s[1]==!i[1])&&s[2]===i[2],r=zr(()=>e.children),o=S(()=>{let s=r();Array.isArray(s)||(s=[s]);for(let i=0;i<s.length;i++){const l=s[i].when;if(l)return t=!!s[i].keyed,[i,l,s[i]]}return[-1]},void 0,{equals:n});return S(()=>{const[s,i,l]=o();if(s<0)return e.fallback;const c=l.children;return typeof c=="function"&&c.length>0?O(()=>c(t?i:()=>{if(O(o)[0]!==s)throw Yn("Match");return l.when})):c},void 0,void 0)}function ce(e){return e}const Vr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Yr=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Vr]),Gr=new Set(["innerHTML","textContent","innerText","children"]),qr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Xr=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Jr(e,t){const n=Xr[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Zr=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Qr=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),eo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function to(e,t,n){let r=n.length,o=t.length,s=r,i=0,l=0,c=t[o-1].nextSibling,d=null;for(;i<o||l<s;){if(t[i]===n[l]){i++,l++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?l?n[l-1].nextSibling:n[s-l]:c;for(;l<s;)e.insertBefore(n[l++],u)}else if(s===l)for(;i<o;)(!d||!d.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[l]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[l++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!d){d=new Map;let h=l;for(;h<s;)d.set(n[h],h++)}const u=d.get(t[i]);if(u!=null)if(l<u&&u<s){let h=i,g=1,p;for(;++h<o&&h<s&&!((p=d.get(t[h]))==null||p!==u+g);)g++;if(g>u-l){const x=t[i];for(;l<u;)e.insertBefore(n[l++],x)}else e.replaceChild(n[l++],t[i++])}else i++;else t[i++].remove()}}}const un="_$DX_DELEGATE";function no(e,t,n,r={}){let o;return Ve(s=>{o=s,t===document?e():f(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function w(e,t,n){let r;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,n?i.content.firstChild.firstChild:i.content.firstChild},s=t?()=>O(()=>document.importNode(r||(r=o()),!0)):()=>(r||(r=o())).cloneNode(!0);return s.cloneNode=s,s}function q(e,t=window.document){const n=t[un]||(t[un]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,lo))}}function ee(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function ro(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function H(e,t){t==null?e.removeAttribute("class"):e.className=t}function Q(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n)}function oo(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const l=o[s];!l||l==="undefined"||t[l]||(hn(e,l,!1),delete n[l])}for(s=0,i=r.length;s<i;s++){const l=r[s],c=!!t[l];!l||l==="undefined"||n[l]===c||!c||(hn(e,l,!0),n[l]=c)}return n}function Ee(e,t,n){if(!t)return n?ee(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function Gn(e,t={},n,r){const o={};return r||C(()=>o.children=xe(e,t.children,o.children)),C(()=>t.ref&&t.ref(e)),C(()=>so(e,t,n,!0,o,!0)),o}function R(e,t,n){return O(()=>e(t,n))}function f(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return xe(e,t,r,n);C(o=>xe(e,t(),o,n),r)}function so(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=fn(e,i,null,o[i],n,s)}for(const i in t){if(i==="children"){r||xe(e,t.children);continue}const l=t[i];o[i]=fn(e,i,l,o[i],n,s)}}function io(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function hn(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function fn(e,t,n,r,o,s){let i,l,c,d,u;if(t==="style")return Ee(e,n,r);if(t==="classList")return oo(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r),n&&e.addEventListener(h,n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),g=Zr.has(h);if(!g&&r){const p=Array.isArray(r)?r[0]:r;e.removeEventListener(h,p)}(g||n)&&(Q(e,h,n,g),g&&q([h]))}else if(t.slice(0,5)==="attr:")ee(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(c=Gr.has(t))||!o&&((d=Jr(t,e.tagName))||(l=Yr.has(t)))||(i=e.nodeName.includes("-")))u&&(t=t.slice(5),l=!0),t==="class"||t==="className"?H(e,n):i&&!l&&!c?e[io(t)]=n:e[d||t]=n;else{const h=o&&t.indexOf(":")>-1&&eo[t.split(":")[0]];h?ro(e,h,t,n):ee(e,qr[t]||t,n)}return n}function lo(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function xe(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),i){let l=n[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),n=ke(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=ke(e,n,r);else{if(s==="function")return C(()=>{let l=t();for(;typeof l=="function";)l=l();n=xe(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],c=n&&Array.isArray(n);if(Nt(l,t,n,o))return C(()=>n=xe(e,l,n,r,!0)),()=>n;if(l.length===0){if(n=ke(e,n,r),i)return n}else c?n.length===0?gn(e,l,r):to(e,n,l):(n&&ke(e),gn(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=ke(e,n,r,t);ke(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Nt(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let l=t[s],c=n&&n[s],d;if(!(l==null||l===!0||l===!1))if((d=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=Nt(e,l,c)||o;else if(d==="function")if(r){for(;typeof l=="function";)l=l();o=Nt(e,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||o}else e.push(l),o=!0;else{const u=String(l);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return o}function gn(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ke(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const l=t[i];if(o!==l){const c=l.parentNode===e;!s&&!i?c?e.replaceChild(o,l):e.insertBefore(o,n):c&&l.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const ao=!1,co="http://www.w3.org/2000/svg";function uo(e,t=!1){return t?document.createElementNS(co,e):document.createElement(e)}function at(e){const[t,n]=Vn(e,["component"]),r=S(()=>t.component);return S(()=>{const o=r();switch(typeof o){case"function":return O(()=>o(n));case"string":const s=Qr.has(o),i=uo(o,s);return Gn(i,n,s),i}})}var ho=()=>["%csolid-devtools","color: #fff; background: #2c4f7c; padding: 1px 4px;"];function fo(...e){console.warn(...ho(),...e)}fo('`import "solid-devtools";` is an entry point for the vite plugin.\nIf you\'re seeing this message you probably forgot to add the plugin to your vite config.');(()=>{let e=100;const t=()=>{const o=getComputedStyle(document.documentElement).getPropertyValue("--kitl-c-bg");if(console.log("bgColor",o),!o){if(e>1e4)return;e*=2,setTimeout(t,e);return}const s=document.querySelector('meta[name="theme-color"]');s&&s.setAttribute("content",o)},n=o=>{o?(console.log("Dark mode"),document.documentElement.setAttribute("color-theme","dark")):(console.log("Light mode"),document.documentElement.setAttribute("color-theme","light")),setTimeout(t)},r=window.matchMedia("(prefers-color-scheme: dark)");r.addEventListener("change",o=>n(o.matches)),n(r.matches),window.addEventListener("load",t)})();const go="modulepreload",mo=function(e){return"/"+e},mn={},wn=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=mo(s),s in mn)return;mn[s]=!0;const i=s.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!r)for(let u=o.length-1;u>=0;u--){const h=o[u];if(h.href===s&&(!i||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":go,i||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),i)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})},wo=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))})},[qn,yo]=k({locale:"",strings:new Map}),po=()=>qn().locale,Xn=(e,t,n)=>{for(const r in n){const o=n[r],s=t?`${t}.${r}`:r;typeof o=="object"?Xn(e,s,o):e.set(s,o)}},vo=async e=>{const t=navigator.languages.map(n=>{const r=n.indexOf("-");return r===-1?n:n.slice(0,r)});for(const n of[e,...t,"en"])if(n)try{const r=await wo(Object.assign({"./strings/en.json":()=>wn(()=>import("./en-209af060.js"),[]),"./strings/ko.json":()=>wn(()=>import("./ko-f8cefd3a.js"),[])}),`./strings/${n}.json`),o=new Map;return Xn(o,"",r),yo({locale:n,strings:o}),!0}catch{continue}},m=e=>qn().strings.get(e)||e,$o=e=>{const[t]=Pr(async()=>await vo(e.language)),n=po();return a(Wt,{fallback:"Unk",get children(){return[a(ce,{get when(){return t()},get children(){return e.children}}),a(ce,{when:n==="",children:"Failed to load locale."}),a(ce,{when:n===void 0,children:"Loading..."})]}})};var y=(e=>(e.fg="fg",e.bg="bg",e.primary="primary",e.secondary="secondary",e.success="success",e.danger="danger",e.warning="warning",e))(y||{});const ko=w("<button>"),$=e=>(()=>{const t=ko();return Q(t,"click",e.onClick,!0),f(t,()=>e.children),C(n=>{const r=`btn btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`,o=e.disabled;return r!==n._v$&&H(t,n._v$=r),o!==n._v$2&&(t.disabled=n._v$2=o),n},{_v$:void 0,_v$2:void 0}),t})();q(["click"]);const bo=w('<div class="checkbox no-user-select cursor-pointer"><label><input type=checkbox name=checkbox>'),xo=e=>{const t=n=>{const r=n.target;console.log(r.checked),e.onChange?.(r.checked)};return(()=>{const n=bo(),r=n.firstChild,o=r.firstChild;o.addEventListener("change",t);const s=e.ref;return typeof s=="function"?R(s,o):e.ref=o,f(r,()=>e.children,null),C(()=>o.checked=e.value),n})()},Co=w("<div>"),F=e=>(()=>{const t=Co();return Q(t,"drop",e.onDrop),Q(t,"click",e.onClick,!0),f(t,()=>e.children),C(()=>H(t,`input-group ${e.class??""}`)),t})();q(["click"]);const _o=w("<input type=text>"),fe=e=>(()=>{const t=_o();Q(t,"blur",e.onBlur),Q(t,"keydown",e.onKeyDown,!0),Q(t,"change",e.onChange),Q(t,"click",e.onClick,!0);const n=e.ref;return typeof n=="function"?R(n,t):e.ref=t,C(r=>{const o=e.readonly,s=`form-control ${e.class??""}`,i=e.placeholder;return o!==r._v$&&(t.readOnly=r._v$=o),s!==r._v$2&&H(t,r._v$2=s),i!==r._v$3&&ee(t,"placeholder",r._v$3=i),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),C(()=>t.value=e.value??""),t})();q(["click","keydown"]);const So=w("<span>"),Jn=e=>(()=>{const t=So();return C(()=>H(t,`spinner ${e.class}`)),t})(),Te=e=>new TextEncoder().encode(e),Eo=e=>new TextDecoder().decode(e),Mo=async e=>{const t=await new Promise((n,r)=>{const o=new FileReader;o.onload=()=>{n(o.result)},o.onerror=r,o.readAsDataURL(new Blob([e]))});return t.slice(t.indexOf(",")+1)},Do=(e,t)=>{const n=URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})),r=document.createElement("a");r.href=n,r.download=e,r.click(),URL.revokeObjectURL(n)},No=()=>{throw"Empty function invoked"},Zn=e=>t=>{if(typeof t!==e)throw new Error(`Expected ${e}, got ${typeof t}`);return t},X=Zn("string"),tt=Zn("number"),me=e=>t=>{if(t!==void 0)return e(t)},Be=e=>t=>{if(!Array.isArray(t))throw new Error(`Expected array, got ${typeof t}`);return t.map(e)},Io=e=>({x:tt(e.x),y:tt(e.y)}),It={x:0,y:0},Bo=e=>({x:Math.round(e.x),y:Math.round(e.y)}),Pe=(e,t)=>e*e+t*t,Ye=(e,t)=>Math.sqrt(Pe(e,t)),yn=(e,t,n)=>{const r=n.w/2,o=n.h/2,s=n.x+r,i=n.y+o,l=Math.abs(r-o);let c=e-s,d=t-i,u=0,h=0;if(c<-r&&(c=-r,u=-1),c>r&&(c=r,u=1),d<-o&&(d=-o,h=-1),d>o&&(d=o,h=1),n.angular){if(u*h!==0){const g=Ye(c,d);return[s+c-1.4*u,i+d-1.4*h,c/g,d/g]}}else{if(r>o&&Math.abs(c)>l){const g=c>0?l:-l,p=c-g,x=Ye(p,d)/o;return[s+g+p/x,i+d/x,p/o,d/(x*o)]}if(o>r&&Math.abs(d)>l){const g=d>0?l:-l,p=d-g,x=Ye(c,p)/r;return[s+c/x,i+g+p/x,c/(x*r),p/r]}}return[s+c,i+d,u,h]},Bt=(e,t,n)=>{const[r,o,s,i]=yn(t.x+t.w/2,t.y+t.h/2,e),[l,c,d,u]=yn(r,o,t),h=.2*Ye(r-l,o-c);return`M ${l-n*d} ${c-n*u} C ${l+d*h} ${c+u*h}, ${r+s*h} ${o+i*h}, ${r-n*s} ${o-n*i}`},pn=(e,t)=>{const r=e.x+e.w/2,o=t.x+t.w/2;return`M ${r} ${e.y} C ${r} ${e.y-30}, ${o} ${t.y-30}, ${o} ${t.y}`},Ao=e=>Math.random().toString(36).slice(e),To=()=>Ao(7),Po=()=>{const e=new Date;return Math.round(e.getTime()/1e3+e.getTimezoneOffset()*60).toString(36)},Lo=()=>`${Po()}-${To()}`,Oo=(e,t,n)=>e<t?t:e>n?n:e,Qn=e=>({module:X(e.module),name:X(e.name)}),vn='()[]{},;\\@#"',er=new Map;for(let e=0;e<vn.length;e++)er.set(vn[e],!0);const zo=e=>{let t="";for(let n=0;n<e.length;n++)er.has(e[n])||(t+=e[n]);return t},Ro=e=>{let t="",n=!1,r=0;for(;r<e.length&&(e.charCodeAt(r)<=32||e[r]==="_");)r+=1;for(;r<e.length;r++)e.charCodeAt(r)<=32||e[r]==="_"?n||(n=!0):(n&&(t+="_"),t+=e[r],n=!1);return t},Ho=e=>zo(Ro(e)),Fo=e=>e.replace(/_/g," "),tr=e=>Fo(Ho(e));var v=(e=>(e.Alpha="a",e.Beta="b",e.Delta="d",e.Lambda="l",e.Nu="n",e.Pi="p",e))(v||{});const $n=new Set(["d"]),jo=new Set(["n"]),Ko=new Set(["b","n"]),At=new Set(["d","p"]),he=e=>({id:X(e.id),handle:me(X)(e.handle)}),Uo=e=>({type:"a",val:e.val}),Wo=e=>({type:"b",fn:me(he)(e.fn),args:Be(he)(e.args)}),Vo=e=>({type:"d",comment:X(e.comment),val:me(he)(e.val)}),Yo=e=>({type:"l",fallback:me(he)(e.fallback),ret:me(he)(e.ret)}),Go=e=>({type:"n",name:Qn(e.name),lhs:tt(e.lhs),args:Be(he)(e.args)}),qo=e=>({type:"p",name:Qn(e.name),pat:me(he)(e.pat),elems:tt(e.elems)}),Xo={a:Uo,b:Wo,d:Vo,l:Yo,n:Go,p:qo},Jo=e=>({id:X(e.id),pos:Io(e.pos),x:Xo[e.x.type](e.x)}),Fe=JSON.stringify,$t=e=>{switch(typeof e){case"string":return e.length>20;case"object":return e===null?!1:Array.isArray(e)?e.length>1:Object.keys(e).length>1}return!1},ae=(e,t=0)=>{if(typeof e!="object"||e===null)return Fe(e);const n=" ".repeat(2*(t+1)),r=`,
`+n;if(Array.isArray(e)){const i=e;return i.length===0?"[]":i.length===1?$t(i[0])?`[ ${ae(i[0],t+1)} ]`:`[${ae(i[0],t+1)}]`:`[ ${i.map(l=>ae(l,t+1)).join(r)} ]`}const o=e,s=Object.keys(o);if(s.length===0)return"{}";if(s.length===1){const i=s[0],l=Fe(i),c=o[i];return $t(c)?`{ ${l}:
  ${n}${ae(c,t+2)}}`:`{${l}: ${ae(c,t+1)}}`}return`{ ${Object.entries(o).map(([i,l])=>$t(l)?`${Fe(i)}:
  ${n}${ae(l,t+2)}`:`${Fe(i)}: ${ae(l,t+1)}`).join(r)} }`},z=e=>e.charCodeAt(0),Vt=e=>{const t=new Set;for(let n=0;n<e.length;n++)t.add(e.charCodeAt(n));return t},Zo=z(`
`),Qo=z("["),es=z("]"),ts=z("{"),ns=z("}"),rs=z('"'),os=z("'"),ss=z("\\"),is=z("u"),ls=z("x"),nr=Vt(`[]{},"':
`),as=Vt("+-0123456789."),cs=Vt(`"'`),ds=new Map([[z("b"),"\b"],[z("f"),"\f"],[z("n"),`
`],[z("r"),"\r"],[z("t"),"	"]]),us=/[-+]?((0x[0-9a-fA-F]+)|([0-9]+(\.[0-9]+)?))([eE][-+]?[0-9]+)?/y,hs=/(false|true|null)\b/iy,fs=new Map([["false",!1],["true",!0],["null",null]]),kn=/\s*([[{'"])/y,rr=/\s*/y,nt=/[\s,]*/y,gs=/[\s:]*/y,ms=e=>(kn.lastIndex=0,!!kn.exec(e)),de=e=>e.s.charCodeAt(e.p);class Oe extends Error{s;p;line;column;constructor(t,n){let r=1,o=1;for(let s=0;s<t.p;s++)t.s.charCodeAt(s)===Zo&&(r++,o=0),o++;super(`${r}:${o}: ${n}`),this.name="ParseError",this.s=t.s,this.p=t.p,this.line=r,this.column=o}}const Yt=(e,t)=>(t.lastIndex=e.p,t.exec(e.s)),ge=(e,t)=>{const n=Yt(e,t);n&&(e.p+=n[0].length)},ws=e=>{e.p++,ge(e,nt);const t=[];for(;e.p<e.l&&de(e)!==es;)t.push(Gt(e)),ge(e,nt);return e.p++,t},ys=e=>{e.p++,ge(e,nt);const t={};for(;e.p<e.l&&de(e)!==ns;){let n;if(cs.has(de(e)))n=Tt(e);else{const r=e.p;e.p=e.s.indexOf(":",e.p),e.p===-1&&(e.p=e.l),n=e.s.slice(r,e.p).trim()}ge(e,gs),t[n]=Gt(e),ge(e,nt)}return e.p++,t},bn=(e,t)=>{const n=e.s.slice(e.p+1,e.p+t+1),r=parseInt(n,16);if(e.p+=t,isNaN(r))throw new Oe(e,`Invalid unicode escape '${n}'`);return String.fromCharCode(r)},Tt=e=>{const t=de(e);e.p++;let n="";for(;e.p<e.l;e.p++){const r=de(e);if(r===t)return e.p++,n;if(r===ss){e.p++;const o=de(e);switch(o){case is:n+=bn(e,4);break;case ls:n+=bn(e,2);break;default:n+=ds.get(o)||String.fromCharCode(o)}}else n+=String.fromCharCode(r)}return n},ps=e=>{const t=Yt(e,us),n=t?t[0]:"",r=n?Number(n):NaN;if(e.p+=n.length,isNaN(r))throw new Oe(e,`Invalid number '${n}'`);return r},vs=(e,t)=>{const n=Yt(e,hs);if(n!==null)return e.p+=n[0].length,fs.get(n[0].toLowerCase());if(t)throw new Oe(e,`Unexpected character '${e.s[e.p]}'`);const r=e.p;for(;e.p<e.l&&!nr.has(de(e));)e.p++;return e.s.slice(r,e.p).trim()},xn={[rs]:Tt,[os]:Tt,[Qo]:ws,[ts]:ys},Gt=(e,t)=>{ge(e,rr);const n=de(e);if(n in xn)return xn[n](e);if(nr.has(n))throw new Oe(e,`Unexpected character '${e.s[e.p]}' for value`);return as.has(n)?ps(e):vs(e,t)},$s=e=>{const t={s:e,p:0,l:e.length},n=Gt(t,!0);if(ge(t,rr),t.p<t.l)throw new Oe(t,`Unexpected character '${t.s[t.p]}', expect EOF`);return n},ks=e=>{switch(e.type){case v.Alpha:return JSON.stringify(e.val,null,2);case v.Beta:return e.args.length<=0?"":`,${e.args.length}`;case v.Delta:return`${e.comment}`;case v.Lambda:return"λ";case v.Nu:{const t=e.name,n=t.module?`@${t.module}`:"",r=e.args.length<=0?"":`,${e.lhs},${Math.max(0,e.args.length-e.lhs)}`;return`${t.name}${n}${r}`}case v.Pi:{const t=e.name,n=t.module?`@${t.module}`:"",r=e.elems<=0?"":`,${e.elems}`;return`λ ${t.name}${n}${r}`}}},bs=e=>{const t=e.trim();try{return{type:v.Alpha,val:$s(t)}}catch{}switch(t[0]){case"λ":case"\\":{const r=t.slice(1).split(","),o=r[0].split("@");if(o[0]){const s=o[0]?o[0].toString().trim():"",i=o[1]?o[1].toString().trim():"";let l=parseInt(r[1]);return isNaN(l)&&(l=0),{type:v.Pi,name:{name:s,module:i},elems:l}}else return{type:v.Lambda}}default:{const r=t.split(","),o=r[0].split("@"),s=o[0]?o[0].toString().trim():"",i=o[1]?o[1].toString().trim():"";let l=parseInt(r[1]),c=parseInt(r[2]);if(s)return isNaN(l)&&(l=0),isNaN(c)&&(c=l,l=0),{type:v.Nu,name:{name:s,module:i},lhs:l,args:new Array(l+c).fill({id:""})};{const d=(isNaN(l)?0:l)+(isNaN(c)?0:c);return{type:v.Beta,args:new Array(d).fill({id:""})}}}}},xs="0.0",je=["value","tag","type","alias"],Cs={value:()=>({type:"value",nodes:[],comment:""}),tag:()=>({type:"tag",elems:[]}),type:()=>({type:"type",unions:[]}),alias:()=>({type:"alias",origin:""})},qt={value:e=>({type:"value",nodes:Be(Jo)(e.nodes),val:me(he)(e.val),comment:X(e.comment)}),tag:e=>({type:"tag",elems:Be(X)(e.elems)}),type:e=>({type:"type",unions:Be(X)(e.unions)}),alias:e=>({type:"alias",origin:X(e.origin)})},_s=e=>{const t={};for(const n in e)t[n]=qt[e[n].type](e[n]);return t},Ss=e=>({version:X(e.version),defs:_s(e.defs)}),Es=e=>({version:xs,defs:e}),or=e=>["defs",e],Xt=e=>{const t=e.split(/[\\/]+/),n=t[0].length<1,r=[];for(const o of t)switch(o){case"":case".":break;case"..":r.pop();break;default:r.push(o)}return n&&r.unshift(""),r},Ae=e=>e.length<1?".":e.length<=1&&e[0].length<1?"/":e.join("/"),Ms=e=>e.length>0&&e[0].length<1,Jt=e=>{const t=Xt(e);return[Ae(t),t]},Zt=e=>{const t=e.indexOf(":");return t<0?["local",e]:[e.slice(0,t),e.slice(t+1)]},sr=e=>{const[t,n]=Zt(e),[r,o]=Jt(n);return[t,r,o]},ir=e=>{const[,,t]=sr(e);return t[t.length-1]},Ds=e=>{let t=e.lastIndexOf(".");return t<0&&(t=e.length),[e.slice(0,t),e.slice(t+1)]},Ns=(e,t)=>{if(t<1)return e;let n=e.indexOf(".");return n<0&&(n=e.length),`${e.slice(0,n)}-${t}${e.slice(n)}`};var Ge=(e=>(e[e.Unknown=0]="Unknown",e[e.Kitl=1]="Kitl",e[e.Image=2]="Image",e))(Ge||{});const Is=new Map([[1,["kitl"]],[2,["png","jpg","jpeg","gif","svg","webp"]]]),lr={};Is.forEach((e,t)=>{for(const n of e)lr[n]=t});const Bs=e=>lr[e]||0,As=e=>{const t=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()?e.toLocaleTimeString():e.toLocaleDateString()},Ts=w("<div class=toast-container>"),Ps=w("<div>");let Qt=function(e){return e[e.Success=0]="Success",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.Progress=3]="Progress",e}({});const Ls=["✅","⚠️","🚫","⏳"],ar=[No],ct=(e,t)=>{ar[0](e,t)},se=e=>ct(e,{type:Qt.Success}),J=e=>ct(e,{type:Qt.Error}),Os=e=>ct(e,{type:Qt.Progress}),zs=e=>{const t=e.creation??ar,[n,r]=k({cnt:0,toasts:[]});return t[0]=(o,s)=>{r(i=>{const l=i.toasts,c=i.cnt,d=Math.max(200,s?.ttl??2e3),u=(g,p)=>window.setTimeout(()=>r(x=>({...x,toasts:g(x.toasts)})),p),h=u(g=>g.filter(p=>p.id!==c),d);return u(g=>g.map(p=>p.id===c?{...p,class:"toast-a-out"}:p),d-100),l.push({id:c,type:s?.type,class:"toast-a-in",message:o,timeout:h}),{cnt:i.cnt+1,toasts:l}})},(()=>{const o=Ts();return f(o,a(V,{get each(){return n().toasts},children:s=>(()=>{const i=Ps();return f(i,()=>s.type!==void 0?`${Ls[s.type]} `:"",null),f(i,()=>s.message,null),C(()=>H(i,`toast ${s.class}`)),i})()})),o})()};let Pt=0;const Rs=()=>{Pt=0},cr=()=>Pt=(Pt+57.295779513)%360,Hs="hrm-c-bd-empty",Fs="⎇",Lt="𝑓",js="𝑥",Cn="𝑦",Ks="𝛃",Us="≝",Ws="⟾",Vs="↯",Ys="⧉";var M=(e=>(e[e.Source=0]="Source",e[e.Sink=1]="Sink",e))(M||{});const Gs=w('<svg stroke-width="0"></svg>',2),qs=w("<title></title>",2);function b(e,t){const n=dn(e.a,t),[r,o]=Vn(n,["src"]);return(()=>{const s=Gs.cloneNode(!0);return Gn(s,dn({get stroke(){return e.a.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},o,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},get innerHTML(){return e.c},xmlns:"http://www.w3.org/2000/svg"}),!0,!0),f(s,()=>ao,null),f(s,(()=>{const i=S(()=>!!t.title);return()=>i()&&(()=>{const l=qs.cloneNode(!0);return f(l,()=>t.title),l})()})(),null),s})()}function Xs(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-back-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 14l-4 -4l4 -4"/><path d="M5 10h11a4 4 0 1 1 0 8h-1"/>'},e)}function Js(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-forward-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 14l4 -4l-4 -4"/><path d="M19 10h-11a4 4 0 1 0 0 8h1"/>'},e)}function en(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-right",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0"/><path d="M13 18l6 -6"/><path d="M13 6l6 6"/>'},e)}function Ot(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-backspace",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 6a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-11l-5 -5a1.5 1.5 0 0 1 0 -2l5 -5z"/><path d="M12 10l4 4m0 -4l-4 4"/>'},e)}function dr(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-binary-tree",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M16 4a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M16 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M11 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M21 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M5.058 18.306l2.88 -4.606"/><path d="M10.061 10.303l2.877 -4.604"/><path d="M10.065 13.705l2.876 4.6"/><path d="M15.063 5.7l2.881 4.61"/>'},e)}function Zs(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-caret-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 14l-6 -6l-6 6h12"/>'},e)}function dt(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-checkbox",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 11l3 3l8 -8"/><path d="M20 12v6a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h9"/>'},e)}function zt(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-clipboard",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"/><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"/>'},e)}function Rt(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-copy",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"/><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"/>'},e)}function _n(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-cut",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M9.15 14.85l8.85 -10.85"/><path d="M6 4l8.85 10.85"/>'},e)}function Qs(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-deselect",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 8h3a1 1 0 0 1 1 1v3"/><path d="M16 16h-7a1 1 0 0 1 -1 -1v-7"/><path d="M12 20v.01"/><path d="M16 20v.01"/><path d="M8 20v.01"/><path d="M4 20v.01"/><path d="M4 16v.01"/><path d="M4 12v.01"/><path d="M4 8v.01"/><path d="M8 4v.01"/><path d="M12 4v.01"/><path d="M16 4v.01"/><path d="M20 4v.01"/><path d="M20 8v.01"/><path d="M20 12v.01"/><path d="M20 16v.01"/><path d="M3 3l18 18"/>'},e)}function ur(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-device-floppy",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"/><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M14 4l0 4l-6 0l0 -4"/>'},e)}function ei(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-download",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"/><path d="M7 11l5 5l5 -5"/><path d="M12 4l0 12"/>'},e)}function tn(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-edit",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"/><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"/><path d="M16 5l3 3"/>'},e)}function ti(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-file-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/><path d="M12 11l0 6"/><path d="M9 14l6 0"/>'},e)}function ni(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-file",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/>'},e)}function ri(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5"/><path d="M16 19h6"/><path d="M19 16v6"/>'},e)}function oi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-search",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 19h-6a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v2.5"/><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M20.2 20.2l1.8 1.8"/>'},e)}function si(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5"/><path d="M19 22v-6"/><path d="M22 19l-3 -3l-3 3"/>'},e)}function ii(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2"/>'},e)}function hr(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-menu",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8l16 0"/><path d="M4 16l16 0"/>'},e)}function li(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-question-mark",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8a3.5 3 0 0 1 3.5 -3h1a3.5 3 0 0 1 3.5 3a3 3 0 0 1 -2 3a3 4 0 0 0 -2 4"/><path d="M12 19l0 .01"/>'},e)}function ai(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-refresh",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"/><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/>'},e)}function ci(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-rocket",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"/><path d="M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"/><path d="M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/>'},e)}function di(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-scissors",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 7m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M6 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M8.6 8.6l10.4 10.4"/><path d="M8.6 15.4l10.4 -10.4"/>'},e)}function ui(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-square-check",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M9 12l2 2l4 -4"/>'},e)}function nn(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-square-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M9 12l6 0"/><path d="M12 9l0 6"/>'},e)}function hi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-square-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M10 10l4 4m0 -4l-4 4"/>'},e)}function fi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash-off",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3l18 18"/><path d="M4 7h3m4 0h9"/><path d="M10 11l0 6"/><path d="M14 14l0 3"/><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l.077 -.923"/><path d="M18.384 14.373l.616 -7.373"/><path d="M9 5v-1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>'},e)}function Ht(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0"/><path d="M10 11l0 6"/><path d="M14 11l0 6"/><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"/><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>'},e)}function gi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-upload",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"/><path d="M7 9l5 -5l5 5"/><path d="M12 4l0 12"/>'},e)}function fr(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12"/><path d="M6 6l12 12"/>'},e)}function mi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-in-area",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 13v4"/><path d="M13 15h4"/><path d="M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"/><path d="M22 22l-3 -3"/><path d="M6 18h-1a2 2 0 0 1 -2 -2v-1"/><path d="M3 11v-1"/><path d="M3 6v-1a2 2 0 0 1 2 -2h1"/><path d="M10 3h1"/><path d="M15 3h1a2 2 0 0 1 2 2v1"/>'},e)}function wi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-in",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M7 10l6 0"/><path d="M10 7l0 6"/><path d="M21 21l-6 -6"/>'},e)}function yi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-out",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M7 10l6 0"/><path d="M21 21l-6 -6"/>'},e)}function pi(e){return b({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-reset",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 21l-6 -6"/><path d="M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"/><path d="M3 4v4h4"/>'},e)}const vi=6,$i=250,ki=16,bi=750,xi=window.setTimeout,Ci=window.clearTimeout,Sn=e=>({shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey}),kt=e=>{e.preventDefault(),e.stopPropagation()},we=(e,t)=>{const n={pointers:new Map,maxPointers:0,lastClick:{x:0,y:0,timestamp:0}},r=s=>{n.longPress&&n.longPress.id===s&&(Ci(n.longPress.u),n.longPress=void 0),n.pointers.delete(s)},o={pointerenter:s=>{e.onEnter?.(s.pointerId)},pointercancel:s=>{r(s.pointerId),e.onCancel?.(s.pointerId)},pointerleave:s=>{r(s.pointerId),e.onLeave?.(s.pointerId)},pointerdown:s=>{kt(s);const i=s.pointerId;e.onDown?.({id:i,x:s.clientX,y:s.clientY,pointers:n.pointers.size,modifiers:Sn(s)}),s.target.releasePointerCapture(i),e.capture?s.currentTarget.setPointerCapture(i):s.currentTarget.releasePointerCapture(i);const l={id:i,x:s.clientX,y:s.clientY,moved:!1,timestamp:Date.now()};r(s.pointerId),n.pointers.set(i,l),n.maxPointers=Math.max(n.maxPointers,n.pointers.size),n.pointers.size===1&&(n.longPress={id:i,x:s.clientX,y:s.clientY,u:xi(()=>{n.longPress&&n.pointers.size===1&&n.pointers.has(i)&&!n.pointers.get(i).moved&&(n.longPress=void 0,e.onLongPress?.({id:i,x:s.clientX,y:s.clientY}),n.pointers.delete(i))},bi)})},pointermove:s=>{kt(s);const i=s.pointerId;e.onMove?.({id:i,x:s.clientX,y:s.clientY});const l=n.pointers.get(i);if(!l)return;const c=s.clientX-l.x,d=s.clientY-l.y;if(!(!l.moved&&Pe(c,d)<vi)){if(e.onDrag){const u={id:i,x:s.clientX,y:s.clientY,ox:l.x,oy:l.y,dx:c,dy:d},[h,g]=n.pointers.keys();g&&(u.pivot=n.pointers.get(h===i?g:h)),e.onDrag(u)}l.moved=!0,l.x=s.clientX,l.y=s.clientY}},pointerup:s=>{kt(s);const i=s.pointerId,l=n.pointers.get(i),c={id:i,x:s.clientX,y:s.clientY,pointers:n.maxPointers,modifiers:Sn(s),dragged:n.pointers.get(i)?.moved};if(e.onUp?.(c),!l)return;r(s.pointerId);const d=Date.now();n.pointers.size===0&&(e.onClick?.(c),d-n.lastClick.timestamp<$i&&Pe(c.x-n.lastClick.x,c.y-n.lastClick.y)<ki**2&&e.onDoubleClick?.(c),n.lastClick={x:s.clientX,y:s.clientY,timestamp:d},n.maxPointers=0)}};for(const[s,i]of Object.entries(o))t.addEventListener(s,i,{passive:!1})},_i=w('<div class="no-user-select hrm-pane abs-parent"><div class=hrm-view></div><div class=hrm-pane-controls>'),Si=w("<button>"),En=e=>`translate(${e.x}px, ${e.y}px) scale(${e.z})`,Ei=e=>{let t,n;W(()=>{e.g.viewRef=t});const r=(i,l,c)=>e.g.transform[1](d=>({x:d.x*c+i,y:d.y*c+l,z:d.z*c})),o=1.1,s=[[a(wi,{}),()=>r((n?.offsetWidth??0)*(1-o)/2,(n?.offsetHeight??0)*(1-o)/2,o)],[a(yi,{}),()=>r((n?.offsetWidth??0)*(1-1/o)/2,(n?.offsetHeight??0)*(1-1/o)/2,1/o)],[a(pi,{}),()=>e.g.transform[1](()=>({x:0,y:0,z:1}))],[a(mi,{}),()=>{const i=e.g.usedRect(),l=e.g.size();if(!i||!l)return;i.w=Math.max(i.w,1),i.h=Math.max(i.h,1);const c=l.w/i.w,d=l.h/i.h,u=Math.min(c,d),h=-i.x*u+(l.w-i.w*u)/2,g=-i.y*u+(l.h-i.h*u)/2;e.g.transform[1]({x:h,y:g,z:u})}]];return W(()=>{if(n){we({capture:!0,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onLongPress:e.onLongPress,onDrag:i=>{const l=i.pivot;if(l){const c=Math.sqrt(Pe(l.x-i.x,l.y-i.y)/Pe(l.x-i.ox,l.y-i.oy)),d=c-1;r((i.dx-(l.x+i.ox)*d)/2,(i.dy-(l.y+i.oy)*d)/2,c)}else r(i.dx,i.dy,1)}},n),n.addEventListener("wheel",i=>{if(n)if(i.preventDefault(),i.ctrlKey||i.metaKey){const l=Math.pow(2,i.deltaY/-100),c=n.getBoundingClientRect();r((i.clientX-c.left)*(1-l),(i.clientY-c.top)*(1-l),l)}else r(-i.deltaX,-i.deltaY,1)},{passive:!1});for(const[,i,l]of s)l&&we({capture:!0,onClick:i},l)}}),(()=>{const i=_i(),l=i.firstChild,c=l.nextSibling,d=n;typeof d=="function"?R(d,i):n=i;const u=t;return typeof u=="function"?R(u,l):t=l,f(l,()=>e.children),f(c,a(V,{each:s,children:h=>(()=>{const g=Si(),p=h[2];return typeof p=="function"?R(p,g):h[2]=g,f(g,()=>h[0]),g})()})),C(()=>En(e.g.transform[0]())!=null?l.style.setProperty("transform",En(e.g.transform[0]())):l.style.removeProperty("transform")),i})()},Mi=w("<div>"),Di=e=>{const[t,n]=e.handleW;let r;return W(()=>{r&&(t(),n(o=>{let s,i;if(o.data.type===M.Source)s=o.data.color,i=e.g.nodeColorBd(s);else if(o.data.sourceID){const l=e.g.nodes().get(o.data.sourceID);if(l){const c=l[0]();s=c.color,o.data.sourceHandle!==void 0&&(s=c.handles[o.data.sourceHandle][0]().color??s),i=e.g.nodeColorBg(s)}}return s===o.color&&o.ref===r?o:{...o,ref:r,color:s,style:i}}))}),W(()=>{r&&we({capture:!1,onEnter:o=>{const s=e.g.connectingEdge[0]();s&&s.pointerID===o&&t().data.type===M.Source!==s.isSource&&e.g.setTempConnectingEnd(e.nodeID,r,e.handleID)},onLeave:()=>{e.g.connectingEnd[0]().ref===r&&e.g.unsetTempConnectingEnd(r)},onDown:o=>{e.g.addConnectingEnd(o.id,e.nodeID,e.handleID,e.g.viewPos(o.x,o.y))},onUp:()=>{e.g.finConnecting(e.nodeID,e.handleID)},onDoubleClick:()=>{e.g.deleteEdge(e.nodeID,e.handleID)}},r)}),(()=>{const o=Mi(),s=r;return typeof s=="function"?R(s,o):r=o,f(o,()=>t().name),C(i=>{const l=`hrm-node-item hrm-handle hrm-pill ${t().style?"":Hs}`,c=t().style;return l!==i._v$&&H(o,i._v$=l),i._v$2=Ee(o,c,i._v$2),i},{_v$:void 0,_v$2:void 0}),o})()},Ni=new Map([["_|_","⊥"],["-:","∹"],["-<","⤙"],["-<<","⤛"],["->","→"],["->>","↠"],["->|","⇥"],["-|","⊣"],["-|","⊣"],["::","∷"],["::=","⩴"],[":=","≔"],["!=","≠"],["!|=","⊭"],["!||-","⊮"],["!||=","⊯"],["!~=","≄"],["!~~","≉"],["<-->","⟷"],["<-","←"],["<-<","↢"],["<->","↔"],["<-|","↤"],["<.>","⊙"],["<*>","⊗"],["<+>","⊕"],["<<-","↞"],["<<","≪"],["<=","≤"],["<==>","⟺"],["<=>","⇔"],["<=|","⤆"],["<|","◁"],["<~","⇜"],["=:","≕"],["==>","⟹"],["=>","⇒"],[">-","⤚"],[">=","≥"],[">>-","⤜"],[">>","≫"],["|-->","⟼"],["|-","⊢"],["|->","↦"],["|<-","⇤"],["|=","⊨"],["|=>","⤇"],["|>","▷"],["||-","⊩"],["||=","⊫"],["|||-","⊪"],["~=","≃"],["~>","⇝"],["~~","≈"]]),Ii=e=>Ni.get(e)||e,Bi=w("<div class=hrm-node-name-module>"),Ai=w("<div class=hrm-node-name><div class=hrm-node-name-name>"),Ti=w("<div class=hrm-node-mark>"),Pi=w("<div class=hrm-node-json>"),Li=w('<pre class="hrm-node-comment no-user-select no-pointer-events">'),Oi=w('<div class="hrm-node-item hrm-node-body">'),Mn=e=>(()=>{const t=Ai(),n=t.firstChild;return f(n,()=>Ii(e.name.name)),f(t,a(A,{get when(){return e.name.module},get children(){const r=Bi();return f(r,()=>"@"+e.name.module),r}}),null),t})(),Ke=e=>(()=>{const t=Ti();return f(t,()=>e.mark),t})(),zi=e=>{const t={[v.Alpha]:()=>(()=>{const n=Pi();return f(n,()=>ae(e.data.val)),n})(),[v.Beta]:()=>a(Ke,{mark:Ks}),[v.Delta]:()=>[a(Ke,{mark:Us}),a(A,{get when(){return e.data.comment},get children(){const n=Li();return f(n,()=>e.data.comment),n}})],[v.Lambda]:()=>a(Ke,{mark:Ws}),[v.Nu]:()=>a(Mn,{get name(){return e.data.name}}),[v.Pi]:()=>[a(Ke,{mark:Vs}),a(Mn,{get name(){return e.data.name}})]};return(()=>{const n=Oi();return f(n,a(at,{get component(){return t[e.data.type]}})),n})()},Ri=w("<div> + "),Dn=e=>{let t;const[n,r]=k(!1);return W(()=>{t&&we({onEnter:o=>{r(!0);const s=e.g.connectingEdge[0]();s&&s.pointerID===o&&s.isSource&&e.g.setTempConnectingEnd(e.nodeID,t,e.handleID)},onLeave:()=>{r(!1),e.g.connectingEnd[0]().ref===t&&e.g.unsetTempConnectingEnd(t)},onUp:()=>{e.g.finConnecting(e.nodeID,e.handleID)}},t)}),(()=>{const o=Ri(),s=t;return typeof s=="function"?R(s,o):t=o,C(()=>H(o,`hrm-node-item hrm-handle-new hrm-pill ${e.handleID<0?"lhs":"rhs"} ${n()?"opacity-100":""}`)),o})()},Hi=w("<div>"),Fi=w('<div class="hrm-node abs-lt no-user-select"><div class="hrm-node-row no-user-select">'),ji=e=>{const[t,n]=k(!1),[r,o]=e.nodeW;console.log("[HrmNode] render");let s,i;W(()=>{if(!s)return;const d=s;o(u=>({...u,ref:d,size:{w:d.offsetWidth,h:d.offsetHeight},selected:!1})),we({capture:!0,onEnter:u=>{const h=e.g.connectingEdge[0]();h&&h.pointerID===u&&!h.isSource&&e.g.setTempConnectingEnd(e.id,s,void 0)},onLeave:()=>{e.g.connectingEnd[0]().ref===i&&e.g.unsetTempConnectingEnd(i)},onUp:u=>{e.g.connectingEdge[0]()&&e.g.addConnectingEnd(u.id,e.id,void 0,e.g.viewPos(u.x,u.y))},onClick:u=>{if(!u.dragged){const h=u.modifiers.shift||u.modifiers.ctrl;e.g.selectOneNode(e.id,h)}},onDrag:u=>{r().selected?e.g.translateSelectedNodes(u.dx,u.dy,e.g.transform[0]().z):e.g.translateOneNode(e.id,u.dx,u.dy,e.g.transform[0]().z)},onDoubleClick:()=>{setTimeout(()=>{e.g.editNode(e.id)},100)}},s)}),W(()=>{i&&we({onEnter:()=>{n(!0)},onLeave:()=>{n(!1)},onDown:d=>{e.g.addConnectingEnd(d.id,e.id,void 0,e.g.viewPos(d.x,d.y))}},i)});const l=(d,u)=>a(Di,{get g(){return e.g},get nodeID(){return e.id},get node(){return r()},get handleID(){return u()},handleW:d}),c=(d,u)=>l(d,()=>u()+r().handles.lhs);return(()=>{const d=Fi(),u=d.firstChild,h=s;return typeof h=="function"?R(h,d):s=d,f(d,a(A,{get when(){return jo.has(r().data.type)},get children(){return a(Dn,{get g(){return e.g},get nodeID(){return e.id},handleID:-1/0,get node(){return r()}})}}),u),f(u,a(V,{get each(){return r().handles.slice(0,r().handles.lhs)},children:l}),null),f(u,a(zi,{get data(){return r().data}}),null),f(u,a(V,{get each(){return r().handles.slice(r().handles.lhs)},children:c}),null),f(d,a(A,{get when(){return Ko.has(r().data.type)},get children(){return a(Dn,{get g(){return e.g},get nodeID(){return e.id},handleID:1/0,get node(){return r()}})}}),null),f(d,a(A,{get when(){return!At.has(r().data.type)},get children(){const g=Hi(),p=i;return typeof p=="function"?R(p,g):i=g,C(()=>H(g,`hrm-node-handle hrm-pill ${t()?"opacity-100":""}`)),g}}),null),C(g=>{const p=!!At.has(r().data.type),x=!!r().selected,j=!!r().angular,Y=!r().angular,ie={left:`${r().position.x}px`,top:`${r().position.y}px`,...e.g.nodeColorBd(r().color)};return p!==g._v$&&d.classList.toggle("hrm-node-root",g._v$=p),x!==g._v$2&&d.classList.toggle("selected",g._v$2=x),j!==g._v$3&&d.classList.toggle("hrm-rect",g._v$3=j),Y!==g._v$4&&d.classList.toggle("hrm-pill",g._v$4=Y),g._v$5=Ee(d,ie,g._v$5),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),d})()},Ki=w('<svg><path class="hrm-edge-path hrm-edge-path-bd"stroke-width=6px fill=transparent></svg>',!1,!0),Ui=w("<svg><path class=hrm-edge-path stroke-width=3px fill=transparent></svg>",!1,!0),Wi=w("<svg><path class=cursor-pointer stroke-width=1rem fill=transparent></svg>",!1,!0),Vi=e=>{console.log("[HrmEdge] render");let t;const[n]=e.nodeW,[r]=e.handleW,o=S(()=>{console.log("[HrmEdge] Effect (path)"),n();const i=r();if(i.data.type!==M.Sink)return"";const l=i.data.sourceID,c=i.data.sourceHandle;if(l===void 0)return"";const d=e.g.viewRectOf(l,c),u=e.g.viewRect(i.ref);return!d||!u?"":e.nodeID===l?[pn(d,u),pn(d,u)]:[Bt(d,u,.5),Bt(d,u,-.5)]});W(()=>{if(t)return we({onDoubleClick:()=>{e.g.deleteEdge(e.nodeID,e.handleID)}},t)});const s=()=>{const i=r().color;return i?e.g.nodeColorStroke(i):{}};return[(()=>{const i=Ki();return C(()=>ee(i,"d",o()[1])),i})(),(()=>{const i=Ui();return C(l=>{const c=s(),d=o()[0];return l._v$=Ee(i,c,l._v$),d!==l._v$2&&ee(i,"d",l._v$2=d),l},{_v$:void 0,_v$2:void 0}),i})(),(()=>{const i=Wi(),l=t;return typeof l=="function"?R(l,i):t=i,C(()=>ee(i,"d",o()[0])),i})()]},Yi=e=>{const[t]=e.handleW;return a(A,{get when(){return S(()=>t().data.type===M.Sink)()&&t().data.sourceID},get children(){return a(Vi,e)}})},Gi=e=>{const[t]=e.nodeW;return a(V,{get each(){return t().handles},children:(n,r)=>a(Yi,{get g(){return e.g},get nodeW(){return e.nodeW},handleW:n,get nodeID(){return e.id},get handleID(){return r()}})})},qi=w('<svg class="hrm-edges no-user-select no-pointer-events">'),Xi=e=>[a(V,{get each(){return[...e.g.nodes()]},children:([t,n])=>a(ji,{get g(){return e.g},id:t,nodeW:n})}),(()=>{const t=qi();return f(t,a(V,{get each(){return[...e.g.nodes()]},children:([n,r])=>a(Gi,{get g(){return e.g},id:n,nodeW:r})})),t})()];const Ji=w('<svg class="hrm-edges no-user-select no-pointer-events"><path class="hrm-edge-path hrm-c-stroke-empty"stroke-width=2px fill=transparent>'),Zi=w("<div>"),Qi=e=>{const t=()=>{const s=e.g.connectingEdge[0]();return s?e.g.viewRectOf(s.nodeID,s.handleID):void 0},n=()=>{const s=e.g.connectingEdge[0]();if(!s)return;const i=e.g.connectingEnd[0](),l=e.g.nodes().get(s.nodeID),c=e.g.viewRectOf(s.nodeID,s.handleID);if(!l||!c)return;const d=e.g.viewRect(i.ref);if(d)return Bt(c,d,0)},r=()=>t()?.angular?"hrm-rect":"hrm-pill",o=()=>{const s=t();if(s)return{visibility:"visible",left:`${s.x}px`,top:`${s.y}px`,width:`${s.w}px`,height:`${s.h}px`}};return[(()=>{const s=Ji(),i=s.firstChild;return C(()=>ee(i,"d",n())),s})(),(()=>{const s=Zi();return C(i=>{const l=`hrm-editing-edge-handle no-pointer-events ${r()}`,c=o();return l!==i._v$&&H(s,i._v$=l),i._v$2=Ee(s,c,i._v$2),i},{_v$:void 0,_v$2:void 0}),s})()]},el=w("<div class=code-area><textarea></textarea><textarea disabled>"),rn=(e,t)=>e.lastIndexOf(`
`,t)+1,on=(e,t,n,r)=>e.slice(0,t)+r+e.slice(n),tl=(e,t,n)=>{const r=rn(e,t),o=e.slice(r,n).split(`
`);return[on(e,r,n,"  "+o.join(`
  `)),t+2,n+2*o.length]},nl=(e,t,n)=>{const r=rn(e,t);let o=t,s=n;const i=e.slice(r,n).split(`
`).map((l,c)=>{const d=l.startsWith("  ")?2:l.startsWith("	")?1:0;return c===0&&(o-=d),s-=d,l.slice(d)});return[on(e,r,n,i.join(`
`)),o,s]},gr=e=>{let t,n;const r=l=>{t=l,typeof e.ref=="function"&&e.ref(l)},o=l=>{!e.autoresize||!n||(n.value=l.value,n.style.width=`${l.clientWidth}px`,l.style.height=n.scrollHeight+"px")};W(()=>{e.autoresize&&o(t)});const s=l=>{if(e.onKeyDown&&e.onKeyDown(l))return;const c=l.currentTarget;switch(l.key){case"Tab":{l.preventDefault();const d=(l.shiftKey?nl:tl)(c.value,c.selectionStart,c.selectionEnd);c.value=d[0],c.selectionStart=d[1],c.selectionEnd=d[2]}break;case"Enter":{l.preventDefault();const d=l.currentTarget,u=d.selectionStart,h=d.value,g=/[ \t]*/y;g.lastIndex=rn(h,u-1);const p=g.exec(h)?.[0]??"";d.value=on(h,u,d.selectionEnd,`
`+p),d.selectionStart=d.selectionEnd=u+1+p.length}break}o(l.target)},i=l=>{o(l.currentTarget)};return(()=>{const l=el(),c=l.firstChild,d=c.nextSibling;c.$$keydown=s,Q(c,"input",e.onInput,!0),Q(c,"change",e.onChange),c.addEventListener("focus",i),R(r,c);const u=n;return typeof u=="function"?R(u,d):n=d,C(h=>{const g=e.autofocus,p=e.disabled,x=`form-control ${e.class}`,j=e.placeholder,Y=`form-control abs-lt ${e.class} code-area-hidden no-pointer-events no-user-select`;return g!==h._v$&&(c.autofocus=h._v$=g),p!==h._v$2&&(c.disabled=h._v$2=p),x!==h._v$3&&H(c,h._v$3=x),j!==h._v$4&&ee(c,"placeholder",h._v$4=j),Y!==h._v$5&&H(d,h._v$5=Y),h},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),C(()=>c.value=e.value),l})()};q(["input","keydown"]);const rl=w("<button class=suggest>"),ol=w("<div class=suggests>"),sl=w("<div class=hrm-edit-overlay>"),il=e=>(()=>{const t=rl();return t.$$click=()=>alert(e.label),f(t,()=>e.label),t})(),ll=e=>(()=>{const t=ol();return f(t,a(V,{get each(){return e.items},children:n=>a(il,n)})),t})(),al=e=>{let t,n;const r=o=>{if(n){if(o.key==="Enter"){let s=o.ctrlKey||o.metaKey;if(s||=!ms(n.value),s)return e.g.applyEditNode(n?n.value:""),!0}return!1}};return Lr(()=>{if(t){const o=["mousedown","touchstart","pointerdown","wheel"],s=i=>i.stopPropagation();for(const i of o)t.addEventListener(i,s);n?.click(),e.g.fitTransformFor(t)}}),(()=>{const o=sl(),s=t;return typeof s=="function"?R(s,o):t=o,f(o,a(F,{class:"shadow-1 w-fit mb-1",get children(){return[a($,{get color(){return y.success},onClick:()=>e.g.applyEditNode(n?n.value:""),get children(){return a(ui,{})}}),a($,{get color(){return y.warning},onClick:()=>{n.value="",n.focus()},get children(){return a(Ot,{})}}),a($,{get color(){return y.danger},onClick:()=>e.g.cancelEditNode(),get children(){return a(hi,{})}})]}}),null),f(o,a(gr,{ref(i){const l=n;typeof l=="function"?l(i):n=i},autofocus:!0,autoresize:!0,class:"shadow-1",placeholder:"[NODE DATA]",get value(){return ks(e.node.x)},onKeyDown:r}),null),f(o,a(ll,{items:[{label:"beta",text:"beta"},{label:"gamma",text:"gamma"},{label:"delta",text:"delta"},{label:"epsilon",text:"epsilon"},{label:"omega",text:"omega"},{label:"alpha",text:"alpha"},{label:"{",text:"{"}]}),null),C(i=>Ee(o,{...e.g.nodeColorBd(e.color),transform:`translate(${e.node.pos.x-16}px, ${e.node.pos.y-16}px)`},i)),o})()},cl=e=>a(A,{get when(){return e.g.editingNode[0]()},get children(){return a(al,{get g(){return e.g},get color(){return e.g.editingNode[0]().color},get node(){return e.g.editingNode[0]().node}})}});q(["click"]);const dl=e=>[e.ctrlKey?"C":"",e.altKey?"A":"",e.shiftKey?"S":"",e.metaKey?"M":"",e.key].join("-"),ul=w('<div class="hrm-container abs-parent"tabindex=0>'),hl=e=>{let t;W(()=>{console.log("Update rootRef",t),e.state.rootRef=t});const n=()=>{e.state.rootRef&&(e.state.rootRef.scrollLeft!=0||e.state.rootRef.scrollTop!=0)&&e.state.rootRef.scrollTo(0,0)},r=s=>{if(s.target!==e.state.rootRef)return;const i=dl(s);console.log(i),e.state.handleKey(i)},o=s=>{s.currentTarget.focus()};return(()=>{const s=ul();s.addEventListener("pointerenter",o),s.$$keydown=r,s.addEventListener("scroll",n);const i=t;return typeof i=="function"?R(i,s):t=s,f(s,a(Ei,{get g(){return e.state},onClick:()=>e.state.deselectAll(),onDoubleClick:l=>{const c=e.state.viewPos(l.x,l.y),d=e.state.addEmptyNode(c);setTimeout(()=>{e.state.editNode(d)},100)},onLongPress:()=>{ct("[Hrm] Long press")},get children(){return[a(Xi,{get g(){return e.state}}),a(Qi,{get g(){return e.state}}),a(cl,{get g(){return e.state}})]}})),s})()};q(["keydown"]);const fl=(e,t,n)=>.299*e+.587*t+.114*n,bt=(e,t,n)=>{n<0&&(n+=1),n>1&&(n-=1);let r;return n<1/2?(r=t,n<1/6&&(r=e+(t-e)*6*n)):(r=e,n<2/3&&(r=e+(t-e)*(2/3-n)*6)),Math.round(r*255)},gl=(e,t,n)=>{if(t===0)return[n,n,n];const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;return[bt(o,r,e+1/3),bt(o,r,e),bt(o,r,e-1/3)]},xt=(e,t,n)=>`hsl(${e}, ${t*100}%, ${n*100}%)`,Nn=e=>k({name:e,data:{type:M.Source,color:cr()}}),ne=(e,t)=>k({name:e,data:{type:M.Sink,sourceID:t?.id,sourceHandle:t?.handle}}),ml=e=>{let t=0,n;switch(e.x.type){case v.Alpha:n=[];break;case v.Beta:t=1,n=[ne(Lt,e.x.fn)];for(const r in e.x.args){const o=e.x.args[r];n.push(ne(r,o))}break;case v.Delta:n=[ne(Cn,e.x.val)];break;case v.Lambda:t=2,n=[ne(Fs,e.x.fallback),Nn(js),ne(Cn,e.x.ret)];break;case v.Nu:n=e.x.args.map((r,o)=>ne(String(o),r)),t=Oo(e.x.lhs,0,e.x.args.length);break;case v.Pi:n=[ne(Ys,e.x.pat)];for(let r=0;r<e.x.elems;r++)n.push(Nn(String(r+1)));t=1;break}return n.lhs=t,n},rt=e=>k({color:cr(),angular:e.x.type===v.Alpha,data:e.x,handles:ml(e),position:e.pos,size:{w:0,h:0},selected:!1}),qe=e=>{Rs();const t=new Map;for(const n of e)t.set(n.id,rt(n));return t},In=e=>{if(e.type===M.Sink&&e.sourceID)return{id:e.sourceID,handle:e.sourceHandle}},wl=e=>{const t=n=>In(e.handles[n][0]().data);switch(e.data.type){case v.Alpha:return{type:v.Alpha,val:e.data.val};case v.Beta:{const n=[];for(let r=1;r<e.handles.length;r++){const o=t(r);o&&n.push(o)}return{type:v.Beta,fn:t(0),args:n}}case v.Delta:return{type:v.Delta,comment:e.data.comment,val:t(0)};case v.Lambda:return{type:v.Lambda,fallback:t(0),ret:t(2)};case v.Nu:return{type:v.Nu,name:e.data.name,lhs:e.handles.lhs,args:e.handles.reduce((n,r)=>{const o=In(r[0]().data);return o&&n.push(o),n},[])};case v.Pi:return{type:v.Pi,pat:t(0),name:e.data.name,elems:e.data.elems}}},mr=(e,t)=>({id:e,pos:Bo(t.position),x:wl(t)}),Ft=e=>{const t=[];for(const[n,r]of e.entries())t.push(mr(n,r[0]()));return t},Bn=e=>{switch(e.data.type){case v.Beta:e.handles[0][1](t=>({...t,name:Lt})),e.handles[0][0]().name=Lt;for(let t=1;t<e.handles.length;t++)e.handles[t][1](n=>({...n,name:String(t-1)}));break;case v.Nu:for(let t=0;t<e.handles.length;t++)e.handles[t][1](n=>({...n,name:String(t)}));break;default:throw"Unimplemented"}},wr=e=>{const t=qe(e.nodes),n={type:v.Delta,val:e.val,comment:e.comment},r=rt({id:"#def",pos:{...It},x:n});return t.set("#def",r),t},yl=e=>{const t=Ft(e),n=t.filter(s=>s.x.type!==v.Delta),r=t.find(s=>s.x.type===v.Delta),o={type:"value",nodes:n,comment:""};if(r){for(const s of n)s.pos.x-=r.pos.x,s.pos.y-=r.pos.y;o.comment=r.x.comment,o.val=r.x.val}return o},pl=(e,t)=>{const[n,r]=k(t);let o=t,s;return[()=>(n(),o),c=>{typeof c=="function"?o=c(o):o=c,s===void 0&&(s=window.setTimeout(()=>{s=void 0,r(o)},e))}]},vl=()=>new Map([["C-a","selectAll"],["M-a","selectAll"],["Backspace","deleteSelectedNodes"],["Delete","deleteSelectedNodes"],["a","addEmptyNode"],["C-=","zoomIn"],["C--","zoomOut"]]);class yr{path;name;nodes;setNodes;transform;rootRef;viewRef;editingNode;connectingEdge;connectingEnd;history;historyIndex;selectMode=!1;keymap=new Map;constructor(t,n,r){const[o,s]=k(r,{equals:!1});this.path=t,this.name=n,this.nodes=o,this.setNodes=s,this.editingNode=k(),this.connectingEdge=k(),this.connectingEnd=k({pos:It}),this.transform=pl(16,{x:0,y:0,z:1}),this.history=[Ft(this.nodes())],this.historyIndex=0,this.keymap=vl()}thaw(t){this.setNodes(qe(t)),this.history=[t],this.historyIndex=0}freeze(){return Ft(this.nodes())}getSL(){const t=getComputedStyle(document.documentElement),n=Number(t.getPropertyValue("--hrm-node-saturate")),r=Number(t.getPropertyValue("--hrm-node-lightness"));return[n,r]}nodeColorBg(t){const[n,r]=this.getSL(),o=fl(...gl(t,n,r))>192?"#000":"#fff",s=xt(t,n,r);return{color:o,"background-color":s,"border-color":s}}nodeColorBd(t){const[n,r]=this.getSL();return{"border-color":xt(t,n,r)}}nodeColorStroke(t){const[n,r]=this.getSL();return{stroke:xt(t,n,r)}}saveHistory(){this.historyIndex++,this.history.length>this.historyIndex&&(this.history=this.history.slice(0,this.historyIndex)),this.history.push(this.freeze())}undo(){this.historyIndex>0&&this.setNodes(qe(this.history[--this.historyIndex]))}redo(){this.historyIndex<this.history.length-1&&this.setNodes(qe(this.history[++this.historyIndex]))}size(){if(!this.rootRef)return;const t=this.rootRef.getBoundingClientRect();return{w:t.width,h:t.height}}viewPos(t,n){if(!this.viewRef)return;const r=this.viewRef.getBoundingClientRect(),o=O(this.transform[0]);return console.log(r,o,t,n),{x:(t-r.left)/o.z,y:(n-r.top)/o.z}}viewRect(t){if(!t||!this.viewRef)return;const n=this.viewRef.getBoundingClientRect(),r=t.getBoundingClientRect(),o=!t.classList.contains("hrm-pill"),s=O(this.transform[0]);return{x:(r.left-n.left)/s.z,y:(r.top-n.top)/s.z,w:r.width/s.z,h:r.height/s.z,angular:o}}fitTransformFor(t){if(!t)return;const n=t.getBoundingClientRect(),r=this.rootRef.getBoundingClientRect();console.log(r);let o=0,s=0;n.right+o>r.right&&(o=r.right-n.right),n.left+o<r.left&&(o=r.left-n.left),n.bottom+s>r.bottom&&(s=r.bottom-n.bottom),n.top+s<r.top&&(s=r.top-n.top),this.transform[1](i=>({...i,x:i.x+o,y:i.y+s}))}usedRect(){const t={x:0,y:0,w:0,h:0};for(const[,n]of this.nodes()){const r=n[0](),o=r.position,s=r.size;t.x>o.x&&(t.w+=t.x-o.x,t.x=o.x),t.y>o.y&&(t.h+=t.y-o.y,t.y=o.y),t.w=Math.max(t.w,o.x+s.w-t.x),t.h=Math.max(t.h,o.y+s.h-t.y)}return t}viewRectOf(t,n){const r=this.nodes().get(t);if(!r)return;const o=r[0](),s=n===void 0?o.ref:o.handles[n][0]().ref;if(s)return this.viewRect(s)}addEmptyNode(t){if(!t){const l=this.transform[0](),c=this.rootRef;if(!c)t={x:0,y:0};else{const d=c.getBoundingClientRect();t={x:(d.width/2-l.x)/l.z,y:(d.height/2-l.y)/l.z}}}const n=Lo();let r;const o=this.connectingEdge[0]();if(o)if(o.isSource)r={id:o.nodeID,handle:o.handleID};else{const l=this.nodes().get(o.nodeID);l&&l[0]().handles[o.handleID][1](d=>({...d,data:{type:M.Sink,sourceID:n}}))}this.connectingEdge[1](void 0);const s={type:v.Beta,fn:r,args:[]},i={id:n,pos:t,x:s};return this.setNodes(l=>(l.set(i.id,rt(i)),l)),this.saveHistory(),i.id}translateOneNode(t,n,r,o){const s=this.nodes().get(t);s&&s[1](i=>({...i,position:{x:i.position.x+n/o,y:i.position.y+r/o}}))}translateSelectedNodes(t,n,r){for(const[,o]of this.nodes())o[1](s=>s.selected?{...s,position:{x:s.position.x+t/r,y:s.position.y+n/r}}:s)}selectAll(){for(const[,t]of this.nodes())t[1](n=>n.selected?n:{...n,selected:!0})}deselectAll(){for(const[,t]of this.nodes())t[1](n=>n.selected?{...n,selected:!1}:n)}selectOneNode(t,n){this.connectingEdge[1](void 0);for(const[r,o]of this.nodes())r===t?o[1](s=>({...s,selected:!s.selected})):!n&&!this.selectMode&&o[1](s=>s.selected?{...s,selected:!1}:s)}deleteSelectedNodes(){this.setNodes(t=>{const n=new Set;for(const[r,o]of t){const s=o[0]();s.selected&&!$n.has(s.data.type)&&n.add(r)}for(const[r,o]of t)if(n.has(r))t.delete(r);else{const i=o[0]().handles;for(const[,l]of i)l(c=>{if(c.data.type===M.Sink){const d=c.data.sourceID;if(d&&n.has(d))return{...c,data:{type:M.Sink}}}return c})}return t}),this.saveHistory()}deleteEdge(t,n){const r=this.nodes().get(t);r&&r[0]().handles[n][1](o=>o.data.type!==M.Sink?o:{...o,data:{type:M.Sink}})}resetConnectingState(){Z(()=>{this.connectingEdge[1](void 0),this.connectingEnd[1]({pos:It})})}setTempConnectingEnd(t,n,r){Z(()=>{const o=this.connectingEdge[0]();o&&(o.nodeID!==t||o.handleID!==r)&&this.connectingEnd[1](s=>({...s,ref:n}))})}unsetTempConnectingEnd(t){Z(()=>{this.connectingEdge[0]()&&this.connectingEnd[1](r=>r.ref===t?{...r,ref:void 0}:r)})}finConnecting(t,n){const r=this.connectingEdge[0]();r&&(r.nodeID!==t||r.handleID!==n)&&(r.isSource&&n!==void 0?this.connectEdge(t,n,r.nodeID,r.handleID):!r.isSource&&r.handleID!==void 0&&this.connectEdge(r.nodeID,r.handleID,t,n))}makeLeftHandle(t){const n=this.nodes().get(t);return n&&(n[1](r=>(r.handles.unshift(ne("")),r.handles.lhs++,{...r})),Bn(n[0]())),0}makeRightHandle(t){const n=this.nodes().get(t);if(!n)return 0;const r=n[0](),o=r.handles.length;return n[1](s=>(s.handles.push(ne("")),{...s})),Bn(r),o}connectEdge(t,n,r,o){Z(()=>{n===-1/0&&(n=this.makeLeftHandle(t)),n===1/0&&(n=this.makeRightHandle(t));const s=this.nodes(),i=s.get(t),l=s.get(r);if(!i||!l)return;if(o===void 0){if(At.has(l[0]().data.type))return}else{const d=l[0]().handles[o];if(!d||d[0]().data.type!==M.Source)return}i[0]().handles[n][1](d=>d.data.type!==M.Sink?d:{...d,data:{type:M.Sink,sourceID:r,sourceHandle:o}}),this.resetConnectingState(),this.saveHistory()})}updateConnectingEnd(t){this.connectingEnd[1](n=>({...n,pos:t}))}addConnectingEnd(t,n,r,o){this.deselectAll();const s=this.nodes().get(n);if(!s)return;const[i]=s;let l=!0;if(r!==void 0){const d=i().handles[r];if(!d)return;l=d[0]().data.type===M.Source}const c=this.connectingEdge[0]();if(c&&c.nodeID===n&&c.handleID===r){this.resetConnectingState();return}if(c&&!l===c.isSource)return l?this.connectEdge(c.nodeID,c.handleID,n,r):this.connectEdge(n,r,c.nodeID,c.handleID);Z(()=>{this.connectingEdge[1]({pointerID:t,isSource:l,nodeID:n,handleID:r}),o&&this.connectingEnd[1](d=>({...d,pos:o}))})}editNode(t){const n=this.nodes().get(t);n&&!$n.has(n[0]().data.type)&&this.editingNode[1]({node:mr(t,n[0]()),color:n[0]().color})}applyEditNode(t){Z(()=>{const n=this.editingNode[0]();if(!n)return;const r=n.node.id,o={...n.node,x:bs(t)},s=rt(o),i=this.nodes().get(r);if(!i)return;s[1](d=>({...d,color:i[0]().color}));const l=[];for(const d of i?i[0]().handles:[]){const u=d[0]();u.data.type===M.Sink&&u.data.sourceID&&l.push(u.data)}const c=s[0]().handles;for(let d=0;d<c.length;d++)c[d][1](u=>{if(u.data.type!==M.Sink)return u;const h={type:M.Sink},g=l[d];return g&&(h.sourceID=g.sourceID,h.sourceHandle=g.sourceHandle),{...u,data:h}});this.setNodes(d=>(d.set(r,s),d)),this.editingNode[1](void 0)})}cancelEditNode(){this.editingNode[1](void 0)}handleKey(t){const n=this.keymap.get(t);n&&n in this&&this[n]()}zoomIn(){this.transform[1](t=>({...t,z:t.z*1.1}))}zoomOut(){this.transform[1](t=>({...t,z:t.z/1.1}))}resetZoom(){this.transform[1](()=>({x:0,y:0,z:1}))}}const $l=w('<div class="editor-root-hrm abs-parent">'),kl=e=>(()=>{const t=$l();return f(t,a(hl,{get state(){return e.state}})),t})(),bl=w("<div class=dropdown><button></button><div>"),xl=w("<hr>"),sn=e=>{const[t,n]=k(!1);return(()=>{const r=bl(),o=r.firstChild,s=o.nextSibling;return o.$$click=()=>{n(i=>!i)},f(o,()=>e.children),s.$$click=()=>{n(!1)},f(s,a(V,{get each(){return e.list},children:(i,l)=>[a(A,{get when(){return l()>0},get children(){return xl()}}),a(V,{each:i,children:c=>c})]})),C(i=>{const l=`btn btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`,c=`dropdown-menu ${t()?"visible":"hidden"}`;return l!==i._v$&&H(o,i._v$=l),c!==i._v$2&&H(s,i._v$2=c),i},{_v$:void 0,_v$2:void 0}),r})()};q(["click"]);const Cl=w("<div>"),Ce=e=>(()=>{const t=Cl();return f(t,()=>e.children),C(()=>H(t,`form-control btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`)),t})();const _l=w('<div class=m-modal><div class="m-modal-content m-modal-content-stick-to-center">'),pr=e=>{const t=n=>{e.onClose&&n.target===n.currentTarget&&e.onClose()};return(()=>{const n=_l(),r=n.firstChild;return n.$$click=t,f(r,()=>e.children),C(()=>r.classList.toggle("h-100",!!e.fullHeight)),n})()};q(["click"]);const Ct=w("<h3> <!> "),Sl=e=>a(pr,{get onClose(){return e.onClose},get children(){return[a(F,{get children(){return[a(Ce,{get color(){return y.primary},get children(){return a(dr,{})}}),a(fe,{class:"flex-1",readonly:!0,value:"Graph Tools"}),a($,{get color(){return y.danger},get onClick(){return e.onClose},get children(){return a(fr,{})}})]}}),(()=>{const t=Ct(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.layout"),r),t})(),a($,{get color(){return y.primary},get children(){return[" ",S(()=>m("graphTools.tool.layoutDefault"))," "]}}),a($,{get color(){return y.secondary},get children(){return[" ",S(()=>m("graphTools.tool.layoutLinear"))," "]}}),(()=>{const t=Ct(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.optimization"),r),t})(),a($,{get color(){return y.warning},get children(){return[" ",S(()=>m("graphTools.tool.selectUnreachables"))," "]}}),(()=>{const t=Ct(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,f(t,()=>m("graphTools.validate"),r),t})(),a($,{get color(){return y.danger},get children(){return[" ",S(()=>m("graphTools.tool.validateGraph"))," "]}})]}});var _=(e=>(e[e.NotFound=0]="NotFound",e[e.File=1]="File",e[e.Directory=2]="Directory",e))(_||{});const An={0:"NotFound",1:"File",2:"Directory"},El={type:0,path:"",size:0,lastModified:new Date};class Ml extends Error{constructor(t,n,r){super(`Storage item type mismatch: ${t}, (${n.map(o=>An[o]).join(", ")}) !== ${An[r]}`)}}const pe=(e,t,n)=>{if(!t.includes(n))throw new Ml(e,t,n)},Dl="kitl-idbfs",Nl=1,jt="meta",Kt="data",Il={path:"",type:_.NotFound,size:0,lastModified:0},Bl=["get","getAll","put","delete","clear"],Tn=(e,t)=>Object.fromEntries(Bl.map(n=>[n,(...r)=>new Promise((o,s)=>{const i=e.objectStore(t)[n](...r);i.onsuccess=()=>o(i.result),i.onerror=()=>s(i.error)})])),te=e=>{const[t,n]=Jt(e);if(!Ms(n))throw new Error("Path must be absolute");return[t,n]},Al=e=>{if(!e.readwrite)throw new Error("Failed to process: IDBFS is created as readonly mode.")},Me=async(e,t)=>{const[n]=te(t);try{return await e.meta.get(n)}catch{return Il}},ye=async(e,t,n,r)=>{console.log("rawWrite",n,t,r.byteLength),await e.meta.put({path:n,type:t,size:r.byteLength,lastModified:Date.now()}),await e.data.put({path:n,data:r})},ln=async e=>{await e.meta.clear(),await e.data.clear(),await ye(e,_.Directory,"/",Te(""))},ut=async(e,t)=>{try{return(await Me(e,t)).type}catch{return _.NotFound}},Tl=async(e,t)=>{Al(e);const[,n]=te(t);let r=n.length;for(;r>=1;--r){const i=Ae(n.slice(0,r)),l=await ut(e,i);if(l===_.Directory)break;pe(i,[_.NotFound],l)}const o=Ae(n.slice(0,r)),s=await ht(e,o);for(s.push(n[r]),await ye(e,_.Directory,o,Te(s.join(`
`))),++r;r<=n.length;++r){const i=Ae(n.slice(0,r)),l=r<n.length?Te(n[r]):new Uint8Array(0);await ye(e,_.Directory,i,l)}},ht=async(e,t)=>{const[n]=te(t),r=await Me(e,n);pe(n,[_.Directory],r.type);const o=await e.data.get(n);return Eo(o.data).split(`
`).map(s=>s.trim()).filter(s=>s.length>0)},Pl=async(e,t)=>{const n=await ht(e,t),r=[];for(const o of n){const[s]=Jt(`${t}/${o}`),i=await Me(e,s);r.push({...i,lastModified:new Date(i.lastModified)})}return r},vr=async(e,t,n)=>{const[r]=te(t),o=await Me(e,r);pe(r,[_.Directory],o.type);const s=new Set(await ht(e,r));s.add(n),await ye(e,_.Directory,r,Te(Array.from(s).join(`
`)))},_t=async(e,t,n)=>{const[r,o]=te(t),s=await ut(e,t);return pe(t,[_.File,_.NotFound],s),s===_.NotFound&&await vr(e,t+"/..",o[o.length-1]),await ye(e,_.File,r,n),await Me(e,t)},St=async(e,t)=>{const[n]=te(t),r=await ut(e,n);return pe(n,[_.File],r),(await e.data.get(n)).data},$r=async(e,t)=>{const[n]=te(t),r=n+"/";return(await e.meta.getAll()).map(s=>s.path).filter(s=>s===t||s.startsWith(r))},kr=async(e,t)=>{const[n,r]=te(t);if(n.length<=1)return await ln(e);const o=Ae(r.slice(0,r.length-1)),s=await e.meta.get(o);pe(n,[_.Directory],s.type),(await $r(e,n)).forEach(l=>{e.meta.delete(l),e.data.delete(l)});const i=await ht(e,o);await ye(e,_.Directory,o,Te(i.filter(l=>l!==r[r.length-1]).join(`
`)))},br=async(e,t,n)=>{const[r]=te(t),[o]=te(n);if(o===r||o.startsWith(r+"/"))throw new Error("Cannot copy to a subdirectory");const s=(await $r(e,r)).map(i=>i.slice(r.length));for(const i of s){const l=r+i,c=o+i,d=await e.meta.get(l),u=await e.data.get(l);await ye(e,d.type,c,u.data)}n!=="/"&&await vr(e,o+"/..",o.split("/").pop())},Ll=async(e,t,n)=>{await br(e,t,n),await kr(e,t)},Ol=()=>new Promise((e,t)=>{const n=indexedDB.open(Dl,Nl);n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error),n.onupgradeneeded=r=>{const o=n.result,s=i=>o.createObjectStore(i,{keyPath:"path"});r.oldVersion===0?(s(jt),s(Kt),e(o)):t(n.error)}}),G=async e=>{const t=await(await Ol()).transaction([jt,Kt],e?"readwrite":"readonly");return{readwrite:!!e,meta:Tn(t,jt),data:Tn(t,Kt)}},xr=async()=>{const e=await G(!0);try{const t=await ut(e,"/");pe("/",[_.Directory],t)}catch{console.warn("IDBFS is broken. Format it."),await ln(e)}};xr();const Et=e=>({...e,lastModified:new Date(e.lastModified)});class zl{constructor(){xr()}ping(){return 1}execute(t){return""}getExecutionState(t){return{}}async format(){const t=await G(!0);return await ln(t)}async stat(t){const n=await G(!1);return Et(await Me(n,t))}async mkdir(t){const n=await G(!0);await Tl(n,t)}async list(t){const n=await G(!1);return await Pl(n,t)}async read(t){const n=await G(!1);return await St(n,t)}async write(t,n){const r=await G(!0);return Et(await _t(r,t,n))}async remove(t){const n=await G(!0);await kr(n,t)}async move(t,n){const r=await G(!0);await Ll(r,t,n)}async copy(t,n){const r=await G(!0);await br(r,t,n)}async readJson(t,n){const r=await G(!1),o=await St(r,t);let i=JSON.parse(new TextDecoder().decode(o));for(const l of n)i=i[l];return i}async writeJson(t,n,r){let o;const s=await G(!0),i=n.length;if(i===0)o=await _t(s,t,new TextEncoder().encode(JSON.stringify(r)));else{const l=await St(s,t),c=JSON.parse(new TextDecoder().decode(l));let d=c;for(let u=0;u<i-1;u++)d=d[n[u]];d[n[i-1]]=r,o=await _t(s,t,new TextEncoder().encode(JSON.stringify(c)))}return Et(o)}}class Rl{local;clients;constructor(){this.local=new zl,this.clients=new Map([["local",this.local]])}parsePath(t){const[n,r]=Zt(t);return[this.clients.get(n),r]}async stat(t){const[n,r]=this.parsePath(t);return await n.stat(r)}async list(t){const[n,r]=this.parsePath(t);return await n.list(r)}async mkdir(t){const[n,r]=this.parsePath(t);return await n.mkdir(r)}async read(t){const[n,r]=this.parsePath(t);return await n.read(r)}async write(t,n){const[r,o]=this.parsePath(t);return await r.write(o,n)}async remove(t){const[n,r]=this.parsePath(t);return await n.remove(r)}async copy(t,n){const[r,o]=this.parsePath(t),[s,i]=this.parsePath(n);if(r===s)return await r.copy(o,i);switch((await r.stat(o)).type){case _.Directory:{await s.mkdir(i);const c=await r.list(o);for(const d of c){const u=ir(d.path);await this.copy(`${t}/${u}`,`${n}/${u}`)}}break;default:{const c=await r.read(o);await s.write(i,c)}}}async move(t,n){const[r,o]=this.parsePath(t),[s,i]=this.parsePath(n);if(r===s)return await r.move(o,i);this.copy(t,n),await r.remove(o)}async readJson(t,n){const[r,o]=this.parsePath(t);return await r.readJson(o,n)}async writeJson(t,n,r){const[o,s]=this.parsePath(t);return await o.writeJson(s,n,r)}}const L=new Rl,Hl=1024*128,Cr=()=>({items:[],isCutted:!1}),Fl=e=>({path:k(e),storageItem:k(),data:k(),ls:k(),copyState:k(Cr()),uploads:k(new Set,{equals:!1})}),jl=e=>{confirm(m("fileBrowser.prompt.resetLocal"))&&(L.local.format(),De(e,"local:/"))},_r=async e=>{const t=e.path[0],n=await L.stat(t());e.storageItem[1](n)},Ut=async e=>{const t=e.path[0];if(e.storageItem[0]()?.type===_.Directory){const o=await L.list(t());o.sort((s,i)=>s.type===i.type?s.path.localeCompare(i.path):s.type===_.Directory?-1:1),Z(()=>{e.ls[1](o),e.data[1](new Uint8Array)});return}const r=await L.read(t());Z(()=>{e.data[1](r),e.ls[1]([])})},De=(e,t)=>{const[n,r]=sr(t);t=`${n}:${r}`,Z(()=>{e.path[1](t),e.storageItem[1](void 0),e.data[1](void 0),e.ls[1](void 0)}),_r(e).catch(()=>{console.warn("Failed to load meta ",t),e.storageItem[1](El)})},Kl=e=>{const t=e.path[0]();De(e,t+"/..")},ve=e=>{const t=e.path[0]();De(e,t)},Ul=e=>{const t=e.storageItem[0]();return t&&t.size>Hl},Wl=async(e,t)=>{const n=e.path[0];await L.mkdir(n()+"/"+t)},Vl=async(e,t)=>{const n=e.path[0];await L.write(n()+"/"+t,new Uint8Array)},ft=(e,t)=>{t=t??"new";const n=e.ls[0]();if(n===void 0)return t;const r=new Set(n.map(i=>Xt(i.path).pop()));let o=t,s=0;for(;r.has(o);)o=Ns(t,s++);return o},Yl=(e,t,n)=>{e.uploads[1](o=>o.add(t));const r=new FileReader;r.onload=()=>{L.write(t,new Uint8Array(r.result)).then(()=>{e.uploads[1](o=>(o.delete(t),De(e,e.path[0]()),se(`${m("fileBrowser.toast.uploadSuccess")}: ${t}`),o))}).catch(()=>{e.uploads[1](o=>(o.delete(t),o)),J(`${m("fileBrowser.toast.uploadError")}: ${t}`)})},r.onerror=()=>{e.uploads[1](o=>(o.delete(t),o)),alert(`${m("fileBrowser.toast.uploadReadError")}: ${t}`)},r.readAsArrayBuffer(n)},Gl=(e,t,n)=>{e.ls[1](r=>r&&r.map(o=>(o.path===t&&(o.selected=n),o)))},ot=e=>{const t=e.path[0]().split(":")[0],n=e.ls[0]();return n?n.filter(r=>r.selected).map(r=>`${t}:${r.path}`):[]};class gt extends Error{constructor(){super("Nothing selected")}}const Sr=(e,t)=>{if(ot(e).length===0)throw new gt;e.copyState[1]({items:ot(e),isCutted:t})},ql=async e=>{const t=e.path[0];if(!e.storageItem[0]())return;const r=t(),o=new Set((e.ls[0]()??[]).map(i=>i.path.split("/").pop())),s=e.copyState[0]();for(const i of s.items){let l=i.split("/").pop();o.has(l)&&!confirm(m("fileBrowser.prompt.pasteOverwrite"))&&(l=ft(e,l));const c=r+"/"+l;console.log("Paste",i,c),await L[s.isCutted?"move":"copy"](i,c)}s.isCutted&&e.copyState[1](Cr())},Xl=async e=>{if(confirm(m("fileBrowser.prompt.deleteSelected")))for(const t of ot(e))await L.remove(t)},Jl=async(e,t)=>{await L.move(e,e+"/../"+t)},Zl=async e=>{const t=ot(e);if(t.length<1)throw new gt;for(const n of t){const r=n.split("/").pop();if(!r)return;const o=`${m("fileBrowser.prompt.renameSelected")}:
${n}`,s=prompt(o,r);if(!s)return;await Jl(n,s)}ve(e)},Er=async(e,t)=>{const n=e.path[0](),r=e.storageItem[0]();if(!r)return;const o=await L.stat(n);o&&((r.lastModified<o.lastModified||r.size!==o.size)&&!confirm(m("fileBrowser.prompt.saveConflict"))||(await L.write(n,new TextEncoder().encode(t)),e.storageItem[1](await L.stat(n)),se(m("fileBrowser.toast.saved"))))},Pn=w("<a>&nbsp; "),Ql=e=>{const t=()=>[[(()=>{const o=Pn(),s=o.firstChild;return o.$$click=()=>ve(e.state),f(o,a(ai,{}),s),f(o,()=>m("fileBrowser.menu.refresh"),null),o})()],[(()=>{const o=Pn(),s=o.firstChild;return o.$$click=()=>jl(e.state),f(o,a(fi,{}),s),f(o,()=>m("fileBrowser.menu.formatLocalStorage"),null),o})()]];let n;const r=()=>{De(e.state,n.value)};return a(F,{class:"sticky-top shadow-1 mb-2",get children(){return[a(sn,{get color(){return y.primary},get list(){return t()},get children(){return a(hr,{})}}),a($,{get color(){return y.secondary},onClick:()=>Kl(e.state),get children(){return a(si,{})}}),a(fe,{ref(o){const s=n;typeof s=="function"?s(o):n=o},class:"flex-1",get value(){return e.state.path[0]()},onBlur:r,onKeyDown:o=>{o.key==="Enter"&&n.blur()}}),a($,{get color(){return y.danger},get onClick(){return e.state.onClose},get children(){return a(fr,{})}})]}})};q(["click"]);const ea=w("<input type=file class=d-none>"),ta=e=>{let t,n;const r=i=>{n=i,typeof e.ref=="function"&&e.ref(i)},o=i=>{e.onFiles&&e.onFiles(i.target.files),t.value=n.value};return a(F,{get class(){return e.class},onDrop:i=>{i.preventDefault(),i.stopPropagation(),e.onFiles&&e.onFiles(i.dataTransfer.files)},get children(){return[a(fe,{class:"flex-1",ref(i){const l=t;typeof l=="function"?l(i):t=i},get placeholder(){return e.placeholder},onClick:()=>{n?.click()}}),(()=>{const i=ea();return i.addEventListener("change",o),R(r,i),i})(),a($,{get color(){return y.primary},onClick:()=>{n?.click()},children:"..."})]}})},na=e=>{const t=" KMGTPE";let n=0;if(e<1024)return`${e} B`;for(;e>=1024&&n<t.length;)e/=1024,++n;return`${e.toFixed(2)} ${t[n]}B`},Ie=w("<a>&nbsp; "),ra=w("<tr><td></td><td class=word-break-all><a>&nbsp;</a></td><td class=text-right><br>"),oa=w("<table class=w-100><thead><tr><th></th><th></th><th class=text-right><br> </th></tr></thead><tbody>"),sa=w("<div>"),Ue=e=>()=>{try{Sr(e,!1),se(m("fileBrowser.toast.copySuccess"))}catch(t){if(!(t instanceof gt))throw t;J(m("fileBrowser.toast.nothingSelected"))}},Ln=e=>()=>{try{Sr(e,!0),se(m("fileBrowser.toast.cutSuccess")),ve(e)}catch(t){if(!(t instanceof gt))throw t;J(m("fileBrowser.toast.nothingSelected"))}},ia=e=>async()=>{try{await ql(e),se(m("fileBrowser.toast.pasteSuccess"))}catch(t){J(m("fileBrowser.toast.pasteError")),console.warn("Failed to paste files",t);return}ve(e)},la=e=>async()=>{try{await Xl(e),se(m("fileBrowser.toast.deleteSuccess"))}catch{J(m("fileBrowser.toast.deleteError"))}ve(e)},aa=e=>async()=>{try{await Vl(e,ft(e)),se(m("fileBrowser.toast.newFileSuccess"))}catch(t){J(m("fileBrowser.toast.newFileError")),console.warn("Failed to create new file",t)}ve(e)},ca=e=>async()=>{try{await Wl(e,ft(e)),se(m("fileBrowser.toast.newFolderSuccess"))}catch(t){J(m("fileBrowser.toast.newFolderError")),console.warn("Failed to create new file",t)}ve(e)},da=e=>async t=>{for(const n of t){if(n===void 0)return;const r=ft(e,n.name),o=`${e.path[0]()}/${r}`;Yl(e,o,n),Os(m("fileBrowser.toast.uploadingFiles"))}},ua=e=>a(F,{class:"my-1",get children(){return[a(sn,{get color(){return y.primary},get list(){return[[(()=>{const t=Ie(),n=t.firstChild;return t.$$click=()=>Zl(e.state),f(t,a(tn,{}),n),f(t,()=>m("fileBrowser.menu.rename"),null),t})()],[(()=>{const t=Ie(),n=t.firstChild;return t.$$click=()=>Ue(e.state),f(t,a(Rt,{}),n),f(t,()=>m("fileBrowser.menu.copy"),null),t})(),(()=>{const t=Ie(),n=t.firstChild;return t.$$click=()=>Ln(e.state),f(t,a(_n,{}),n),f(t,()=>m("fileBrowser.menu.cut"),null),t})(),(()=>{const t=Ie(),n=t.firstChild;return t.$$click=()=>Ue(e.state),f(t,a(zt,{}),n),f(t,()=>m("fileBrowser.menu.paste"),null),t})()],[(()=>{const t=Ie(),n=t.firstChild;return t.$$click=()=>Ue(e.state),f(t,a(Ht,{}),n),f(t,()=>m("fileBrowser.menu.delete"),null),t})()]]},get children(){return a(hr,{})}}),a($,{get color(){return y.secondary},get onClick(){return ia(e.state)},class:"flex-1",get children(){return a(zt,{})}}),a($,{get color(){return y.secondary},get onClick(){return Ue(e.state)},class:"flex-1",get children(){return a(Rt,{})}}),a($,{get color(){return y.warning},get onClick(){return Ln(e.state)},class:"flex-1",get children(){return a(_n,{})}}),a($,{get color(){return y.danger},get onClick(){return la(e.state)},class:"flex-1",get children(){return a(Ht,{})}})]}}),ha=e=>[a(F,{class:"my-1",get children(){return[a($,{get color(){return y.primary},get onClick(){return ca(e.state)},class:"flex-1",get children(){return[a(ri,{}),"  ",S(()=>m("fileBrowser.folder"))]}}),a($,{get color(){return y.secondary},get onClick(){return aa(e.state)},class:"flex-1",get children(){return[a(ti,{}),"  ",S(()=>m("fileBrowser.file"))]}})]}}),a(ta,{get placeholder(){return m("fileBrowser.uploadPlaceholder")},get onFiles(){return da(e.state)}})],fa=e=>{const t=()=>{const r=Xt(e.meta.path);return r[r.length-1]},n=()=>{switch(e.meta.type){case _.Directory:return a(ii,{});case _.File:return a(ni,{});default:return a(li,{})}};return(()=>{const r=ra(),o=r.firstChild,s=o.nextSibling,i=s.firstChild,l=i.firstChild,c=s.nextSibling,d=c.firstChild;return f(o,a(xo,{onChange:u=>{Gl(e.state,e.meta.path,u)}})),i.$$click=()=>{De(e.state,`${e.host}:${e.meta.path}`)},f(i,n,l),f(i,t,null),f(c,()=>na(e.meta.size),d),f(c,()=>As(e.meta.lastModified),null),r})()},ga=e=>{const t=()=>{const[r]=Zt(e.state.path[0]());return r},n=()=>{const r=e.state.ls[0]();return r===void 0||r.length===0};return W(()=>{Ut(e.state)}),[a(ua,e),a(A,{get when(){return!n()},get fallback(){return(()=>{const r=sa();return f(r,()=>m("fileBrowser.directory.empty")),r})()},get children(){const r=oa(),o=r.firstChild,s=o.firstChild,i=s.firstChild,l=i.nextSibling,c=l.nextSibling,d=c.firstChild;d.nextSibling;const u=o.nextSibling;return f(l,()=>m("fileBrowser.name")),f(c,()=>m("fileBrowser.size"),d),f(c,()=>m("fileBrowser.modified"),null),f(u,a(V,{get each(){return e.state.ls[0]()},children:h=>a(fa,{get state(){return e.state},get host(){return t()},meta:h})})),r}}),a(ha,{get state(){return e.state}})]};q(["click"]);const ma=w('<div class="m-2 text-center em-2">'),Mr=e=>(()=>{const t=ma();return f(t,a(Jn,{}),null),f(t,()=>e.children,null),t})(),wa=w("<img class=browser-image>"),ya=e=>{const[t,n]=k("");W(()=>{const o=e.state.data[0]();o!==void 0&&Mo(o).then(n)});const r=()=>e.state.data[0]()===void 0?"":`data:image;base64,${t()}`;return(()=>{const o=wa();return C(()=>ee(o,"src",r())),o})()},pa=e=>{const[t,n]=k(!1),r=()=>n(!0),o=()=>{t()&&(Er(e.state,s.value),n(!1))};let s;const i=()=>{const c=e.state.data[0]();return c?new TextDecoder("utf-8").decode(c):"<NOT LOADED>"};return[a(()=>a(F,{class:"my-1",get children(){return a($,{get color(){return t()?y.primary:y.secondary},onClick:o,get disabled(){return!t()},class:"flex-1",get children(){return[a(gi,{})," ",S(()=>m("fileBrowser.menu.save"))]}})}}),{}),a(gr,{ref(c){const d=s;typeof d=="function"?d(c):s=c},autoresize:!0,get value(){return i()},onChange:r,onInput:r})]},va=w("<hr>"),$a=w("<div>"),ze={value:y.primary,tag:y.success,type:y.warning,alias:y.secondary},Re=(e,t)=>n=>({...n,defs:{...n.defs,[e]:t}}),On=e=>t=>{const n={...t.defs};return delete n[e],{...t,defs:n}},_e=(e,t)=>Z(()=>{t.forEach(n=>e.root[1](n)),e.modified[1](!0)}),Dr=(e,t)=>{if(t=tr(t),!t)throw J(m("fileBrowser.toast.invalidDefCreationName")),new Error("Invalid name");if(e.root[0]().defs[t])throw J(m("fileBrowser.toast.defAlreadyExists")),new Error("Already exists");return t},ka=e=>{let t="",n=Es({});const r=e.data[0]();if(r!==void 0&&r.byteLength!==0)try{const d=JSON.parse(new TextDecoder("utf-8").decode(r));n=Ss(d)}catch{J(m("fileBrowser.toast.invalidKitl")),t=m("fileBrowser.toast.invalidKitl")}const[o,s]=k(!1),[i,l]=k(n),c=d=>(s(!0),l(d));return{modified:[o,s],errorMessage:k(t),root:[i,c]}},mt=e=>{const[t,n]=k(!1);let r;const[o,s]=k(!1),i=()=>_e(e.contents,[On(e.name)]),l=()=>{const c=Dr(e.contents,r?.value??"");c!==e.name&&_e(e.contents,[Re(c,e.contents.root[0]().defs[e.name]),On(e.name)]),s(!1)};return[a(F,{class:"my-1",get children(){return[a(Ce,{get color(){return ze[e.type]},get children(){return m(`defType.${e.type}`)}}),a(fe,{class:"flex-1",get value(){return e.name},get readonly(){return!o()},ref(c){const d=r;typeof d=="function"?d(c):r=c},onKeyDown:c=>{c.key==="Enter"&&l()},onClick:()=>{s(!0)}}),a(A,{get when(){return e.label!==void 0},get children(){return a(Ce,{get color(){return y.secondary},get children(){return e.label}})}}),a(A,{get when(){return o()},get fallback(){return a($,{get color(){return y.danger},onClick:i,get children(){return a(Ht,{})}})},get children(){return a($,{get color(){return y.primary},onClick:l,get children(){return a(dt,{})}})}}),a($,{get color(){return y.secondary},onClick:()=>e.onOpen?e.onOpen():n(c=>!c),get children(){return a(A,{get when(){return t()},get fallback(){return a(tn,{})},get children(){return a(Zs,{})}})}})]}}),a(A,{get when(){return t()},get children(){return e.children}})]},ba=e=>a(mt,{type:"value",get name(){return e.name},get contents(){return e.contents},onOpen:async()=>{e.state.editValueDef&&(await e.state.editValueDef(e.state.path[0](),e.name),e.state.onClose?.())}}),Nr=e=>(e?.value??"").split(",").map(tr).filter(t=>t),xa=e=>{const t=()=>e.def;let n;const r=()=>{const o=Nr(n);_e(e.contents,[Re(e.name,{type:"tag",elems:o})])};return a(mt,{type:"tag",get name(){return e.name},get contents(){return e.contents},get label(){return""+t().elems.length},get children(){return a(F,{class:"ml-3 my-1",get children(){return[a(Ce,{get color(){return ze[e.def.type]},get children(){return a(en,{})}}),a(fe,{class:"flex-1",get value(){return t().elems.join(",")},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),a($,{get color(){return y.primary},onClick:r,get children(){return a(dt,{})}})]}})}})},Ca=e=>{const t=()=>e.def;let n;const r=()=>{const o=Nr(n);_e(e.contents,[Re(e.name,{type:"type",unions:o})])};return a(mt,{type:"type",get name(){return e.name},get contents(){return e.contents},get label(){return""+t().unions.length},get children(){return a(F,{class:"ml-3 my-1",get children(){return[a(Ce,{get color(){return ze[e.def.type]},get children(){return a(en,{})}}),a(fe,{class:"flex-1",get value(){return t().unions.join(",")},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),a($,{get color(){return y.primary},onClick:r,get children(){return a(dt,{})}})]}})}})},_a=e=>{const t=()=>e.def;let n;const r=()=>{const o=n?.value;if(!o){J(m("fileBrowser.toast.invalidDefCreationName"));return}_e(e.contents,[Re(e.name,{type:"alias",origin:o})])};return a(mt,{type:"alias",get name(){return e.name},get contents(){return e.contents},get children(){return a(F,{class:"ml-3 my-1",get children(){return[a(Ce,{get color(){return ze[e.def.type]},get children(){return a(en,{})}}),a(fe,{class:"flex-1",get value(){return t().origin},ref(o){const s=n;typeof s=="function"?s(o):n=o}}),a($,{get color(){return y.primary},onClick:r,get children(){return a(dt,{})}})]}})}})},Sa={type:Ca,tag:xa,value:ba,alias:_a},Ea=e=>{const t=ka(e.state),n=()=>Object.entries(t.root[0]().defs).sort((s,i)=>s[0].localeCompare(i[0])),r=()=>{const s=async()=>{const i=JSON.stringify(t.root[0]());await Er(e.state,i),t.modified[1](!1)};return a(F,{class:"my-1",get children(){return a($,{get color(){return t.modified[0]()?y.primary:y.secondary},class:"flex-1",onClick:s,get disabled(){return!t.modified[0]()},get children(){return[a(ur,{})," ",S(()=>m("fileBrowser.menu.save"))]}})}})},o=()=>{let s;const[i,l]=k(0),c=()=>{l((i()+1)%je.length)},d=()=>{const u=Dr(t,s?.value??"");_e(t,[Re(u,Cs[je[i()]]())]),s.value=""};return["Creation",a(F,{class:"my-1",get children(){return[a($,{get color(){return ze[je[i()]]},onClick:c,get children(){return m(`defType.${je[i()]}`)}}),a(fe,{class:"flex-1",placeholder:"Name",ref(u){const h=s;typeof h=="function"?h(u):s=u},onKeyDown:u=>{u.key==="Enter"&&d()}}),a($,{get color(){return y.primary},onClick:d,get children(){return a(nn,{})}})]}})]};return[a(A,{get when(){return t.errorMessage[0]()},get children(){return t.errorMessage[0]()}}),a(r,{}),a(o,{content:t}),va(),(()=>{const s=$a();return f(s,a(V,{get each(){return n()},children:i=>a(at,{get component(){return Sa[i[1].type]},get state(){return e.state},contents:t,get name(){return i[0]},get def(){return i[1]}})})),s})()]},Ma=w('<div class="w-100 text-center"><br>(<!> bytes).<br>'),Da=new Map([[Ge.Unknown,pa],[Ge.Kitl,Ea],[Ge.Image,ya]]),Na=e=>{const t=Ul(e.state),[n,r]=k(!t);t||Ut(e.state);const o=async()=>{r(!0),Ut(e.state)},s=()=>e.state.path[0](),i=()=>ir(s()),l=()=>Ds(i())[1],c=()=>Da.get(Bs(l()));return a(Wt,{get children(){return[a(ce,{get when(){return!n()},get children(){const d=Ma(),u=d.firstChild,h=u.nextSibling,g=h.nextSibling;return g.nextSibling.nextSibling,f(d,()=>m("fileBrowser.fileTooLarge.message"),u),f(d,()=>e.state.storageItem[0]().size,g),f(d,a($,{get color(){return y.primary},onClick:o,get children(){return m("fileBrowser.fileTooLarge.show")}}),null),f(d,a($,{get color(){return y.secondary},onClick:async()=>{const x=await L.read(s());Do(i(),x)},get children(){return[a(ei,{})," ",S(()=>m("fileBrowser.fileTooLarge.download"))]}}),null),d}}),a(ce,{get when(){return!e.state.data[0]()},get children(){return a(Mr,{children:"Loading data..."})}}),a(ce,{when:!0,get children(){return a(at,{get component(){return c()},get state(){return e.state}})}})]}})},Ia=w("<div> Not Found "),Ba=new Map([[_.NotFound,()=>Ia()],[_.Directory,ga],[_.File,Na]]),Aa=e=>a(A,{get when(){return e.state.storageItem[0]()!==void 0},get fallback(){return a(Mr,{children:"Loading metadata..."})},get children(){return a(at,{get component(){return Ba.get(e.state.storageItem[0]().type)},get state(){return e.state}})}}),Ta=w("<h3> <!> <!> "),Pa=w("<ul>"),La=w("<li>"),Oa=e=>{const t=()=>e.state.uploads[0]();return a(A,{get when(){return t().size>0},get children(){return[(()=>{const n=Ta(),r=n.firstChild,o=r.nextSibling,s=o.nextSibling,i=s.nextSibling;return i.nextSibling,f(n,a(Jn,{}),o),f(n,()=>m("fileBrowser.title.uploading"),i),n})(),(()=>{const n=Pa();return f(n,a(V,{get each(){return Array.from(t())},children:r=>(()=>{const o=La();return f(o,r),o})()})),n})()]}})};const za=w("<div class=em-075>⚠️ "),Ra=e=>a(A,{get when(){return e.state.path[0]().startsWith("local:")},get children(){const t=za();return t.firstChild,f(t,()=>m("fileBrowser.warningLocal"),null),t}}),Ha=e=>{const t=Fl("local:/");return t.onClose=()=>e.onClose(),t.editValueDef=(n,r)=>e.editValueDef(n,r),_r(t),[a(Ql,{state:t}),a(Ra,{state:t}),a(Oa,{state:t}),a(Aa,{state:t})]},Fa=e=>a(pr,{get onClose(){return e.onClose},get children(){return a(Ha,{get onClose(){return e.onClose},get editValueDef(){return e.editValueDef}})}});let be=function(e){return e[e.None=0]="None",e[e.Browser=1]="Browser",e[e.Launch=2]="Launch",e[e.GraphTools=3]="GraphTools",e}({});class ja{constructor(){const[t,n]=k({type:be.None});this.state=t,this.setState=n}close(){this.setState(t=>({...t,type:be.None}))}open(t){this.setState(n=>({...n,type:t}))}openGraphTools(){this.setState(t=>({...t,type:be.GraphTools}))}}const Ka=e=>a(Wt,{get children(){return[a(ce,{get when(){return e.actions.state().type===be.GraphTools},get children(){return a(Sl,{onClose:()=>e.actions.close(),get state(){return e.state}})}}),a(ce,{get when(){return e.actions.state().type===be.Browser},get children(){return a(Fa,{onClose:()=>e.actions.close(),get editValueDef(){return e.editValueDef}})}})]}}),Ua=()=>{const e=()=>({type:"value",nodes:[],comment:""});return new yr("local:/.scratch.kitl","default",wr(e()))},Wa=()=>({hrm:k(Ua()),modalActions:k(new ja)}),Va=async(e,t,n)=>{const r=await L.readJson(t,or(n)),o=qt.value(r),s=new yr(t,n,wr(o));console.log(s),e.hrm[1](s)},Ya=async e=>{const t=e.hrm[0](),n=yl(e.hrm[0]().nodes()),r=qt.value(n);console.log(r),await L.writeJson(t.path,or(t.name),r)},Ga=w("<a> <!> "),We=w("<a> "),qa=w("<div class=editor-root-hrm-header-container>");var Le=function(e){return e[e.Add=0]="Add",e[e.Edit=1]="Edit",e}(Le||{});const Ir=()=>[{name:m("mainEditor.menu.addTools"),icon:a(nn,{})},{name:m("mainEditor.menu.selectTools"),icon:a(tn,{})}],Xa=e=>Ir()[e].icon,Ja=(e,t)=>{switch(e){case Le.Add:return[a($,{get color(){return y.warning},onClick:()=>t.undo(),get children(){return a(Xs,{})}}),a($,{get color(){return y.warning},onClick:()=>t.redo(),get children(){return a(Js,{})}}),a($,{get color(){return y.secondary},class:"flex-1",onClick:()=>t.addEmptyNode(),get children(){return a(nn,{})}}),a($,{get color(){return y.danger},class:"flex-1",onClick:()=>t.deleteSelectedNodes(),get children(){return a(Ot,{})}})];case Le.Edit:return[a($,{get color(){return y.warning},class:"flex-1",onClick:()=>t.deselectAll(),get children(){return a(Qs,{})}}),a($,{get color(){return y.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return a(di,{})}}),a($,{get color(){return y.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return a(Rt,{})}}),a($,{get color(){return y.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return a(zt,{})}}),a($,{get color(){return y.danger},class:"flex-1",onClick:()=>t.deleteSelectedNodes(),get children(){return a(Ot,{})}})]}},Za=(e,t)=>Ir().map((n,r)=>(()=>{const o=Ga(),s=o.firstChild,i=s.nextSibling;return i.nextSibling,o.$$click=()=>{t(l=>({...l,toolSet:r})),e&&(e.selectMode=r===Le.Edit)},f(o,()=>n.icon,i),f(o,()=>n.name,null),o})()),Qa=e=>{const[t,n]=k({toolSet:Le.Add}),r=()=>[Za(e.state.hrm[0](),n),[(()=>{const o=We(),s=o.firstChild;return o.$$click=async()=>{await Ya(e.state),se(m("mainEditor.menu.saveSuccess"))},f(o,a(ur,{}),s),f(o,()=>m("mainEditor.menu.save"),null),o})()],[(()=>{const o=We(),s=o.firstChild;return o.$$click=()=>e.state.modalActions[0]()?.open(be.Browser),f(o,a(oi,{}),s),f(o,()=>m("mainEditor.menu.browser"),null),o})(),(()=>{const o=We(),s=o.firstChild;return f(o,a(ci,{}),s),f(o,()=>m("mainEditor.menu.launch"),null),o})(),(()=>{const o=We(),s=o.firstChild;return o.$$click=()=>e.state.modalActions[0]()?.openGraphTools(),f(o,a(dr,{}),s),f(o,()=>m("mainEditor.menu.graphTools"),null),o})()]];return(()=>{const o=qa();return f(o,a(F,{class:"editor-root-hrm-header shadow-2",get children(){return[a(sn,{get color(){return y.primary},get list(){return r()},get children(){return Xa(t().toolSet)}}),S(()=>Ja(t().toolSet,e.state.hrm[0]()))]}})),o})()};q(["click"]);const ec=w("<div class=editor-root>"),tc=()=>{const e=Wa();return(()=>{const t=ec();return f(t,a(kl,{get state(){return e.hrm[0]()}}),null),f(t,a(Qa,{state:e}),null),f(t,a(Ka,{get actions(){return e.modalActions[0]()},get state(){return e.hrm[0]()},editValueDef:(n,r)=>Va(e,n,r)}),null),t})()},nc=()=>a($o,{get children(){return[a(zs,{}),a(tc,{})]}}),rc=document.getElementById("root");no(()=>a(nc,{}),rc);
