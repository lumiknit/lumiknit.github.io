(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Qt=(e,t)=>e===t,ke=Symbol("solid-proxy"),en=Symbol("solid-track"),tn=Symbol("solid-dev-component"),_e={equals:Qt};let Mt=It;const q=1,Ee=2,Dt={owned:null,cleanups:null,context:null,owner:null},Pe={};var k=null;let Le=null,$=null,D=null,F=null,Ne=0;function $e(e,t){const n=$,r=k,o=e.length===0,s=t===void 0?r:t,l=o?Dt:{owned:null,cleanups:null,context:s?s.context:null,owner:s},i=o?e:()=>e(()=>I(()=>Ie(l)));k=l,$=null;try{return Q(i,!0)}finally{$=n,k=r}}function _(e,t){t=t?Object.assign({},_e,t):_e;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),At(n,o));return[Nt.bind(n),r]}function it(e,t,n){const r=Ae(e,t,!0,q);ie(r)}function p(e,t,n){const r=Ae(e,t,!1,q);ie(r)}function Y(e,t,n){Mt=dn;const r=Ae(e,t,!1,q);(!n||!n.render)&&(r.user=!0),F?F.push(r):ie(r)}function E(e,t,n){n=n?Object.assign({},_e,n):_e;const r=Ae(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ie(r),Nt.bind(r)}function nn(e){return e&&typeof e=="object"&&"then"in e}function rn(e,t,n){let r,o,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,s=t||{}):(r=e,o=t,s=n||{});let l=null,i=Pe,c=!1,a="initialValue"in s,d=typeof r=="function"&&E(r);const f=new Set,[h,g]=(s.storage||_)(s.initialValue),[v,L]=_(void 0),[R,U]=_(void 0,{equals:!1}),[O,B]=_(a?"ready":"unresolved");function T(b,S,P,ne){return l===b&&(l=null,ne!==void 0&&(a=!0),(b===i||S===i)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(ne,{value:S})),i=Pe,V(S,P)),S}function V(b,S){Q(()=>{S===void 0&&g(()=>b),B(S!==void 0?"errored":a?"ready":"unresolved"),L(S);for(const P of f.keys())P.decrement();f.clear()},!1)}function le(){const b=ln,S=h(),P=v();if(P!==void 0&&!l)throw P;return $&&!$.user&&b&&it(()=>{R(),l&&(b.resolved||f.has(b)||(b.increment(),f.add(b)))}),S}function Te(b=!0){if(b!==!1&&c)return;c=!1;const S=d?d():r;if(S==null||S===!1){T(l,I(h));return}const P=i!==Pe?i:I(()=>o(S,{value:h(),refetching:b}));return nn(P)?(l=P,c=!0,queueMicrotask(()=>c=!1),Q(()=>{B(a?"refreshing":"pending"),U()},!1),P.then(ne=>T(P,ne,void 0,S),ne=>T(P,void 0,Pt(ne),S))):(T(l,P,void 0,S),P)}return Object.defineProperties(le,{state:{get:()=>O()},error:{get:()=>v()},loading:{get(){const b=O();return b==="pending"||b==="refreshing"}},latest:{get(){if(!a)return le();const b=v();if(b&&!l)throw b;return h()}}}),d?it(()=>Te(!1)):Te(!1),[le,{refetch:Te,mutate:g}]}function re(e){return Q(e,!1)}function I(e){if($===null)return e();const t=$;$=null;try{return e()}finally{$=t}}function on(e){return k===null||(k.cleanups===null?k.cleanups=[e]:k.cleanups.push(e)),e}function sn(e){const t=E(e),n=E(()=>Ye(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let ln;function Nt(){if(this.sources&&this.state)if(this.state===q)ie(this);else{const e=D;D=null,Q(()=>Se(this),!1),D=e}if($){const e=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(e)):($.sources=[this],$.sourceSlots=[e]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function At(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Q(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],l=Le&&Le.running;l&&Le.disposed.has(s),(l?!s.tState:!s.state)&&(s.pure?D.push(s):F.push(s),s.observers&&Tt(s)),l||(s.state=q)}if(D.length>1e6)throw D=[],new Error},!1)),t}function ie(e){if(!e.fn)return;Ie(e);const t=k,n=$,r=Ne;$=k=e,cn(e,e.value,r),$=n,k=t}function cn(e,t,n){let r;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=q,e.owned&&e.owned.forEach(Ie),e.owned=null),e.updatedAt=n+1,Lt(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?At(e,r):e.value=r,e.updatedAt=n)}function Ae(e,t,n,r=q,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:k,context:k?k.context:null,pure:n};return k===null||k!==Dt&&(k.owned?k.owned.push(s):k.owned=[s]),s}function Ce(e){if(e.state===0)return;if(e.state===Ee)return Se(e);if(e.suspense&&I(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ne);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===q)ie(e);else if(e.state===Ee){const r=D;D=null,Q(()=>Se(e,t[0]),!1),D=r}}function Q(e,t){if(D)return e();let n=!1;t||(D=[]),F?n=!0:F=[],Ne++;try{const r=e();return an(n),r}catch(r){n||(F=null),D=null,Lt(r)}}function an(e){if(D&&(It(D),D=null),e)return;const t=F;F=null,t.length&&Q(()=>Mt(t),!1)}function It(e){for(let t=0;t<e.length;t++)Ce(e[t])}function dn(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ce(r)}for(t=0;t<n;t++)Ce(e[t])}function Se(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===q?r!==t&&(!r.updatedAt||r.updatedAt<Ne)&&Ce(r):o===Ee&&Se(r,t)}}}function Tt(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Ee,n.pure?D.push(n):F.push(n),n.observers&&Tt(n))}}function Ie(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),l=n.observerSlots.pop();r<o.length&&(s.sourceSlots[l]=r,o[r]=s,n.observerSlots[r]=l)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ie(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Pt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Lt(e,t=k){throw Pt(e)}function Ye(e){if(typeof e=="function"&&!e.length)return Ye(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Ye(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const un=Symbol("fallback");function lt(e){for(let t=0;t<e.length;t++)e[t]()}function fn(e,t,n={}){let r=[],o=[],s=[],l=0,i=t.length>1?[]:null;return on(()=>lt(s)),()=>{let c=e()||[],a,d;return c[en],I(()=>{let h=c.length,g,v,L,R,U,O,B,T,V;if(h===0)l!==0&&(lt(s),s=[],r=[],o=[],l=0,i&&(i=[])),n.fallback&&(r=[un],o[0]=$e(le=>(s[0]=le,n.fallback())),l=1);else if(l===0){for(o=new Array(h),d=0;d<h;d++)r[d]=c[d],o[d]=$e(f);l=h}else{for(L=new Array(h),R=new Array(h),i&&(U=new Array(h)),O=0,B=Math.min(l,h);O<B&&r[O]===c[O];O++);for(B=l-1,T=h-1;B>=O&&T>=O&&r[B]===c[T];B--,T--)L[T]=o[B],R[T]=s[B],i&&(U[T]=i[B]);for(g=new Map,v=new Array(T+1),d=T;d>=O;d--)V=c[d],a=g.get(V),v[d]=a===void 0?-1:a,g.set(V,d);for(a=O;a<=B;a++)V=r[a],d=g.get(V),d!==void 0&&d!==-1?(L[d]=o[a],R[d]=s[a],i&&(U[d]=i[a]),d=v[d],g.set(V,d)):s[a]();for(d=O;d<h;d++)d in L?(o[d]=L[d],s[d]=R[d],i&&(i[d]=U[d],i[d](d))):o[d]=$e(f);o=o.slice(0,l=h),r=c.slice(0)}return o});function f(h){if(s[d]=h,i){const[g,v]=_(d);return i[d]=v,t(c[d],g)}return t(c[d])}}}function u(e,t){return I(()=>e(t||{}))}function ge(){return!0}const qe={get(e,t,n){return t===ke?n:e.get(t)},has(e,t){return t===ke?!0:e.has(t)},set:ge,deleteProperty:ge,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ge,deleteProperty:ge}},ownKeys(e){return e.keys()}};function Oe(e){return(e=typeof e=="function"?e():e)?e:{}}function hn(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function ct(...e){let t=!1;for(let s=0;s<e.length;s++){const l=e[s];t=t||!!l&&ke in l,e[s]=typeof l=="function"?(t=!0,E(l)):l}if(t)return new Proxy({get(s){for(let l=e.length-1;l>=0;l--){const i=Oe(e[l])[s];if(i!==void 0)return i}},has(s){for(let l=e.length-1;l>=0;l--)if(s in Oe(e[l]))return!0;return!1},keys(){const s=[];for(let l=0;l<e.length;l++)s.push(...Object.keys(Oe(e[l])));return[...new Set(s)]}},qe);const n={},r={},o=new Set;for(let s=e.length-1;s>=0;s--){const l=e[s];if(!l)continue;const i=Object.getOwnPropertyNames(l);for(let c=0,a=i.length;c<a;c++){const d=i[c];if(d==="__proto__"||d==="constructor")continue;const f=Object.getOwnPropertyDescriptor(l,d);if(!o.has(d))f.get?(o.add(d),Object.defineProperty(n,d,{enumerable:!0,configurable:!0,get:hn.bind(r[d]=[f.get.bind(l)])})):(f.value!==void 0&&o.add(d),n[d]=f.value);else{const h=r[d];h?f.get?h.push(f.get.bind(l)):f.value!==void 0&&h.push(()=>f.value):n[d]===void 0&&(n[d]=f.value)}}}return n}function Ot(e,...t){if(ke in e){const o=new Set(t.length>1?t.flat():t[0]),s=t.map(l=>new Proxy({get(i){return l.includes(i)?e[i]:void 0},has(i){return l.includes(i)&&i in e},keys(){return l.filter(i=>i in e)}},qe));return s.push(new Proxy({get(l){return o.has(l)?void 0:e[l]},has(l){return o.has(l)?!1:l in e},keys(){return Object.keys(e).filter(l=>!o.has(l))}},qe)),s}const n={},r=t.map(()=>({}));for(const o of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,o),l=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let i=!1,c=0;for(const a of t)a.includes(o)&&(i=!0,l?r[c][o]=s.value:Object.defineProperty(r[c],o,s)),++c;i||(l?n[o]=s.value:Object.defineProperty(n,o,s))}return[...r,n]}const Bt=e=>`Stale read from <${e}>.`;function G(e){const t="fallback"in e&&{fallback:()=>e.fallback};return E(fn(()=>e.each,e.children,t||void 0))}function Z(e){const t=e.keyed,n=E(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return E(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?I(()=>o(t?r:()=>{if(!I(n))throw Bt("Show");return e.when})):o}return e.fallback},void 0,void 0)}function Ht(e){let t=!1;const n=(s,l)=>s[0]===l[0]&&(t?s[1]===l[1]:!s[1]==!l[1])&&s[2]===l[2],r=sn(()=>e.children),o=E(()=>{let s=r();Array.isArray(s)||(s=[s]);for(let l=0;l<s.length;l++){const i=s[l].when;if(i)return t=!!s[l].keyed,[l,i,s[l]]}return[-1]},void 0,{equals:n});return E(()=>{const[s,l,i]=o();if(s<0)return e.fallback;const c=i.children;return typeof c=="function"&&c.length>0?I(()=>c(t?l:()=>{if(I(o)[0]!==s)throw Bt("Match");return i.when})):c},void 0,void 0)}function be(e){return e}const gn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],mn=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...gn]),wn=new Set(["innerHTML","textContent","innerText","children"]),yn=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),vn=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function pn(e,t){const n=vn[e];return typeof n=="object"?n[t]?n.$:void 0:n}const $n=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),bn=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),xn={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function kn(e,t,n){let r=n.length,o=t.length,s=r,l=0,i=0,c=t[o-1].nextSibling,a=null;for(;l<o||i<s;){if(t[l]===n[i]){l++,i++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===l){const d=s<r?i?n[i-1].nextSibling:n[s-i]:c;for(;i<s;)e.insertBefore(n[i++],d)}else if(s===i)for(;l<o;)(!a||!a.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[s-1]&&n[i]===t[o-1]){const d=t[--o].nextSibling;e.insertBefore(n[i++],t[l++].nextSibling),e.insertBefore(n[--s],d),t[o]=n[s]}else{if(!a){a=new Map;let f=i;for(;f<s;)a.set(n[f],f++)}const d=a.get(t[l]);if(d!=null)if(i<d&&d<s){let f=l,h=1,g;for(;++f<o&&f<s&&!((g=a.get(t[f]))==null||g!==d+h);)h++;if(h>d-i){const v=t[l];for(;i<d;)e.insertBefore(n[i++],v)}else e.replaceChild(n[i++],t[l++])}else l++;else t[l++].remove()}}}const at="_$DX_DELEGATE";function _n(e,t,n,r={}){let o;return $e(s=>{o=s,t===document?e():m(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function y(e,t,n){let r;const o=()=>{const l=document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:l.content.firstChild},s=t?()=>I(()=>document.importNode(r||(r=o()),!0)):()=>(r||(r=o())).cloneNode(!0);return s.cloneNode=s,s}function K(e,t=window.document){const n=t[at]||(t[at]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Dn))}}function ee(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function En(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function H(e,t){t==null?e.removeAttribute("class"):e.className=t}function ae(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n)}function Cn(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,l;for(s=0,l=o.length;s<l;s++){const i=o[s];!i||i==="undefined"||t[i]||(dt(e,i,!1),delete n[i])}for(s=0,l=r.length;s<l;s++){const i=r[s],c=!!t[i];!i||i==="undefined"||n[i]===c||!c||(dt(e,i,!0),n[i]=c)}return n}function fe(e,t,n){if(!t)return n?ee(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function Rt(e,t={},n,r){const o={};return r||p(()=>o.children=se(e,t.children,o.children)),p(()=>t.ref&&t.ref(e)),p(()=>Sn(e,t,n,!0,o,!0)),o}function j(e,t,n){return I(()=>e(t,n))}function m(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return se(e,t,r,n);p(o=>se(e,t(),o,n),r)}function Sn(e,t,n,r,o={},s=!1){t||(t={});for(const l in o)if(!(l in t)){if(l==="children")continue;o[l]=ut(e,l,null,o[l],n,s)}for(const l in t){if(l==="children"){r||se(e,t.children);continue}const i=t[l];o[l]=ut(e,l,i,o[l],n,s)}}function Mn(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function dt(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function ut(e,t,n,r,o,s){let l,i,c,a,d;if(t==="style")return fe(e,n,r);if(t==="classList")return Cn(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);r&&e.removeEventListener(f,r),n&&e.addEventListener(f,n)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);r&&e.removeEventListener(f,r,!0),n&&e.addEventListener(f,n,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),h=$n.has(f);if(!h&&r){const g=Array.isArray(r)?r[0]:r;e.removeEventListener(f,g)}(h||n)&&(ae(e,f,n,h),h&&K([f]))}else if(t.slice(0,5)==="attr:")ee(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(c=wn.has(t))||!o&&((a=pn(t,e.tagName))||(i=mn.has(t)))||(l=e.nodeName.includes("-")))d&&(t=t.slice(5),i=!0),t==="class"||t==="className"?H(e,n):l&&!i&&!c?e[Mn(t)]=n:e[a||t]=n;else{const f=o&&t.indexOf(":")>-1&&xn[t.split(":")[0]];f?En(e,f,t,n):ee(e,yn[t]||t,n)}return n}function Dn(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function se(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,l=r!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),l){let i=n[0];i&&i.nodeType===3?i.data=t:i=document.createTextNode(t),n=oe(e,n,r,i)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=oe(e,n,r);else{if(s==="function")return p(()=>{let i=t();for(;typeof i=="function";)i=i();n=se(e,i,n,r)}),()=>n;if(Array.isArray(t)){const i=[],c=n&&Array.isArray(n);if(Ve(i,t,n,o))return p(()=>n=se(e,i,n,r,!0)),()=>n;if(i.length===0){if(n=oe(e,n,r),l)return n}else c?n.length===0?ft(e,i,r):kn(e,n,i):(n&&oe(e),ft(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(l)return n=oe(e,n,r,t);oe(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Ve(e,t,n,r){let o=!1;for(let s=0,l=t.length;s<l;s++){let i=t[s],c=n&&n[s],a;if(!(i==null||i===!0||i===!1))if((a=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))o=Ve(e,i,c)||o;else if(a==="function")if(r){for(;typeof i=="function";)i=i();o=Ve(e,Array.isArray(i)?i:[i],Array.isArray(c)?c:[c])||o}else e.push(i),o=!0;else{const d=String(i);c&&c.nodeType===3&&c.data===d?e.push(c):e.push(document.createTextNode(d))}}return o}function ft(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function oe(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let l=t.length-1;l>=0;l--){const i=t[l];if(o!==i){const c=i.parentNode===e;!s&&!l?c?e.replaceChild(o,i):e.insertBefore(o,n):c&&i.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const Nn=!1,An="http://www.w3.org/2000/svg";function In(e,t=!1){return t?document.createElementNS(An,e):document.createElement(e)}function Tn(e){const[t,n]=Ot(e,["component"]),r=E(()=>t.component);return E(()=>{const o=r();switch(typeof o){case"function":return Object.assign(o,{[tn]:!0}),I(()=>o(n));case"string":const s=bn.has(o),l=In(o,s);return Rt(l,n,s),l}})}var Pn=()=>["%csolid-devtools","color: #fff; background: #2c4f7c; padding: 1px 4px;"];function Ln(...e){console.warn(...Pn(),...e)}Ln('`import "solid-devtools";` is an entry point for the vite plugin.\nIf you\'re seeing this message you probably forgot to add the plugin to your vite config.');const On="modulepreload",Bn=function(e){return"/"+e},ht={},gt=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Bn(s),s in ht)return;ht[s]=!0;const l=s.endsWith(".css"),i=l?'[rel="stylesheet"]':"";if(!!r)for(let d=o.length-1;d>=0;d--){const f=o[d];if(f.href===s&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${i}`))return;const a=document.createElement("link");if(a.rel=l?"stylesheet":On,l||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),l)return new Promise((d,f)=>{a.addEventListener("load",d),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s})},Hn=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))})},[zt,Rn]=_({locale:"",strings:new Map}),zn=()=>zt().locale,jt=(e,t,n)=>{for(const r in n){const o=n[r],s=t?`${t}.${r}`:r;typeof o=="object"?jt(e,s,o):e.set(s,o)}},jn=async e=>{for(const t of[e,...navigator.languages,"en"])if(t)try{const n=await Hn(Object.assign({"./strings/en.json":()=>gt(()=>import("./en-d1a00eea.js"),[]),"./strings/ko.json":()=>gt(()=>import("./ko-1ded49bb.js"),[])}),`./strings/${t}.json`),r=new Map;return jt(r,"",n),Rn({locale:t,strings:r}),!0}catch{continue}},z=e=>zt().strings.get(e)||e,Gn=e=>{const[t]=rn(async()=>await jn(e.language)),n=zn();return u(Ht,{fallback:"Unk",get children(){return[u(be,{get when(){return t()},get children(){return e.children}}),u(be,{when:n==="",children:"Failed to load locale."}),u(be,{when:n===void 0,children:"Loading..."})]}})};var x=(e=>(e.fg="fg",e.bg="bg",e.primary="primary",e.secondary="secondary",e.success="success",e.danger="danger",e.warning="warning",e))(x||{});const Kn=y("<button>"),M=e=>(()=>{const t=Kn();return ae(t,"click",e.onClick,!0),m(t,()=>e.children),p(()=>H(t,`btn btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`)),t})();K(["click"]);K(["keydown"]);const Un=y("<div>"),et=e=>(()=>{const t=Un();return m(t,()=>e.children),p(()=>H(t,`input-group ${e.class??""}`)),t})(),Wn=y("<input type=text>"),Fn=e=>(()=>{const t=Wn();return ae(t,"keydown",e.onKeyDown,!0),ae(t,"change",e.onChange),p(n=>{const r=e.disabled,o=`form-control ${e.class??""}`,s=e.placeholder;return r!==n._v$&&(t.disabled=n._v$=r),o!==n._v$2&&H(t,n._v$2=o),s!==n._v$3&&ee(t,"placeholder",n._v$3=s),n},{_v$:void 0,_v$2:void 0,_v$3:void 0}),p(()=>t.value=e.value),t})();K(["keydown"]);const Yn=()=>{throw"Empty function invoked"},mt={x:0,y:0},Me=(e,t)=>e*e+t*t,xe=(e,t)=>Math.sqrt(Me(e,t)),wt=(e,t,n)=>{const r=n.w/2,o=n.h/2,s=n.x+r,l=n.y+o,i=r-o;let c=e-s,a=t-l,d=0,f=0;if(c<-r&&(c=-r,d=-1),c>r&&(c=r,d=1),a<-o&&(a=-o,f=-1),a>o&&(a=o,f=1),n.angular){if(d*f!==0){const h=xe(c,a);return[s+c-1.4*d,l+a-1.4*f,c/h,a/h]}}else{if(r>o&&Math.abs(c)>i){const h=c>0?i:-i,g=c-h,v=xe(g,a)/o;return[s+h+g/v,l+a/v,g/o,a/(v*o)]}if(o>r&&Math.abs(a)>i){const h=a>0?i:-i,g=a-h,v=xe(c,g)/r;return[s+c/v,l+h+g/v,c/(v*r),g/r]}}return[s+c,l+a,d,f]},Gt=(e,t)=>{const[n,r,o,s]=wt(t.x+t.w/2,t.y+t.h/2,e),[l,i,c,a]=wt(n,r,t),d=.2*xe(n-l,r-i);return`M ${l-c/2} ${i-a/2} C ${l+c*d} ${i+a*d}, ${n+o*d} ${r+s*d}, ${n-o/2} ${r-s/2}`},qn=(e,t)=>{const r=e.x+e.w/2,o=t.x+t.w/2;return`M ${r} ${e.y} C ${r} ${e.y-30}, ${o} ${t.y-30}, ${o} ${t.y}`},Vn=()=>Math.random().toString(36).substring(7),Xn=()=>{const e=new Date,t=e.getTimezoneOffset()*60*1e3,n=e.getTime()+t;return Math.round(n/1e3).toString(36)},Zn=()=>`${Xn()}-${Vn()}`,Jn=(e,t,n)=>e<t?t:e>n?n:e;var w=(e=>(e.Alpha="a",e.Beta="b",e.Delta="d",e.Lambda="l",e.Nu="n",e.Pi="p",e))(w||{});const Xe=new Set(["d"]),Qn=new Set(["n"]),er=new Set(["b","n"]),tr=()=>[{id:"#def",pos:{x:0,y:0},x:{type:"d",comment:""}}],me=JSON.stringify,Be=e=>{switch(typeof e){case"string":return e.length>20;case"object":return e===null?!1:Array.isArray(e)?e.length>1:Object.keys(e).length>1}return!1},X=(e,t=0)=>{if(typeof e!="object"||e===null)return me(e);const n=" ".repeat(2*(t+1)),r=`,
`+n;if(Array.isArray(e)){const l=e;return l.length===0?"[]":l.length===1?Be(l[0])?`[ ${X(l[0],t+1)} ]`:`[${X(l[0],t+1)}]`:`[ ${l.map(i=>X(i,t+1)).join(r)} ]`}const o=e,s=Object.keys(o);if(s.length===0)return"{}";if(s.length===1){const l=s[0],i=me(l),c=o[l];return Be(c)?`{ ${i}:
  ${n}${X(c,t+2)}}`:`{${i}: ${X(c,t+1)}}`}return`{ ${Object.entries(o).map(([l,i])=>Be(i)?`${me(l)}:
  ${n}${X(i,t+2)}`:`${me(l)}: ${X(i,t+1)}`).join(r)} }`},A=e=>e.charCodeAt(0),tt=e=>{const t=new Set;for(let n=0;n<e.length;n++)t.add(e.charCodeAt(n));return t},nr=A(`
`),rr=A("["),or=A("]"),sr=A("{"),ir=A("}"),lr=A('"'),cr=A("'"),ar=A("\\"),dr=A("u"),ur=A("x"),Kt=tt(`[]{},"':
`),fr=tt("+-0123456789."),hr=tt(`"'`),gr=new Map([[A("b"),"\b"],[A("f"),"\f"],[A("n"),`
`],[A("r"),"\r"],[A("t"),"	"]]),mr=/[-+]?((0x[0-9a-fA-F]+)|([0-9]+(\.[0-9]+)?))([eE][-+]?[0-9]+)?/y,wr=/(false|true|null)\b/iy,yr=new Map([["false",!1],["true",!0],["null",null]]),Ut=/\s*/y,De=/[\s,]*/y,vr=/[\s:]*/y,J=e=>e.s.charCodeAt(e.p);class he extends Error{s;p;line;column;constructor(t,n){let r=1,o=1;for(let s=0;s<t.p;s++)t.s.charCodeAt(s)===nr&&(r++,o=0),o++;super(`${r}:${o}: ${n}`),this.name="ParseError",this.s=t.s,this.p=t.p,this.line=r,this.column=o}}const nt=(e,t)=>(t.lastIndex=e.p,t.exec(e.s)),te=(e,t)=>{const n=nt(e,t);n&&(e.p+=n[0].length)},pr=e=>{e.p++,te(e,De);const t=[];for(;e.p<e.l&&J(e)!==or;)t.push(rt(e)),te(e,De);return e.p++,t},$r=e=>{e.p++,te(e,De);const t={};for(;e.p<e.l&&J(e)!==ir;){let n;if(hr.has(J(e)))n=Wt(e);else{const r=e.p;e.p=e.s.indexOf(":",e.p),e.p===-1&&(e.p=e.l),n=e.s.slice(r,e.p).trim()}te(e,vr),t[n]=rt(e),te(e,De)}return e.p++,t},yt=(e,t)=>{const n=e.s.slice(e.p+1,e.p+t+1),r=parseInt(n,16);if(e.p+=t,isNaN(r))throw new he(e,`Invalid unicode escape '${n}'`);return String.fromCharCode(r)},Wt=e=>{const t=J(e);e.p++;let n="";for(;e.p<e.l;e.p++){const r=J(e);if(r===t)return e.p++,n;if(r===ar){e.p++;const o=J(e);switch(o){case dr:n+=yt(e,4);break;case ur:n+=yt(e,2);break;default:n+=gr.get(o)||String.fromCharCode(o)}}else n+=String.fromCharCode(r)}return n},br=e=>{const t=nt(e,mr),n=t?t[0]:"",r=n?Number(n):NaN;if(e.p+=n.length,isNaN(r))throw new he(e,`Invalid number '${n}'`);return r},xr=(e,t)=>{const n=nt(e,wr);if(n!==null)return e.p+=n[0].length,yr.get(n[0].toLowerCase());if(t)throw new he(e,`Unexpected character '${e.s[e.p]}'`);const r=e.p;for(;e.p<e.l&&!Kt.has(J(e));)e.p++;return e.s.slice(r,e.p).trim()},rt=(e,t)=>{te(e,Ut);const n=J(e);switch(n){case lr:case cr:return Wt(e);case rr:return pr(e);case sr:return $r(e)}if(Kt.has(n))throw new he(e,`Unexpected character '${e.s[e.p]}' for value`);return fr.has(n)?br(e):xr(e,t)},Ft=e=>{const t={s:e,p:0,l:e.length},n=rt(t,!0);if(te(t,Ut),t.p<t.l)throw new he(t,`Unexpected character '${t.s[t.p]}', expect EOF`);return n},kr=e=>{switch(e.type){case w.Alpha:return JSON.stringify(e.val,null,2);case w.Beta:return`,${e.args.length}`;case w.Delta:return`${e.comment}`;case w.Lambda:return"λ";case w.Nu:{const t=e.name,n=t.module?`@${t.module}`:"",r=e.lhs;let o=e.args.length-r;return o<0&&(o=0),`${t.name}${n},${r},${o}`}case w.Pi:{const t=e.name,n=e.elems;return`λ ${t.name}@${t.module},${n}`}}},_r=e=>{const t=e.trim();try{return{type:w.Alpha,val:Ft(t)}}catch{}switch(t[0]){case"λ":case"\\":{const r=t.slice(1).split(","),o=r[0].split("@");if(o[0]){const s=o[0]?o[0].toString().trim():"",l=o[1]?o[1].toString().trim():"";let i=parseInt(r[1]);return isNaN(i)&&(i=0),{type:w.Pi,name:{name:s,module:l},elems:i}}else return{type:w.Lambda}}default:{const r=t.split(","),o=r[0].split("@"),s=o[0]?o[0].toString().trim():"",l=o[1]?o[1].toString().trim():"";let i=parseInt(r[1]),c=parseInt(r[2]);if(s)return isNaN(i)&&(i=0),isNaN(c)&&(c=i,i=0),{type:w.Nu,name:{name:s,module:l},lhs:i,args:new Array(i+c).fill({id:""})};{const a=(isNaN(i)?0:i)+(isNaN(c)?0:c);return{type:w.Beta,args:new Array(a).fill({id:""})}}}}},vt=()=>[void 0],Er=y("<div class=toast-container>"),Cr=y("<div>"),Sr=["✅","⚠️","🚫"],Yt=[Yn],Mr=(e,t)=>{Yt[0](e,t)},Dr=e=>{const t=e.creation??Yt,[n,r]=_({cnt:0,toasts:[]});return t[0]=(o,s)=>{r(l=>{const i=l.toasts,c=l.cnt,a=Math.max(200,s?.ttl??2e3),d=(h,g)=>window.setTimeout(()=>r(v=>({...v,toasts:h(v.toasts)})),g),f=d(h=>h.filter(g=>g.id!==c),a);return d(h=>h.map(g=>g.id===c?{...g,class:"toast-a-out"}:g),a-100),i.push({id:c,type:s?.type,class:"toast-a-in",message:o,timeout:f}),{cnt:l.cnt+1,toasts:i}})},(()=>{const o=Er();return m(o,u(G,{get each(){return n().toasts},children:s=>(()=>{const l=Cr();return m(l,()=>s.type?Sr[s.type]:"",null),m(l,()=>s.message,null),p(()=>H(l,`toast ${s.class}`)),l})()})),o})()};let Ze=0;const Nr=()=>{Ze=0},qt=()=>Ze=(Ze+57.295779513)%360,Ar="hrm-c-bd-empty",Ir="⎇",Je="𝑓",pt="𝑥",He="𝑦",Tr="𝛃",Pr="𝚫",Lr="𝛌",Or="𝛑";var N=(e=>(e[e.Source=0]="Source",e[e.Sink=1]="Sink",e))(N||{});const Re=e=>_({name:e,data:{type:0,color:qt()}}),W=(e,t)=>_({name:e,data:{type:1,sourceID:t?.id,sourceHandle:t?.handle}}),Br=e=>{let t=0,n;switch(e.x.type){case w.Alpha:n=[];break;case w.Beta:t=1,n=[W(Je,e.x.fn)];for(const r in e.x.args){const o=e.x.args[r];n.push(W(r,o))}break;case w.Delta:n=[W(He,e.x.ret)];break;case w.Lambda:n=[Re(pt),W(He,e.x.ret)];break;case w.Nu:n=e.x.args.map((r,o)=>W(String(o),r)),t=Jn(e.x.lhs,0,e.x.args.length);break;case w.Pi:n=[W(Ir,e.x.fallback),Re(pt)];for(let r=0;r<e.x.elems;r++)n.push(Re(String(r+1)));n.push(W(He,e.x.ret)),t=1;break}return n.lhs=t,n},Qe=e=>_({color:qt(),angular:e.x.type===w.Alpha,data:e.x,handles:Br(e),position:e.pos,size:{w:0,h:0},selected:!1}),we=e=>{Nr();const t=new Map;for(const n of e)t.set(n.id,Qe(n));return t},$t=e=>{if(e.type===1&&e.sourceID)return{id:e.sourceID,handle:e.sourceHandle}},Hr=e=>{const t=n=>$t(e.handles[n][0]().data);switch(e.data.type){case w.Alpha:return e.data;case w.Beta:{const n=[];for(let r=1;r<e.handles.length;r++){const o=t(r);o&&n.push(o)}return{type:w.Beta,fn:t(0),args:n}}case w.Delta:return{type:w.Delta,comment:e.data.comment,ret:t(0)};case w.Lambda:return{type:w.Lambda,ret:t(1)};case w.Nu:return{type:w.Nu,name:e.data.name,lhs:e.handles.lhs,args:e.handles.reduce((n,r)=>{const o=$t(r[0]().data);return o&&n.push(o),n},[])};case w.Pi:return{type:w.Pi,name:e.data.name,elems:e.data.elems,fallback:t(0),ret:t(e.handles.length-1)}}},Vt=(e,t)=>({id:e,pos:t.position,x:Hr(t)}),Rr=e=>{const t=[];for(const[n,r]of e.entries())t.push(Vt(n,r[0]()));return t},bt=e=>{switch(e.data.type){case w.Beta:e.handles[0][1](t=>({...t,name:Je})),e.handles[0][0]().name=Je;for(let t=1;t<e.handles.length;t++)e.handles[t][1](n=>({...n,name:String(t-1)}));break;case w.Nu:for(let t=0;t<e.handles.length;t++)e.handles[t][1](n=>({...n,name:String(t)}));break;default:throw"Unimplemented"}},zr=y('<svg stroke-width="0"></svg>',2),jr=y("<title></title>",2);function C(e,t){const n=ct(e.a,t),[r,o]=Ot(n,["src"]);return(()=>{const s=zr.cloneNode(!0);return Rt(s,ct({get stroke(){return e.a.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},o,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},get innerHTML(){return e.c},xmlns:"http://www.w3.org/2000/svg"}),!0,!0),m(s,()=>Nn,null),m(s,(()=>{const l=E(()=>!!t.title);return()=>l()&&(()=>{const i=jr.cloneNode(!0);return m(i,()=>t.title),i})()})(),null),s})()}function Gr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-back-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 14l-4 -4l4 -4"/><path d="M5 10h11a4 4 0 1 1 0 8h-1"/>'},e)}function Kr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-forward-up",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 14l4 -4l-4 -4"/><path d="M19 10h-11a4 4 0 1 0 0 8h1"/>'},e)}function xt(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-backspace",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 6a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-11l-5 -5a1.5 1.5 0 0 1 0 -2l5 -5z"/><path d="M12 10l4 4m0 -4l-4 4"/>'},e)}function Xt(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-binary-tree",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M16 4a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M16 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M11 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M21 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z"/><path d="M5.058 18.306l2.88 -4.606"/><path d="M10.061 10.303l2.877 -4.604"/><path d="M10.065 13.705l2.876 4.6"/><path d="M15.063 5.7l2.881 4.61"/>'},e)}function Ur(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-clipboard",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"/><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"/>'},e)}function Wr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-copy",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"/><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"/>'},e)}function Fr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-deselect",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 8h3a1 1 0 0 1 1 1v3"/><path d="M16 16h-7a1 1 0 0 1 -1 -1v-7"/><path d="M12 20v.01"/><path d="M16 20v.01"/><path d="M8 20v.01"/><path d="M4 20v.01"/><path d="M4 16v.01"/><path d="M4 12v.01"/><path d="M4 8v.01"/><path d="M8 4v.01"/><path d="M12 4v.01"/><path d="M16 4v.01"/><path d="M20 4v.01"/><path d="M20 8v.01"/><path d="M20 12v.01"/><path d="M20 16v.01"/><path d="M3 3l18 18"/>'},e)}function Yr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-edit",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"/><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"/><path d="M16 5l3 3"/>'},e)}function qr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder-search",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 19h-6a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v2.5"/><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M20.2 20.2l1.8 1.8"/>'},e)}function Vr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-rocket",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"/><path d="M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"/><path d="M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/>'},e)}function Xr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-scissors",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 7m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M6 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M8.6 8.6l10.4 10.4"/><path d="M8.6 15.4l10.4 -10.4"/>'},e)}function Zr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-square-check",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M9 12l2 2l4 -4"/>'},e)}function Zt(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-square-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M9 12l6 0"/><path d="M12 9l0 6"/>'},e)}function Jr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0"/><path d="M10 11l0 6"/><path d="M14 11l0 6"/><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"/><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>'},e)}function Qr(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12"/><path d="M6 6l12 12"/>'},e)}function eo(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-in-area",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 13v4"/><path d="M13 15h4"/><path d="M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"/><path d="M22 22l-3 -3"/><path d="M6 18h-1a2 2 0 0 1 -2 -2v-1"/><path d="M3 11v-1"/><path d="M3 6v-1a2 2 0 0 1 2 -2h1"/><path d="M10 3h1"/><path d="M15 3h1a2 2 0 0 1 2 2v1"/>'},e)}function to(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-in",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M7 10l6 0"/><path d="M10 7l0 6"/><path d="M21 21l-6 -6"/>'},e)}function no(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-out",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M7 10l6 0"/><path d="M21 21l-6 -6"/>'},e)}function ro(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-zoom-reset",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 21l-6 -6"/><path d="M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"/><path d="M3 4v4h4"/>'},e)}const oo=4,kt=300,so=100,io=750,ze=window.setTimeout,ye=window.clearTimeout,lo=0,_t=1,je=2,ve=e=>({shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey}),Ge=(e,t)=>{const n=e.t.get(t);if(n!==void 0)return n;const r=new Set(e.t.values());for(let o=0;;o++)if(!r.has(o))return e.t.set(t,o),o},de=(e,t)=>{const n={t:new Map,c:new Map,o:new Map,handlers:e},r=(c,a,d)=>{const f=n.c.get(c);if(!f)return!1;const h=a-f.x,g=d-f.y;if(f.b!==je&&Me(h,g)<oo)return!1;const v={x:a,y:d,ox:f.x,oy:f.y,dx:h,dy:g},[L,R]=n.c.keys();return R&&(v.pivot=n.c.get(L===c?R:L)),f.b=je,f.x=a,f.y=d,n.handlers.onDrag?.(v),!0},o=(c,a)=>{const d=n.c.get(c);if(n.c.delete(c),!d)return;n.o.set(c,d);const f=d.b;if(d.b=lo,f===je){d.c=0,n.handlers.onRelease?.(a);return}if(d.c===2)n.handlers.onDoubleClick?.(a);else if(n.d||n.c.size>0){let h=1;n.d&&(ye(n.d.u),h=n.d.c+1),n.d={x:d.x,y:d.y,c:h,t:Date.now(),u:ze(()=>{n.d&&(n.d=void 0,n.handlers.onClick?.({...a,pointers:h}))},so)}}else n.handlers.onClick?.({...a,pointers:1});if(n.k&&ye(n.k),n.k=ze(()=>{n.k=void 0,n.d=void 0,n.o.clear()},kt),ye(n.l?.u),n.l=void 0,n.c.size===0)for(const h in s)window.removeEventListener(h,s[h])},s={mousemove:c=>{c.buttons&1&&r(-1,c.clientX,c.clientY)},mouseup:c=>{c.button===0&&o(-1,{pointers:1,x:c.clientX,y:c.clientY,modifiers:ve(c)})},mouseleave:()=>{n.c.delete(-1)},touchmove:c=>{for(const a of c.changedTouches)r(Ge(n,a.identifier),a.clientX,a.clientY)},touchend:c=>{for(const a of c.changedTouches)o(Ge(n,a.identifier),{pointers:c.touches.length,x:a.clientX,y:a.clientY,modifiers:ve(c)}),n.t.delete(a.identifier)},touchcancel:c=>{for(const a of c.changedTouches)n.t.delete(a.identifier)}},l=(c,a)=>{const d=Date.now(),f=n.o.get(c),h=f&&f.c===1&&d-f.t<=kt?2:1;if(n.o.delete(c),n.c.set(c,{id:c,x:a.x,y:a.y,b:_t,c:h,t:d}),n.l&&ye(n.l.u),n.l={id:c,x:a.x,y:a.y,u:ze(()=>{const g=n.c.get(c);g&&n.l&&g.id===n.l.id&&g.b===_t&&n.c.size===1&&(n.handlers.onLongPress?.({x:a.x,y:a.y}),n.c.delete(c)),n.l=void 0},io)},n.c.size===1)for(const g in s)window.addEventListener(g,s[g]);a.pointers=n.c.size,n.handlers.onPress?.(a)},i={mousedown:c=>{c.button===0&&(l(-1,{pointers:1,x:c.clientX,y:c.clientY,modifiers:ve(c)}),c.stopPropagation())},touchstart:c=>{for(const a of c.changedTouches)l(Ge(n,a.identifier),{pointers:1,x:a.clientX,y:a.clientY,modifiers:ve(c)});c.preventDefault(),c.stopPropagation()}};for(const c in i)t.addEventListener(c,i[c]);return()=>{for(const c in i)t.removeEventListener(c,i[c])}},co=y('<div class="hrm-pane w-100 h-100"><div class=hrm-pane-controls></div><div class=hrm-view>'),ao=y("<button>"),Et=e=>`translate(${e.x}px, ${e.y}px) scale(${e.z})`,uo=e=>{let t;const[n,r]=_({x:0,y:0,z:1}),o=(i,c,a)=>r(d=>({x:d.x*a+i,y:d.y*a+c,z:d.z*a}));e.g.transform[0]=n,e.g.transform[1]=r,Y(()=>{t&&de({onClick:e.onClick,onDoubleClick:e.onDoubleClick,onLongPress:e.onLongPress,onDrag:i=>{const c=i.pivot;if(c){const a=Math.sqrt(Me(c.x-i.x,c.y-i.y)/Me(c.x-i.ox,c.y-i.oy)),d=a-1;o((i.dx-(c.x+i.ox)*d)/2,(i.dy-(c.y+i.oy)*d)/2,a)}else o(i.dx,i.dy,1)}},t)});const s=1.1,l=[[u(to,{}),()=>o((t?.offsetWidth??0)*(1-s)/2,(t?.offsetHeight??0)*(1-s)/2,s)],[u(no,{}),()=>o((t?.offsetWidth??0)*(1-1/s)/2,(t?.offsetHeight??0)*(1-1/s)/2,1/s)],[u(ro,{}),()=>r(()=>({x:0,y:0,z:1}))],[u(eo,{}),()=>{const i=e.g.usedRect(),c=e.g.size();if(!i||!c)return;i.w=Math.max(i.w,1),i.h=Math.max(i.h,1);const a=c.w/i.w,d=c.h/i.h,f=Math.min(a,d),h=-i.x*f+(c.w-i.w*f)/2,g=-i.y*f+(c.h-i.h*f)/2;r({x:h,y:g,z:f})}]];return Y(()=>{if(t){t.addEventListener("wheel",i=>{if(t)if(i.preventDefault(),i.ctrlKey||i.metaKey){const c=Math.pow(2,i.deltaY/-100),a=t.getBoundingClientRect();o((i.clientX-a.left)*(1-c),(i.clientY-a.top)*(1-c),c)}else o(-i.deltaX,-i.deltaY,1)},{passive:!1});for(const[,,i]of l)i?.addEventListener("mousedown",c=>{c.stopPropagation()})}}),(()=>{const i=co(),c=i.firstChild,a=c.nextSibling,d=t;typeof d=="function"?j(d,i):t=i,m(c,u(G,{each:l,children:h=>(()=>{const g=ao();ae(g,"pointerdown",h[1],!0);const v=h[2];return typeof v=="function"?j(v,g):h[2]=g,m(g,()=>h[0]),g})()}));const f=e.g.viewRef;return typeof f=="function"?j(f,a):e.g.viewRef=a,m(a,()=>e.children),p(()=>Et(n())!=null?a.style.setProperty("transform",Et(n())):a.style.removeProperty("transform")),i})()};K(["pointerdown"]);const fo=e=>{e.target?.releasePointerCapture(e.pointerId)},ot=(e,t,n,r)=>{t.addEventListener("pointerenter",()=>e.setTempConnectingEnd(n,t,r)),t.addEventListener("pointerdown",fo),t.addEventListener("pointerleave",()=>e.unsetTempConnectingEnd(t)),t.addEventListener("pointerup",o=>{e.finConnecting(n,r),o.stopPropagation()})},ho=y("<div>"),go=e=>{const[t,n]=e.handleW;let r;return Y(()=>{r&&(t(),n(o=>{let s,l;if(o.data.type===N.Source)s=o.data.color,l=e.g.nodeColorBd(s);else if(o.data.sourceID){const i=e.g.nodes().get(o.data.sourceID);if(i){const c=i[0]();s=c.color,o.data.sourceHandle!==void 0&&(s=c.handles[o.data.sourceHandle][0]().color??s),l=e.g.nodeColorBg(s)}}return s===o.color&&o.ref===r?o:{...o,ref:r,color:s,style:l}}),ot(e.g,r,e.nodeID,e.handleID))}),Y(()=>{r&&de({onPress:o=>{e.g.addConnectingEnd(e.nodeID,e.handleID,e.g.viewPos(o.x,o.y))},onDrag:o=>{e.g.updateConnectingEnd(e.g.viewPos(o.x,o.y))},onRelease:()=>{e.g.resetConnectingState()},onDoubleClick:()=>{e.g.deleteEdge(e.nodeID,e.handleID)}},r)}),(()=>{const o=ho(),s=r;return typeof s=="function"?j(s,o):r=o,m(o,()=>t().name),p(l=>{const i=`hrm-node-item hrm-handle ${t().style?"":Ar}`,c=t().style;return i!==l._v$&&H(o,l._v$=i),l._v$2=fe(o,c,l._v$2),l},{_v$:void 0,_v$2:void 0}),o})()},mo=y("<div class=hrm-node-name-module>"),wo=y("<div class=hrm-node-name><div class=hrm-node-name-name>"),yo=y("<div class=hrm-node-mark>"),vo=y("<div class=hrm-node-json>"),po=y('<pre class="hrm-node-comment no-user-select no-pointer-events">'),$o=y('<div class="hrm-node-item hrm-node-body">'),Ct=e=>(()=>{const t=wo(),n=t.firstChild;return m(n,()=>e.name.name),m(t,u(Z,{get when(){return e.name.module},get children(){const r=mo();return m(r,()=>"@"+e.name.module),r}}),null),t})(),pe=e=>(()=>{const t=yo();return m(t,()=>e.mark),t})(),bo=e=>{const t={[w.Alpha]:()=>(()=>{const n=vo();return m(n,()=>X(e.data.val)),n})(),[w.Beta]:()=>u(pe,{mark:Tr}),[w.Delta]:()=>[u(pe,{mark:Pr}),u(Z,{get when(){return e.data.comment},get children(){const n=po();return m(n,()=>e.data.comment),n}})],[w.Lambda]:()=>u(pe,{mark:Lr}),[w.Nu]:()=>u(Ct,{get name(){return e.data.name}}),[w.Pi]:()=>[u(pe,{mark:Or}),u(Ct,{get name(){return e.data.name}})]};return(()=>{const n=$o();return m(n,u(Tn,{get component(){return t[e.data.type]}})),n})()},xo=y("<div>"),St=e=>{let t;return Y(()=>{t&&ot(e.g,t,e.nodeID,e.handleID)}),(()=>{const n=xo(),r=t;return typeof r=="function"?j(r,n):t=n,p(()=>H(n,`hrm-node-item hrm-handle-new ${e.handleID<0?"lhs":"rhs"}`)),n})()},ko=y("<div class=hrm-node-handle>"),_o=y('<div class="hrm-node abs-lt"><div class="hrm-node-row no-user-select">'),Eo=e=>{const[t,n]=e.nodeW;console.log("[HrmNode] render");let r,o;Y(()=>{if(!r)return;const i=r;n(c=>({...c,ref:i,size:{w:i.offsetWidth,h:i.offsetHeight},selected:!1})),de({onClick:()=>{e.g.selectOneNode(e.id)},onDrag:c=>{e.g.translateSelectedNodes(e.id,c.dx,c.dy,e.g.transform[0]().z)},onRelease:()=>{e.g.resetConnectingState()},onDoubleClick:()=>{e.g.editNode(e.id)}},r),ot(e.g,r,e.id)}),Y(()=>{o&&de({onPress:i=>{e.g.addConnectingEnd(e.id,void 0,e.g.viewPos(i.x,i.y))},onDrag:i=>{const c=e.g.viewPos(i.x,i.y);c&&e.g.updateConnectingEnd(c)},onRelease:()=>{e.g.resetConnectingState()}},o)});const s=(i,c)=>u(go,{get g(){return e.g},get nodeID(){return e.id},get node(){return t()},get handleID(){return c()},handleW:i}),l=(i,c)=>s(i,()=>c()+t().handles.lhs);return(()=>{const i=_o(),c=i.firstChild,a=r;return typeof a=="function"?j(a,i):r=i,m(i,u(Z,{get when(){return Qn.has(t().data.type)},get children(){return u(St,{get g(){return e.g},get nodeID(){return e.id},handleID:-1/0,get node(){return t()}})}}),c),m(c,u(G,{get each(){return t().handles.slice(0,t().handles.lhs)},children:s}),null),m(c,u(bo,{get data(){return t().data}}),null),m(c,u(G,{get each(){return t().handles.slice(t().handles.lhs)},children:l}),null),m(i,u(Z,{get when(){return er.has(t().data.type)},get children(){return u(St,{get g(){return e.g},get nodeID(){return e.id},handleID:1/0,get node(){return t()}})}}),null),m(i,u(Z,{get when(){return!Xe.has(t().data.type)},get children(){const d=ko(),f=o;return typeof f=="function"?j(f,d):o=d,d}}),null),p(d=>{const f=!!t().selected,h=!!t().angular,g=!t().angular,v={left:`${t().position.x}px`,top:`${t().position.y}px`,...e.g.nodeColorBd(t().color)};return f!==d._v$&&i.classList.toggle("selected",d._v$=f),h!==d._v$2&&i.classList.toggle("hrm-rect",d._v$2=h),g!==d._v$3&&i.classList.toggle("hrm-pill",d._v$3=g),d._v$4=fe(i,v,d._v$4),d},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),i})()},Co=y("<svg><path class=hrm-edge-path stroke-width=4px fill=transparent></svg>",!1,!0),So=y("<svg><path class=cursor-pointer stroke-width=1rem fill=transparent></svg>",!1,!0),Mo=e=>{console.log("[HrmEdge] render");let t;const[n]=e.nodeW,[r]=e.handleW,o=E(()=>{console.log("[HrmEdge] Effect (path)"),n();const l=r();if(l.data.type!==N.Sink)return"";const i=l.data.sourceID,c=l.data.sourceHandle;if(i===void 0)return"";const a=e.g.viewRectOf(i,c),d=e.g.viewRect(l.ref);return!a||!d?"":e.nodeID===i?qn(a,d):Gt(a,d)});Y(()=>{if(t)return de({onDoubleClick:()=>{e.g.deleteEdge(e.nodeID,e.handleID)}},t)});const s=()=>{const l=r().color;return l?e.g.nodeColorStroke(l):{}};return[(()=>{const l=Co();return p(i=>{const c=s(),a=o();return i._v$=fe(l,c,i._v$),a!==i._v$2&&ee(l,"d",i._v$2=a),i},{_v$:void 0,_v$2:void 0}),l})(),(()=>{const l=So(),i=t;return typeof i=="function"?j(i,l):t=l,p(()=>ee(l,"d",o())),l})()]},Do=e=>{const[t]=e.handleW;return u(Z,{get when(){return E(()=>t().data.type===N.Sink)()&&t().data.sourceID},get children(){return u(Mo,e)}})},No=e=>{const[t]=e.nodeW;return u(G,{get each(){return t().handles},children:(n,r)=>u(Do,{get g(){return e.g},get nodeW(){return e.nodeW},handleW:n,get nodeID(){return e.id},get handleID(){return r()}})})},Ao=y('<svg class="hrm-edges no-user-select no-pointer-events">'),Io=e=>[u(G,{get each(){return[...e.g.nodes()]},children:([t,n])=>u(Eo,{get g(){return e.g},id:t,nodeW:n})}),(()=>{const t=Ao();return m(t,u(G,{get each(){return[...e.g.nodes()]},children:([n,r])=>u(No,{get g(){return e.g},id:n,nodeW:r})})),t})()],To=(e,t,n)=>.299*e+.587*t+.114*n,Ke=(e,t,n)=>{n<0&&(n+=1),n>1&&(n-=1);let r;return n<1/2?(r=t,n<1/6&&(r=e+(t-e)*6*n)):(r=e,n<2/3&&(r=e+(t-e)*(2/3-n)*6)),Math.round(r*255)},Po=(e,t,n)=>{if(t===0)return[n,n,n];const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;return[Ke(o,r,e+1/3),Ke(o,r,e),Ke(o,r,e-1/3)]},Ue=(e,t,n)=>`hsl(${e}, ${t*100}%, ${n*100}%)`;class Lo{nodeColor;nodes;setNodes;transform;rootRef;viewRef;editingNode;connectingEdge;connectingEnd;history;historyIndex;selectMode=!1;constructor(t){t||(t=[]);const[n,r]=_(we(t),{equals:!1});this.nodes=n,this.setNodes=r,this.editingNode=_(),this.connectingEdge=_({}),this.connectingEnd=_({pos:mt}),this.transform=[()=>({x:0,y:0,z:1}),()=>{}],this.history=[t],this.historyIndex=0,this.nodeColor=_({h:0,s:.52,l:.7})}thaw(t){this.setNodes(we(t)),this.history=[t],this.historyIndex=0}freeze(){return Rr(this.nodes())}nodeColorBg(t){const n=this.nodeColor[0](),r=To(...Po(t,n.s,n.l))>192?"#000":"#fff",o=Ue(t,n.s,n.l);return{color:r,"background-color":o,"border-color":o}}nodeColorBd(t){const n=this.nodeColor[0]();return{"border-color":Ue(t,n.s,n.l)}}nodeColorStroke(t){const n=this.nodeColor[0]();return{stroke:Ue(t,n.s,n.l)}}saveHistory(){this.historyIndex++,this.history.length>this.historyIndex&&(this.history=this.history.slice(0,this.historyIndex)),this.history.push(this.freeze())}undo(){this.historyIndex>0&&this.setNodes(we(this.history[--this.historyIndex]))}redo(){this.historyIndex<this.history.length-1&&this.setNodes(we(this.history[++this.historyIndex]))}size(){if(!this.rootRef)return;const t=this.rootRef.getBoundingClientRect();return{w:t.width,h:t.height}}viewPos(t,n){if(!this.viewRef)return;const r=this.viewRef.getBoundingClientRect(),o=I(this.transform[0]);return{x:(t-r.left)/o.z,y:(n-r.top)/o.z}}viewRect(t){if(!t||!this.viewRef)return;const n=this.viewRef.getBoundingClientRect(),r=t.getBoundingClientRect(),o=I(this.transform[0]);return{x:(r.left-n.left)/o.z,y:(r.top-n.top)/o.z,w:r.width/o.z,h:r.height/o.z}}usedRect(){const t={x:0,y:0,w:0,h:0};for(const[,n]of this.nodes()){const r=n[0](),o=r.position,s=r.size;t.x>o.x&&(t.w+=t.x-o.x,t.x=o.x),t.y>o.y&&(t.h+=t.y-o.y,t.y=o.y),t.w=Math.max(t.w,o.x+s.w-t.x),t.h=Math.max(t.h,o.y+s.h-t.y)}return t}viewRectOf(t,n){const r=this.nodes().get(t);if(!r)return;const o=r[0]();if(!n){const l=this.viewRect(o.ref);return l?{...l,angular:o.angular}:void 0}const s=o.handles[n][0]().ref;if(s)return this.viewRect(s)}addEmptyNode(t){if(!t){const o=this.transform[0](),s=this.rootRef;if(!s)t={x:0,y:0};else{const l=s.getBoundingClientRect();t={x:(l.width/2-o.x)/o.z,y:(l.height/2-o.y)/o.z}}}const n={type:w.Beta,args:[]},r={id:Zn(),pos:t,x:n};return this.setNodes(o=>(o.set(r.id,Qe(r)),o)),this.saveHistory(),r.id}translateSelectedNodes(t,n,r,o){for(const[s,l]of this.nodes())l[1](i=>s!==t&&!i.selected?i:{...i,position:{x:i.position.x+n/o,y:i.position.y+r/o}})}selectAll(){for(const[,t]of this.nodes())t[1](n=>n.selected?n:{...n,selected:!0})}deselectAll(){for(const[,t]of this.nodes())t[1](n=>n.selected?{...n,selected:!1}:n)}selectOneNode(t){for(const[n,r]of this.nodes())n===t?r[1](o=>({...o,selected:!o.selected})):this.selectMode||r[1](o=>o.selected?{...o,selected:!1}:o)}deleteSelectedNodes(){this.setNodes(t=>{const n=new Set;for(const[r,o]of t){const s=o[0]();s.selected&&!Xe.has(s.data.type)&&n.add(r)}for(const[r,o]of t)if(n.has(r))t.delete(r);else{const l=o[0]().handles;for(const[,i]of l)i(c=>{if(c.data.type===N.Sink){const a=c.data.sourceID;if(a&&n.has(a))return{...c,data:{type:N.Sink}}}return c})}return t}),this.saveHistory()}deleteEdge(t,n){const r=this.nodes().get(t);r&&r[0]().handles[n][1](o=>o.data.type!==N.Sink?o:{...o,data:{type:N.Sink}})}resetConnectingState(){re(()=>{this.connectingEdge[1]({}),this.connectingEnd[1]({pos:mt})})}setTempConnectingEnd(t,n,r){re(()=>{const o=this.connectingEdge[0]();o.nodeID&&(o.nodeID!==t||o.handleID!==r)&&this.connectingEnd[1](s=>({...s,ref:n}))})}unsetTempConnectingEnd(t){re(()=>{this.connectingEdge[0]().nodeID&&this.connectingEnd[1](r=>r.ref===t?{...r,ref:void 0}:r)})}finConnecting(t,n){const r=this.connectingEdge[0]();r.nodeID&&(r.nodeID!==t||r.handleID!==n)&&(r.isSource&&n!==void 0?this.connectEdge(t,n,r.nodeID,r.handleID):!r.isSource&&r.handleID!==void 0&&this.connectEdge(r.nodeID,r.handleID,t,n))}makeLeftHandle(t){const n=this.nodes().get(t);return n&&(n[1](r=>(r.handles.unshift(W("")),r.handles.lhs++,{...r})),bt(n[0]())),0}makeRightHandle(t){const n=this.nodes().get(t);if(!n)return 0;const r=n[0](),o=r.handles.length;return n[1](s=>(s.handles.push(W("")),{...s})),bt(r),o}connectEdge(t,n,r,o){re(()=>{n===-1/0&&(n=this.makeLeftHandle(t)),n===1/0&&(n=this.makeRightHandle(t));const s=this.nodes(),l=s.get(t),i=s.get(r);if(!l||!i)return;if(o===void 0){if(Xe.has(i[0]().data.type))return}else{const a=i[0]().handles[o];if(!a||a[0]().data.type!==N.Source)return}l[0]().handles[n][1](a=>a.data.type!==N.Sink?a:{...a,data:{type:N.Sink,sourceID:r,sourceHandle:o}}),this.resetConnectingState(),this.saveHistory()})}updateConnectingEnd(t){this.connectingEnd[1](n=>({...n,pos:t}))}addConnectingEnd(t,n,r){const o=this.nodes().get(t);if(!o)return;const[s]=o;let l=!0;if(n!==void 0){const c=s().handles[n];if(!c)return;l=c[0]().data.type===N.Source}const i=this.connectingEdge[0]();if(i.nodeID===t&&i.handleID===n){this.resetConnectingState();return}if(!l===i.isSource)return l?this.connectEdge(i.nodeID,i.handleID,t,n):this.connectEdge(t,n,i.nodeID,i.handleID);re(()=>{this.connectingEdge[1]({isSource:l,nodeID:t,handleID:n}),r&&this.connectingEnd[1](c=>({...c,pos:r}))})}editNode(t){const n=this.nodes().get(t);n&&this.editingNode[1](Vt(t,n[0]()))}applyEditNode(t){re(()=>{const n=this.editingNode[0]();if(!n)return;const r=n?.id,o=_r(t),s={...n,x:o},l=Qe(s),i=this.nodes().get(r),c=i?i[0]().handles:[],a=l[0]().handles;for(let d=0;d<a.length;d++){const f=c[d];a[d][1](h=>{if(h.data.type!==N.Sink)return h;const g={type:N.Sink};if(f){const v=f[0]().data;v.type===N.Sink&&(g.sourceID=v.sourceID,g.sourceHandle=v.sourceHandle)}return{...h,data:g}})}this.setNodes(d=>(d.set(r,l),d)),this.editingNode[1](void 0)})}cancelEditNode(){this.editingNode[1](void 0)}}const Oo=y('<svg class="hrm-edges no-user-select no-pointer-events"><path class="hrm-edge-path hrm-c-stroke-empty"stroke-width=3px fill=transparent>'),Bo=y("<div>"),Ho=e=>{const t=()=>{const s=e.g.connectingEdge[0]();return!s||!s.nodeID?void 0:e.g.viewRectOf(s.nodeID,s.handleID)},n=()=>{const s=e.g.connectingEdge[0]();if(!s.nodeID)return;const l=e.g.connectingEnd[0](),i=e.g.nodes().get(s.nodeID),c=e.g.viewRectOf(s.nodeID,s.handleID);if(!i||!c)return;let a;return l.ref&&(a=e.g.viewRect(l.ref)),Gt(c,a??{x:l.pos.x-4,y:l.pos.y-4,w:8,h:8})},r=()=>t()?.angular?"hrm-rect":"hrm-pill",o=()=>{const s=t();if(s)return{visibility:"visible",left:`${s.x}px`,top:`${s.y}px`,width:`${s.w}px`,height:`${s.h}px`}};return[(()=>{const s=Oo(),l=s.firstChild;return p(()=>ee(l,"d",n())),s})(),(()=>{const s=Bo();return p(l=>{const i=`hrm-editing-edge-handle no-pointer-events ${r()}`,c=o();return i!==l._v$&&H(s,l._v$=i),l._v$2=fe(s,c,l._v$2),l},{_v$:void 0,_v$2:void 0}),s})()]},Ro=y("<div class=code-area><textarea></textarea><textarea>"),zo=10,st=(e,t)=>{for(;t>0&&e.charCodeAt(t-1)!==zo;t--);return t},jo=(e,t,n)=>{const r=st(e,t),o=e.substring(r,n).split(`
`);return{value:e.substring(0,r)+"  "+o.join(`
  `)+e.substring(n),start:t+2,end:n+2*o.length}},Go=(e,t,n)=>{const r=st(e,t),o=e.substring(r,n).split(`
`);let s=t,l=n;for(let i=0;i<o.length;i++)o[i].startsWith("  ")?(i===0&&(s-=2),l-=2,o[i]=o[i].substring(2)):o[i].startsWith("	")&&(i===0&&(s-=1),l-=1,o[i]=o[i].substring(1));return{value:e.substring(0,r)+o.join(`
`)+e.substring(n),start:s,end:l}},Ko=e=>{let t;const n=i=>{e.autoresize&&t&&(t.value=i.value,t.style.width=i.style.width,i.style.height=t.scrollHeight+"px")},r=i=>{switch(e.onKeyDown&&e.onKeyDown(i),i.key){case"Tab":{i.preventDefault();const c=i.currentTarget,a=(i.shiftKey?Go:jo)(c.value,c.selectionStart,c.selectionEnd);c.value=a.value,c.selectionStart=a.start,c.selectionEnd=a.end}break;case"Enter":{i.preventDefault();const c=i.currentTarget,a=c.selectionStart,d=c.value,f=/[ \t]*/y;f.lastIndex=st(d,a-1);const h=f.exec(d)?.[0]??"";c.value=d.substring(0,a)+`
`+h+d.substring(c.selectionEnd),c.selectionStart=a+1+h.length,c.selectionEnd=a+1+h.length}break}n(i.target)},o=i=>{e.onInput&&e.onInput(i)},s=i=>{e.onChange&&e.onChange(i)},l=i=>{n(i.currentTarget)};return(()=>{const i=Ro(),c=i.firstChild,a=c.nextSibling;c.$$keydown=r,c.$$input=o,c.addEventListener("change",s),c.addEventListener("focus",l);const d=e.ref;typeof d=="function"?j(d,c):e.ref=c;const f=t;return typeof f=="function"?j(f,a):t=a,a.disabled=!0,p(h=>{const g=e.autofocus,v=e.disabled,L=`form-control ${e.class??""}`,R=e.placeholder,U=`form-control ${e.class??""} code-area-hidden no-pointer-events no-user-select`;return g!==h._v$&&(c.autofocus=h._v$=g),v!==h._v$2&&(c.disabled=h._v$2=v),L!==h._v$3&&H(c,h._v$3=L),R!==h._v$4&&ee(c,"placeholder",h._v$4=R),U!==h._v$5&&H(a,h._v$5=U),h},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),p(()=>c.value=e.value),i})()};K(["input","keydown"]);const Uo=y("<button class=suggest>"),Wo=y("<div class=suggests>"),Fo=y("<div class=hrm-edit-overlay>"),Yo=e=>(()=>{const t=Uo();return t.$$click=()=>alert(e.label),m(t,()=>e.label),t})(),qo=e=>(()=>{const t=Wo();return m(t,u(G,{get each(){return e.items},children:n=>u(Yo,n)})),t})(),Vo=e=>{let t,n;return Y(()=>{if(t){const r=["mousedown","touchstart","pointerdown","wheel"];for(const o of r)t.addEventListener(o,s=>s.stopPropagation())}}),(()=>{const r=Fo(),o=t;return typeof o=="function"?j(o,r):t=r,m(r,u(et,{class:"shadow-1 w-fit",get children(){return[u(M,{get color(){return x.danger},onClick:()=>e.g.cancelEditNode(),get children(){return[" ",u(Jr,{})," "]}}),u(M,{get color(){return x.success},onClick:()=>e.g.applyEditNode(n?n.value:""),get children(){return[" ",u(Zr,{})," "]}})]}}),null),m(r,u(Ko,{ref(s){const l=n;typeof l=="function"?l(s):n=s},autofocus:!0,autoresize:!0,class:"shadow-1",placeholder:"[NODE DATA]",get value(){return kr(e.node.x)},onInput:s=>{console.log(Ft(s.currentTarget.value))}}),null),m(r,u(qo,{items:[{label:"beta",text:"beta"},{label:"gamma",text:"gamma"},{label:"delta",text:"delta"},{label:"epsilon",text:"epsilon"},{label:"omega",text:"omega"},{label:"alpha",text:"alpha"},{label:"{",text:"{"},{label:"beta",text:"beta"},{label:"gamma",text:"gamma"},{label:"delta",text:"delta"},{label:"epsilon",text:"epsilon"},{label:"omega",text:"omega"},{label:"alpha",text:"alpha"},{label:"{",text:"{"}]}),null),p(()=>`translate(${e.node.pos.x}px, ${e.node.pos.y}px)`!=null?r.style.setProperty("transform",`translate(${e.node.pos.x}px, ${e.node.pos.y}px)`):r.style.removeProperty("transform")),r})()},Xo=e=>u(Z,{get when(){return e.g.editingNode[0]()},get children(){return u(Vo,{get g(){return e.g},get node(){return e.g.editingNode[0]()}})}});K(["click"]);const Zo=y('<div class="hrm-container w-100 h-100">'),Jo=e=>{const t=new Lo(e.initialNodes);return e.stateBox&&(e.stateBox[0]=t),(()=>{const n=Zo(),r=t.rootRef;return typeof r=="function"?j(r,n):t.rootRef=n,m(n,u(uo,{g:t,onClick:()=>t.deselectAll(),onDoubleClick:o=>{const s=t.viewPos(o.x,o.y),l=t.addEmptyNode(s);t.editNode(l)},onLongPress:()=>{Mr("[Hrm] Long press")},get children(){return[u(Io,{g:t}),u(Ho,{g:t}),u(Xo,{g:t})]}})),n})()},Qo=y("<div class=editor-root-hrm>"),es=e=>(()=>{const t=Qo();return m(t,u(Jo,{get initialNodes(){return tr()},get stateBox(){return e.stateBox}})),t})(),ts=y("<div class=dropdown><button></button><div>"),ns=y("<hr>"),rs=e=>{const[t,n]=_(!1);return(()=>{const r=ts(),o=r.firstChild,s=o.nextSibling;return o.$$click=()=>{n(!t())},m(o,()=>e.children),s.$$click=()=>{n(!1)},m(s,u(G,{get each(){return e.list},children:(l,i)=>[u(Z,{get when(){return i()>0},get children(){return ns()}}),u(G,{each:l,children:c=>c})]})),p(l=>{const i=`btn btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`,c=`dropdown-menu ${t()?"visible":"hidden"}`;return i!==l._v$&&H(o,l._v$=i),c!==l._v$2&&H(s,l._v$2=c),l},{_v$:void 0,_v$2:void 0}),r})()};K(["click"]);const os=y("<a> <!> "),We=y("<a> ");var ue=function(e){return e[e.Add=0]="Add",e[e.Edit=1]="Edit",e}(ue||{});const Jt=()=>[{name:z("mainEditor.menu.addTools"),icon:u(Zt,{})},{name:z("mainEditor.menu.selectTools"),icon:u(Yr,{})}],ss=e=>Jt()[e].icon,is=(e,t)=>{switch(e){case ue.Add:return[u(M,{get color(){return x.warning},onClick:()=>t[0]?.undo(),get children(){return u(Gr,{})}}),u(M,{get color(){return x.warning},onClick:()=>t[0]?.redo(),get children(){return u(Kr,{})}}),u(M,{get color(){return x.secondary},class:"flex-1",onClick:()=>t[0]?.addEmptyNode(),get children(){return u(Zt,{})}}),u(M,{get color(){return x.danger},class:"flex-1",onClick:()=>t[0]?.deleteSelectedNodes(),get children(){return u(xt,{})}})];case ue.Edit:return[u(M,{get color(){return x.warning},class:"flex-1",onClick:()=>t[0]?.deselectAll(),get children(){return u(Fr,{})}}),u(M,{get color(){return x.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return u(Xr,{})}}),u(M,{get color(){return x.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return u(Wr,{})}}),u(M,{get color(){return x.secondary},class:"flex-1",onClick:()=>alert("unimpl"),get children(){return u(Ur,{})}}),u(M,{get color(){return x.danger},class:"flex-1",onClick:()=>t[0]?.deleteSelectedNodes(),get children(){return u(xt,{})}})]}},ls=(e,t)=>Jt().map((n,r)=>(()=>{const o=os(),s=o.firstChild,l=s.nextSibling;return l.nextSibling,o.$$click=()=>{t(i=>({...i,toolSet:r})),e[0]&&(e[0].selectMode=r===ue.Edit)},m(o,()=>n.icon,l),m(o,()=>n.name,null),o})()),cs=e=>{const[t,n]=_({toolSet:ue.Add}),r=()=>[ls(e.stateBox,n),[(()=>{const o=We(),s=o.firstChild;return m(o,u(qr,{}),s),m(o,()=>z("mainEditor.menu.browser"),null),o})(),(()=>{const o=We(),s=o.firstChild;return m(o,u(Vr,{}),s),m(o,()=>z("mainEditor.menu.launch"),null),o})(),(()=>{const o=We(),s=o.firstChild;return o.$$click=()=>e.modalActionsBox?.[0]?.openGraphTools(),m(o,u(Xt,{}),s),m(o,()=>z("mainEditor.menu.graphTools"),null),o})()]];return u(et,{class:"editor-root-hrm-header shadow-2",get children(){return[u(rs,{get color(){return x.primary},get list(){return r()},get children(){return ss(t().toolSet)}}),E(()=>is(t().toolSet,e.stateBox))]}})};K(["click"]);const as=y("<div>"),ds=e=>(()=>{const t=as();return m(t,()=>e.children),p(()=>H(t,`form-control btn-${e.outline?"ol-":""}${e.color} ${e.class??""}`)),t})();const us=y('<div class=m-modal><div class="m-modal-content m-modal-content-stick-to-center">'),fs=e=>{const t=n=>{e.onClose&&n.target===n.currentTarget&&e.onClose()};return(()=>{const n=us(),r=n.firstChild;return n.$$click=t,m(r,()=>e.children),p(()=>r.classList.toggle("h-100",!!e.fullHeight)),n})()};K(["click"]);const Fe=y("<h3> <!> "),hs=e=>u(fs,{get onClose(){return e.onClose},get children(){return[u(et,{get children(){return[u(ds,{get color(){return x.primary},get children(){return u(Xt,{})}}),u(Fn,{class:"flex-1",disabled:!0,value:"Graph Tools"}),u(M,{get color(){return x.danger},get onClick(){return e.onClose},get children(){return u(Qr,{})}})]}}),(()=>{const t=Fe(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,m(t,()=>z("graphTools.layout"),r),t})(),u(M,{get color(){return x.primary},get children(){return[" ",E(()=>z("graphTools.tool.layoutDefault"))," "]}}),u(M,{get color(){return x.secondary},get children(){return[" ",E(()=>z("graphTools.tool.layoutLinear"))," "]}}),(()=>{const t=Fe(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,m(t,()=>z("graphTools.optimization"),r),t})(),u(M,{get color(){return x.warning},get children(){return[" ",E(()=>z("graphTools.tool.selectUnreachables"))," "]}}),(()=>{const t=Fe(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,m(t,()=>z("graphTools.validate"),r),t})(),u(M,{get color(){return x.danger},get children(){return[" ",E(()=>z("graphTools.tool.validateGraph"))," "]}})]}});var ce=function(e){return e[e.None=0]="None",e[e.Browser=1]="Browser",e[e.Launch=2]="Launch",e[e.GraphTools=3]="GraphTools",e}(ce||{});class gs{constructor(){const[t,n]=_({type:ce.None});this.state=t,this.setState=n}close(){this.setState(t=>({...t,type:ce.None}))}openGraphTools(){this.setState(t=>({...t,type:ce.GraphTools}))}}const ms=e=>{const t=new gs;return e.actionsBox&&(e.actionsBox[0]=t),u(Ht,{get children(){return u(be,{get when(){return t.state().type===ce.GraphTools},get children(){return u(hs,{onClose:()=>t.close(),get stateBox(){return e.stateBox}})}})}})},ws=y('<div class=editor-root><div class="w-100 abs-lt">'),ys=()=>{const e=vt(),t=vt();return(()=>{const n=ws(),r=n.firstChild;return m(n,u(es,{stateBox:e}),r),m(r,u(cs,{stateBox:e,modalActionsBox:t})),m(n,u(ms,{actionsBox:t,stateBox:e}),null),n})()},vs=()=>u(Gn,{get children(){return[u(Dr,{}),u(ys,{})]}}),ps=document.getElementById("root");_n(()=>u(vs,{}),ps);
