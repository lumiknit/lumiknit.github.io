var ge=Object.defineProperty;var pe=(e,t,s)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var C=(e,t,s)=>(pe(e,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const ye=(e,t)=>e===t,be=Symbol("solid-track"),R={equals:ye};let we=ce;const T=1,U=2,oe={owned:null,cleanups:null,context:null,owner:null},Y={};var y=null;let Z=null,me=null,d=null,v=null,L=null,Q=0;function H(e,t){const s=d,n=y,i=e.length===0,r=t===void 0?n:t,u=i?oe:{owned:null,cleanups:null,context:r?r.context:null,owner:r},o=i?e:()=>e(()=>k(()=>X(u)));y=u,d=null;try{return M(o,!0)}finally{d=s,y=n}}function _(e,t){t=t?Object.assign({},R,t):R;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(s.value)),ue(s,i));return[le.bind(s),n]}function te(e,t,s){const n=ee(e,t,!0,T);D(n)}function I(e,t,s){const n=ee(e,t,!1,T);D(n)}function V(e,t,s){s=s?Object.assign({},R,s):R;const n=ee(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,D(n),le.bind(n)}function ve(e){return e&&typeof e=="object"&&"then"in e}function $e(e,t,s){let n,i,r;arguments.length===2&&typeof t=="object"||arguments.length===1?(n=!0,i=e,r={}):(n=e,i=t,r={});let u=null,o=Y,c=!1,f="initialValue"in r,l=typeof n=="function"&&V(n);const a=new Set,[h,w]=(r.storage||_)(r.initialValue),[$,E]=_(void 0),[S,N]=_(void 0,{equals:!1}),[x,A]=_(f?"ready":"unresolved");function m(g,p,b,q){return u===g&&(u=null,q!==void 0&&(f=!0),(g===o||p===o)&&r.onHydrated&&queueMicrotask(()=>r.onHydrated(q,{value:p})),o=Y,P(p,b)),p}function P(g,p){M(()=>{p===void 0&&w(()=>g),A(p!==void 0?"errored":f?"ready":"unresolved"),E(p);for(const b of a.keys())b.decrement();a.clear()},!1)}function B(){const g=Se,p=h(),b=$();if(b!==void 0&&!u)throw b;return d&&!d.user&&g&&te(()=>{S(),u&&(g.resolved||a.has(g)||(g.increment(),a.add(g)))}),p}function J(g=!0){if(g!==!1&&c)return;c=!1;const p=l?l():n;if(p==null||p===!1){m(u,k(h));return}const b=o!==Y?o:k(()=>i(p,{value:h(),refetching:g}));return ve(b)?(u=b,"value"in b?(b.status==="success"?m(u,b.value,void 0,p):m(u,void 0,void 0,p),b):(c=!0,queueMicrotask(()=>c=!1),M(()=>{A(f?"refreshing":"pending"),N()},!1),b.then(q=>m(b,q,void 0,p),q=>m(b,void 0,he(q),p)))):(m(u,b,void 0,p),b)}return Object.defineProperties(B,{state:{get:()=>x()},error:{get:()=>$()},loading:{get(){const g=x();return g==="pending"||g==="refreshing"}},latest:{get(){if(!f)return B();const g=$();if(g&&!u)throw g;return h()}}}),l?te(()=>J(!1)):J(!1),[B,{refetch:J,mutate:w}]}function xe(e){return M(e,!1)}function k(e){if(d===null)return e();const t=d;d=null;try{return e()}finally{d=t}}function Ae(e){return y===null||(y.cleanups===null?y.cleanups=[e]:y.cleanups.push(e)),e}let Se;function le(){if(this.sources&&this.state)if(this.state===T)D(this);else{const e=v;v=null,M(()=>F(this),!1),v=e}if(d){const e=this.observers?this.observers.length:0;d.sources?(d.sources.push(this),d.sourceSlots.push(e)):(d.sources=[this],d.sourceSlots=[e]),this.observers?(this.observers.push(d),this.observerSlots.push(d.sources.length-1)):(this.observers=[d],this.observerSlots=[d.sources.length-1])}return this.value}function ue(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&M(()=>{for(let i=0;i<e.observers.length;i+=1){const r=e.observers[i],u=Z&&Z.running;u&&Z.disposed.has(r),(u?!r.tState:!r.state)&&(r.pure?v.push(r):L.push(r),r.observers&&ae(r)),u||(r.state=T)}if(v.length>1e6)throw v=[],new Error},!1)),t}function D(e){if(!e.fn)return;X(e);const t=Q;Ce(e,e.value,t)}function Ce(e,t,s){let n;const i=y,r=d;d=y=e;try{n=e.fn(t)}catch(u){return e.pure&&(e.state=T,e.owned&&e.owned.forEach(X),e.owned=null),e.updatedAt=s+1,de(u)}finally{d=r,y=i}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?ue(e,n):e.value=n,e.updatedAt=s)}function ee(e,t,s,n=T,i){const r={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:y,context:y?y.context:null,pure:s};return y===null||y!==oe&&(y.owned?y.owned.push(r):y.owned=[r]),r}function fe(e){if(e.state===0)return;if(e.state===U)return F(e);if(e.suspense&&k(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Q);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===T)D(e);else if(e.state===U){const n=v;v=null,M(()=>F(e,t[0]),!1),v=n}}function M(e,t){if(v)return e();let s=!1;t||(v=[]),L?s=!0:L=[],Q++;try{const n=e();return Ee(s),n}catch(n){s||(L=null),v=null,de(n)}}function Ee(e){if(v&&(ce(v),v=null),e)return;const t=L;L=null,t.length&&M(()=>we(t),!1)}function ce(e){for(let t=0;t<e.length;t++)fe(e[t])}function F(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const n=e.sources[s];if(n.sources){const i=n.state;i===T?n!==t&&(!n.updatedAt||n.updatedAt<Q)&&fe(n):i===U&&F(n,t)}}}function ae(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=U,s.pure?v.push(s):L.push(s),s.observers&&ae(s))}}function X(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),i=s.observers;if(i&&i.length){const r=i.pop(),u=s.observerSlots.pop();n<i.length&&(r.sourceSlots[u]=n,i[n]=r,s.observerSlots[n]=u)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)X(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function he(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function de(e,t=y){throw he(e)}const Pe=Symbol("fallback");function se(e){for(let t=0;t<e.length;t++)e[t]()}function ke(e,t,s={}){let n=[],i=[],r=[],u=0,o=t.length>1?[]:null;return Ae(()=>se(r)),()=>{let c=e()||[],f,l;return c[be],k(()=>{let h=c.length,w,$,E,S,N,x,A,m,P;if(h===0)u!==0&&(se(r),r=[],n=[],i=[],u=0,o&&(o=[])),s.fallback&&(n=[Pe],i[0]=H(B=>(r[0]=B,s.fallback())),u=1);else if(u===0){for(i=new Array(h),l=0;l<h;l++)n[l]=c[l],i[l]=H(a);u=h}else{for(E=new Array(h),S=new Array(h),o&&(N=new Array(h)),x=0,A=Math.min(u,h);x<A&&n[x]===c[x];x++);for(A=u-1,m=h-1;A>=x&&m>=x&&n[A]===c[m];A--,m--)E[m]=i[A],S[m]=r[A],o&&(N[m]=o[A]);for(w=new Map,$=new Array(m+1),l=m;l>=x;l--)P=c[l],f=w.get(P),$[l]=f===void 0?-1:f,w.set(P,l);for(f=x;f<=A;f++)P=n[f],l=w.get(P),l!==void 0&&l!==-1?(E[l]=i[f],S[l]=r[f],o&&(N[l]=o[f]),l=$[l],w.set(P,l)):r[f]();for(l=x;l<h;l++)l in E?(i[l]=E[l],r[l]=S[l],o&&(o[l]=N[l],o[l](l))):i[l]=H(a);i=i.slice(0,u=h),n=c.slice(0)}return i});function a(h){if(r[l]=h,o){const[w,$]=_(l);return o[l]=$,t(c[l],w)}return t(c[l])}}}let Me=!1;function j(e,t){return k(()=>e(t||{}))}const Te=e=>`Stale read from <${e}>.`;function ne(e){const t="fallback"in e&&{fallback:()=>e.fallback};return V(ke(()=>e.each,e.children,t||void 0))}function _e(e){const t=e.keyed,s=V(()=>e.when,void 0,{equals:(n,i)=>t?n===i:!n==!i});return V(()=>{const n=s();if(n){const i=e.children;return typeof i=="function"&&i.length>0?k(()=>i(t?n:()=>{if(!k(s))throw Te("Show");return e.when})):i}return e.fallback},void 0,void 0)}function Le(e,t,s){let n=s.length,i=t.length,r=n,u=0,o=0,c=t[i-1].nextSibling,f=null;for(;u<i||o<r;){if(t[u]===s[o]){u++,o++;continue}for(;t[i-1]===s[r-1];)i--,r--;if(i===u){const l=r<n?o?s[o-1].nextSibling:s[r-o]:c;for(;o<r;)e.insertBefore(s[o++],l)}else if(r===o)for(;u<i;)(!f||!f.has(t[u]))&&t[u].remove(),u++;else if(t[u]===s[r-1]&&s[o]===t[i-1]){const l=t[--i].nextSibling;e.insertBefore(s[o++],t[u++].nextSibling),e.insertBefore(s[--r],l),t[i]=s[r]}else{if(!f){f=new Map;let a=o;for(;a<r;)f.set(s[a],a++)}const l=f.get(t[u]);if(l!=null)if(o<l&&l<r){let a=u,h=1,w;for(;++a<i&&a<r&&!((w=f.get(t[a]))==null||w!==l+h);)h++;if(h>l-o){const $=t[u];for(;o<l;)e.insertBefore(s[o++],$)}else e.replaceChild(s[o++],t[u++])}else u++;else t[u++].remove()}}}const ie="_$DX_DELEGATE";function Ne(e,t,s,n={}){let i;return H(r=>{i=r,t===document?e():K(t,e(),t.firstChild?null:void 0,s)},n.owner),()=>{i(),t.textContent=""}}function G(e,t,s){let n;const i=()=>{const u=document.createElement("template");return u.innerHTML=e,u.content.firstChild},r=()=>(n||(n=i())).cloneNode(!0);return r.cloneNode=r,r}function qe(e,t=window.document){const s=t[ie]||(t[ie]=new Set);for(let n=0,i=e.length;n<i;n++){const r=e[n];s.has(r)||(s.add(r),t.addEventListener(r,Ie))}}function Oe(e,t,s,n){Array.isArray(s)?(e[`$$${t}`]=s[0],e[`$$${t}Data`]=s[1]):e[`$$${t}`]=s}function K(e,t,s,n){if(s!==void 0&&!n&&(n=[]),typeof t!="function")return W(e,t,n,s);I(i=>W(e,t(),i,s),n)}function Ie(e){const t=`$$${e.type}`;let s=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==s&&Object.defineProperty(e,"target",{configurable:!0,value:s}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return s||document}});s;){const n=s[t];if(n&&!s.disabled){const i=s[`${t}Data`];if(i!==void 0?n.call(s,i,e):n.call(s,e),e.cancelBubble)return}s=s._$host||s.parentNode||s.host}}function W(e,t,s,n,i){for(;typeof s=="function";)s=s();if(t===s)return s;const r=typeof t,u=n!==void 0;if(e=u&&s[0]&&s[0].parentNode||e,r==="string"||r==="number")if(r==="number"&&(t=t.toString()),u){let o=s[0];o&&o.nodeType===3?o.data!==t&&(o.data=t):o=document.createTextNode(t),s=O(e,s,n,o)}else s!==""&&typeof s=="string"?s=e.firstChild.data=t:s=e.textContent=t;else if(t==null||r==="boolean")s=O(e,s,n);else{if(r==="function")return I(()=>{let o=t();for(;typeof o=="function";)o=o();s=W(e,o,s,n)}),()=>s;if(Array.isArray(t)){const o=[],c=s&&Array.isArray(s);if(z(o,t,s,i))return I(()=>s=W(e,o,s,n,!0)),()=>s;if(o.length===0){if(s=O(e,s,n),u)return s}else c?s.length===0?re(e,o,n):Le(e,s,o):(s&&O(e),re(e,o));s=o}else if(t.nodeType){if(Array.isArray(s)){if(u)return s=O(e,s,n,t);O(e,s,null,t)}else s==null||s===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);s=t}}return s}function z(e,t,s,n){let i=!1;for(let r=0,u=t.length;r<u;r++){let o=t[r],c=s&&s[e.length],f;if(!(o==null||o===!0||o===!1))if((f=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))i=z(e,o,c)||i;else if(f==="function")if(n){for(;typeof o=="function";)o=o();i=z(e,Array.isArray(o)?o:[o],Array.isArray(c)?c:[c])||i}else e.push(o),i=!0;else{const l=String(o);c&&c.nodeType===3&&c.data===l?e.push(c):e.push(document.createTextNode(l))}}return i}function re(e,t,s=null){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],s)}function O(e,t,s,n){if(s===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let r=!1;for(let u=t.length-1;u>=0;u--){const o=t[u];if(i!==o){const c=o.parentNode===e;!r&&!u?c?e.replaceChild(i,o):e.insertBefore(i,s):c&&o.remove()}else r=!0}}else e.insertBefore(i,s);return[i]}const Be=()=>"DeviceMotionEvent"in window&&typeof window.DeviceMotionEvent.requestPermission=="function",je=async()=>{if(!Be())return!0;try{return await window.DeviceMotionEvent.requestPermission(),!0}catch{return!1}};var De=G('<div class=hourglass><div class=hourglass-inner><div class=hourglass-room></div><div class="hourglass-room hourglass-bottom">'),Ge=G('<div class="hourglass-cell hourglass-top"><div class=hourglass-dot>'),He=G("<div class=hourglass-cell><div class=hourglass-dot>");class Re{constructor(t){C(this,"n");C(this,"board");C(this,"gx",0);C(this,"gy",0);C(this,"neckProb",.5);C(this,"top");C(this,"setTop");C(this,"bottom");C(this,"setBottom");this.n=t,this.board=Array(2*t*t).fill(!1);for(let s=0;s<2*t*t;s++)this.board[s]=s<t*t*.9;[this.top,this.setTop]=_(this.board.slice(0,t*t)),[this.bottom,this.setBottom]=_(this.board.slice(t*t))}pos2idx(t,s){if(0<=t&&t<this.n&&0<=s&&s<this.n)return this.n*this.n+t+this.n*s;if(-this.n<=t&&t<0&&-this.n<=s&&s<0)return t+this.n+this.n*(s+this.n)}idx2pos(t){if(0<=t&&t<this.n*this.n)return[t%this.n-this.n,Math.floor(t/this.n)-this.n];if(this.n*this.n<=t&&t<2*this.n*this.n){const s=t-this.n*this.n;return[s%this.n,Math.floor(s/this.n)]}}get(t,s){const n=this.pos2idx(t,s);if(n!==void 0)return this.board[n]}getIdx(t){return this.board[t]}set(t,s,n){const i=this.pos2idx(t,s);i!==void 0&&(this.board[i]=n)}setGravity(t,s){this.gx=t,this.gy=s}step(){const t=this.gx>=0?this.n-1:-this.n,s=this.gy>=0?this.n-1:-this.n,n=this.gx>=0?-1:1,i=this.gy>=0?-1:1,r=Math.sqrt(this.gx*this.gx+this.gy*this.gy),u=this.gx/r,o=this.gy/r,c=[];for(let l=-1;l<=1;l++)for(let a=-1;a<=1;a++){if(l===0&&a===0)continue;const h=(l-u)*(l-u)+(a-o)*(a-o);h<1&&c.push([l,a,h])}c.sort((l,a)=>Math.abs(l[2]-a[2])>.001?l[2]-a[2]:Math.random()-.5);let f=!1;for(let l=t;-this.n<=l&&l<this.n;l+=n)for(let a=s;-this.n<=a&&a<this.n;a+=i){const h=this.pos2idx(l,a);if(!(h===void 0||this.board[h]===!1))for(let[w,$,E]of c){const S=this.pos2idx(l+w,a+$);if(S!==void 0&&this.board[S]===!1){if(l*2+w===-1&&a*2+$===-1&&Math.random()<this.neckProb)continue;this.board[S]=!0,this.board[h]=!1,f=!0;break}}}f&&xe(()=>{this.setTop(this.board.slice(0,this.n*this.n)),this.setBottom(this.board.slice(this.n*this.n))})}}const Ue=e=>{const t=100/e.n,s=100/e.n,n=new Re(e.n);return setInterval(()=>{n.step()},20),window.addEventListener("devicemotion",i=>{const r=i.accelerationIncludingGravity;if(r===null||r.x===null||r.y===null){n.setGravity(1,1);return}let u=r.y,o=r.x;const c=-3*Math.PI/4,f=u*Math.cos(c)-o*Math.sin(c),l=u*Math.sin(c)+o*Math.cos(c);n.setGravity(f,l)}),(()=>{var i=De(),r=i.firstChild,u=r.firstChild,o=u.nextSibling;return K(u,j(ne,{get each(){return n.top()},children:c=>(()=>{var f=Ge(),l=f.firstChild;return`${t}%`!=null?f.style.setProperty("width",`${t}%`):f.style.removeProperty("width"),`${s}%`!=null?f.style.setProperty("height",`${s}%`):f.style.removeProperty("height"),I(a=>(a=c?e.onColor:e.offColor)!=null?l.style.setProperty("background-color",a):l.style.removeProperty("background-color")),f})()})),K(o,j(ne,{get each(){return n.bottom()},children:c=>(()=>{var f=He(),l=f.firstChild;return`${t}%`!=null?f.style.setProperty("width",`${t}%`):f.style.removeProperty("width"),`${s}%`!=null?f.style.setProperty("height",`${s}%`):f.style.removeProperty("height"),I(a=>(a=c?e.onColor:e.offColor)!=null?l.style.setProperty("background-color",a):l.style.removeProperty("background-color")),f})()})),I(c=>(c=e.backgroundColor||"black")!=null?i.style.setProperty("background-color",c):i.style.removeProperty("background-color")),i})()};var Ve=G("<div class=overlay>To start the Hourglass, you need to grant permission to access the accelerometer<br><button>Request Permission"),Fe=G("<div class=cont>");const Ke=()=>{const[e,{refetch:t}]=$e(async()=>{const s=await je();return console.log("Accelerometer Permission",s),s});return[j(_e,{get when(){return!e()},get children(){var s=Ve(),n=s.firstChild,i=n.nextSibling,r=i.nextSibling;return Oe(r,"click",t),s}}),(()=>{var s=Fe();return s.style.setProperty("background-color","black"),K(s,j(Ue,{n:40,backgroundColor:"black",onColor:"red",offColor:"gray"})),s})()]};qe(["click"]);const We=document.getElementById("root");Ne(()=>j(Ke,{}),We);
