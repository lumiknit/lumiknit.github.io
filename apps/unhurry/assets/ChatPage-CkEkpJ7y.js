const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mermaid-BOfcbsIe.js","assets/hljs-nSGkUMep.js","assets/marked-DPzEbV2M.js"])))=>i.map(i=>d[i]);
import{c as J,Q as ea,P as vt,t as F,i as E,a as w,v as ye,M as ae,F as Le,S as Ge,a2 as nt,X as ta,Y as na,W as ia,ah as sn,j as xe,o as ke,ai as hr,aj as aa,ak as vr,L as ra,s as Oe,J as Xt,V as ai,al as Dt,e as dt,p as Ne,am as sa,an as oa,ao as la,ap as pr,aq as mr,ar as xr,f as Xn,m as ri,Z as ca,g as yr,l as _r,as as br,at as $r,_ as Vt,y as Tr,z as at,au as wr,av as Sr,aw as Ar,B as Cr,ax as Er,ay as kr,az as Qt,aA as Rr,aB as Lr,aC as Ln,aD as si,aE as Or,aF as Ir,aG as Pr,aH as Fr,aI as Dr,aJ as Nr,aK as Mr,aL as Br,aM as zr,aN as Xr,I as on,aO as Vr,aP as jr,aQ as Gr,aR as Yr,aS as Ur,aT as Hr,aU as ki,aV as Ri,aW as Wr,aX as xt}from"./index-CF6Yk-Rb.js";import{o as ua,a as fa,D as Kr,b as Jr,A as qr,H as dn}from"./Dropdown-CSb7DZo9.js";import{d as z,b6 as Zr,b7 as Qr,aD as es,b8 as ts,b9 as da,ba as ns,bb as is,N as as,bc as rs,bd as gn,be as ss,Q as Vn,bf as os,bg as ls,bh as cs,bi as us,bj as fs,bk as ds,bl as gs,bm as hs,bn as vs,bo as ps,bp as ms,bq as xs,br as ys,bs as _s,bt as bs,bu as $s,bv as Ts,Y as ws,bw as Ss,ax as As,bx as Cs,by as Es,T as ks,bz as Rs,bA as Ls,bB as Os,bC as Is,bD as Ps,bE as Fs,bF as Li,aC as Oi,aR as Ds,bG as Ns,bH as Ut,bI as Ms}from"./mermaid-BOfcbsIe.js";import{m as oi,a as Bs}from"./marked-DPzEbV2M.js";import{c as yn}from"./clipboard-BoHkaDj2.js";import{B as zs}from"./ConfirmModal-TQMJ_Tbz.js";import"./hljs-nSGkUMep.js";var Xs=F("<button>"),Vs=F("<span>..."),js=F("<div class=input-tags>");const ga=t=>{const[e,n]=ta(t,["children","class","onClick"]);return(()=>{var i=Xs();return na(i,ia(n,{get class(){return"tag mr-1 "+(e.class||"")},onClick:a=>{sn("medium"),e.onClick?.(a)}}),!1,!0),E(i,()=>e.children),i})()},Gs=t=>w(ga,{color:"primary",onClick:async()=>{const e=await ua({initURL:t.url.trim()});e&&(t.onFile(e.name,e._id),t.onRemovePrev(t.url))},children:"Upload by URL"}),Ys=/https?:\/\/[^\s]+\s*$/,Us=t=>{const[e,n]=J(),[i,a]=J(!1),r=()=>nt()?.promptTags||[],s=(c,u)=>{switch(c.stopPropagation(),u.action){case"insert":t.onInsertText(u.prompt,!!u.sendImmediately);break;case"insert-start":t.onInsertStartText(u.prompt,!!u.sendImmediately);break;case"insert-end":t.onInsertEndText(u.prompt,!!u.sendImmediately);break;case"replace":t.onReplaceText(u.prompt,!!u.sendImmediately);break;default:xe.error(`Unknown PromptTag action: ${u.action}`)}};let o;const l=()=>{o=void 0;const c=t.textState(),u=c[0].length+c[1].length+c[2].length,f=c[0].lastIndexOf(" "),d=f===-1?c[0]:c[0].slice(f+1),g=[...r()].filter(p=>{switch(p.showCondition){case"empty":return u===0;case"non-empty":return u>0;case"prefix":return d.length>0&&(p.showConditionParam||"").startsWith(d);default:return!0}});n(g);const h=c[0].match(Ys);a(h?h[0]:!1)};return ea(()=>{t.textState(),o||(o=window.setTimeout(l,1e3),n(void 0))}),vt(()=>{o&&(window.clearTimeout(o),o=void 0)}),(()=>{var c=js();return E(c,()=>t.children,null),E(c,w(ye,{get when(){return i()},get children(){return w(Gs,{get url(){return i()},get onRemovePrev(){return t.onRemovePrev},get onFile(){return t.onFile}})}}),null),E(c,w(Ge,{get children(){return[w(ae,{get when(){return e()===void 0},get children(){return Vs()}}),w(ae,{when:!0,get children(){return w(Le,{get each(){return e()},children:u=>w(ga,{get class(){return"is-"+u.color},onClick:f=>s(f,u),get children(){return u.tag}})})}})]}}),null),c})()};var Hs=F('<div class=control><button type=button aria-label=Send></button><svg class="auto-send-progress has-text-warning"viewBox="0 0 2 2"xmlns=http://www.w3.org/2000/svg><circle class=circle-progress r=0.9 cx=1 cy=1 stroke=currentColor stroke-width=0.2 stroke-linecap=round fill=transparent>');const Ws=800,Ks=1200,Js=t=>{let e,n;const i=v=>{e&&(n&&n.cancel(),n=e.animate([{strokeDashoffset:1.8*Math.PI},{strokeDashoffset:0}],v))},a=()=>{n&&n.cancel(),n=void 0,e.style.strokeDashoffset=`${1.8*Math.PI}`},r=()=>{let v="";return Dt()?v="is-loading is-warning":t.speechRecognizing()?v="is-danger":v="is-primary","button is-rounded p-2 is-size-5 "+v},s=()=>t.speechRecognizing()?aa:vr;let o=!1,l=null,c=null;const u=()=>{console.log("Start recognition"),sn("light"),l=null,o=!1,t.startSpeechRecognition()},f=()=>{console.log("Holding"),sn("light"),c=null,o=!0},d=()=>{o=!0,l&&(clearTimeout(l),l=null),c&&(clearTimeout(c),c=null)},g=v=>{v.stopPropagation(),v.preventDefault(),o=!0,clearTimeout(l),clearTimeout(c),sn("medium"),!Dt()&&!t.speechRecognizing()&&(l=window.setTimeout(u,Ws),c=window.setTimeout(f,Ks))},h=v=>{console.log("Leave",v),v.stopPropagation(),v.preventDefault(),d()},p=v=>{if(console.log("Up",v),v.stopPropagation(),v.preventDefault(),nt().blurOnSendButton)try{document.activeElement?.blur?.()}catch{console.warn("Failed to blur the active element")}t.speechRecognizing()?o&&t.stopSpeechRecognition():Dt()?(xe("Canceling the current operation..."),t.onCancel()):t.onSend(),d()};return vt(d),ke(()=>{a()}),ea(()=>{const v=hr();if(v){const m=v-Date.now();i(m)}else a()}),(()=>{var v=Hs(),m=v.firstChild,x=m.nextSibling,y=x.firstChild;v.addEventListener("pointerleave",h),v.$$pointerup=p,v.$$pointerdown=g,E(m,w(ra,{get component(){return s()}}));var _=e;return typeof _=="function"?dt(_,y):e=y,Oe($=>{var b=r(),T=`${.9*2*Math.PI}`;return b!==$.e&&Xt(m,$.e=b),T!==$.t&&ai(y,"stroke-dasharray",$.t=T),$},{e:void 0,t:void 0}),v})()};Ne(["pointerdown","pointerup"]);const qs=vt;function Zs(t,e,n){if(sa.context){const[i,a]=J(t,n);return ke(()=>a(()=>e())),[i,a]}return J(e(),n)}function Qs(t,e,n,i){return t.addEventListener(e,n,i),qs(t.removeEventListener.bind(t,e,n,i))}function eo(t,e=la()){let n=0,i,a;return()=>(n++,vt(()=>{n--,queueMicrotask(()=>{!n&&a&&(a(),a=i=void 0)})}),a||oa(r=>i=t(a=r),e),i)}function to(t){const e=la(),n=eo(t,e);return()=>sa.context?oa(t,e):n()}function ha(t,e=!1){const n=window.matchMedia(t),[i,a]=Zs(e,()=>n.matches);return Qs(n,"change",()=>a(n.matches)),i}function no(t){return ha("(prefers-color-scheme: dark)",t)}no.bind(void 0,!1);const va=()=>ha("(max-width: 768px)");var io=F("<span>Palette"),ao=F('<button class="tag h-full"><span class=icon>');const ro=()=>{const t=va();return(()=>{var e=ao(),n=e.firstChild;return e.$$click=()=>pr("/"),E(n,w(mr,{})),E(e,w(ye,{get when(){return!t()},get children(){return io()}}),null),e})()};Ne(["click"]);var so=F("<span class=mic-recording>"),oo=F("<button>");const lo=t=>{const[e,n]=ta(t,["startRecognition","stopRecognition","recognizing"]),i=async()=>{e.recognizing?.()?await e.stopRecognition?.():await e.startRecognition?.()};return(()=>{var a=oo();return na(a,ia(n,{onClick:i}),!1,!0),E(a,w(Ge,{get children(){return[w(ae,{get when(){return e.recognizing?.()},get children(){return[so(),w(xr,{})]}}),w(ae,{when:!0,get children(){return w(aa,{})}})]}})),a})()};var co=F("<div class=input-tags>"),uo=F('<button class="tag mr-1"><span class="delete is-small">');const fo=t=>{const e=i=>async a=>{a.stopPropagation(),a.preventDefault();const r=await ri(i);r&&await fa(r)&&t.onDelete(i)},n=i=>a=>{a.stopPropagation(),a.preventDefault(),t.onDelete(i)};return(()=>{var i=co();return E(i,w(Le,{get each(){return t.files},children:a=>(()=>{var r=uo(),s=r.firstChild;return Xn(r,"click",e(a.id),!0),E(r,()=>a.name,s),Xn(s,"click",n(a.id),!0),r})()})),i})()};Ne(["click"]);var go=F("<div class=pre-wrap>"),ho=F('<div class="cell artifact-cell"><div class=has-text-primary><b></b><br>'),vo=F('<div class=has-text-centered><button class="button is-small">More (<!> / <!>)'),po=F('<div class=box><h3 class="title is-3">Pick an Artifact</h3><div class=mb-2><input class=input type=text placeholder=Filter...></div><div class="grid is-gap-0 is-col-min-5"></div><div class="buttons is-right"><button class=button>Go to List</button><button class=button>Cancel');const mo=t=>{const[e,n]=J(null),[i,a]=J(null);let r=()=>{};return ke(async()=>{if(t.meta.mimeType.startsWith("image/")){const s=await br(t.meta._id);if(s){const o=URL.createObjectURL(s);n(o),r=()=>{URL.revokeObjectURL(o)}}}else{const s=await $r(t.meta._id);if(s&&s.data.length<16*1024)if(typeof s.data=="string")a(s.data);else{const o=new TextDecoder;a(o.decode(s.data))}}}),vt(()=>{r()}),(()=>{var s=ho(),o=s.firstChild,l=o.firstChild;return l.nextSibling,s.$$click=()=>t.onClick(),E(l,()=>t.meta.mimeType),E(o,()=>t.meta.name,null),E(s,w(ye,{get when(){return i()},get children(){var c=go();return E(c,i),c}}),null),Oe(c=>(c=e()?`url(${e()})`:"none")!=null?s.style.setProperty("background-image",c):s.style.removeProperty("background-image")),s})()},xo=()=>ca(e=>{let n;const[i,a]=J([]),[r,s]=J([]),o=10,[l,c]=J(o),u=async()=>{const g=await _r();g.sort((h,p)=>p.createdAt-h.createdAt),a(g.map(h=>({...h,lcName:h.name.toLowerCase()}))),f(n.value)},f=g=>{const h=g.toLowerCase(),p=i().filter(v=>v.lcName.includes(h));s(p)},d=g=>{const h=g.target;f(h.value)};return ke(u),(()=>{var g=po(),h=g.firstChild,p=h.nextSibling,v=p.firstChild,m=p.nextSibling,x=m.nextSibling,y=x.firstChild,_=y.nextSibling;v.addEventListener("change",d);var $=n;return typeof $=="function"?dt($,v):n=v,E(m,w(Le,{get each(){return r().slice(0,l())},children:b=>w(mo,{meta:b,onClick:()=>{e.onClose(b._id)}})})),E(g,w(ye,{get when(){return l()<r().length},get children(){var b=vo(),T=b.firstChild,A=T.firstChild,k=A.nextSibling,I=k.nextSibling,R=I.nextSibling;return R.nextSibling,T.$$click=()=>c(C=>C+o),E(T,l,k),E(T,()=>r().length,R),b}}),x),y.$$click=()=>{yr("/artifacts"),e.onClose()},_.$$click=()=>e.onClose(),g})()});Ne(["click"]);var yo=F("<span class=icon>"),_o=F("<span>Upload");const bo=t=>{const e=va(),n=async(s,o)=>{try{const l=await Jr(s,o);at.info("[UploadFileButton] File selected: ",l),l.length===1?xe.success("File uploaded: "+l[0]._id):xe.success("Files uploaded: "+l.length+" files");for(const c of l)t.onFile(c.name,c._id)}catch(l){at.error("[UploadFileButton] Failed to upload file:",l),xe.error("Failed to upload file: "+l)}},i=async()=>{const s=await xo();if(!s)return;const o=await ri(s);if(!o){xe.error("Artifact not found: "+s);return}const l=o.name;t.onFile(l,s)},a=async()=>{const s=await ua();s&&t.onFile(s.name,s._id)};return ke(async()=>{const s=await Vt(),o=l=>{l.map(async c=>{const u=await Tr(c.uri,c.name,c.mimeType,c.data);at.info("[UploadFileButton] File selected:",u._id),xe.success("File uploaded: "+u._id),t.onFile(u.name,u._id)})};s.mountDragAndDrop(o)}),vt(async()=>{(await Vt()).unmountDragAndDrop()}),w(Kr,{divClass:"is-up",btnClass:"tag",items:[[{icon:wr,label:"Camera",onClick:()=>n("image/*","environment")},{icon:Sr,label:"Image",onClick:()=>n("image/*")},{icon:Ar,label:"File",onClick:()=>n("*/*")},{icon:Cr,label:"Other",onClick:()=>a()}],[{icon:Er,label:"Artifact",onClick:i}]],get children(){return[(()=>{var s=yo();return E(s,w(kr,{})),s})(),w(ye,{get when(){return!e()},get children(){return _o()}})]}})};var $o=F("<p class=is-size-7>UpHurry mode. Write a goal."),To=F('<div><textarea></textarea><textarea class=autosize-hidden-ta></textarea><div class="buttons gap-1 no-user-select">');const wo=()=>{let t,e,n,i=0,a,r=!1,s=0;const[o,l]=J([]),[c,u]=J(["","",""]),f=()=>{const S=e.value,L=e.selectionStart,N=e.selectionEnd;u([S.slice(0,L),S.slice(L,N),S.slice(N)])},d=(S,L)=>{const N=e;let M=N.selectionStart;const Te=N.selectionEnd;let ne=N.value;L===void 0?(L=M,ne=ne.slice(0,M)+ne.slice(Te)):L<0&&(L=Te),M<=L&&(M+=S.length);const Se=ne.slice(0,L)+S+ne.slice(L);N.value=Se,N.setSelectionRange(M,M),O(),f()},g=S=>{e.value=S,e.setSelectionRange(S.length,S.length),O()},h=async()=>{y();let S=e.value;if(s>0&&(S=S.slice(s)),s=e.value.length,S=S.trim(),S==="")return;const L=o();!Qt()&&!r&&(e.value="",s=0,O()),l([]);try{at.info("[BottomInput] Input: ",S),await Lr(S,L.map(N=>N.id),Qt())}catch(N){xe.error("Failed to send: "+N),e.value=S,l(L),s=0}O()},p=()=>{const S=nt()?.autoSendMillis;if(S&&S>0)return Math.floor(S)},v=()=>{i>Date.now()?a=window.setTimeout(v,i-Date.now()):(m(),h())},m=()=>{a=void 0,Ln(null)},x=()=>{const S=p();if(!nt()?.enableAutoSend||!S||Dt())return;const L=Date.now();Ln(L+S),i=L+S,a===void 0&&(a=window.setTimeout(v,S))},y=()=>{a&&clearTimeout(a),Ln(null),m()},_=()=>{if(s>0){const S=e.selectionStart-s,L=e.selectionEnd-s;e.value=e.value.slice(s),e.setSelectionRange(S,L),s=0}},$=()=>{_(),r=!1},b=S=>{S.isComposing||_()},T=S=>{f(),r=S.isComposing,O(),x()},A=S=>{if(f(),!S.isComposing)switch(S.key){case"Enter":(S.shiftKey||S.ctrlKey||S.metaKey)!==!!nt()?.enterKeyToSend&&(S.preventDefault(),h());break;case"Escape":y(),e.blur();break;case"Backspace":y();break;default:x()}};let k=null;const[I,R]=J(!1),C=async()=>{const S=await Vt();if(!S){xe.error("Speech recognition not supported");return}if(!k){if(k=await S.speechRecognizer(),!k){xe.error("Speech recognition not supported");return}k.onTranscript=(L,N,M)=>{if(at.info("onTranscript",L,N,M),at.info(e.selectionStart),M){const Te=e.value,ne=e.selectionStart,Se=Te.slice(0,ne);if(Se.endsWith(M)){e.value=Se.slice(0,-M.length)+Te.slice(ne);const U=ne-M.length;e.setSelectionRange(U,U)}}d(L),N?x():y()},k.onError=L=>{xe.error("Speech recognition error: "+L)},k.onStopped=()=>{xe("Speech recognition stopped"),R(!1)}}k.start(),R(!0)},D=async()=>{k&&await k.stop(),k=null,R(!1)};vt(D);const O=()=>{n.style.width=`${e.offsetWidth}px`,n.value=e.value,e.style.height=`${n.scrollHeight}px`},ee=S=>{S.target instanceof HTMLElement&&S.target.classList.contains("bottom-input")&&e.focus()};ke(()=>{O()});const st=()=>nt()?.enterKeyToSend?"Enter key to send, Shift+Enter to newline":"Shift+Enter to send, Enter to newline";return(()=>{var S=To(),L=S.firstChild,N=L.nextSibling,M=N.nextSibling;S.$$click=ee;var Te=t;typeof Te=="function"?dt(Te,S):t=S,L.$$keydown=A,L.addEventListener("change",O),L.$$input=T,L.addEventListener("compositionend",$),L.$$beforeinput=b;var ne=e;typeof ne=="function"?dt(ne,L):e=L;var Se=n;return typeof Se=="function"?dt(Se,N):n=N,E(S,w(ye,{get when(){return o().length>0},get children(){return w(fo,{get files(){return o()},onDelete:U=>l(q=>q.filter(P=>P.id!==U))})}}),M),E(S,w(ye,{get when(){return Qt()},get children(){return $o()}}),M),E(M,w(lo,{class:"control is-size-6 px-1",startRecognition:C,stopRecognition:D,recognizing:()=>I()}),null),E(M,w(bo,{onFile:(U,q)=>l(P=>[...P,{name:U,id:q}])}),null),E(M,w(ro,{}),null),E(M,w(Us,{textState:c,onInsertText:(U,q)=>{d(U),q&&h()},onInsertStartText:(U,q)=>{d(U,0),q&&h()},onInsertEndText:(U,q)=>{d(U,-1),q&&h()},onReplaceText:g,onRemovePrev:U=>{const q=c();let P=q[0];q[0].endsWith(U)&&(P=q[0].slice(0,-U.length));const pe=P+q[1]+q[2];g(pe),e.setSelectionRange(P.length,P.length)},onFile:(U,q)=>{l(P=>[...P,{name:U,id:q}])}}),null),E(M,w(Js,{speechRecognizing:I,startSpeechRecognition:C,stopSpeechRecognition:D,onSend:h,onCancel:()=>{Rr()}}),null),Oe(U=>{var q="bottom-input "+(Qt()?"is-uphurry":""),P=st();return q!==U.e&&Xt(S,U.e=q),P!==U.t&&ai(L,"placeholder",U.t=P),U},{e:void 0,t:void 0}),S})()};Ne(["click","beforeinput","input","keydown"]);function pa(t){return si({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="m7.976 10.072 4.357-4.357.62.618L8.284 11h-.618L3 6.333l.619-.618 4.357 4.357z" clip-rule="evenodd"/>'},t)}function ma(t){return si({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="m8.024 5.928-4.357 4.357-.62-.618L7.716 5h.618L13 9.667l-.619.618-4.357-4.357z" clip-rule="evenodd"/>'},t)}function xa(t){return si({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="m4 4 1-1h5.414L14 6.586V14l-1 1H5l-1-1V4zm9 3-3-3H5v10h8V7z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M3 1 2 2v10l1 1V2h6.414l-1-1H3z" clip-rule="evenodd"/>'},t)}var So=F("<div class=msg-code><header class=flex-split><span><b>Artifact</b> <!> (<!>)</span></header><div class=msg-code-body>");const Ao=t=>{const[e,n]=J();ke(async()=>{const a=await ri(t.content);if(!a){n(null);return}n(a)});const i=()=>{const a=e();a&&fa(a)};return(()=>{var a=So(),r=a.firstChild,s=r.firstChild,o=s.firstChild,l=o.nextSibling,c=l.nextSibling,u=c.nextSibling,f=u.nextSibling;f.nextSibling;var d=r.nextSibling;return r.$$click=i,E(s,()=>e()?.name,c),E(s,()=>t.content,f),E(d,w(ye,{get when(){return e()},get children(){return w(qr,{get meta(){return e()}})}})),a})()};Ne(["click"]);var Co=F('<button class="px-3 py-1">fold'),Eo=F('<div class="msg-code-bottom-btns has-text-right is-size-7"><span><button class="px-3 py-1">save</button>|<button class="px-3 py-1">copy');const li=t=>(()=>{var e=Eo(),n=e.firstChild,i=n.firstChild,a=i.nextSibling,r=a.nextSibling;return i.$$click=async s=>{const o=await Vt(),l=new Blob([t.getContent()],{type:"text/plain"}),c=Or("text/"+t.getLang())||t.getLang(),u=`${Ir()}.${c}`;await o.downloadFile(u,l),xe.success("Download started!"),s.stopPropagation()},r.$$click=s=>{yn(t.getContent()),xe.success("Copied!"),s.stopPropagation()},E(n,w(ye,{get when(){return t.onToggleFold},get children(){return["|",(()=>{var s=Co();return Xn(s,"click",t.onToggleFold,!0),s})()]}}),null),e})();Ne(["click"]);const ci=Symbol.for("yaml.alias"),jn=Symbol.for("yaml.document"),rt=Symbol.for("yaml.map"),ya=Symbol.for("yaml.pair"),_n=Symbol.for("yaml.scalar"),Rt=Symbol.for("yaml.seq"),Fe=Symbol.for("yaml.node.type"),Lt=t=>!!t&&typeof t=="object"&&t[Fe]===ci,Ht=t=>!!t&&typeof t=="object"&&t[Fe]===jn,Wt=t=>!!t&&typeof t=="object"&&t[Fe]===rt,ve=t=>!!t&&typeof t=="object"&&t[Fe]===ya,ue=t=>!!t&&typeof t=="object"&&t[Fe]===_n,Kt=t=>!!t&&typeof t=="object"&&t[Fe]===Rt;function de(t){if(t&&typeof t=="object")switch(t[Fe]){case rt:case Rt:return!0}return!1}function ge(t){if(t&&typeof t=="object")switch(t[Fe]){case ci:case rt:case _n:case Rt:return!0}return!1}const ko=t=>(ue(t)||de(t))&&!!t.anchor,lt=Symbol("break visit"),Ro=Symbol("skip children"),Nt=Symbol("remove node");function gt(t,e){const n=Lo(e);Ht(t)?bt(null,t.contents,n,Object.freeze([t]))===Nt&&(t.contents=null):bt(null,t,n,Object.freeze([]))}gt.BREAK=lt;gt.SKIP=Ro;gt.REMOVE=Nt;function bt(t,e,n,i){const a=Oo(t,e,n,i);if(ge(a)||ve(a))return Io(t,i,a),bt(t,a,n,i);if(typeof a!="symbol"){if(de(e)){i=Object.freeze(i.concat(e));for(let r=0;r<e.items.length;++r){const s=bt(r,e.items[r],n,i);if(typeof s=="number")r=s-1;else{if(s===lt)return lt;s===Nt&&(e.items.splice(r,1),r-=1)}}}else if(ve(e)){i=Object.freeze(i.concat(e));const r=bt("key",e.key,n,i);if(r===lt)return lt;r===Nt&&(e.key=null);const s=bt("value",e.value,n,i);if(s===lt)return lt;s===Nt&&(e.value=null)}}return a}function Lo(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Oo(t,e,n,i){if(typeof n=="function")return n(t,e,i);if(Wt(e))return n.Map?.(t,e,i);if(Kt(e))return n.Seq?.(t,e,i);if(ve(e))return n.Pair?.(t,e,i);if(ue(e))return n.Scalar?.(t,e,i);if(Lt(e))return n.Alias?.(t,e,i)}function Io(t,e,n){const i=e[e.length-1];if(de(i))i.items[t]=n;else if(ve(i))t==="key"?i.key=n:i.value=n;else if(Ht(i))i.contents=n;else{const a=Lt(i)?"alias":"scalar";throw new Error(`Cannot replace node with ${a} parent`)}}const Po={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Fo=t=>t.replace(/[!,[\]{}]/g,e=>Po[e]);class Ae{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Ae.defaultYaml,e),this.tags=Object.assign({},Ae.defaultTags,n)}clone(){const e=new Ae(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Ae(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ae.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ae.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Ae.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ae.defaultTags),this.atNextDocument=!1);const i=e.trim().split(/[ \t]+/),a=i.shift();switch(a){case"%TAG":{if(i.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),i.length<2))return!1;const[r,s]=i;return this.tags[r]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,i.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[r]=i;if(r==="1.1"||r==="1.2")return this.yaml.version=r,!0;{const s=/^\d+\.\d+$/.test(r);return n(6,`Unsupported YAML version ${r}`,s),!1}}default:return n(0,`Unknown directive ${a}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const s=e.slice(2,-1);return s==="!"||s==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),s)}const[,i,a]=e.match(/^(.*!)([^!]*)$/s);a||n(`The ${e} tag has no suffix`);const r=this.tags[i];if(r)try{return r+decodeURIComponent(a)}catch(s){return n(String(s)),null}return i==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,i]of Object.entries(this.tags))if(e.startsWith(i))return n+Fo(e.substring(i.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags);let a;if(e&&i.length>0&&ge(e.contents)){const r={};gt(e.contents,(s,o)=>{ge(o)&&o.tag&&(r[o.tag]=!0)}),a=Object.keys(r)}else a=[];for(const[r,s]of i)r==="!!"&&s==="tag:yaml.org,2002:"||(!e||a.some(o=>o.startsWith(s)))&&n.push(`%TAG ${r} ${s}`);return n.join(`
`)}}Ae.defaultYaml={explicit:!1,version:"1.2"};Ae.defaultTags={"!!":"tag:yaml.org,2002:"};function _a(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function ba(t){const e=new Set;return gt(t,{Value(n,i){i.anchor&&e.add(i.anchor)}}),e}function $a(t,e){for(let n=1;;++n){const i=`${t}${n}`;if(!e.has(i))return i}}function Do(t,e){const n=[],i=new Map;let a=null;return{onAnchor:r=>{n.push(r),a||(a=ba(t));const s=$a(e,a);return a.add(s),s},setAnchors:()=>{for(const r of n){const s=i.get(r);if(typeof s=="object"&&s.anchor&&(ue(s.node)||de(s.node)))s.node.anchor=s.anchor;else{const o=new Error("Failed to resolve repeated object (this should not happen)");throw o.source=r,o}}},sourceObjects:i}}function $t(t,e,n,i){if(i&&typeof i=="object")if(Array.isArray(i))for(let a=0,r=i.length;a<r;++a){const s=i[a],o=$t(t,i,String(a),s);o===void 0?delete i[a]:o!==s&&(i[a]=o)}else if(i instanceof Map)for(const a of Array.from(i.keys())){const r=i.get(a),s=$t(t,i,a,r);s===void 0?i.delete(a):s!==r&&i.set(a,s)}else if(i instanceof Set)for(const a of Array.from(i)){const r=$t(t,i,a,a);r===void 0?i.delete(a):r!==a&&(i.delete(a),i.add(r))}else for(const[a,r]of Object.entries(i)){const s=$t(t,i,a,r);s===void 0?delete i[a]:s!==r&&(i[a]=s)}return t.call(e,n,i)}function Ie(t,e,n){if(Array.isArray(t))return t.map((i,a)=>Ie(i,String(a),n));if(t&&typeof t.toJSON=="function"){if(!n||!ko(t))return t.toJSON(e,n);const i={aliasCount:0,count:1,res:void 0};n.anchors.set(t,i),n.onCreate=r=>{i.res=r,delete n.onCreate};const a=t.toJSON(e,n);return n.onCreate&&n.onCreate(a),a}return typeof t=="bigint"&&!n?.keep?Number(t):t}class ui{constructor(e){Object.defineProperty(this,Fe,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:i,onAnchor:a,reviver:r}={}){if(!Ht(e))throw new TypeError("A document argument is required");const s={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},o=Ie(this,"",s);if(typeof a=="function")for(const{count:l,res:c}of s.anchors.values())a(c,l);return typeof r=="function"?$t(r,{"":o},"",o):o}}class Ta extends ui{constructor(e){super(ci),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return gt(e,{Node:(i,a)=>{if(a===this)return gt.BREAK;a.anchor===this.source&&(n=a)}}),n}toJSON(e,n){if(!n)return{source:this.source};const{anchors:i,doc:a,maxAliasCount:r}=n,s=this.resolve(a);if(!s){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let o=i.get(s);if(o||(Ie(s,null,n),o=i.get(s)),!o||o.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(r>=0&&(o.count+=1,o.aliasCount===0&&(o.aliasCount=ln(a,s,i)),o.count*o.aliasCount>r)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return o.res}toString(e,n,i){const a=`*${this.source}`;if(e){if(_a(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(e.implicitKey)return`${a} `}return a}}function ln(t,e,n){if(Lt(e)){const i=e.resolve(t),a=n&&i&&n.get(i);return a?a.count*a.aliasCount:0}else if(de(e)){let i=0;for(const a of e.items){const r=ln(t,a,n);r>i&&(i=r)}return i}else if(ve(e)){const i=ln(t,e.key,n),a=ln(t,e.value,n);return Math.max(i,a)}return 1}const wa=t=>!t||typeof t!="function"&&typeof t!="object";class j extends ui{constructor(e){super(_n),this.value=e}toJSON(e,n){return n?.keep?this.value:Ie(this.value,e,n)}toString(){return String(this.value)}}j.BLOCK_FOLDED="BLOCK_FOLDED";j.BLOCK_LITERAL="BLOCK_LITERAL";j.PLAIN="PLAIN";j.QUOTE_DOUBLE="QUOTE_DOUBLE";j.QUOTE_SINGLE="QUOTE_SINGLE";const No="tag:yaml.org,2002:";function Mo(t,e,n){if(e){const i=n.filter(r=>r.tag===e),a=i.find(r=>!r.format)??i[0];if(!a)throw new Error(`Tag ${e} not found`);return a}return n.find(i=>i.identify?.(t)&&!i.format)}function jt(t,e,n){if(Ht(t)&&(t=t.contents),ge(t))return t;if(ve(t)){const f=n.schema[rt].createNode?.(n.schema,null,n);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:i,onAnchor:a,onTagObj:r,schema:s,sourceObjects:o}=n;let l;if(i&&t&&typeof t=="object"){if(l=o.get(t),l)return l.anchor||(l.anchor=a(t)),new Ta(l.anchor);l={anchor:null,node:null},o.set(t,l)}e?.startsWith("!!")&&(e=No+e.slice(2));let c=Mo(t,e,s.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const f=new j(t);return l&&(l.node=f),f}c=t instanceof Map?s[rt]:Symbol.iterator in Object(t)?s[Rt]:s[rt]}r&&(r(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,t,n):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(n.schema,t,n):new j(t);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}function hn(t,e,n){let i=n;for(let a=e.length-1;a>=0;--a){const r=e[a];if(typeof r=="number"&&Number.isInteger(r)&&r>=0){const s=[];s[r]=i,i=s}else i=new Map([[r,i]])}return jt(i,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const Ft=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class Sa extends ui{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(i=>ge(i)||ve(i)?i.clone(e):i),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(Ft(e))this.add(n);else{const[i,...a]=e,r=this.get(i,!0);if(de(r))r.addIn(a,n);else if(r===void 0&&this.schema)this.set(i,hn(this.schema,a,n));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${a}`)}}deleteIn(e){const[n,...i]=e;if(i.length===0)return this.delete(n);const a=this.get(n,!0);if(de(a))return a.deleteIn(i);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}getIn(e,n){const[i,...a]=e,r=this.get(i,!0);return a.length===0?!n&&ue(r)?r.value:r:de(r)?r.getIn(a,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!ve(n))return!1;const i=n.value;return i==null||e&&ue(i)&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}hasIn(e){const[n,...i]=e;if(i.length===0)return this.has(n);const a=this.get(n,!0);return de(a)?a.hasIn(i):!1}setIn(e,n){const[i,...a]=e;if(a.length===0)this.set(i,n);else{const r=this.get(i,!0);if(de(r))r.setIn(a,n);else if(r===void 0&&this.schema)this.set(i,hn(this.schema,a,n));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${a}`)}}}const Bo=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Ke(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const ut=(t,e,n)=>t.endsWith(`
`)?Ke(n,e):n.includes(`
`)?`
`+Ke(n,e):(t.endsWith(" ")?"":" ")+n,Aa="flow",Gn="block",cn="quoted";function bn(t,e,n="flow",{indentAtStart:i,lineWidth:a=80,minContentWidth:r=20,onFold:s,onOverflow:o}={}){if(!a||a<0)return t;a<r&&(r=0);const l=Math.max(1+r,1+a-e.length);if(t.length<=l)return t;const c=[],u={};let f=a-e.length;typeof i=="number"&&(i>a-Math.max(2,r)?c.push(0):f=a-i);let d,g,h=!1,p=-1,v=-1,m=-1;n===Gn&&(p=Ii(t,p,e.length),p!==-1&&(f=p+l));for(let y;y=t[p+=1];){if(n===cn&&y==="\\"){switch(v=p,t[p+1]){case"x":p+=3;break;case"u":p+=5;break;case"U":p+=9;break;default:p+=1}m=p}if(y===`
`)n===Gn&&(p=Ii(t,p,e.length)),f=p+e.length+l,d=void 0;else{if(y===" "&&g&&g!==" "&&g!==`
`&&g!=="	"){const _=t[p+1];_&&_!==" "&&_!==`
`&&_!=="	"&&(d=p)}if(p>=f)if(d)c.push(d),f=d+l,d=void 0;else if(n===cn){for(;g===" "||g==="	";)g=y,y=t[p+=1],h=!0;const _=p>m+1?p-2:v-1;if(u[_])return t;c.push(_),u[_]=!0,f=_+l,d=void 0}else h=!0}g=y}if(h&&o&&o(),c.length===0)return t;s&&s();let x=t.slice(0,c[0]);for(let y=0;y<c.length;++y){const _=c[y],$=c[y+1]||t.length;_===0?x=`
${e}${t.slice(0,$)}`:(n===cn&&u[_]&&(x+=`${t[_]}\\`),x+=`
${e}${t.slice(_+1,$)}`)}return x}function Ii(t,e,n){let i=e,a=e+1,r=t[a];for(;r===" "||r==="	";)if(e<a+n)r=t[++e];else{do r=t[++e];while(r&&r!==`
`);i=e,a=e+1,r=t[a]}return i}const $n=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Tn=t=>/^(%|---|\.\.\.)/m.test(t);function zo(t,e,n){if(!e||e<0)return!1;const i=e-n,a=t.length;if(a<=i)return!1;for(let r=0,s=0;r<a;++r)if(t[r]===`
`){if(r-s>i)return!0;if(s=r+1,a-s<=i)return!1}return!0}function Mt(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:i}=e,a=e.options.doubleQuotedMinMultiLineLength,r=e.indent||(Tn(t)?"  ":"");let s="",o=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(s+=n.slice(o,l)+"\\ ",l+=1,o=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{s+=n.slice(o,l);const u=n.substr(l+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=n.substr(l,6)}l+=5,o=l+1}break;case"n":if(i||n[l+2]==='"'||n.length<a)l+=1;else{for(s+=n.slice(o,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)s+=`
`,l+=2;s+=r,n[l+2]===" "&&(s+="\\"),l+=1,o=l+1}break;default:l+=1}return s=o?s+n.slice(o):n,i?s:bn(s,r,cn,$n(e,!1))}function Yn(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Mt(t,e);const n=e.indent||(Tn(t)?"  ":""),i="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?i:bn(i,n,Aa,$n(e,!1))}function Tt(t,e){const{singleQuote:n}=e.options;let i;if(n===!1)i=Mt;else{const a=t.includes('"'),r=t.includes("'");a&&!r?i=Yn:r&&!a?i=Mt:i=n?Yn:Mt}return i(t,e)}let Un;try{Un=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Un=/\n+(?!\n|$)/g}function un({comment:t,type:e,value:n},i,a,r){const{blockQuote:s,commentString:o,lineWidth:l}=i.options;if(!s||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Tt(n,i);const c=i.indent||(i.forceBlockIndent||Tn(n)?"  ":""),u=s==="literal"?!0:s==="folded"||e===j.BLOCK_FOLDED?!1:e===j.BLOCK_LITERAL?!0:!zo(n,l,c.length);if(!n)return u?`|
`:`>
`;let f,d;for(d=n.length;d>0;--d){const $=n[d-1];if($!==`
`&&$!=="	"&&$!==" ")break}let g=n.substring(d);const h=g.indexOf(`
`);h===-1?f="-":n===g||h!==g.length-1?(f="+",r&&r()):f="",g&&(n=n.slice(0,-g.length),g[g.length-1]===`
`&&(g=g.slice(0,-1)),g=g.replace(Un,`$&${c}`));let p=!1,v,m=-1;for(v=0;v<n.length;++v){const $=n[v];if($===" ")p=!0;else if($===`
`)m=v;else break}let x=n.substring(0,m<v?m+1:v);x&&(n=n.substring(x.length),x=x.replace(/\n+/g,`$&${c}`));let _=(p?c?"2":"1":"")+f;if(t&&(_+=" "+o(t.replace(/ ?[\r\n]+/g," ")),a&&a()),!u){const $=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let b=!1;const T=$n(i,!0);s!=="folded"&&e!==j.BLOCK_FOLDED&&(T.onOverflow=()=>{b=!0});const A=bn(`${x}${$}${g}`,c,Gn,T);if(!b)return`>${_}
${c}${A}`}return n=n.replace(/\n+/g,`$&${c}`),`|${_}
${c}${x}${n}${g}`}function Xo(t,e,n,i){const{type:a,value:r}=t,{actualString:s,implicitKey:o,indent:l,indentStep:c,inFlow:u}=e;if(o&&r.includes(`
`)||u&&/[[\]{},]/.test(r))return Tt(r,e);if(!r||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return o||u||!r.includes(`
`)?Tt(r,e):un(t,e,n,i);if(!o&&!u&&a!==j.PLAIN&&r.includes(`
`))return un(t,e,n,i);if(Tn(r)){if(l==="")return e.forceBlockIndent=!0,un(t,e,n,i);if(o&&l===c)return Tt(r,e)}const f=r.replace(/\n+/g,`$&
${l}`);if(s){const d=p=>p.default&&p.tag!=="tag:yaml.org,2002:str"&&p.test?.test(f),{compat:g,tags:h}=e.doc.schema;if(h.some(d)||g?.some(d))return Tt(r,e)}return o?f:bn(f,l,Aa,$n(e,!1))}function fi(t,e,n,i){const{implicitKey:a,inFlow:r}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:o}=t;o!==j.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(o=j.QUOTE_DOUBLE);const l=u=>{switch(u){case j.BLOCK_FOLDED:case j.BLOCK_LITERAL:return a||r?Tt(s.value,e):un(s,e,n,i);case j.QUOTE_DOUBLE:return Mt(s.value,e);case j.QUOTE_SINGLE:return Yn(s.value,e);case j.PLAIN:return Xo(s,e,n,i);default:return null}};let c=l(o);if(c===null){const{defaultKeyType:u,defaultStringType:f}=e.options,d=a&&u||f;if(c=l(d),c===null)throw new Error(`Unsupported default string type ${d}`)}return c}function Ca(t,e){const n=Object.assign({blockQuote:!0,commentString:Bo,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let i;switch(n.collectionStyle){case"block":i=!1;break;case"flow":i=!0;break;default:i=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:i,options:n}}function Vo(t,e){if(e.tag){const a=t.filter(r=>r.tag===e.tag);if(a.length>0)return a.find(r=>r.format===e.format)??a[0]}let n,i;if(ue(e)){i=e.value;let a=t.filter(r=>r.identify?.(i));if(a.length>1){const r=a.filter(s=>s.test);r.length>0&&(a=r)}n=a.find(r=>r.format===e.format)??a.find(r=>!r.format)}else i=e,n=t.find(a=>a.nodeClass&&i instanceof a.nodeClass);if(!n){const a=i?.constructor?.name??typeof i;throw new Error(`Tag not resolved for ${a} value`)}return n}function jo(t,e,{anchors:n,doc:i}){if(!i.directives)return"";const a=[],r=(ue(t)||de(t))&&t.anchor;r&&_a(r)&&(n.add(r),a.push(`&${r}`));const s=t.tag?t.tag:e.default?null:e.tag;return s&&a.push(i.directives.tagString(s)),a.join(" ")}function At(t,e,n,i){if(ve(t))return t.toString(e,n,i);if(Lt(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let a;const r=ge(t)?t:e.doc.createNode(t,{onTagObj:l=>a=l});a||(a=Vo(e.doc.schema.tags,r));const s=jo(r,a,e);s.length>0&&(e.indentAtStart=(e.indentAtStart??0)+s.length+1);const o=typeof a.stringify=="function"?a.stringify(r,e,n,i):ue(r)?fi(r,e,n,i):r.toString(e,n,i);return s?ue(r)||o[0]==="{"||o[0]==="["?`${s} ${o}`:`${s}
${e.indent}${o}`:o}function Go({key:t,value:e},n,i,a){const{allNullValues:r,doc:s,indent:o,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=n;let d=ge(t)&&t.comment||null;if(f){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(de(t)||!ge(t)&&typeof t=="object"){const T="With simple keys, collection cannot be used as a key value";throw new Error(T)}}let g=!f&&(!t||d&&e==null&&!n.inFlow||de(t)||(ue(t)?t.type===j.BLOCK_FOLDED||t.type===j.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!g&&(f||!r),indent:o+l});let h=!1,p=!1,v=At(t,n,()=>h=!0,()=>p=!0);if(!g&&!n.inFlow&&v.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");g=!0}if(n.inFlow){if(r||e==null)return h&&i&&i(),v===""?"?":g?`? ${v}`:v}else if(r&&!f||e==null&&g)return v=`? ${v}`,d&&!h?v+=ut(v,n.indent,c(d)):p&&a&&a(),v;h&&(d=null),g?(d&&(v+=ut(v,n.indent,c(d))),v=`? ${v}
${o}:`):(v=`${v}:`,d&&(v+=ut(v,n.indent,c(d))));let m,x,y;ge(e)?(m=!!e.spaceBefore,x=e.commentBefore,y=e.comment):(m=!1,x=null,y=null,e&&typeof e=="object"&&(e=s.createNode(e))),n.implicitKey=!1,!g&&!d&&ue(e)&&(n.indentAtStart=v.length+1),p=!1,!u&&l.length>=2&&!n.inFlow&&!g&&Kt(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let _=!1;const $=At(e,n,()=>_=!0,()=>p=!0);let b=" ";if(d||m||x){if(b=m?`
`:"",x){const T=c(x);b+=`
${Ke(T,n.indent)}`}$===""&&!n.inFlow?b===`
`&&(b=`

`):b+=`
${n.indent}`}else if(!g&&de(e)){const T=$[0],A=$.indexOf(`
`),k=A!==-1,I=n.inFlow??e.flow??e.items.length===0;if(k||!I){let R=!1;if(k&&(T==="&"||T==="!")){let C=$.indexOf(" ");T==="&"&&C!==-1&&C<A&&$[C+1]==="!"&&(C=$.indexOf(" ",C+1)),(C===-1||A<C)&&(R=!0)}R||(b=`
${n.indent}`)}}else($===""||$[0]===`
`)&&(b="");return v+=b+$,n.inFlow?_&&i&&i():y&&!_?v+=ut(v,n.indent,c(y)):p&&a&&a(),v}function Yo(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const en="<<",Je={identify:t=>t===en||typeof t=="symbol"&&t.description===en,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new j(Symbol(en)),{addToJSMap:Ea}),stringify:()=>en},Uo=(t,e)=>(Je.identify(e)||ue(e)&&(!e.type||e.type===j.PLAIN)&&Je.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===Je.tag&&n.default);function Ea(t,e,n){if(n=t&&Lt(n)?n.resolve(t.doc):n,Kt(n))for(const i of n.items)On(t,e,i);else if(Array.isArray(n))for(const i of n)On(t,e,i);else On(t,e,n)}function On(t,e,n){const i=t&&Lt(n)?n.resolve(t.doc):n;if(!Wt(i))throw new Error("Merge sources must be maps or map aliases");const a=i.toJSON(null,t,Map);for(const[r,s]of a)e instanceof Map?e.has(r)||e.set(r,s):e instanceof Set?e.add(r):Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(e,r,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function ka(t,e,{key:n,value:i}){if(ge(n)&&n.addToJSMap)n.addToJSMap(t,e,i);else if(Uo(t,n))Ea(t,e,i);else{const a=Ie(n,"",t);if(e instanceof Map)e.set(a,Ie(i,a,t));else if(e instanceof Set)e.add(a);else{const r=Ho(n,a,t),s=Ie(i,r,t);r in e?Object.defineProperty(e,r,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[r]=s}}return e}function Ho(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(ge(t)&&n?.doc){const i=Ca(n.doc,{});i.anchors=new Set;for(const r of n.anchors.keys())i.anchors.add(r.anchor);i.inFlow=!0,i.inStringifyKey=!0;const a=t.toString(i);if(!n.mapKeyWarned){let r=JSON.stringify(a);r.length>40&&(r=r.substring(0,36)+'..."'),Yo(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return a}return JSON.stringify(e)}function di(t,e,n){const i=jt(t,void 0,n),a=jt(e,void 0,n);return new Pe(i,a)}class Pe{constructor(e,n=null){Object.defineProperty(this,Fe,{value:ya}),this.key=e,this.value=n}clone(e){let{key:n,value:i}=this;return ge(n)&&(n=n.clone(e)),ge(i)&&(i=i.clone(e)),new Pe(n,i)}toJSON(e,n){const i=n?.mapAsMap?new Map:{};return ka(n,i,this)}toString(e,n,i){return e?.doc?Go(this,e,n,i):JSON.stringify(this)}}function Ra(t,e,n){return(e.inFlow??t.flow?Ko:Wo)(t,e,n)}function Wo({comment:t,items:e},n,{blockItemPrefix:i,flowChars:a,itemIndent:r,onChompKeep:s,onComment:o}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:r,type:null});let f=!1;const d=[];for(let h=0;h<e.length;++h){const p=e[h];let v=null;if(ge(p))!f&&p.spaceBefore&&d.push(""),vn(n,d,p.commentBefore,f),p.comment&&(v=p.comment);else if(ve(p)){const x=ge(p.key)?p.key:null;x&&(!f&&x.spaceBefore&&d.push(""),vn(n,d,x.commentBefore,f))}f=!1;let m=At(p,u,()=>v=null,()=>f=!0);v&&(m+=ut(m,r,c(v))),f&&v&&(f=!1),d.push(i+m)}let g;if(d.length===0)g=a.start+a.end;else{g=d[0];for(let h=1;h<d.length;++h){const p=d[h];g+=p?`
${l}${p}`:`
`}}return t?(g+=`
`+Ke(c(t),l),o&&o()):f&&s&&s(),g}function Ko({items:t},e,{flowChars:n,itemIndent:i}){const{indent:a,indentStep:r,flowCollectionPadding:s,options:{commentString:o}}=e;i+=r;const l=Object.assign({},e,{indent:i,inFlow:!0,type:null});let c=!1,u=0;const f=[];for(let h=0;h<t.length;++h){const p=t[h];let v=null;if(ge(p))p.spaceBefore&&f.push(""),vn(e,f,p.commentBefore,!1),p.comment&&(v=p.comment);else if(ve(p)){const x=ge(p.key)?p.key:null;x&&(x.spaceBefore&&f.push(""),vn(e,f,x.commentBefore,!1),x.comment&&(c=!0));const y=ge(p.value)?p.value:null;y?(y.comment&&(v=y.comment),y.commentBefore&&(c=!0)):p.value==null&&x?.comment&&(v=x.comment)}v&&(c=!0);let m=At(p,l,()=>v=null);h<t.length-1&&(m+=","),v&&(m+=ut(m,i,o(v))),!c&&(f.length>u||m.includes(`
`))&&(c=!0),f.push(m),u=f.length}const{start:d,end:g}=n;if(f.length===0)return d+g;if(!c){const h=f.reduce((p,v)=>p+v.length+2,2);c=e.options.lineWidth>0&&h>e.options.lineWidth}if(c){let h=d;for(const p of f)h+=p?`
${r}${a}${p}`:`
`;return`${h}
${a}${g}`}else return`${d}${s}${f.join(" ")}${s}${g}`}function vn({indent:t,options:{commentString:e}},n,i,a){if(i&&a&&(i=i.replace(/^\n+/,"")),i){const r=Ke(e(i),t);n.push(r.trimStart())}}function ft(t,e){const n=ue(e)?e.value:e;for(const i of t)if(ve(i)&&(i.key===e||i.key===n||ue(i.key)&&i.key.value===n))return i}class tt extends Sa{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(rt,e),this.items=[]}static from(e,n,i){const{keepUndefined:a,replacer:r}=i,s=new this(e),o=(l,c)=>{if(typeof r=="function")c=r.call(n,l,c);else if(Array.isArray(r)&&!r.includes(l))return;(c!==void 0||a)&&s.items.push(di(l,c,i))};if(n instanceof Map)for(const[l,c]of n)o(l,c);else if(n&&typeof n=="object")for(const l of Object.keys(n))o(l,n[l]);return typeof e.sortMapEntries=="function"&&s.items.sort(e.sortMapEntries),s}add(e,n){let i;ve(e)?i=e:!e||typeof e!="object"||!("key"in e)?i=new Pe(e,e?.value):i=new Pe(e.key,e.value);const a=ft(this.items,i.key),r=this.schema?.sortMapEntries;if(a){if(!n)throw new Error(`Key ${i.key} already set`);ue(a.value)&&wa(i.value)?a.value.value=i.value:a.value=i.value}else if(r){const s=this.items.findIndex(o=>r(i,o)<0);s===-1?this.items.push(i):this.items.splice(s,0,i)}else this.items.push(i)}delete(e){const n=ft(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const a=ft(this.items,e)?.value;return(!n&&ue(a)?a.value:a)??void 0}has(e){return!!ft(this.items,e)}set(e,n){this.add(new Pe(e,n),!0)}toJSON(e,n,i){const a=i?new i:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(a);for(const r of this.items)ka(n,a,r);return a}toString(e,n,i){if(!e)return JSON.stringify(this);for(const a of this.items)if(!ve(a))throw new Error(`Map items must all be pairs; found ${JSON.stringify(a)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Ra(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:i,onComment:n})}}const Ot={collection:"map",default:!0,nodeClass:tt,tag:"tag:yaml.org,2002:map",resolve(t,e){return Wt(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>tt.from(t,e,n)};class pn extends Sa{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Rt,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=tn(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const i=tn(e);if(typeof i!="number")return;const a=this.items[i];return!n&&ue(a)?a.value:a}has(e){const n=tn(e);return typeof n=="number"&&n<this.items.length}set(e,n){const i=tn(e);if(typeof i!="number")throw new Error(`Expected a valid index, not ${e}.`);const a=this.items[i];ue(a)&&wa(n)?a.value=n:this.items[i]=n}toJSON(e,n){const i=[];n?.onCreate&&n.onCreate(i);let a=0;for(const r of this.items)i.push(Ie(r,String(a++),n));return i}toString(e,n,i){return e?Ra(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:i,onComment:n}):JSON.stringify(this)}static from(e,n,i){const{replacer:a}=i,r=new this(e);if(n&&Symbol.iterator in Object(n)){let s=0;for(let o of n){if(typeof a=="function"){const l=n instanceof Set?o:String(s++);o=a.call(n,l,o)}r.items.push(jt(o,void 0,i))}}return r}}function tn(t){let e=ue(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const It={collection:"seq",default:!0,nodeClass:pn,tag:"tag:yaml.org,2002:seq",resolve(t,e){return Kt(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>pn.from(t,e,n)},wn={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,i){return e=Object.assign({actualString:!0},e),fi(t,e,n,i)}},Sn={identify:t=>t==null,createNode:()=>new j(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new j(null),stringify:({source:t},e)=>typeof t=="string"&&Sn.test.test(t)?t:e.options.nullStr},gi={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new j(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&gi.test.test(t)){const i=t[0]==="t"||t[0]==="T";if(e===i)return t}return e?n.options.trueStr:n.options.falseStr}};function Xe({format:t,minFractionDigits:e,tag:n,value:i}){if(typeof i=="bigint")return String(i);const a=typeof i=="number"?i:Number(i);if(!isFinite(a))return isNaN(a)?".nan":a<0?"-.inf":".inf";let r=JSON.stringify(i);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(r)){let s=r.indexOf(".");s<0&&(s=r.length,r+=".");let o=e-(r.length-s-1);for(;o-- >0;)r+="0"}return r}const La={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Xe},Oa={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Xe(t)}},Ia={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new j(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Xe},An=t=>typeof t=="bigint"||Number.isInteger(t),hi=(t,e,n,{intAsBigInt:i})=>i?BigInt(t):parseInt(t.substring(e),n);function Pa(t,e,n){const{value:i}=t;return An(i)&&i>=0?n+i.toString(e):Xe(t)}const Fa={identify:t=>An(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>hi(t,2,8,n),stringify:t=>Pa(t,8,"0o")},Da={identify:An,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>hi(t,0,10,n),stringify:Xe},Na={identify:t=>An(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>hi(t,2,16,n),stringify:t=>Pa(t,16,"0x")},Jo=[Ot,It,wn,Sn,gi,Fa,Da,Na,La,Oa,Ia];function Pi(t){return typeof t=="bigint"||Number.isInteger(t)}const nn=({value:t})=>JSON.stringify(t),qo=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:nn},{identify:t=>t==null,createNode:()=>new j(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:nn},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:nn},{identify:Pi,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Pi(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:nn}],Zo={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},Qo=[Ot,It].concat(qo,Zo),vi={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),i=new Uint8Array(n.length);for(let a=0;a<n.length;++a)i[a]=n.charCodeAt(a);return i}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},i,a,r){if(!n)return"";const s=n;let o;if(typeof btoa=="function"){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);o=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=j.BLOCK_LITERAL),e!==j.QUOTE_DOUBLE){const l=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),c=Math.ceil(o.length/l),u=new Array(c);for(let f=0,d=0;f<c;++f,d+=l)u[f]=o.substr(d,l);o=u.join(e===j.BLOCK_LITERAL?`
`:" ")}return fi({comment:t,type:e,value:o},i,a,r)}};function Ma(t,e){if(Kt(t))for(let n=0;n<t.items.length;++n){let i=t.items[n];if(!ve(i)){if(Wt(i)){i.items.length>1&&e("Each pair must have its own sequence indicator");const a=i.items[0]||new Pe(new j(null));if(i.commentBefore&&(a.key.commentBefore=a.key.commentBefore?`${i.commentBefore}
${a.key.commentBefore}`:i.commentBefore),i.comment){const r=a.value??a.key;r.comment=r.comment?`${i.comment}
${r.comment}`:i.comment}i=a}t.items[n]=ve(i)?i:new Pe(i)}}else e("Expected a sequence for this tag");return t}function Ba(t,e,n){const{replacer:i}=n,a=new pn(t);a.tag="tag:yaml.org,2002:pairs";let r=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof i=="function"&&(s=i.call(e,String(r++),s));let o,l;if(Array.isArray(s))if(s.length===2)o=s[0],l=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){const c=Object.keys(s);if(c.length===1)o=c[0],l=s[o];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else o=s;a.items.push(di(o,l,n))}return a}const pi={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ma,createNode:Ba};class wt extends pn{constructor(){super(),this.add=tt.prototype.add.bind(this),this.delete=tt.prototype.delete.bind(this),this.get=tt.prototype.get.bind(this),this.has=tt.prototype.has.bind(this),this.set=tt.prototype.set.bind(this),this.tag=wt.tag}toJSON(e,n){if(!n)return super.toJSON(e);const i=new Map;n?.onCreate&&n.onCreate(i);for(const a of this.items){let r,s;if(ve(a)?(r=Ie(a.key,"",n),s=Ie(a.value,r,n)):r=Ie(a,"",n),i.has(r))throw new Error("Ordered maps must not include duplicate keys");i.set(r,s)}return i}static from(e,n,i){const a=Ba(e,n,i),r=new this;return r.items=a.items,r}}wt.tag="tag:yaml.org,2002:omap";const mi={collection:"seq",identify:t=>t instanceof Map,nodeClass:wt,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=Ma(t,e),i=[];for(const{key:a}of n.items)ue(a)&&(i.includes(a.value)?e(`Ordered maps must not include duplicate keys: ${a.value}`):i.push(a.value));return Object.assign(new wt,n)},createNode:(t,e,n)=>wt.from(t,e,n)};function za({value:t,source:e},n){return e&&(t?Xa:Va).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const Xa={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new j(!0),stringify:za},Va={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new j(!1),stringify:za},el={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Xe},tl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Xe(t)}},nl={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new j(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const i=t.substring(n+1).replace(/_/g,"");i[i.length-1]==="0"&&(e.minFractionDigits=i.length)}return e},stringify:Xe},Jt=t=>typeof t=="bigint"||Number.isInteger(t);function Cn(t,e,n,{intAsBigInt:i}){const a=t[0];if((a==="-"||a==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),i){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const s=BigInt(t);return a==="-"?BigInt(-1)*s:s}const r=parseInt(t,n);return a==="-"?-1*r:r}function xi(t,e,n){const{value:i}=t;if(Jt(i)){const a=i.toString(e);return i<0?"-"+n+a.substr(1):n+a}return Xe(t)}const il={identify:Jt,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Cn(t,2,2,n),stringify:t=>xi(t,2,"0b")},al={identify:Jt,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Cn(t,1,8,n),stringify:t=>xi(t,8,"0")},rl={identify:Jt,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Cn(t,0,10,n),stringify:Xe},sl={identify:Jt,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Cn(t,2,16,n),stringify:t=>xi(t,16,"0x")};class St extends tt{constructor(e){super(e),this.tag=St.tag}add(e){let n;ve(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new Pe(e.key,null):n=new Pe(e,null),ft(this.items,n.key)||this.items.push(n)}get(e,n){const i=ft(this.items,e);return!n&&ve(i)?ue(i.key)?i.key.value:i.key:i}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const i=ft(this.items,e);i&&!n?this.items.splice(this.items.indexOf(i),1):!i&&n&&this.items.push(new Pe(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,i){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,i);throw new Error("Set items must all have null values")}static from(e,n,i){const{replacer:a}=i,r=new this(e);if(n&&Symbol.iterator in Object(n))for(let s of n)typeof a=="function"&&(s=a.call(n,s,s)),r.items.push(di(s,null,i));return r}}St.tag="tag:yaml.org,2002:set";const yi={collection:"map",identify:t=>t instanceof Set,nodeClass:St,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>St.from(t,e,n),resolve(t,e){if(Wt(t)){if(t.hasAllNullValues(!0))return Object.assign(new St,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function _i(t,e){const n=t[0],i=n==="-"||n==="+"?t.substring(1):t,a=s=>e?BigInt(s):Number(s),r=i.replace(/_/g,"").split(":").reduce((s,o)=>s*a(60)+a(o),a(0));return n==="-"?a(-1)*r:r}function ja(t){let{value:e}=t,n=s=>s;if(typeof e=="bigint")n=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return Xe(t);let i="";e<0&&(i="-",e*=n(-1));const a=n(60),r=[e%a];return e<60?r.unshift(0):(e=(e-r[0])/a,r.unshift(e%a),e>=60&&(e=(e-r[0])/a,r.unshift(e))),i+r.map(s=>String(s).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const Ga={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>_i(t,n),stringify:ja},Ya={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>_i(t,!1),stringify:ja},En={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(En.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,i,a,r,s,o]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(n,i-1,a,r||0,s||0,o||0,l);const u=e[8];if(u&&u!=="Z"){let f=_i(u,!1);Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},Fi=[Ot,It,wn,Sn,Xa,Va,il,al,rl,sl,el,tl,nl,vi,Je,mi,pi,yi,Ga,Ya,En],Di=new Map([["core",Jo],["failsafe",[Ot,It,wn]],["json",Qo],["yaml11",Fi],["yaml-1.1",Fi]]),Ni={binary:vi,bool:gi,float:Ia,floatExp:Oa,floatNaN:La,floatTime:Ya,int:Da,intHex:Na,intOct:Fa,intTime:Ga,map:Ot,merge:Je,null:Sn,omap:mi,pairs:pi,seq:It,set:yi,timestamp:En},ol={"tag:yaml.org,2002:binary":vi,"tag:yaml.org,2002:merge":Je,"tag:yaml.org,2002:omap":mi,"tag:yaml.org,2002:pairs":pi,"tag:yaml.org,2002:set":yi,"tag:yaml.org,2002:timestamp":En};function In(t,e,n){const i=Di.get(e);if(i&&!t)return n&&!i.includes(Je)?i.concat(Je):i.slice();let a=i;if(!a)if(Array.isArray(t))a=[];else{const r=Array.from(Di.keys()).filter(s=>s!=="yaml11").map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${r} or define customTags array`)}if(Array.isArray(t))for(const r of t)a=a.concat(r);else typeof t=="function"&&(a=t(a.slice()));return n&&(a=a.concat(Je)),a.reduce((r,s)=>{const o=typeof s=="string"?Ni[s]:s;if(!o){const l=JSON.stringify(s),c=Object.keys(Ni).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${c}`)}return r.includes(o)||r.push(o),r},[])}const ll=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class bi{constructor({compat:e,customTags:n,merge:i,resolveKnownTags:a,schema:r,sortMapEntries:s,toStringDefaults:o}){this.compat=Array.isArray(e)?In(e,"compat"):e?In(null,e):null,this.name=typeof r=="string"&&r||"core",this.knownTags=a?ol:{},this.tags=In(n,this.name,i),this.toStringOptions=o??null,Object.defineProperty(this,rt,{value:Ot}),Object.defineProperty(this,_n,{value:wn}),Object.defineProperty(this,Rt,{value:It}),this.sortMapEntries=typeof s=="function"?s:s===!0?ll:null}clone(){const e=Object.create(bi.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function cl(t,e){const n=[];let i=e.directives===!0;if(e.directives!==!1&&t.directives){const l=t.directives.toString(t);l?(n.push(l),i=!0):t.directives.docStart&&(i=!0)}i&&n.push("---");const a=Ca(t,e),{commentString:r}=a.options;if(t.commentBefore){n.length!==1&&n.unshift("");const l=r(t.commentBefore);n.unshift(Ke(l,""))}let s=!1,o=null;if(t.contents){if(ge(t.contents)){if(t.contents.spaceBefore&&i&&n.push(""),t.contents.commentBefore){const u=r(t.contents.commentBefore);n.push(Ke(u,""))}a.forceBlockIndent=!!t.comment,o=t.contents.comment}const l=o?void 0:()=>s=!0;let c=At(t.contents,a,()=>o=null,l);o&&(c+=ut(c,"",r(o))),(c[0]==="|"||c[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${c}`:n.push(c)}else n.push(At(t.contents,a));if(t.directives?.docEnd)if(t.comment){const l=r(t.comment);l.includes(`
`)?(n.push("..."),n.push(Ke(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&s&&(l=l.replace(/^\n+/,"")),l&&((!s||o)&&n[n.length-1]!==""&&n.push(""),n.push(Ke(r(l),"")))}return n.join(`
`)+`
`}class $i{constructor(e,n,i){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Fe,{value:jn});let a=null;typeof n=="function"||Array.isArray(n)?a=n:i===void 0&&n&&(i=n,n=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},i);this.options=r;let{version:s}=r;i?._directives?(this.directives=i._directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new Ae({version:s}),this.setSchema(s,i),this.contents=e===void 0?null:this.createNode(e,a,i)}clone(){const e=Object.create($i.prototype,{[Fe]:{value:jn}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=ge(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){yt(this.contents)&&this.contents.add(e)}addIn(e,n){yt(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const i=ba(this);e.anchor=!n||i.has(n)?$a(n||"a",i):n}return new Ta(e.anchor)}createNode(e,n,i){let a;if(typeof n=="function")e=n.call({"":e},"",e),a=n;else if(Array.isArray(n)){const v=x=>typeof x=="number"||x instanceof String||x instanceof Number,m=n.filter(v).map(String);m.length>0&&(n=n.concat(m)),a=n}else i===void 0&&n&&(i=n,n=void 0);const{aliasDuplicateObjects:r,anchorPrefix:s,flow:o,keepUndefined:l,onTagObj:c,tag:u}=i??{},{onAnchor:f,setAnchors:d,sourceObjects:g}=Do(this,s||"a"),h={aliasDuplicateObjects:r??!0,keepUndefined:l??!1,onAnchor:f,onTagObj:c,replacer:a,schema:this.schema,sourceObjects:g},p=jt(e,u,h);return o&&de(p)&&(p.flow=!0),d(),p}createPair(e,n,i={}){const a=this.createNode(e,null,i),r=this.createNode(n,null,i);return new Pe(a,r)}delete(e){return yt(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Ft(e)?this.contents==null?!1:(this.contents=null,!0):yt(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return de(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return Ft(e)?!n&&ue(this.contents)?this.contents.value:this.contents:de(this.contents)?this.contents.getIn(e,n):void 0}has(e){return de(this.contents)?this.contents.has(e):!1}hasIn(e){return Ft(e)?this.contents!==void 0:de(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=hn(this.schema,[e],n):yt(this.contents)&&this.contents.set(e,n)}setIn(e,n){Ft(e)?this.contents=n:this.contents==null?this.contents=hn(this.schema,Array.from(e),n):yt(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let i;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Ae({version:"1.1"}),i={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Ae({version:e}),i={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,i=null;break;default:{const a=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${a}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(i)this.schema=new bi(Object.assign(i,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:i,maxAliasCount:a,onAnchor:r,reviver:s}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:i===!0,mapKeyWarned:!1,maxAliasCount:typeof a=="number"?a:100},l=Ie(this.contents,n??"",o);if(typeof r=="function")for(const{count:c,res:u}of o.anchors.values())r(u,c);return typeof s=="function"?$t(s,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return cl(this,e)}}function yt(t){if(de(t))return!0;throw new Error("Expected a YAML collection as document contents")}new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function ul(t,e,n){let i=null;if(typeof e=="function"||Array.isArray(e)?i=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const a=Math.round(n);n=a<1?void 0:a>8?{indent:8}:{indent:a}}if(t===void 0){const{keepUndefined:a}=n??e??{};if(!a)return}return Ht(t)&&!i?t.toString(n):new $i(t,i,n).toString(n)}var fl=F('<div class="msg-code msg-code-fold flex-split"><span class=text-ellipsis>@ <b></b> </span><button>'),dl=F('<hr class="my-2 has-background-text thin-hr">'),gl=F("<div class=msg-code><header class=flex-split><span>@ <b></b></span><span><button></button></span></header><div class=msg-code-body><div>");const hl=t=>{const[e,n]=J(!0),i=JSON.parse(t.content);let a=i.args,r=!1;try{const s=Pr(a);a=ul(s,{indent:2})}catch{r=!0}return w(Ge,{get children(){return[w(ae,{get when(){return e()},get children(){var s=fl(),o=s.firstChild,l=o.firstChild,c=l.nextSibling;c.nextSibling;var u=o.nextSibling;return s.$$click=()=>n(!1),E(c,()=>i.name),E(o,()=>i.args,null),E(u,w(pa,{})),s}}),w(ae,{when:!0,get children(){var s=gl(),o=s.firstChild,l=o.firstChild,c=l.firstChild,u=c.nextSibling,f=l.nextSibling,d=f.firstChild,g=o.nextSibling,h=g.firstChild;return o.$$click=()=>n(!0),E(u,()=>i.name),E(d,w(ma,{})),Xt(h,r?"has-text-danger":""),E(h,a),E(g,w(ye,{get when(){return i.result},get children(){return[dl(),Fr(()=>i.result)]}}),null),s}})]}})};Ne(["click"]);/*!
* Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 * 
 * @version 3.15.1
*/var V=function(){return V=Object.assign||function(e){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)};function oe(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,r;i<a;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var K={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},qt={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcRange:"bb-arc-range",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},Hn={area:"bb-area",areas:"bb-areas"},Ee={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",axisXTooltip:"bb-axis-x-tooltip",axisYTooltip:"bb-axis-y-tooltip",axisY2Tooltip:"bb-axis-y2-tooltip"},mn={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},Wn={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},we={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},Kn={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},ct={dragarea:"bb-dragarea",INCLUDED:"_included_"},vl={funnel:"bb-funnel",chartFunnel:"bb-chart-funnel",chartFunnels:"bb-chart-funnels",funnelBackground:"bb-funnel-background"},Gt={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},Q={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},Qe={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},Me={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},ie={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},se={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},pl={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},Yt={region:"bb-region",regions:"bb-regions"},he={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},be={shape:"bb-shape",shapes:"bb-shapes"},Ua={brush:"bb-brush",subchart:"bb-subchart"},Ce={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},fn={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},ml={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},xl={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"},_e=V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V(V({},K),qt),Hn),Ee),mn),Wn),we),Kn),ct),Gt),Q),Qe),Me),ie),vl),se),pl),Yt),he),be),Ua),Ce),fn),ml),xl),yl={boost_useCssRule:!1,boost_useWorker:!1},_l={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},bl={legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_equally:!1,legend_hide:!1,legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_interaction:!0,legend_item_dblclick:!1,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_format:void 0,legend_padding:0,legend_position:"bottom",legend_show:!0,legend_tooltip:!1,legend_usePoint:!1},$l={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Tl={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},wl={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:void 0,tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},Sl={data_x:void 0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Al={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},interaction_onout:!0};function Cl(){return typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof global=="object"&&global!==null&&global.Object===Object&&global||typeof self=="object"&&self!==null&&self.Object===Object&&self||Function("return this")()}function El(t){var e=typeof t?.requestAnimationFrame=="function"&&typeof t?.cancelAnimationFrame=="function",n=typeof t?.requestIdleCallback=="function"&&typeof t?.cancelIdleCallback=="function",i=function(r){return setTimeout(r,1)},a=function(r){return clearTimeout(r)};return[e?t.requestAnimationFrame:i,e?t.cancelAnimationFrame:a,n?t.requestIdleCallback:i,n?t.cancelIdleCallback:a]}var H=Cl(),le=H?.document,Ha=El(H),kl=Ha[0],Wa=Ha[2],G=function(t){return t||t===0},B=function(t){return typeof t=="function"},W=function(t){return typeof t=="string"},Y=function(t){return typeof t=="number"},$e=function(t){return typeof t>"u"},re=function(t){return typeof t<"u"},Jn=function(t){return typeof t=="boolean"},Rl=function(t){return Math.ceil(t/10)*10},an=function(t){return Math.ceil(t)+.5},Bt=function(t){return t[1]-t[0]},Ye=function(t){return typeof t=="object"},Ue=function(t){return $e(t)||t===null||W(t)&&t.length===0||Ye(t)&&!(t instanceof Date)&&Object.keys(t).length===0||Y(t)&&isNaN(t)},ce=function(t){return!Ue(t)},Z=function(t){return Array.isArray(t)},te=function(t){return t&&!t?.nodeType&&Ye(t)&&!Z(t)};function it(t,e,n){return re(t[e])?t[e]:n}function Ll(t,e){var n=!1;return Object.keys(t).forEach(function(i){return t[i]===e&&(n=!0)}),n}function fe(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var a=B(t);return a&&t.call.apply(t,oe([e],n,!1)),a}function Ka(t,e){var n=0,i=function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];!--n&&e.apply.apply(e,oe([this],a,!1))};"duration"in t?t.each(function(){return++n}).on("end",i):(++n,t.call(i))}function Pn(t){return W(t)?t.replace(/<(script|img)?/ig,"&lt;").replace(/(script)?>/ig,"&gt;"):t}function Ja(t,e,n,i){if(n===void 0&&(n=[-1,1]),i===void 0&&(i=!1),!(!t||!W(e)))if(e.indexOf(`
`)===-1)t.text(e);else{var a=[t.text(),e].map(function(o){return o.replace(/[\s\n]/g,"")});if(a[0]!==a[1]){var r=e.split(`
`),s=i?r.length-1:1;t.html(""),r.forEach(function(o,l){t.append("tspan").attr("x",0).attr("dy","".concat(l===0?n[0]*s:n[1],"em")).text(o)})}}}function qa(t){var e=t.getBBox(),n=e.x,i=e.y,a=e.width,r=e.height;return[{x:n,y:i+r},{x:n,y:i},{x:n+a,y:i},{x:n+a,y:i+r}]}function Ol(t){var e=t.getBoundingClientRect(),n=e.width,i=e.height,a=qa(t),r=a[0].x,s=Math.min(a[0].y,a[1].y);return{x:r,y:s,width:n,height:i}}function Ve(t,e){var n,i=t&&((n=t.touches||t.sourceEvent&&t.sourceEvent.touches)===null||n===void 0?void 0:n[0]),a=[0,0];try{a=is(i||t,e)}catch{}return a.map(function(r){return isNaN(r)?0:r})}function Za(t){var e=t.event,n=t.$el,i=n.subchart.main||n.main,a;return e&&e.type==="brush"?a=e.selection:i&&(a=i.select(".bb-brush").node())&&(a=Ls(a)),a}function zt(t){var e=!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width");return e?t.rect=t.getBoundingClientRect():t.rect}function Pt(t,e,n){t===void 0&&(t=!0),e===void 0&&(e=0),n===void 0&&(n=1e4);var i=H.crypto||H.msCrypto,a=i?e+i.getRandomValues(new Uint32Array(1))[0]%(n-e+1):Math.floor(Math.random()*(n-e)+e);return t?String(a):a}function qn(t,e,n,i,a){if(n>i)return-1;var r=Math.floor((n+i)/2),s=t[r],o=s.x,l=s.w,c=l===void 0?0:l;return a&&(o=t[r].y,c=t[r].h),e>=o&&e<=o+c?r:e<o?qn(t,e,n,r-1,a):qn(t,e,r+1,i,a)}function Il(t){var e=Za(t);return e?e[0]===e[1]:!0}function Pl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(i){if(te(i)&&i.constructor){var a=new i.constructor;for(var r in i)a[r]=n(i[r]);return a}return i};return t.map(function(i){return n(i)}).reduce(function(i,a){return V(V({},i),a)})}function ze(t,e){t===void 0&&(t={}),Z(e)&&e.forEach(function(i){return ze(t,i)});for(var n in e)/^\d+$/.test(n)||n in t||(t[n]=e[n]);return t}var je=function(t){return t.charAt(0).toUpperCase()+t.slice(1)};function Fl(t,e){return e===void 0&&(e="-"),t.split(e).map(function(n,i){return i?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}).join("")}var Ct=function(t){return[].slice.call(t)};function Dl(t,e,n){var i=t.rootSelector,a=i===void 0?"":i,r=t.sheet,s=function(l){return l.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")},o="".concat(a," ").concat(s(e)," {").concat(n.join(";"),"}");return r[r.insertRule?"insertRule":"addRule"](o,r.cssRules.length)}function Nl(t){var e=[];return t.forEach(function(n){var i;try{n.cssRules&&n.cssRules.length&&(e=e.concat(Ct(n.cssRules)))}catch(a){(i=H.console)===null||i===void 0||i.warn("Error while reading rules from ".concat(n.href,": ").concat(a.toString()))}}),e}function Qa(t){var e,n,i,a,r,s;return{x:((n=(e=H.pageXOffset)!==null&&e!==void 0?e:H.scrollX)!==null&&n!==void 0?n:0)+((i=t.scrollLeft)!==null&&i!==void 0?i:0),y:((r=(a=H.pageYOffset)!==null&&a!==void 0?a:H.scrollY)!==null&&r!==void 0?r:0)+((s=t.scrollTop)!==null&&s!==void 0?s:0)}}function xn(t,e,n,i){e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=!0);var a=new DOMPoint(e,n),r=t.getScreenCTM(),s=a.matrixTransform(i?r?.inverse():r);if(i===!1){var o=t.getBoundingClientRect();s.x-=o.x,s.y-=o.y}return s}function Mi(t){var e=t?t.transform:null,n=e&&e.baseVal;return n&&n.numberOfItems?n.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function Zn(t){var e=t[0]instanceof Date,n=(e?t.map(Number):t).filter(function(i,a,r){return r.indexOf(i)===a});return e?n.map(function(i){return new Date(i)}):n}function Fn(t){return t&&t.length?t.reduce(function(e,n){return e.concat(n)}):[]}function Et(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!e.length||e.length===1&&!e[0])return t;var i=e.shift();return te(t)&&te(i)&&Object.keys(i).forEach(function(a){if(!/^(__proto__|constructor|prototype)$/i.test(a)){var r=i[a];te(r)?(!t[a]&&(t[a]={}),t[a]=Et(t[a],r)):t[a]=Z(r)?r.concat():r}}),Et.apply(void 0,oe([t],e,!1))}function kt(t,e){e===void 0&&(e=!0);var n;return t[0]instanceof Date?n=e?function(i,a){return i-a}:function(i,a){return a-i}:e&&!t.every(isNaN)?n=function(i,a){return i-a}:e||(n=function(i,a){return i>a&&-1||i<a&&1||i===a&&0}),t.concat().sort(n)}function et(t,e){var n=e.filter(function(i){return ce(i)});return n.length?Y(n[0])?n=Math[t].apply(Math,n):n[0]instanceof Date&&(n=kt(n,t==="min")[0]):n=void 0,n}var Ml={mouse:function(){var t=function(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}};try{return new MouseEvent("t"),function(e,n,i){i===void 0&&(i=t()),e.dispatchEvent(new MouseEvent(n,i))}}catch{return function(n,i,a){a===void 0&&(a=t());var r=le.createEvent("MouseEvent");r.initMouseEvent(i,a.bubbles,a.cancelable,H,0,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}}}(),touch:function(t,e,n){var i=new Touch(Et({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}};function Qn(t,e){var n=t;for(var i in e)n=n.replace(new RegExp("{=".concat(i,"}"),"g"),e[i]);return n}function De(t){var e,n;if(t instanceof Date)n=t;else if(W(t)){var i=this,a=i.config,r=i.format;n=(e=r.dataTime(a.data_xFormat)(t))!==null&&e!==void 0?e:new Date(t)}else Y(t)&&!isNaN(t)&&(n=new Date(+t));return(!n||isNaN(+n))&&console&&console.error&&console.error("Failed to parse x '".concat(t,"' to Date object")),n}function Ti(t){var e=t.attr("viewBox");return e?/(\d+(\.\d+)?){3}/.test(e):!1}function Bl(t,e,n){n===void 0&&(n=!1);for(var i=!!t.node,a=!1,r=0,s=Object.entries(e);r<s.length;r++){var o=s[r],l=o[0],c=o[1];if(a=i?t.style(l)===c:t.style[l]===c,n===!1&&a)break}return a}function Zt(){return le?.hidden===!1||le?.visibilityState==="visible"}function zl(t,e){var n=H.DocumentTouch,i=H.matchMedia,a=H.navigator,r=i?.("(pointer:coarse)").matches,s=!1;if(e)if(a&&"maxTouchPoints"in a)s=a.maxTouchPoints>0;else if("ontouchmove"in H||n&&le instanceof n)s=!0;else if(r)s=!0;else{var o=a.userAgent;s=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(o)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(o)}var l=t&&!r&&i?.("(pointer:fine)").matches;return l&&"mouse"||s&&"touch"||"mouse"}function er(t,e){e()===!1?kl(function(){return er(t,e)}):t()}var wi=function(){function t(){return Pl($l,yl,Sl,_l,Al,bl,Tl,wl,t.data)}return t.setOptions=function(e){this.data=e.reduce(function(n,i){return V(V({},n),i)},this.data)},t.data={},t}(),Xl=function(){function t(){var e={chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},axisTooltip:{x:null,y:null,y2:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null};return e}return t}(),Vl=function(){function t(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasFunnel:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{domain:void 0,width:0,height:0,dataMax:0,maxTickSize:{x:{width:0,height:0,ticks:[],clipPath:0,domain:""},y:{width:0,height:0,domain:""},y2:{width:0,height:0,domain:""}},types:[],needle:void 0},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}return t}(),Bi={element:Xl,state:Vl},jl=function(){function t(){var e=this;Object.keys(Bi).forEach(function(n){e[n]=new Bi[n]})}return t.prototype.getStore=function(e){return this[e]},t}(),Be={colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",legendItemTextBox:"legendItemTextBox",radarTextWidth:"$radarTextWidth",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect"},Gl=function(){function t(){this.cache={}}return t.prototype.add=function(e,n,i){return i===void 0&&(i=!1),this.cache[e]=i?this.cloneTarget(n):n,this.cache[e]},t.prototype.remove=function(e){var n=this;(W(e)?[e]:e).forEach(function(i){return delete n.cache[i]})},t.prototype.get=function(e,n){if(n===void 0&&(n=!1),n&&Array.isArray(e)){for(var i=[],a=0,r=void 0;r=e[a];a++)r in this.cache&&i.push(this.cloneTarget(this.cache[r]));return i}else{var s=this.cache[e];return G(s)?s:null}},t.prototype.reset=function(e){var n=this;for(var i in n.cache)(e||/^\$/.test(i))&&(n.cache[i]=null)},t.prototype.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(n){return{x:n.x,value:n.value,id:n.id}})}},t}(),X={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",AREA_STEP_RANGE:"area-step-range",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",FUNNEL:"funnel",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},Dn={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",AREA_STEP_RANGE:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",FUNNEL:"initFunnel",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},Ze={Area:[X.AREA,X.AREA_SPLINE,X.AREA_SPLINE_RANGE,X.AREA_LINE_RANGE,X.AREA_STEP,X.AREA_STEP_RANGE],AreaRange:[X.AREA_SPLINE_RANGE,X.AREA_LINE_RANGE,X.AREA_STEP_RANGE],Arc:[X.PIE,X.DONUT,X.GAUGE,X.POLAR,X.RADAR],Line:[X.LINE,X.SPLINE,X.AREA,X.AREA_SPLINE,X.AREA_SPLINE_RANGE,X.AREA_LINE_RANGE,X.STEP,X.AREA_STEP,X.AREA_STEP_RANGE],Step:[X.STEP,X.AREA_STEP,X.AREA_STEP_RANGE],Spline:[X.SPLINE,X.AREA_SPLINE,X.AREA_SPLINE_RANGE]};function Yl(t){var e=t,n=e.config,i="";if(Ue(n.data_type||n.data_types)&&!e[Dn.LINE])i="line";else for(var a in Dn){var r=X[a];if(e.hasType(r)&&!e[Dn[a]]){i=r;break}}i&&Ul("Please, make sure if %c".concat(Fl(i)),"module has been imported and specified correctly.","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality")}function Ul(t,e,n){var i,a="[billboard.js]",r=(i=H.console)===null||i===void 0?void 0:i.error;if(r){var s=["background:red;color:white;display:block;font-size:15px",e];console.error.apply(console,oe(["❌ ".concat(a," ").concat(t),"background:red;color:white;display:block;font-size:15px"],s,!1)),console.info("%cℹ️","font-size:15px",n)}throw Error("".concat(a," ").concat(t.replace(/\%c([a-z-]+)/i,"'$1' ")," ").concat(e))}var Hl=H.setTimeout,Wl=H.clearTimeout;function Kl(t){var e=[],n,i=function(){i.clear(),t===!1?Wa(function(){e.forEach(function(a){return a()})},{timeout:200}):n=Hl(function(){e.forEach(function(a){return a()})},Y(t)?t:200)};return i.clear=function(){n&&(Wl(n),n=null)},i.add=function(a){return e.push(a)},i.remove=function(a){return e.splice(e.indexOf(a),1)},i}function tr(){var t=[],e=function(n,i){function a(){for(var r,s=0,o=0,l=void 0;l=t[o];o++){if(l===!0||!((r=l.empty)===null||r===void 0)&&r.call(l)){s++;continue}if(Zt()===!1){s=t.length;break}try{l.transition()}catch{s++}}return s===t.length}er(function(){i?.()},a)};return e.add=function(n){Z(n)?t=t.concat(n):t.push(n)},e}var Nn={};function Jl(t,e){var n,i=t.toString(),a=i.replace(/(function|[\s\W\n])/g,"").substring(0,15);return a in Nn||(Nn[a]=new H.Blob(["".concat((n=e?.map(String).join(";"))!==null&&n!==void 0?n:"",`

			self.onmessage=function({data}) {
				const result = (`).concat(i,`).apply(null, data);
				self.postMessage(result);
			};`)],{type:"text/javascript"})),H.URL.createObjectURL(Nn[a])}function ql(t){var e=new H.Worker(t);return e.onerror=function(n){console.error?console.error(n):console.log(n)},e}function Mn(t,e,n,i){t===void 0&&(t=!0);var a=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=e.apply(void 0,o);n(c)};if(H.Worker&&t){var r=Jl(e,i),s=ql(r);a=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];s.postMessage(o),s.onmessage=function(c){return H.URL.revokeObjectURL(r),n(c.data)}}}return a}function ei(t){var e=[];return t.forEach(function(n,i){var a=n[0];n.forEach(function(r,s){if(s>0){if(typeof e[s-1]>"u"&&(e[s-1]={}),typeof r>"u")throw new Error("Source data is missing a component at (".concat(i,", ").concat(s,")!"));e[s-1][a]=r}})}),e}function ti(t){var e=t[0],n=[];return t.forEach(function(i,a){if(a>0){var r={};i.forEach(function(s,o){if(typeof s>"u")throw new Error("Source data is missing a component at (".concat(a,", ").concat(o,")!"));r[e[o]]=s}),n.push(r)}}),n}function nr(t,e){var n=[],i,a;if(Array.isArray(t)){var r=function(s,o){if(s[o]!==void 0)return s[o];var l=o.replace(/\[(\w+)\]/g,".$1"),c=l.replace(/^\./,"").split("."),u=s;return c.some(function(f){return!(u=u&&f in u?u[f]:void 0)}),u};e.x?i=e.value.concat(e.x):i=e.value,n.push(i),t.forEach(function(s){var o=i.map(function(l){var c=r(s,l);return typeof c>"u"&&(c=null),c});n.push(o)}),a=ti(n)}else Object.keys(t).forEach(function(s){var o,l=t[s].concat();(o=l.unshift)===null||o===void 0||o.call(l,s),n.push(l)}),a=ei(n);return a}function Zl(t,e,n,i,a){e===void 0&&(e="csv");var r=new XMLHttpRequest,s={csv:Ql,tsv:ec,json:nr};r.open("GET",t),n&&Object.keys(n).forEach(function(o){r.setRequestHeader(o,n[o])}),r.onreadystatechange=function(){if(r.readyState===4)if(r.status===200){var o=r.responseText;o&&a.call(this,s[e](e==="json"?JSON.parse(o):o,i))}else throw new Error("".concat(t,": Something went wrong loading!"))},r.send()}function ir(t,e){var n=t.rows(e),i;return n.length===1?(i=[{}],n[0].forEach(function(a){i[0][a]=null})):i=t.parse(e),i}function Ql(t){return ir({rows:Is,parse:Os},t)}function ec(t){return ir({rows:Fs,parse:Ps},t)}function zi(t,e){var n=t||e?.data_keys;return n?.x&&(e.data_x=n.x),n}var tc={convertData:function(t,e){var n=this.config,i=n.boost_useWorker,a=t;if(t.bindto&&(a={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(r){var s="data_".concat(r);s in t&&(a[r]=t[s])})),a.url&&e)Zl(a.url,a.mimeType,a.headers,zi(a.keys,n),e);else if(a.json)Mn(i,nr,e,[ei,ti])(a.json,zi(a.keys,n));else if(a.rows)Mn(i,ti,e)(a.rows);else if(a.columns)Mn(i,ei,e)(a.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(t,e){var n=this,i=this,a=i.axis,r=i.config,s=i.state,o=r.data_type,l=!1,c=!1,u=!1;a&&(l=a.isCategorized(),c=a.isTimeSeries(),u=a.isCustomX());var f=Object.keys(t[0]||{}),d=f.length?f.filter(i.isNotX,i):[],g=f.length?f.filter(i.isX,i):[],h;d.forEach(function(m){var x=n.getXKey(m);u||c?g.indexOf(x)>=0?h=(e&&i.data.xs[m]||[]).concat(t.map(function(y){return y[x]}).filter(G).map(function(y,_){return i.generateTargetX(y,m,_)})):r.data_x?h=n.getOtherTargetXs():ce(r.data_xs)&&(h=i.getXValuesOfXKey(x,i.data.targets)):h=t.map(function(y,_){return _}),h&&(n.data.xs[m]=h)}),d.forEach(function(m){if(!n.data.xs[m])throw new Error('x is not defined for id = "'.concat(m,'".'))});var p=d.map(function(m,x){var y=r.data_idConverter.bind(i.api)(m),_=i.getXKey(m),$=u&&l,b=$&&t.map(function(k){return k.x}).every(function(k){return r.axis_x_categories.indexOf(k)>-1}),T=t.__append__,A=_===null&&T?i.api.data.values(m).length:0;return{id:y,id_org:m,values:t.map(function(k,I){var R=k[_],C=k[m],D;return C=C!==null&&!isNaN(C)&&!te(C)?+C:Z(C)||te(C)?C:null,($||s.hasRadar)&&x===0&&!$e(R)?(!b&&x===0&&I===0&&!T&&(r.axis_x_categories=[]),D=r.axis_x_categories.indexOf(R),D===-1&&(D=r.axis_x_categories.length,r.axis_x_categories.push(R))):D=i.generateTargetX(R,m,A+I),($e(C)||i.data.xs[m].length<=I)&&(D=void 0),{x:D,value:C,id:y,index:-1}}).filter(function(k){return re(k.x)})}});if(p.forEach(function(m){var x;r.data_xSort&&(m.values=m.values.sort(function(y,_){var $=y.x||y.x===0?y.x:1/0,b=_.x||_.x===0?_.x:1/0;return $-b})),m.values.forEach(function(y,_){return y.index=_}),(x=i.data.xs[m.id])===null||x===void 0||x.sort(function(y,_){return y-_})}),s.hasNegativeValue=i.hasNegativeValueInTargets(p),s.hasPositiveValue=i.hasPositiveValueInTargets(p),o&&i.isValidChartType(o)){var v=i.mapToIds(p).filter(function(m){return!(m in r.data_types)||!i.isValidChartType(r.data_types[m])});i.setTargetType(v,o)}return p.forEach(function(m){return i.cache.add(m.id_org,m,!0)}),p}},nc={isX:function(t){var e=this,n=e.config,i=n.data_x&&t===n.data_x,a=ce(n.data_xs)&&Ll(n.data_xs,t);return i||a},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!!(t.data_stack_normalize&&t.data_groups.length)},isGrouped:function(t){var e=this.config.data_groups;return t?e.some(function(n){return n.indexOf(t)>=0&&n.length>1}):e.length>0},getXKey:function(t){var e=this,n=e.config;return n.data_x?n.data_x:ce(n.data_xs)?n.data_xs[t]:null},getXValuesOfXKey:function(t,e){var n=this,i=e&&ce(e)?n.mapToIds(e):[],a;return i.forEach(function(r){n.getXKey(r)===t&&(a=n.data.xs[r])}),a},getIndexByX:function(t,e){var n=this;return e?e.indexOf(W(t)?t:+t):(n.filterByX(n.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){var n=this;return t in n.data.xs&&n.data.xs[t]&&G(n.data.xs[t][e])?n.data.xs[t][e]:e},getOtherTargetXs:function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this,n=e.config;Object.keys(t).forEach(function(i){n.data_xs[i]=t[i]})},isMultipleX:function(){return!this.config.axis_x_forceAsSingle&&(ce(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter"))},addName:function(t){var e=this,n=e.config,i;return t&&(i=n.data_names[t.id],t.name=i!==void 0?i:t.id),t},getAllValuesOnIndex:function(t,e){e===void 0&&(e=!1);var n=this,i=n.filterTargetsToShow(n.data.targets).map(function(a){return n.addName(n.getValueOnIndex(a.values,t))});return e&&(i=i.filter(function(a){return a&&"value"in a&&G(a.value)})),i},getValueOnIndex:function(t,e){var n=t.filter(function(i){return i.index===e});return n.length?n[0]:null},updateTargetX:function(t,e){var n=this;t.forEach(function(i){i.values.forEach(function(a,r){a.x=n.generateTargetX(e[r],i.id,r)}),n.data.xs[i.id]=e})},updateTargetXs:function(t,e){var n=this;t.forEach(function(i){e[i.id]&&n.updateTargetX([i],e[i.id])})},generateTargetX:function(t,e,n){var i=this,a=i.axis,r=a?.isCategorized()?n:t||n;if(a?.isTimeSeries()){var s=De.bind(i);r=s(t||i.getXValue(e,n))}else a?.isCustomX()&&!a?.isCategorized()&&(r=G(t)?+t:i.getXValue(e,n));return r},updateXs:function(t){t.length&&(this.axis.xs=t.map(function(e){return e.x}))},getPrevX:function(t){var e=this.axis.xs[t-1];return re(e)?e:null},getNextX:function(t){var e=this.axis.xs[t+1];return re(e)?e:null},getBaseValue:function(t){var e=this,n=e.state.hasAxis,i=t.value;return i&&n&&(e.isAreaRangeType(t)?i=e.getRangedData(t,"mid"):e.isBubbleZType(t)&&(i=e.getBubbleZData(i,"y"))),i},getMinMaxValue:function(t){var e=this.getBaseValue.bind(this),n,i;return(t||this.data.targets.map(function(a){return a.values})).forEach(function(a,r){var s=a.map(e).filter(Y);n=Math.min.apply(Math,oe([r?n:1/0],s,!1)),i=Math.max.apply(Math,oe([r?i:-1/0],s,!1))}),{min:n,max:i}},getMinMaxData:function(){var t=this,e=Be.dataMinMax,n=t.cache.get(e);if(!n){var i=t.data.targets.map(function(o){return o.values}),a=t.getMinMaxValue(i),r=[],s=[];i.forEach(function(o){var l=t.getFilteredDataByValue(o,a.min),c=t.getFilteredDataByValue(o,a.max);l.length&&(r=r.concat(l)),c.length&&(s=s.concat(c))}),t.cache.add(e,n={min:r,max:s})}return n},getTotalPerIndex:function(){var t=this,e=Be.dataTotalPerIndex,n=t.cache.get(e);return(t.config.data_groups.length||t.isStackNormalized())&&!n&&(n=[],t.data.targets.forEach(function(i){i.values.forEach(function(a,r){n[r]||(n[r]=0),n[r]+=Y(a.value)?a.value:0})})),n},getTotalDataSum:function(t){var e=this,n=Be.dataTotalSum,i=e.cache.get(n);if(!Y(i)){var a=Fn(e.data.targets.map(function(r){return r.values})).map(function(r){return r.value});i=a.length?a.reduce(function(r,s){return r+s}):0,e.cache.add(n,i)}return t&&(i-=e.getHiddenTotalDataSum()),i},getHiddenTotalDataSum:function(){var t=this,e=t.api,n=t.state.hiddenTargetIds,i=0;return n.length&&(i=e.data.values.bind(e)(n).reduce(function(a,r){return a+r})),i},getFilteredDataByValue:function(t,e){var n=this;return t.filter(function(i){return n.getBaseValue(i)===e})},getMaxDataCount:function(){return Math.max.apply(Math,oe(oe([],this.data.targets.map(function(t){return t.values.length}),!1),[0],!1))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length,n=this.config.axis_x_inverted;return e>1?(t=t.map(function(i){return i.values}).reduce(function(i,a){return i.concat(a)}).map(function(i){return i.x}),t=kt(Zn(t)).map(function(i,a,r){return{x:i,index:n?r.length-a-1:a}})):e&&(t=t[0].values.concat()),t},mapToIds:function(t){return t.map(function(e){return e.id})},mapToTargetIds:function(t){var e=this;return t?Z(t)?t.concat():[t]:e.mapToIds(e.data.targets)},hasTarget:function(t,e){for(var n=this.mapToIds(t),i=0,a=void 0;a=n[i];i++)if(a===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter(function(n){return e.isTargetToShow(n.id)})},mapTargetsToUniqueXs:function(t){var e=this,n=e.axis,i=[];return t?.length&&(i=Zn(Fn(t.map(function(a){return a.values.map(function(r){return+r.x})}))),i=n?.isTimeSeries()?i.map(function(a){return new Date(+a)}):i.map(Number)),kt(i)},addTargetIds:function(t,e){var n=this.state,i=Z(e)?e:[e];i.forEach(function(a){n[t].indexOf(a)<0&&n[t].push(a)})},removeTargetIds:function(t,e){var n=this.state,i=Z(e)?e:[e];i.forEach(function(a){var r=n[t].indexOf(a);r>=0&&n[t].splice(r,1)})},addHiddenTargetIds:function(t){this.addTargetIds("hiddenTargetIds",t)},removeHiddenTargetIds:function(t){this.removeTargetIds("hiddenTargetIds",t)},addHiddenLegendIds:function(t){this.addTargetIds("hiddenLegendIds",t)},removeHiddenLegendIds:function(t){this.removeTargetIds("hiddenLegendIds",t)},getValuesAsIdKeyed:function(t){var e=this,n=e.state.hasAxis,i={},a=e.isMultipleX(),r=a?e.mapTargetsToUniqueXs(t).map(function(s){return W(s)?s:+s}):null;return t.forEach(function(s){var o=[];s.values.filter(function(l){var c=l.value;return G(c)||c===null}).forEach(function(l){var c=l.value;c!==null&&e.isCandlestickType(l)&&(c=Z(c)?c.slice(0,4):[c.open,c.high,c.low,c.close]),Z(c)?o.push.apply(o,c):te(c)&&"high"in c?o.push.apply(o,Object.values(c)):e.isBubbleZType(l)?o.push(n&&e.getBubbleZData(c,"y")):a?o[e.getIndexByX(l.x,r)]=c:o.push(c)}),i[s.id]=o}),i},checkValueInTargets:function(t,e){for(var n=Object.keys(t),i,a=0;a<n.length;a++){i=t[n[a]].values;for(var r=0;r<i.length;r++)if(e(i[r].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(e){return e<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(e){return e>0})},orderTargets:function(t){var e=this,n=oe([],t,!0),i=e.getSortCompareFn();return i&&n.sort(i),n},getSortCompareFn:function(t){t===void 0&&(t=!1);var e=this,n=e.config,i=n.data_order,a=/asc/i.test(i),r=/desc/i.test(i),s;if(a||r){var o=function(c,u){return c+Math.abs(u.value)},l=function(c){return Y(c)?c:"values"in c?c.values.reduce(o,0):c.value};s=function(c,u){var f=l(c),d=l(u);return t?a?f-d:d-f:a?d-f:f-d}}else B(i)&&(s=i.bind(e.api));return s||null},filterByX:function(t,e){return Fn(t.map(function(n){return n.values})).filter(function(n){return n.x-e===0})},filterRemoveNull:function(t){var e=this;return t.filter(function(n){return G(e.getBaseValue(n))})},filterByXDomain:function(t,e){return t.map(function(n){return{id:n.id,id_org:n.id_org,values:n.values.filter(function(i){return e[0]<=i.x&&i.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels;return Jn(t)&&t||Ye(t)&&ce(t)},hasNullDataValue:function(t){return t.some(function(e){var n=e.value;return n===null})},getDataIndexFromEvent:function(t){var e=this,n=e.$el,i=e.config,a=e.state,r=a.hasRadar,s=a.inputType,o=a.eventReceiver,l=o.coords,c=o.rect,u;if(r){var f=t.target;/tspan/i.test(f.tagName)&&(f=f.parentNode);var d=z(f).datum();u=d&&Object.keys(d).length===1?d.index:void 0}else{var g=i.axis_rotated,h=Qa(n.chart.node()),p=s==="touch"&&t.changedTouches?t.changedTouches[0]:t,v=g?p.clientY+h.y:p.clientX+h.x;if(Ti(n.svg)){var m=[v,0];g&&m.reverse(),v=xn.apply(void 0,oe([n.eventRect.node()],m,!1))[g?"y":"x"]}else v-=g?c.top:c.left;u=qn(l,v,0,l.length-1,g)}return u},getDataLabelLength:function(t,e,n){var i=this,a=[0,0],r=1.3;return i.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(s){return i.dataLabelFormat(s.id)(s)}).each(function(s,o){a[o]=this.getBoundingClientRect()[n]*r}).remove(),a},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var n=t[e].x,i=[],a;for(a=e-1;a>=0&&n===t[a].x;a--)i.push(t[a]);for(a=e;a<t.length&&n===t[a].x;a++)i.push(t[a]);return i},findClosestFromTargets:function(t,e){var n=this,i=t.map(function(a){return n.findClosest(a.values,e)});return n.findClosest(i,e)},findClosest:function(t,e){var n=this,i=n.$el.main,a=t.filter(function(o){return o&&G(o.value)}),r,s;return a.filter(function(o){return n.isBarType(o.id)||n.isCandlestickType(o.id)}).forEach(function(o){var l=n.isBarType(o.id)?".".concat(mn.chartBar,".").concat(K.target).concat(n.getTargetSelectorSuffix(o.id)," .").concat(mn.bar,"-").concat(o.index):".".concat(Wn.chartCandlestick,".").concat(K.target).concat(n.getTargetSelectorSuffix(o.id)," .").concat(Wn.candlestick,"-").concat(o.index," path");!s&&n.isWithinBar(i.select(l).node())&&(s=o)}),a.filter(function(o){return!n.isBarType(o.id)&&!n.isCandlestickType(o.id)}).forEach(function(o){var l=n.dist(o,e);r=n.getPointSensitivity(o),l<r&&(r=l,s=o)}),s},dist:function(t,e){var n=this,i=n.config.axis_rotated,a=n.scale,r=+i,s=+!i,o=n.circleY(t,t.index),l=(a.zoom||a.x)(t.x);return Math.sqrt(Math.pow(l-e[r],2)+Math.pow(o-e[s],2))},convertValuesToStep:function(t){var e=this,n=e.axis,i=e.config,a=i.line_step_type,r=n?n.isCategorized():!1,s=Z(t)?t.concat():[t];if(!(r||/step\-(after|before)/.test(a)))return t;if(s.length){var o=s[0],l=s[s.length-1],c=o.id,u=o.x;s.unshift({x:--u,value:o.value,id:c}),r&&a==="step-after"&&s.unshift({x:--u,value:o.value,id:c}),u=l.x,s.push({x:++u,value:l.value,id:c}),r&&a==="step-before"&&s.push({x:++u,value:l.value,id:c})}return s},convertValuesToRange:function(t){var e=Z(t)?t.concat():[t],n=[];return e.forEach(function(i){var a=i.x,r=i.id;n.push({x:a,id:r,value:i.value[0]}),n.push({x:a,id:r,value:i.value[2]})}),n},updateDataAttributes:function(t,e){var n=this,i=n.config,a=i["data_".concat(t)];return $e(e)||(Object.keys(e).forEach(function(r){a[r]=e[r]}),n.redraw({withLegend:!0})),a},getRangedData:function(t,e,n){e===void 0&&(e=""),n===void 0&&(n="areaRange");var i=t?.value;if(Z(i)){if(n==="bar")return i.reduce(function(r,s){return s-r});var a={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[n].indexOf(e);return a>=0&&i?i[a]:void 0}else if(i&&e)return i[e];return i},setRatioForGroupedData:function(t){var e=this,n=e.config;if(n.data_groups.length&&t.some(function(a){return e.isGrouped(a.id)})){var i=function(a){return e.getRatio("index",a,!0)};t.forEach(function(a){"values"in a?a.values.forEach(i):i(a)})}},getRatio:function(t,e,n){n===void 0&&(n=!1);var i=this,a=i.config,r=i.state,s=i.api,o=0;if(e&&s.data.shown().length)if(o=e.ratio||e.value,t==="arc")if(i.pie.padAngle()())o=e.value/i.getTotalDataSum(!0);else{var l=a.gauge_fullCircle?i.getArcLength():i.getStartingAngle()*-2,c=i.hasType("gauge")?l:Math.PI*2;o=(e.endAngle-e.startAngle)/c}else if(t==="index"){var u=s.data.values.bind(s),f=this.getTotalPerIndex();if(r.hiddenTargetIds.length){var d=u(r.hiddenTargetIds,!1);d.length&&(d=d.reduce(function(v,m){return v.map(function(x,y){return(Y(x)?x:0)+m[y]})}),f=f.map(function(v,m){return v-d[m]}))}var g=f[e.index];e.ratio=Y(e.value)&&f&&g?e.value/g:0,o=e.ratio}else if(t==="radar")o=parseFloat(String(Math.max(e.value,0)))/r.current.dataMax*a.radar_size_ratio;else if(t==="bar"){var h=i.getYScaleById.bind(i)(e.id),p=h.domain().reduce(function(v,m){return m-v});o=p===0?0:Math.abs(i.getRangedData(e,null,t)/p)}else t==="treemap"&&(o/=i.getTotalDataSum(!0));return n&&o?o*100:o},updateDataIndexByX:function(t){var e=this,n=t.reduce(function(i,a,r){return i[Number(a.x)]=r,i},{});e.data.targets.forEach(function(i){i.values.forEach(function(a,r){var s=n[Number(a.x)];s===void 0&&(s=r),a.index=s})})},isBubbleZType:function(t){var e=this;return e.isBubbleType(t)&&(te(t.value)&&("z"in t.value||"y"in t.value)||Z(t.value)&&t.value.length>=2)},isBarRangeType:function(t){var e=this,n=t.value;return e.isBarType(t)&&Z(n)&&n.length>=2&&n.every(function(i){return Y(i)})},getDataById:function(t){var e,n=this.cache.get(t)||this.api.data(t);return(e=n?.[0])!==null&&e!==void 0?e:n}};function ar(t,e){e===void 0&&(e=!1);var n=this,i=n.api;e&&n.api.flush(!0),t?.call(i)}var ic={load:function(t,e){var n=this,i=n.axis,a=n.data,r=n.org,s=n.scale,o=e.append,l={domain:null,currentDomain:null,x:null},c=t;c&&(e.filter&&(c=c.filter(e.filter)),(e.type||e.types)&&c.forEach(function(u){var f,d=((f=e.types)===null||f===void 0?void 0:f[u.id])||e.type;n.setTargetType(u.id,d)}),a.targets.forEach(function(u){for(var f=0;f<c.length;f++)if(u.id===c[f].id){u.values=o?u.values.concat(c[f].values):c[f].values,c.splice(f,1);break}}),a.targets=a.targets.concat(c)),n.updateTargets(a.targets),s.zoom&&(l.x=i.isCategorized()?s.x.orgScale():(r.xScale||s.x).copy(),l.domain=n.getXDomain(a.targets),l.x.domain(l.domain),l.currentDomain=n.zoom.getDomain(),n.withinRange(l.currentDomain,void 0,l.domain)||(s.x.domain(l.domain),s.zoom=null,n.$el.eventRect.property("__zoom",null))),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),s.zoom?(r.xDomain=l.domain,r.xScale=l.x,i.isCategorized()&&(l.currentDomain=n.getZoomDomainValue(l.currentDomain),r.xDomain=n.getZoomDomainValue(r.xDomain),r.xScale=l.x.domain(r.xDomain)),n.updateCurrentZoomTransform(l.x,l.currentDomain)):r.xScale&&r.xScale.domain(r.xDomain),n.updateTypesElements(),ar.call(n,e.done,e.resizeAfter)},loadFromArgs:function(t){var e=this;e.config&&(e.cache.reset(),e.convertData(t,function(n){var i=t.data||n;t.append&&(i.__append__=!0),i&&e.load(e.convertDataToTargets(i),t)}))},unload:function(t,e){var n,i=this,a=i.state,r=i.$el,s=i.$T,o=!!(!((n=i.hasLegendDefsPoint)===null||n===void 0)&&n.call(i)),l=e,c=t;if(i.cache.reset(),l||(l=function(){}),c=c.filter(function(f){return i.hasTarget(i.data.targets,f)}),!c||c.length===0){l();return}var u=r.svg.selectAll(c.map(function(f){return i.selectorTarget(f)}));s(u).style("opacity","0").remove().call(Ka,l),c.forEach(function(f){var d,g=i.getTargetSelectorSuffix(f);a.withoutFadeIn[f]=!1,r.legend&&r.legend.selectAll(".".concat(Q.legendItem).concat(g)).remove(),i.data.targets=i.data.targets.filter(function(h){return h.id!==f}),o&&((d=r.defs)===null||d===void 0||d.select("#".concat(i.getDefsPointId(g))).remove())}),a.hasFunnel&&i.updateFunnel(i.data.targets),a.hasTreemap&&i.updateTargetsForTreemap(i.data.targets),i.updateTypesElements()}},ac={setExpand:function(t,e,n){var i=this,a=i.config,r=i.$el.circle;r&&a.point_focus_expand_enabled&&i.expandCircles(t,e,n),i.expandBarTypeShapes(!0,t,e,n)},expandBarTypeShapes:function(t,e,n,i){t===void 0&&(t=!0);var a=this;["bar","candlestick"].filter(function(r){return a.$el[r]}).forEach(function(r){i&&a.$el[r].classed(K.EXPANDED,!1),a.getShapeByIndex(r,e,n).classed(K.EXPANDED,t)})},setOverOut:function(t,e){var n=this,i=n.config,a=n.state,r=a.hasFunnel,s=a.hasRadar,o=a.hasTreemap,l=n.$el.main,c=te(e);if(c||e!==-1){var u=i[t?"data_onover":"data_onout"].bind(n.api);if(i.color_onover&&n.setOverColor(t,e,c),c){var f=n.getTargetSelectorSuffix(e.id),d=r||o?"".concat(K.target+f," .").concat(be.shape):qt.arc+f;u(e,l.select(".".concat(d)).node())}else if(i.tooltip_grouped)t&&(s&&n.isPointFocusOnly()?n.showCircleFocus(n.getAllValuesOnIndex(e,!0)):n.setExpand(e,null,!0)),!n.isMultipleX()&&l.selectAll(".".concat(be.shape,"-").concat(e)).each(function(m){u(m,this)});else{var g=n.cache.get(Be.setOverOut)||[],h=l.selectAll(".".concat(be.shape,"-").concat(e)).filter(function(m){return n.isWithinShape(this,m)}),p=h.filter(function(){var m=this;return g.every(function(x){return x!==m})});if(!t||h.empty()||g.length===p.size()&&p.nodes().every(function(m,x){return m!==g[x]}))for(;g.length;){var v=g.pop();i.data_onout.bind(n.api)(z(v).datum(),v)}p.each(function(){t&&(u(z(this).datum(),this),g.push(this))}),n.cache.add(Be.setOverOut,g)}}},callOverOutForTouch:function(t){var e=this,n=e.cache.get(Be.callOverOutForTouch);(te(t)&&n?t.id!==n.id:t!==n)&&((n||Y(n))&&e.setOverOut(!1,n),(t||Y(t))&&e.setOverOut(!0,t),e.cache.add(Be.callOverOutForTouch,t))},getDraggableSelection:function(){var t=this,e=t.config,n=t.state;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?rs().on("drag",function(i){n.event=i,t.drag(Ve(i,this))}).on("start",function(i){n.event=i,t.dragstart(Ve(i,this))}).on("end",function(i){n.event=i,t.dragend()}):function(){}},dispatchEvent:function(t,e,n){var i,a,r,s=this,o=s.config,l=s.state,c=l.eventReceiver,u=l.hasAxis,f=l.hasFunnel,d=l.hasRadar,g=l.hasTreemap,h=s.$el,p=h.eventRect,v=h.funnel,m=h.radar,x=h.svg,y=h.treemap,_=(r=(a=(f||g)&&c.rect||d&&m.axes.select(".".concat(Ee.axis,"-").concat(e," text"))||p||((i=s.getArcElementByIdOrIndex)===null||i===void 0?void 0:i.call(s,e)))===null||a===void 0?void 0:a.node)===null||r===void 0?void 0:r.call(a);if(_){var $=s.isMultipleX(),b=o.axis_rotated,T=_.getBoundingClientRect(),A=T.width,k=T.left,I=T.top;if(u&&!d&&!$){var R=c.coords[e];R?(A=R.w,k+=R.x,I+=R.y):(A=0,k=0,I=0)}var C=k+(n?n[0]:0)+($||b?0:A/2),D=I+(n?n[1]:0)+(b?4:0);if(Ti(x)){var O=xn(s.$el.eventRect.node(),C,D,!1);C=O.x,D=O.y}var ee={screenX:C,screenY:D,clientX:C,clientY:D,bubbles:d};(f||g)&&(_=(v??y).node()),Ml[/^(mouse|click)/.test(t)?"mouse":"touch"](_,t,ee)}},setDragStatus:function(t){this.state.dragging=t},unbindZoomEvent:function(){var t=this,e=t.$el,n=e.eventRect,i=e.zoomResetBtn;n?.on(".zoom wheel.zoom .drag",null),i?.on("click",null).style("display","none")},unbindAllEvents:function(){var t,e=this,n=e.$el,i=n.arcs,a=n.eventRect,r=n.legend,s=n.region,o=n.svg,l=n.treemap,c=e.brush,u=["wheel","click","mouseover","mousemove","mouseout","touchstart","touchmove","touchend","touchstart.eventRect","touchmove.eventRect","touchend.eventRect",".brush",".drag",".zoom","wheel.zoom","dblclick.zoom"].join(" ");[o,a,s?.list,c?.getSelection(),i?.selectAll("path"),r?.selectAll("g"),l].forEach(function(f){return f?.on(u,null)}),(t=e.unbindZoomEvent)===null||t===void 0||t.call(e)}},rc={categoryName:function(t){var e,n=this.config.axis_x_categories;return(e=n?.[t])!==null&&e!==void 0?e:t}},sc={generateClass:function(t,e){return" ".concat(t," ").concat(t+this.getTargetSelectorSuffix(e))},getClass:function(t,e){var n=this,i=/s$/.test(t),a=/^(area|arc|line|funnel|treemap)s?$/.test(t),r=i?"id":"index";return function(s){var o=s.data||s,l=(e?n.generateClass(_e[i?"shapes":"shape"],o[r]):"")+n.generateClass(_e[t],o[a?"id":r]);return l.trim()}},getChartClass:function(t){var e=this;return function(n){return _e["chart".concat(t)]+e.classTarget((n.data?n.data:n).id)}},generateExtraLineClass:function(){var t=this,e=t.config.line_classes||[],n=[];return function(i){var a,r=i.id||((a=i.data)===null||a===void 0?void 0:a.id)||i;return n.indexOf(r)<0&&n.push(r),e[n.indexOf(r)%e.length]}},classRegion:function(t,e){return"".concat(this.generateClass(_e.region,e)," ").concat("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],n="";return e&&(n=" ".concat(_e.target,"-").concat(e)),this.generateClass(_e.target,t)+n},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" ".concat(this.state.focusedTargetIds.indexOf(t.id)>=0?_e.focused:"")},classDefocused:function(t){return" ".concat(this.state.defocusedTargetIds.indexOf(t.id)>=0?_e.defocused:"")},getTargetSelectorSuffix:function(t){var e=t||t===0?"-".concat(t):"";return e.replace(/[\x00-\x20\x7F-\xA0\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-")},selectorTarget:function(t,e,n){e===void 0&&(e=""),n===void 0&&(n="");var i=this.getTargetSelectorSuffix(t);return"".concat(e,".").concat(_e.target+i," ").concat(n,", ").concat(e,".").concat(_e.circles+i," ").concat(n)},selectorTargets:function(t,e){var n=this,i=t||[];return i.length?i.map(function(a){return n.selectorTarget(a,e)}):null},selectorLegend:function(t){return".".concat(_e.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t?.length?t.map(function(n){return e.selectorLegend(n)}):null}},oc=function(t,e,n){var i=z(t.cloneNode(!0));return i.attr("id",n).insert("rect",":first-child").attr("width",i.attr("width")).attr("height",i.attr("height")).style("fill",e),{id:n,node:i.node()}};function lc(t){var e=Be.colorPattern,n=le.body,i=n[e];if(!i){var a=";",r=t.classed(Kn.colorPattern,!0).style("background-image");t.classed(Kn.colorPattern,!1),r.indexOf(a)>-1&&(i=r.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(a).map(function(s){return s.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),n[e]=i)}return i}var cc=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],uc={generateColor:function(){var t=this,e=t.$el,n=t.config,i=n.data_colors,a=n.data_color,r=[],s=ce(n.color_pattern)?n.color_pattern:as(lc(e.chart)||cc).range(),o=s;if(B(n.color_tiles)){var l=n.color_tiles.bind(t.api)(),c=s.map(function(u,f){var d=u.replace(/[#\(\)\s,]/g,""),g="".concat(t.state.datetimeId,"-pattern-").concat(d,"-").concat(f);return oc(l[f%l.length],u,g)});s=c.map(function(u){return"url(#".concat(u.id,")")}),t.patterns=c}return function(u){var f,d=u.id||((f=u.data)===null||f===void 0?void 0:f.id)||u,g=t.isTypeOf(d,["line","spline","step"])||!n.data_types[d],h;return B(i[d])?h=i[d].bind(t.api)(u):i[d]?h=i[d]:(r.indexOf(d)<0&&r.push(d),h=g?o[r.indexOf(d)%o.length]:s[r.indexOf(d)%s.length],i[d]=h),B(a)?a.bind(t.api)(h,u):h}},generateLevelColor:function(){var t=this,e=t.config,n=e.color_pattern,i=e.color_threshold,a=i.unit==="value",r=i.max||100,s=i.values&&i.values.length?i.values:[];return ce(i)?function(o){for(var l=a?o:o*100/r,c=n[n.length-1],u=0,f=s.length;u<f;u++)if(l<=s[u]){c=n[u];break}return c}:null},generateTextBGColorFilter:function(t,e){e===void 0&&(e={x:0,y:0,width:1,height:1});var n=this,i=n.$el,a=n.state;if(t){var r=[];W(t)?r.push(""):te(t)&&(r=Object.keys(t)),r.forEach(function(s){var o="".concat(a.datetimeId,"-labels-bg").concat(n.getTargetSelectorSuffix(s)).concat(W(t)?n.getTargetSelectorSuffix(t):"");i.defs.append("filter").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height).attr("id",o).html('<feFlood flood-color="'.concat(s===""?t:t[s],`" />
						<feComposite in="SourceGraphic" />`))})}},getGradienColortUrl:function(t){return"url(#".concat(this.state.datetimeId,"-gradient").concat(this.getTargetSelectorSuffix(t),")")},updateLinearGradient:function(){var t=this,e=t.config,n=t.data.targets,i=t.state.datetimeId,a=t.$el.defs;n.forEach(function(r){var s="".concat(i,"-gradient").concat(t.getTargetSelectorSuffix(r.id)),o=t.hasPointType()&&e.point_radialGradient,l=t.isAreaType(r)&&"area"||t.isBarType(r)&&"bar";if((o||l)&&a.select("#".concat(s)).empty()){var c=t.color(r),u={defs:null,stops:[]};if(o){var f=o.cx,d=f===void 0?.3:f,g=o.cy,h=g===void 0?.3:g,p=o.r,v=p===void 0?.7:p,m=o.stops,x=m===void 0?[[.1,c,0],[.9,c,1]]:m;u.stops=x,u.defs=a.append("radialGradient").attr("id","".concat(s)).attr("cx",d).attr("cy",h).attr("r",v)}else{var y=e.axis_rotated,_=e["".concat(l,"_linearGradient")],$=_.x,b=$===void 0?y?[1,0]:[0,0]:$,T=_.y,A=T===void 0?y?[0,0]:[0,1]:T,k=_.stops,x=k===void 0?[[0,c,1],[1,c,0]]:k;u.stops=x,u.defs=a.append("linearGradient").attr("id","".concat(s)).attr("x1",b[0]).attr("x2",b[1]).attr("y1",A[0]).attr("y2",A[1])}u.stops.forEach(function(I){var R=I[0],C=I[1],D=I[2],O=B(C)?C.bind(t.api)(r.id):C;u.defs&&u.defs.append("stop").attr("offset",R).attr("stop-color",O||c).attr("stop-opacity",D)})}})},setOverColor:function(t,e){var n=this,i=n.config,a=n.$el.main,r=i.color_onover,s=t?r:n.color;te(s)?s=function(o){var l=o.id;return l in r?r[l]:n.color(l)}:W(s)?s=function(){return r}:B(r)&&(s=s.bind(n.api)),a.selectAll(te(e)?".".concat(qt.arc).concat(n.getTargetSelectorSuffix(e.id)):".".concat(be.shape,"-").concat(e)).style("fill",s)}},fc={getYDomainMinMax:function(t,e){var n=this,i=n.axis,a=n.config,r=e==="min",s=a.data_groups,o=n.mapToIds(t),l=n.getValuesAsIdKeyed(t);if(s.length>0){var c=n["has".concat(r?"Negative":"Positive","ValueInTargets")](t);s.forEach(function(u){var f=u.filter(function(h){return o.indexOf(h)>=0});if(f.length){var d=f[0],g=i.getId(d);c&&l[d]&&(l[d]=l[d].map(function(h){return(r?h<0:h>0)?h:0})),f.filter(function(h,p){return p>0}).forEach(function(h){if(l[h]){var p=i.getId(h);l[h].forEach(function(v,m){var x=+v,y=r?x>0:x<0;p===g&&!(c&&y)&&(l[d][m]+=x)})}})}})}return et(e,Object.keys(l).map(function(u){return et(e,l[u])}))},isHiddenTargetWithYDomain:function(t){var e=this;return e.state.hiddenTargetIds.some(function(n){return e.axis.getId(n)===t})},getYDomain:function(t,e,n){var i=this,a=i.axis,r=i.config,s=i.scale,o="axis_".concat(e);if(i.isStackNormalized())return[0,100];var l=s?.[e]&&s[e].type==="log",c=t.filter(function(O){return a.getId(O.id)===e}),u=n?i.filterByXDomain(c,n):c;if(u.length===0)return i.isHiddenTargetWithYDomain(e)?s[e].domain():e==="y2"?s.y.domain():i.getYDomain(t,"y2",n);var f=r["".concat(o,"_min")],d=r["".concat(o,"_max")],g=r["".concat(o,"_center")],h=r["".concat(o,"_inverted")],p=i.hasDataLabel()&&r.axis_rotated,v=i.hasDataLabel()&&!r.axis_rotated,m=i.getYDomainMinMax(u,"min"),x=i.getYDomainMinMax(u,"max"),y=oe([X.BAR,X.BUBBLE,X.SCATTER],Ze.Line,!0).some(function(O){var ee=O.indexOf("area")>-1?"area":O;return i.hasType(O,u,!0)&&r["".concat(ee,"_zerobased")]});m=G(f)?f:G(d)?m<=d?m:d-10:m,x=G(d)?d:G(f)?f<=x?x:f+10:x,isNaN(m)&&(m=0),isNaN(x)&&(x=m),m===x&&(m<0?x=0:m=0);var _=m>=0&&x>=0,$=m<=0&&x<=0;(G(f)&&_||G(d)&&$)&&(y=!1),y&&(_&&(m=0),$&&(x=0));var b=Math.abs(x-m),T={top:b*.1,bottom:b*.1};if(re(g)){var A=Math.max(Math.abs(m),Math.abs(x));x=g+A,m=g-A}if(p){var k=Bt(s.y.range()),I=i.getDataLabelLength(m,x,"width").map(function(O){return O/k});["bottom","top"].forEach(function(O,ee){T[O]+=b*(I[ee]/(1-I[0]-I[1]))})}else if(v){var R=i.getDataLabelLength(m,x,"height");["bottom","top"].forEach(function(O,ee){T[O]+=i.convertPixelToScale("y",R[ee],b)})}T=i.getResettedPadding(T);var C=r["".concat(o,"_padding")];ce(C)&&["bottom","top"].forEach(function(O){T[O]=a.getPadding(C,O,T[O],b)}),y&&(_&&(T.bottom=m),$&&(T.top=-x));var D=l?[m,x].map(function(O){return O<0?0:O}):[m-T.bottom,x+T.top];return h?D.reverse():D},getXDomainMinMax:function(t,e){var n,i=this,a=i.config["axis_x_".concat(e)],r=et(e,t.map(function(o){return et(e,o.values.map(function(l){return l.x}))})),s=te(a)?a.value:a;return s=re(s)&&(!((n=i.axis)===null||n===void 0)&&n.isTimeSeries())?De.bind(this)(s):s,te(a)&&a.fit&&(e==="min"&&s<r||e==="max"&&s>r)&&(s=void 0),re(s)?s:r},getXDomainPadding:function(t,e){var n=this,i=n.axis,a=n.config,r=a.axis_x_padding,s=i.isTimeSeries()&&e,o=Bt(t),l;if(i.isCategorized()||s)l=0;else if(n.hasType("bar")){var c=n.getMaxDataCount();l=c>1?o/(c-1)/2:.5}else l=n.getResettedPadding(o*.01);var u=Y(r)?{left:r,right:r}:r,f=u.left,d=f===void 0?l:f,g=u.right,h=g===void 0?l:g;if(r.unit==="px"){var p=Math.abs(o+o*.2);d=i.getPadding(r,"left",l,p),h=i.getPadding(r,"right",l,p)}else{var v=o+d+h;if(s&&v){var m=o/e/v;d=d/v/m,h=h/v/m}}return{left:d,right:h}},getXDomain:function(t){var e=this,n=e.axis,i=e.config,a=e.scale.x,r=i.axis_x_inverted,s=[e.getXDomainMinMax(t,"min"),e.getXDomainMinMax(t,"max")],o=s[0],l=o===void 0?0:o,c=s[1],u=c===void 0?0:c;if(a.type!=="log"){var f=n.isCategorized(),d=n.isTimeSeries(),g=e.getXDomainPadding(s),h=s[0],p=s[1];h-p===0&&!f&&(d?(h=new Date(h.getTime()*.5),p=new Date(p.getTime()*1.5)):(h=h===0?1:h*.5,p=p===0?-1:p*1.5)),(h||h===0)&&(l=d?new Date(h.getTime()-g.left):h-g.left),(p||p===0)&&(u=d?new Date(p.getTime()+g.right):p+g.right)}return r?[u,l]:[l,u]},updateXDomain:function(t,e,n,i,a){var r,s=this,o=s.config,l=s.org,c=s.scale,u=c.x,f=c.subX,d=o.zoom_enabled;if(n&&(u.domain(a||kt(s.getXDomain(t),!o.axis_x_inverted)),l.xDomain=u.domain(),f.domain(u.domain()),(r=s.brush)===null||r===void 0||r.scale(f)),e){var g=a||!s.brush||Il(s)?l.xDomain:Za(s).map(f.invert);u.domain(g)}return(n||e)&&d&&s.zoom.updateScaleExtent(),i&&u.domain(s.trimXDomain(u.orgDomain())),u.domain()},trimXDomain:function(t){var e=this,n=e.config.axis_x_inverted,i=e.getZoomDomain(),a=i[0],r=i[1];return(n?t[0]>=a:t[0]<=a)&&(t[1]=+t[1]+(a-t[0]),t[0]=a),(n?t[1]<=r:t[1]>=r)&&(t[0]=+t[0]-(t[1]-r),t[1]=r),t},getZoomDomain:function(t,e){t===void 0&&(t="zoom"),e===void 0&&(e=!1);var n=this,i=n.config,a=n.scale,r=n.org,s=e&&a[t]?a[t].domain():r.xDomain,o=s[0],l=s[1];return t==="zoom"&&(re(i.zoom_x_min)&&(o=et("min",[o,i.zoom_x_min])),re(i.zoom_x_max)&&(l=et("max",[l,i.zoom_x_max]))),[o,l]},getZoomDomainValue:function(t){var e=this,n=e.config,i=e.axis;if(i.isCategorized()&&Array.isArray(t)){var a=n.axis_x_inverted,r=t.map(function(s,o){return Number(s)+(o===0?+a:+!a)});return r}return t},convertPixelToScale:function(t,e,n){var i=this,a=i.config,r=i.state,s=a.axis_rotated,o;return t==="x"?o=s?"height":"width":o=s?"width":"height",n*(e/r[o])},withinRange:function(t,e,n){e===void 0&&(e=[0,0]);var i=this,a=i.config.axis_x_inverted,r=n,s=r[0],o=r[1];if(Array.isArray(t)){var l=oe([],t,!0);if(a&&l.reverse(),l[0]<l[1])return t.every(function(c,u){return(u===0?a?+c<=s:+c>=s:a?+c>=o:+c<=o)&&!t.every(function(f,d){return f===e[d]})})}return!1}};function Xi(t,e,n){var i=t.config,a="axis_".concat(e,"_tick_format"),r=i[a]?i[a]:t.defaultValueFormat;return r.call(t.api,n)}var dc={yFormat:function(t){return Xi(this,"y",t)},y2Format:function(t){return Xi(this,"y2",t)},getDefaultValueFormat:function(){var t=this,e=t.defaultArcValueFormat,n=t.yFormat,i=t.y2Format,a=t.hasArcType(null,["gauge","polar","radar"]);return function(r,s,o){var l=a?e:t.axis&&t.axis.getId(o)==="y2"?i:n;return l.call(t,r,s)}},defaultValueFormat:function(t){return Z(t)?t.join("~"):G(t)?+t:""},defaultArcValueFormat:function(t,e){return"".concat((e*100).toFixed(1),"%")},defaultPolarValueFormat:function(t){return"".concat(t)},dataLabelFormat:function(t){var e=this,n=e.config.data_labels,i=function(r){var s="~",o=r;return Z(r)?o=r.join(s):te(r)&&(o=Object.values(r).join(s)),o},a=i;return B(n.format)?a=n.format:Ye(n.format)&&(n.format[t]?a=n.format[t]===!0?i:n.format[t]:a=function(){return""}),a.bind(e.api)}};function rn(t){var e=this,n=e.getDataById(t),i=e.levelColor?e.levelColor(n.values[0].value):e.color(n);return i}function Bn(t,e){var n;e===void 0&&(e=!0);var i=this.config,a=(n=i.data_names[t])!==null&&n!==void 0?n:t;return e&&B(i.legend_format)&&(a=i.legend_format(a,t!==a?t:void 0)),a}var gc={initLegend:function(){var t=this,e=t.config,n=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(n.legend=t.$el.svg.append("g").classed(Q.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,n){var i,a=this,r=a.config,s=a.state,o=a.scale,l=a.$el,c=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};c.withTransition=it(c,"withTransition",!0),c.withTransitionForTransform=it(c,"withTransitionForTransform",!0),r.legend_contents_bindto&&r.legend_contents_template?a.updateLegendTemplate():s.hasTreemap||a.updateLegendElement(t||a.mapToIds(a.data.targets),c,n),(i=l.legend)===null||i===void 0||i.selectAll(".".concat(Q.legendItem)).classed(Q.legendItemHidden,function(u){var f=!a.isTargetToShow(u);return f&&(this.style.opacity=null),f}),a.updateScales(!1,!o.zoom),a.updateSvgSize(),a.transformAll(c.withTransitionForTransform,n),s.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,n=t.$el,i=z(e.legend_contents_bindto),a=e.legend_contents_template;if(!i.empty()){var r=t.mapToIds(t.data.targets),s=[],o="";r.forEach(function(c){var u=B(a)?a.bind(t.api)(c,t.color(c),t.api.data(c)[0].values):Qn(a,{COLOR:t.color(c),TITLE:c});u&&(s.push(c),o+=u)});var l=i.html(o).selectAll(function(){return this.childNodes}).data(s);t.setLegendItem(l),n.legend=i}},updateSizeForLegend:function(t){var e=this,n=e.config,i=e.state,a=i.isLegendTop,r=i.isLegendLeft,s=i.isLegendRight,o=i.isLegendInset,l=i.current,c=t.width,u=t.height,f={top:a?e.getCurrentPaddingByDirection("top")+n.legend_inset_y+5.5:l.height-u-e.getCurrentPaddingByDirection("bottom")-n.legend_inset_y,left:r?e.getCurrentPaddingByDirection("left")+n.legend_inset_x+.5:l.width-c-e.getCurrentPaddingByDirection("right")-n.legend_inset_x+.5};e.state.margin3={top:s?0:o?f.top:l.height-u,right:NaN,bottom:0,left:s?l.width-c:o?f.left:0}},transformLegend:function(t){var e=this,n=e.$el.legend,i=e.$T;i(n,t).attr("transform",e.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var n=this.$el.legend;n&&n.select(".".concat(Q.legendItem,"-").concat(t," line")).style("stroke",e)},getLegendWidth:function(){var t=this,e=t.state,n=e.current.width,i=e.isLegendRight,a=e.isLegendInset,r=e.legendItemWidth,s=e.legendStep;return t.config.legend_show?i||a?r*(s+1):n:0},getLegendHeight:function(){var t,e=this,n=e.state,i=n.current,a=n.isLegendRight,r=n.legendItemHeight,s=n.legendStep,o=((t=e.config.padding)===null||t===void 0?void 0:t.mode)==="fit",l=e.config.legend_show?a?i.height:Math.max(o?10:20,r)*(s+1):0;return l},opacityForUnfocusedLegend:function(t){return t.classed(Q.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this,i=n.$el.legend,a=n.$T,r=n.mapToTargetIds(t);i&&a(i.selectAll(".".concat(Q.legendItem)).filter(function(s){return r.indexOf(s)>=0}).classed(ie.legendItemFocused,e)).style("opacity",function(){return e?null:n.opacityForUnfocusedLegend.call(n,z(this))})},revertLegend:function(){var t=this,e=t.$el.legend,n=t.$T;e&&n(e.selectAll(".".concat(Q.legendItem)).classed(ie.legendItemFocused,!1)).style("opacity",null)},showLegend:function(t){var e=this,n=e.config,i=e.$el,a=e.$T;n.legend_show||(n.legend_show=!0,i.legend?i.legend.style("visibility",null):e.initLegend(),!e.state.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),a(i.legend.selectAll(e.selectorLegends(t)).style("visibility",null)).style("opacity",null)},hideLegend:function(t){var e=this,n=e.config,i=e.$el.legend;n.legend_show&&Ue(t)&&(n.legend_show=!1,i.style("visibility","hidden")),e.addHiddenLegendIds(t),i.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var n=this,i=n.cache,a=n.state,r,s=Be.legendItemTextBox;return t&&(r=!a.redrawing&&i.get(s)||{},r[t]||(r[t]=n.getTextRect(e,Q.legendItem),i.add(s,r)),r=r[t]),r},setLegendItem:function(t){var e=this,n=e.$el,i=e.api,a=e.config,r=e.state,s=r.inputType==="touch",o=e.hasType("gauge"),l=a.boost_useCssRule,c=a.legend_item_interaction;t.attr("class",function(u){var f=z(this),d=!f.empty()&&f.attr("class")||"";return d+e.generateClass(Q.legendItem,u)}).style("visibility",function(u){return e.isLegendToShow(u)?null:"hidden"}),a.interaction_enabled&&(l&&[[".".concat(Q.legendItem),"cursor:pointer"],[".".concat(Q.legendItem," text"),"pointer-events:none"],[".".concat(Q.legendItemPoint," text"),"pointer-events:none"],[".".concat(Q.legendItemTile),"pointer-events:none"],[".".concat(Q.legendItemEvent),"fill-opacity:0"]].forEach(function(u){var f=u[0],d=u[1];e.setCssRule(!1,f,[d])(n.legend)}),t.on(c.dblclick?"dblclick":"click",c||B(a.legend_item_onclick)?function(u,f){if(!fe(a.legend_item_onclick,i,f,!r.hiddenTargetIds.includes(f))){var d=u.altKey,g=u.target,h=u.type;h==="dblclick"||d?r.hiddenTargetIds.length&&g.parentNode.getAttribute("class").indexOf(Q.legendItemHidden)===-1?i.show():(i.hide(),i.show(f)):(i.toggle(f),z(this).classed(ie.legendItemFocused,!1))}s&&e.hideTooltip()}:null),!s&&t.on("mouseout",c||B(a.legend_item_onout)?function(u,f){fe(a.legend_item_onout,i,f,!r.hiddenTargetIds.includes(f))||(z(this).classed(ie.legendItemFocused,!1),o&&e.undoMarkOverlapped(e,".".concat(Gt.gaugeValue)),e.api.revert())}:null).on("mouseover",c||B(a.legend_item_onover)?function(u,f){fe(a.legend_item_onover,i,f,!r.hiddenTargetIds.includes(f))||(z(this).classed(ie.legendItemFocused,!0),o&&e.markOverlapped(f,e,".".concat(Gt.gaugeValue)),!r.transiting&&e.isTargetToShow(f)&&i.focus(f))}:null),!t.empty()&&t.on("click mouseout mouseover")&&t.style("cursor",e.getStylePropValue("pointer")))},updateLegendElement:function(t,e){var n=this,i=n.config,a=n.state,r=n.$el.legend,s=n.$T,o=i.legend_item_tile_type,l=o!=="circle",c=i.legend_item_tile_r,u={width:l?i.legend_item_tile_width:c*2,height:l?i.legend_item_tile_height:c*2},f={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:u.width+5,totalLength:0},d={offsets:{},widths:{},heights:{},margins:[0],steps:{}},g,h,p,v=t.filter(function(b){return!re(i.data_names[b])||i.data_names[b]!==null}),m=e.withTransition,x=n.getUpdateLegendPositions(v,f,d);a.isLegendInset&&(f.step=i.legend_inset_step?i.legend_inset_step:v.length,n.updateLegendStep(f.step)),a.isLegendRight?(g=function(b){return f.max.width*d.steps[b]},h=function(b){return d.margins[d.steps[b]]+d.offsets[b]}):a.isLegendInset?(g=function(b){return f.max.width*d.steps[b]+10},h=function(b){return d.margins[d.steps[b]]+d.offsets[b]}):(g=function(b){return d.margins[d.steps[b]]+d.offsets[b]},h=function(b){return f.max.height*d.steps[b]});var y={xText:function(b,T){return g(b,T)+4+u.width},xRect:function(b,T){return g(b,T)},x1Tile:function(b,T){return g(b,T)-2},x2Tile:function(b,T){return g(b,T)-2+u.width},yText:function(b,T){return h(b,T)+9},yRect:function(b,T){return h(b,T)-5},yTile:function(b,T){return h(b,T)+4}};n.generateLegendItem(v,u,x,y),p=r.select(".".concat(Q.legendBackground," rect")),a.isLegendInset&&f.max.width>0&&p.size()===0&&(p=r.insert("g",".".concat(Q.legendItem)).attr("class",Q.legendBackground).append("rect")),i.legend_tooltip&&r.selectAll("title").data(v).text(function(b){return Bn.bind(n)(b,!1)});var _=r.selectAll("text").data(v).text(function(b){return Bn.bind(n)(b)}).each(function(b,T){x(this,b,T)});s(_,m).attr("x",y.xText).attr("y",y.yText);var $=r.selectAll("rect.".concat(Q.legendItemEvent)).data(v);s($,m).attr("width",function(b){return d.widths[b]}).attr("height",function(b){return d.heights[b]}).attr("x",y.xRect).attr("y",y.yRect),n.updateLegendItemPos(v,m,y),p&&s(p,m).attr("height",n.getLegendHeight()-12).attr("width",f.max.width*(f.step+1)+10),n.updateLegendItemWidth(f.max.width),n.updateLegendItemHeight(f.max.height),n.updateLegendStep(f.step)},getUpdateLegendPositions:function(t,e,n){var i=this,a=i.config,r=i.state,s=r.isLegendRight||r.isLegendInset;return function(o,l,c){var u=c===0,f=c===t.length-1,d=i.getLegendItemTextBox(l,o),g=d.width+e.tileWidth+(f&&!s?0:e.padding.right)+a.legend_padding,h=d.height+e.padding.top,p=s?h:g,v=s?i.getLegendHeight():i.getLegendWidth(),m,x=function(_,$){$||(m=(v-e.totalLength-p)/2,m<e.posMin&&(m=(v-p)/2,e.totalLength=0,e.step++)),n.steps[_]=e.step,n.margins[e.step]=r.isLegendInset?10:m,n.offsets[_]=e.totalLength,e.totalLength+=p};if(u&&(e.totalLength=0,e.step=0,e.max.width=0,e.max.height=0),a.legend_show&&!i.isLegendToShow(l)){n.widths[l]=0,n.heights[l]=0,n.steps[l]=0,n.offsets[l]=0;return}n.widths[l]=g,n.heights[l]=h,(!e.max.width||g>=e.max.width)&&(e.max.width=g),(!e.max.height||h>=e.max.height)&&(e.max.height=h);var y=s?e.max.height:e.max.width;a.legend_equally?(Object.keys(n.widths).forEach(function(_){return n.widths[_]=e.max.width}),Object.keys(n.heights).forEach(function(_){return n.heights[_]=e.max.height}),m=(v-y*t.length)/2,m<e.posMin?(e.totalLength=0,e.step=0,t.forEach(function(_){return x(_)})):x(l,!0)):x(l)}},generateLegendItem:function(t,e,n,i){var a=this,r=a.config,s=a.state,o=a.$el.legend,l=r.legend_usePoint,c=r.legend_item_tile_r,u=r.legend_item_tile_type,f=u!=="circle",d=s.isLegendRight||s.isLegendInset,g=-200,h=o.selectAll(".".concat(Q.legendItem)).data(t).enter().append("g");if(a.setLegendItem(h),r.legend_tooltip&&h.append("title").text(function(v){return v}),h.append("text").text(function(v){return Bn.bind(a)(v)}).each(function(v,m){n(this,v,m)}).style("pointer-events",a.getStylePropValue("none")).attr("x",d?i.xText:g).attr("y",d?g:i.yText),h.append("rect").attr("class",Q.legendItemEvent).style("fill-opacity",a.getStylePropValue("0")).attr("x",d?i.xRect:g).attr("y",d?g:i.yRect),l){var p=[];h.append(function(v){var m=ce(r.point_pattern)?r.point_pattern:[r.point_type];p.indexOf(v)===-1&&p.push(v);var x=m[p.indexOf(v)%m.length];return x==="rectangle"&&(x="rect"),le.createElementNS(gn.svg,"hasValidPointType"in a&&a.hasValidPointType(x)?x:"use")}).attr("class",Q.legendItemPoint).style("fill",rn.bind(a)).style("pointer-events",a.getStylePropValue("none")).attr("href",function(v,m,x){var y=x[m],_=y.nodeName.toLowerCase(),$=a.getTargetSelectorSuffix(v);return _==="use"?"#".concat(s.datetimeId,"-point").concat($):void 0})}else h.append(f?"line":u).attr("class",Q.legendItemTile).style("stroke",rn.bind(a)).style("pointer-events",a.getStylePropValue("none")).call(function(v){u==="circle"?v.attr("r",c).style("fill",rn.bind(a)).attr("cx",d?i.x2Tile:g).attr("cy",d?g:i.yTile):f&&v.attr("stroke-width",e.height).attr("x1",d?i.x1Tile:g).attr("y1",d?g:i.yTile).attr("x2",d?i.x2Tile:g).attr("y2",d?g:i.yTile)})},updateLegendItemPos:function(t,e,n){var i=this,a=i.config,r=i.$el.legend,s=i.$T,o=a.legend_usePoint,l=a.legend_item_tile_type,c=l!=="circle";if(o){var u=r.selectAll(".".concat(Q.legendItemPoint)).data(t);s(u,e).each(function(){var f=this.nodeName.toLowerCase(),d=a.point_r,g="x",h="y",p=2,v=2.5,m=null,x=null,y=null;if(f==="circle"){var _=d*.2;g="cx",h="cy",m=d+_,p=d*2,v=-_}else if(f==="rect"){var _=d*2.5;x=_,y=_,v=3}z(this).attr(g,function($){return n.x1Tile($)+p}).attr(h,function($){return n.yTile($)-v}).attr("r",m).attr("width",x).attr("height",y)})}else{var u=r.selectAll(".".concat(Q.legendItemTile)).data(t);s(u,e).style("stroke",rn.bind(i)).call(function(d){l==="circle"?d.attr("cx",function(g){var h=n.x2Tile(g);return h-(h-n.x1Tile(g))/2}).attr("cy",n.yTile):c&&d.attr("x1",n.x1Tile).attr("y1",n.yTile).attr("x2",n.x2Tile).attr("y2",n.yTile)})}}},hc={redraw:function(t){var e,n,i,a;t===void 0&&(t={});var r=this,s=r.config,o=r.state,l=r.$el,c=l.main,u=l.treemap;o.redrawing=!0;var f=r.filterTargetsToShow(r.data.targets),d=t.flow,g=t.initializing,h=r.getWithOption(t),p=h.Transition?s.transition_duration:0,v=h.TransitionForExit?p:0,m=h.TransitionForAxis?p:0,x=(e=r.axis)===null||e===void 0?void 0:e.generateTransitions(m);r.updateSizes(g),h.Legend&&s.legend_show?(t.withTransition=!!p,!u&&r.updateLegend(r.mapToIds(r.data.targets),t,x)):h.Dimension&&r.updateDimension(!0),s.data_empty_label_text&&c.select("text.".concat(Ce.text,".").concat(K.empty)).attr("x",o.width/2).attr("y",o.height/2).text(s.data_empty_label_text).style("display",f.length?"none":null),o.hasAxis?(r.axis.redrawAxis(f,h,x,d,g),r.hasGrid()&&r.updateGrid(),s.regions.length&&r.updateRegion(),["bar","candlestick","line","area"].forEach(function(y){var _=je(y);(/^(line|area)$/.test(y)&&r.hasTypeOf(_)||r.hasType(y))&&r["update".concat(_)](h.TransitionForExit)}),l.text&&c.selectAll(".".concat(he.selectedCircles)).filter(r.isBarType.bind(r)).selectAll("circle").remove(),s.interaction_enabled&&!d&&h.EventRect&&(r.redrawEventRect(),(n=r.bindZoomEvent)===null||n===void 0||n.call(r))):(l.arcs&&r.redrawArc(p,v,h.Transform),l.radar&&r.redrawRadar(),l.polar&&r.redrawPolar(),l.funnel&&r.redrawFunnel(),u&&r.updateTreemap(v)),!o.resizing&&!u&&(r.hasPointType()||o.hasRadar)?r.updateCircle():!((i=r.hasLegendDefsPoint)===null||i===void 0)&&i.call(r)&&r.data.targets.forEach(r.point("create",this)),r.hasDataLabel()&&!r.hasArcType(null,["radar"])&&r.updateText(),(a=r.redrawTitle)===null||a===void 0||a.call(r),g&&r.updateTypesElements(),r.generateRedrawList(f,d,p,h.Subchart),r.updateTooltipOnRedraw(),r.callPluginHook("$redraw",t,p)},generateRedrawList:function(t,e,n,i){var a=this,r=a.config,s=a.state,o=a.getDrawShape();s.hasAxis&&r.subchart_show&&a.redrawSubchart(i,n,o);var l=e&&a.generateFlow({targets:t,flow:e,duration:e.duration,shape:o,xv:a.xv.bind(a)}),c=(n||l)&&Zt(),u=a.getRedrawList(o,e,l,c),f=function(){l&&l(),s.redrawing=!1,fe(r.onrendered,a.api)};if(f)if(c&&u.length){var d=tr();ss().duration(n).each(function(){u.reduce(function(g,h){return g.concat(h)},[]).forEach(function(g){return d.add(g)})}).call(d,f)}else s.transiting||f();a.mapToIds(a.data.targets).forEach(function(g){s.withoutFadeIn[g]=!0})},getRedrawList:function(t,e,n,i){var a=this,r=a.config,s=a.state,o=s.hasAxis,l=s.hasRadar,c=s.hasTreemap,u=a.$el.grid,f=t.pos,d=f.cx,g=f.cy,h=f.xForText,p=f.yForText,v=[];return o&&((r.grid_x_lines.length||r.grid_y_lines.length)&&v.push(a.redrawGrid(i)),r.regions.length&&v.push(a.redrawRegion(i)),Object.keys(t.type).forEach(function(m){var x=je(m),y=t.type[m];(/^(area|line)$/.test(m)&&a.hasTypeOf(x)||a.hasType(m))&&v.push(a["redraw".concat(x)](y,i))}),!e&&u.main&&v.push(a.updateGridFocus())),(!a.hasArcType()||l)&&ce(r.data_labels)&&r.data_labels!==!1&&v.push(a.redrawText(h,p,e,i)),(a.hasPointType()||l)&&!a.isPointFocusOnly()&&a.redrawCircle&&v.push(a.redrawCircle(d,g,i,n)),c&&v.push(a.redrawTreemap(i)),v},updateAndRedraw:function(t){t===void 0&&(t={});var e=this,n=e.config,i=e.state,a;t.withTransition=it(t,"withTransition",!0),t.withTransform=it(t,"withTransform",!1),t.withLegend=it(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=it(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(i.hasAxis&&(a=e.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),e.updateScales(),e.updateSvgSize(),e.transformAll(t.withTransitionForTransform,a)),e.redraw(t,a)}};function ht(t,e,n){t===void 0&&(t="linear");var i={linear:Vn,log:Es,_log:Cs,time:As,utc:Ss}[t]();return i.type=t,/_?log/.test(t)&&i.clamp(!0),i.range([e??0,n??1])}var vc={getXScale:function(t,e,n,i){var a=this,r=a.state.loading!=="append"&&a.scale.zoom||ht(a.axis.getAxisType("x"),t,e);return a.getCustomizedXScale(n?r.domain(n):r,i)},getYScale:function(t,e,n,i){var a=this,r=ht(a.axis.getAxisType(t),e,n);return i&&r.domain(i),r},getYScaleById:function(t,e){var n;e===void 0&&(e=!1);var i=((n=this.axis)===null||n===void 0?void 0:n.getId(t))==="y2",a=e?i?"subY2":"subY":i?"y2":"y";return this.scale[a]},getCustomizedXScale:function(t,e){var n=this,i=e||function(){return n.axis.x.tickOffset()},a=n.config.axis_x_inverted,r=function(o){return t(o)+i()};for(var s in t)r[s]=t[s];return r.orgDomain=function(){return t.domain()},r.orgScale=function(){return t},n.axis.isCategorized()&&(r.domain=function(o){var l=o;return arguments.length?(t.domain(l),r):(l=this.orgDomain(),a?[l[0]+1,l[1]]:[l[0],l[1]+1])}),r},updateScales:function(t,e){var n,i;e===void 0&&(e=!0);var a=this,r=a.axis,s=a.config,o=a.format,l=a.org,c=a.scale,u=a.state,f=u.current,d=u.width,g=u.height,h=u.width2,p=u.height2,v=u.hasAxis,m=u.hasTreemap;if(v){var x=s.axis_rotated,y=a.getResettedPadding(1),_={x:x?y:0,y:x?0:g,subX:x?1:0,subY:x?0:p},$={x:x?g:d,y:x?d:y,subX:x?g:d,subY:x?h:1},b=e&&((n=c.x)===null||n===void 0?void 0:n.orgDomain()),T=e&&l.xDomain;c.x=a.getXScale(_.x,$.x,b,function(){return r.x.tickOffset()}),c.subX=a.getXScale(_.x,$.x,T,function(k){var I;return k%1?0:((I=r.subX)!==null&&I!==void 0?I:r.x).tickOffset()}),o.xAxisTick=r.getXAxisTickFormat(),o.subXAxisTick=r.getXAxisTickFormat(!0),r.setAxis("x",c.x,s.axis_x_tick_outer,t),s.subchart_show&&r.setAxis("subX",c.subX,s.axis_x_tick_outer,t),c.y=a.getYScale("y",_.y,$.y,c.y?c.y.domain():s.axis_y_default),c.subY=a.getYScale("y",_.subY,$.subY,c.subY?c.subY.domain():s.axis_y_default),r.setAxis("y",c.y,s.axis_y_tick_outer,t),s.axis_y2_show&&(c.y2=a.getYScale("y2",_.y,$.y,c.y2?c.y2.domain():s.axis_y2_default),c.subY2=a.getYScale("y2",_.subY,$.subY,c.subY2?c.subY2.domain():s.axis_y2_default),r.setAxis("y2",c.y2,s.axis_y2_tick_outer,t))}else if(m){var A=a.getCurrentPadding();c.x=Vn().rangeRound([A.left,f.width-A.right]),c.y=Vn().rangeRound([A.top,f.height-A.bottom])}else(i=a.updateArc)===null||i===void 0||i.call(a)},xx:function(t){var e=this,n=e.config,i=e.scale,a=i.x,r=i.zoom,s=n.zoom_enabled&&r?r:a;return t?s(G(t.x)?t.x:t):null},xv:function(t){var e=this,n=e.axis,i=e.config,a=e.scale,r=a.x,s=a.zoom,o=i.zoom_enabled&&s?s:r,l=e.getBaseValue(t);return n.isTimeSeries()?l=De.call(e,l):n.isCategorized()&&W(l)&&(l=i.axis_x_categories.indexOf(l)),o(l)},yv:function(t){var e=this,n=e.scale,i=n.y,a=n.y2,r=t.axis&&t.axis==="y2"?a:i;return r(e.getBaseValue(t))},subxx:function(t){return t?this.scale.subX(t.x):null}},pc={setContainerSize:function(){var t=this,e=t.state;e.current.width=t.getCurrentWidth(),e.current.height=t.getCurrentHeight()},getCurrentWidth:function(){var t=this;return t.config.size_width||t.getParentWidth()},getCurrentHeight:function(){var t=this,e=t.config,n=e.size_height||t.getParentHeight();return n>0?n:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getParentRectValue:function(t){for(var e="offset".concat(je(t)),n=this.$el.chart.node(),i=0;i<30&&n&&n.tagName!=="BODY";){try{i=n.getBoundingClientRect()[t]}catch{e in n&&(i=n[e])}n=n.parentNode}var a=le.body[e];return i>a&&(i=a),i},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height"),e=0;return t&&(e=/px$/.test(t)?parseInt(t,10):this.getParentRectValue("height")),e},getSvgLeft:function(t){var e=this,n=e.config,i=e.state.hasAxis,a=e.$el,r=n.axis_rotated,s=r||!r&&!n.axis_y_inner,o=r?Ee.axisX:Ee.axisY,l=a.main.select(".".concat(o)).node(),c=i&&n["axis_".concat(r?"x":"y","_label")],u=0;if(i&&(W(c)||W(c.text)||/^inner-/.test(c?.position))){var f=a.main.select(".".concat(o,"-label"));f.empty()||(u=f.node().getBoundingClientRect().left)}var d=l&&s?l.getBoundingClientRect():{right:0},g=a.chart.node().getBoundingClientRect().left+u,h=e.hasArcType(),p=d.right-g-(h?0:e.getCurrentPaddingByDirection("left",t));return p>0?p:0},updateDimension:function(t){var e,n=this,i=n.config,a=n.state.hasAxis,r=n.$el;a&&!t&&n.axis.x&&i.axis_rotated&&((e=n.axis.subX)===null||e===void 0||e.create(r.axis.subX)),n.updateScales(t),n.updateSvgSize(),n.transformAll(!1)},updateSvgSize:function(){var t=this,e=t.config,n=t.state,i=n.clip,a=n.current,r=n.hasAxis,s=n.width,o=n.height,l=t.$el.svg;if(e.resize_auto==="viewBox"?l.attr("viewBox","0 0 ".concat(a.width," ").concat(a.height)):l.attr("width",a.width).attr("height",a.height),r){var c=l.select(".".concat(Ua.brush," .overlay")),u={width:0,height:0};c.size()&&(u.width=+c.attr("width"),u.height=+c.attr("height")),l.selectAll(["#".concat(i.id),"#".concat(i.idGrid)]).select("rect").attr("width",s).attr("height",o),l.select("#".concat(i.idXAxis)).select("rect").call(t.setXAxisClipPath.bind(t)),l.select("#".concat(i.idYAxis)).select("rect").call(t.setYAxisClipPath.bind(t)),i.idSubchart&&l.select("#".concat(i.idSubchart)).select("rect").attr("width",s).attr("height",u.height)}},getCurrentPaddingByDirection:function(t,e,n){var i;e===void 0&&(e=!1),n===void 0&&(n=!1);var a=this,r=a.config,s=a.$el,o=a.state.hasAxis,l=r.axis_rotated,c=((i=r.padding)===null||i===void 0?void 0:i.mode)==="fit",u=Y(r["padding_".concat(t)])?r["padding_".concat(t)]:void 0,f=o?{top:l?"y2":null,bottom:l?"y":"x",left:l?"x":"y",right:l?null:"y2"}[t]:null,d=/^(left|right)$/.test(t),g=f&&r["axis_".concat(f,"_inner")],h=f&&r["axis_".concat(f,"_show")],p=f?r["axis_".concat(f,"_axes")].length:0,v=f?d?a.getAxisWidthByAxisId(f,e):a.getHorizontalAxisHeight(f):0,m=20,x=0;!c&&d&&(v=Rl(v));var y=o&&d&&(g||$e(u)&&!h)?0:c?(h?v:0)+(u??0):$e(u)?v:u;return d&&o?(f&&(c||g)&&r["axis_".concat(f,"_label")].text&&(y+=a.axis.getAxisLabelPosition(f).isOuter?m:0),t==="right"?(y+=l?!c&&$e(u)?10:2:!h||g?c?2:1:0,y+=n?a.axis.getXAxisTickTextY2Overflow(m):0):t==="left"&&l&&$e(u)&&(y=r.axis_x_show?c?v:Math.max(v,40):1)):t==="top"?(s.title&&s.title.node()&&(y+=a.getTitlePadding()),x=l&&!g?p:0):t==="bottom"&&o&&l&&!h&&(y+=1),y+v*p-x},getCurrentPadding:function(t){t===void 0&&(t=!1);var e=this,n=["top","bottom","left","right"].map(function(o){return e.getCurrentPaddingByDirection(o,null,t)}),i=n[0],a=n[1],r=n[2],s=n[3];return{top:i,bottom:a,left:r,right:s}},getResettedPadding:function(t){var e=this,n=e.config,i=Y(t),a=i?0:{};return n.padding===!1?!i&&Object.keys(t).forEach(function(r){a[r]=!Ue(n.data_labels)&&n.data_labels!==!1&&r==="top"?t[r]:0}):a=t,a},updateSizes:function(t){var e,n,i,a,r,s=this,o=s.config,l=s.state,c=s.$el.legend,u=o.axis_rotated,f=s.hasArcType()||l.hasFunnel||l.hasTreemap,d=((e=o.padding)===null||e===void 0?void 0:e.mode)==="fit";!t&&s.setContainerSize();var g={width:c?s.getLegendWidth():0,height:c?s.getLegendHeight():0};!f&&o.axis_x_show&&o.axis_x_tick_autorotate&&s.updateXAxisTickClip();var h={right:o.legend_show&&l.isLegendRight?s.getLegendWidth()+(d?0:20):0,bottom:!o.legend_show||l.isLegendRight||l.isLegendInset?0:g.height},p=u||f?0:s.getHorizontalAxisHeight("x"),v=o.subchart_axis_x_show&&o.subchart_axis_x_tick_text_show?p:30,m=o.subchart_show&&!f?o.subchart_size_height+v:0,x=s.hasType("gauge")&&o.arc_needle_show&&!o.gauge_fullCircle&&!o.gauge_label_show?10:0,y=s.getCurrentPadding(!0);if(l.margin=!f&&u?{top:y.top,right:f?0:y.right+h.right,bottom:h.bottom+y.bottom,left:m+(f?0:y.left)}:{top:(d?0:4)+y.top,right:f?0:y.right+h.right,bottom:x+m+h.bottom+y.bottom,left:f?0:y.left},l.margin=s.getResettedPadding(l.margin),l.margin2=u?{top:l.margin.top,right:NaN,bottom:20+h.bottom,left:s.state.rotatedPadding.left}:{top:l.current.height-m-h.bottom,right:NaN,bottom:v+h.bottom,left:l.margin.left},l.margin3={top:0,right:NaN,bottom:0,left:0},(n=s.updateSizeForLegend)===null||n===void 0||n.call(s,g),l.width=l.current.width-l.margin.left-l.margin.right,l.height=l.current.height-l.margin.top-l.margin.bottom,l.width<0&&(l.width=0),l.height<0&&(l.height=0),l.width2=u?l.margin.left-l.rotatedPadding.left-l.rotatedPadding.right:l.width,l.height2=u?l.height:l.current.height-l.margin2.top-l.margin2.bottom,l.width2<0&&(l.width2=0),l.height2<0&&(l.height2=0),s.hasArcType()){var _=s.hasType("gauge"),$=o.legend_show&&l.isLegendRight,b=(i=l.hasRadar&&s.cache.get(Be.radarTextWidth))!==null&&i!==void 0?i:0;l.arcWidth=l.width-($?g.width+10:0)-b,l.arcHeight=l.height-($&&!_?0:10),!((a=o.arc_rangeText_values)===null||a===void 0)&&a.length&&(_?(l.arcWidth-=25,l.arcHeight-=10,l.margin.left+=10):(l.arcHeight-=20,l.margin.top+=10)),_&&!o.gauge_fullCircle&&(l.arcHeight+=l.height-s.getPaddingBottomForGauge()),(r=s.updateRadius)===null||r===void 0||r.call(s)}l.isLegendRight&&f&&(l.margin3.left=l.arcWidth/2+l.radiusExpanded*1.1)}},mc={setCssRule:function(t,e,n,i){var a=this,r=a.config,s=a.state,o=s.cssRule,l=s.style;return r.boost_useCssRule?function(c){c.each(function(u){var f=i&&i?.call(a,u),d="".concat(t?".".concat(be.shapes+a.getTargetSelectorSuffix(u.id)):"").concat(e);e in o&&l.sheet.deleteRule(o[d]),a.state.cssRule[d]=Dl(l,d,n.filter(Boolean).map(function(g){return W(f)&&g.indexOf(":")===-1?"".concat(g,": ").concat(f):g||""}))})}:function(){}},getStylePropValue:function(t){var e=this.config.boost_useCssRule;return e?null:B(t)?t.bind(this):t}};function xc(t){var e="middle";return t>0&&t<=170?e="end":t>190&&t<=360&&(e="start"),e}function yc(t,e,n,i,a){var r,s=this,o=t.value,l=s.isCandlestickType(t),c=Y(o)&&o<0||l&&!(!((r=s.getCandlestickData(t))===null||r===void 0)&&r._isUp),u=e.x,f=e.y,d=4,g=d*2;return i?n==="start"?(u+=c?0:g,f+=d):n==="middle"?(u+=g,f-=g):n==="end"&&(c&&(u-=g),f+=d):(n==="start"?(u+=d,c&&(f+=g*2)):n==="middle"?f-=g:n==="end"&&(u-=d,c&&(f+=g*2)),a&&(f+=c?-17:l?13:7)),{x:u,y:f}}function Vi(t,e){var n,i=this.config.data_labels_position,a=t.id,r=t.index,s=t.value;return(n=B(i)?i.bind(this.api)(e,s,a,r,this.$el.text):(a in i?i[a]:i)[e])!==null&&n!==void 0?n:0}var _c={opacityForText:function(t){var e=this;return e.isBarType(t)&&!e.meetsLabelThreshold(Math.abs(e.getRatio("bar",t)),"bar")?"0":e.hasDataLabel?null:"0"},initText:function(){var t=this.$el;t.main.select(".".concat(K.chart)).append("g").attr("class",Ce.chartTexts).style("pointer-events",t.funnel||t.treemap?"none":null)},updateTargetsForText:function(t){var e=this,n=e.getChartClass("Text"),i=e.getClass("texts","id"),a=e.classFocus.bind(e),r=e.$el.main.select(".".concat(Ce.chartTexts)).selectAll(".".concat(Ce.chartText)).data(t).attr("class",function(o){return"".concat(n(o)).concat(a(o)).trim()}),s=r.enter().append("g").style("opacity","0").attr("class",n).call(e.setCssRule(!0," .".concat(Ce.text),["fill","pointer-events:none"],e.updateTextColor));s.append("g").attr("class",i)},updateText:function(){var t=this,e=t.$el,n=t.$T,i=t.config,a=t.axis,r=t.getClass("text","index"),s=i.data_labels.centered,o=e.main.selectAll(".".concat(Ce.texts)).selectAll(".".concat(Ce.text)).data(t.labelishData.bind(t));n(o.exit()).style("fill-opacity","0").remove(),e.text=o.enter().append("text").merge(o).attr("class",r).attr("text-anchor",function(l){var c=i["axis_".concat(a?.getId(l.id),"_inverted")],u=c?l.value>0:l.value<0;if(t.isCandlestickType(l)){var f=t.getCandlestickData(l);u=!f?._isUp}else if(t.isTreemapType(l))return s?"middle":"start";return i.axis_rotated?u?"end":"start":"middle"}).style("fill",t.getStylePropValue(t.updateTextColor)).style("fill-opacity","0").each(function(l,c,u){var f=z(this),d=l.value;if(t.isBubbleZType(l))d=t.getBubbleZData(d,"z");else if(t.isCandlestickType(l)){var g=t.getCandlestickData(l);g&&(d=g.close)}d=t.isTreemapType(l)?t.treemapDataLabelFormat(l)(f):t.dataLabelFormat(l.id)(d,l.id,l.index,u),Y(d)?this.textContent=d:Ja(f,d)})},updateTextColor:function(t){var e=this,n=e.config,i=n.data_labels_colors,a=e.isArcType(t)&&!e.isRadarType(t)||e.isFunnelType(t)||e.isTreemapType(t)?null:e.color(t),r;if(W(i))r=i;else if(te(i)){var s=(t.data||t).id;r=i[s]}else B(i)&&(r=i.bind(e.api)(a,t));if(e.isCandlestickType(t)&&!B(i)){var o=e.getCandlestickData(t);if(!o?._isUp){var l=n.candlestick_color_down;r=te(l)?l[t.id]:l}}return r||a},updateTextBGColor:function(t,e){var n=this,i=n.$el,a="";if(W(e)||te(e)){var r=W(e)?"":n.getTargetSelectorSuffix("id"in t?t.id:t.data.id),s=i.defs.select(["filter[id*='labels-bg","']"].join(r));s.size()&&(a="url(#".concat(s.attr("id"),")"))}return a||null},redrawText:function(t,e,n,i){var a=this,r=a.$T,s=a.axis,o=a.config,l=a.state.hasTreemap,c=Pt(!0),u=o.axis_rotated,f=o.data_labels.rotate,d=xc(f),g=f?"rotate(".concat(f,")"):"";return a.$el.text.style("fill",a.getStylePropValue(a.updateTextColor)).attr("filter",function(h){return a.updateTextBGColor.bind(a)(h,o.data_labels_backgroundColors)}).style("fill-opacity",n?0:a.opacityForText.bind(a)).each(function(h,p){var v=r(l&&this.childElementCount?this.parentNode:this,!!(i&&this.getAttribute("x")),c),m=o["axis_".concat(s?.getId(h.id),"_inverted")],x={x:t.bind(this)(h,p),y:e.bind(this)(h,p)};f&&(x=yc.bind(a)(h,x,d,u,m),v.attr("text-anchor",d)),this.childElementCount||f?v.attr("transform","translate(".concat(x.x," ").concat(x.y,") ").concat(g)):v.attr("x",x.x).attr("y",x.y)}),!0},getTextRect:function(t,e){var n=this,i=t.node?t.node():t;/text/i.test(i.tagName)||(i=i.querySelector("text"));var a=i.textContent,r="".concat(Be.textRect,"-").concat(a.replace(/\W/g,"_")),s=n.cache.get(r);return s||(n.$el.svg.append("text").style("visibility","hidden").style("font",z(i).style("font")).classed(e,!0).text(a).call(function(o){s=zt(o.node())}).remove(),n.cache.add(r,s)),s},generateXYForText:function(t,e){var n=this,i=n.state,a=i.hasRadar,r=i.hasFunnel,s=i.hasTreemap,o=Object.keys(t),l={},c=e?n.getXForText:n.getYForText;return r&&o.push("funnel"),a&&o.push("radar"),s&&o.push("treemap"),o.forEach(function(u){l[u]=n["generateGet".concat(je(u),"Points")](t[u],!1)}),function(u,f){var d=n.isAreaType(u)&&"area"||n.isBarType(u)&&"bar"||n.isCandlestickType(u)&&"candlestick"||n.isFunnelType(u)&&"funnel"||n.isRadarType(u)&&"radar"||n.isTreemapType(u)&&"treemap"||"line";return c.call(n,l[d](u,f),u,this)}},getCenteredTextPos:function(t,e,n,i){var a=this,r=a.config,s=r.axis_rotated,o=a.isBarType(t),l=a.isTreemapType(t);if(r.data_labels.centered&&(o||l)){var c=zt(n);if(o){var u=a.getRangedData(t,null,"bar")>=0;if(s){var f=(u?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+c.width/2;return u?-f-3:f+2}else{var d=(u?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+c.height/2;return u?d:-d-2}}else if(l)return i==="x"?(e[1][0]-e[0][0])/2:(e[1][1]-e[0][1])/2+c.height/2}return 0},getXForText:function(t,e,n){var i,a=this,r=a.config,s=r.axis_rotated,o=a.isFunnelType(e),l=a.isTreemapType(e),c=t?t[0][0]:0;if(a.isCandlestickType(e))s?c=!((i=a.getCandlestickData(e))===null||i===void 0)&&i._isUp?t[2][2]+4:t[2][1]-4:c+=(t[1][0]-c)/2;else if(o)c+=a.state.current.width/2;else if(l)c+=r.data_labels.centered?0:5;else if(s){var u=r["axis_".concat(a.axis.getId(e.id),"_inverted")],f=a.isBarType(e)?4:6,d=e.value;c=t[2][1],u?c-=f*(d>0?1:-1):c+=f*(d<0?-1:1)}else c=a.hasType("bar")?(t[2][0]+t[0][0])/2:c;return(s||l)&&(c+=a.getCenteredTextPos(e,t,n,"x")),c+Vi.call(this,e,"x")},getYForText:function(t,e,n){var i=this,a=i.axis,r=i.config,s=i.state,o=r.axis_rotated,l=r["axis_".concat(a?.getId(e.id),"_inverted")],c=i.isBarType(e),u=i.isFunnelType(e),f=i.isTreemapType(e),d=r.point_r,g=zt(n),h=e.value,p=3,v;if(i.isCandlestickType(e))h=i.getCandlestickData(e),o?(v=t[0][0],v+=(t[1][0]-v)/2+p):(v=h&&h._isUp?t[2][2]-p:t[2][1]+p*4,l&&(v+=15*(h._isUp?1:-1)));else if(u)v=t?t[0][1]+(t[1][1]-t[0][1])/2+g.height/2-3:0;else if(f)v=t[0][1]+(r.data_labels.centered?0:g.height+5);else if(o)v=(t[0][0]+t[2][0]+g.height*.6)/2;else if(v=t[2][1],Y(d)&&d>5&&(i.isLineType(e)||i.isScatterType(e))&&(p+=r.point_r/2.3),h<0||h===0&&!s.hasPositiveValue&&s.hasNegativeValue)v+=l?c?-3:-5:g.height+(c?-p:p);else{var m=-p*2;c?m=-p:i.isBubbleType(e)&&(m=p),l&&(m=c?10:15),v+=m}return(!o||f)&&(v+=i.getCenteredTextPos(e,t,n,"y")),v+Vi.call(this,e,"y")},markOverlapped:function(t,e,n){var i=e.$el.arcs.selectAll(n),a=i.filter(function(l){return l.data.id!==t}),r=i.filter(function(l){return l.data.id===t}),s=Mi(r.node()),o=function(l,c){return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))};r.node()&&a.each(function(){var l=Mi(this),c=z(this),u=o(s.e,s.f)>o(l.e,l.f)?r:c,f=Math.ceil(Math.abs(s.e-l.e))<Math.ceil(u.node().getComputedTextLength()),d=Math.ceil(Math.abs(s.f-l.f))<parseInt(r.style("font-size"),10);c.classed(Ce.TextOverlapping,f&&d)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){da([this,this.previousSibling]).classed(Ce.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){t===void 0&&(t=0);var n=this,i=n.config,a=i["".concat(e,"_label_threshold")]||0;return t>=a}};function ji(t,e){t===void 0&&(t="left");var n=Y(e),i;return t.indexOf("center")>-1?i=n?e/2:"middle":t.indexOf("right")>-1?i=n?e:"end":i=n?0:"start",i}var bc={initTitle:function(){var t=this,e=t.config,n=t.$el;if(e.title_text){n.title=n.svg.append("g");var i=n.title.append("text").style("text-anchor",ji(e.title_position)).attr("class",Ce.title);Ja(i,e.title_text,[.3,1.5])}},redrawTitle:function(){var t=this,e=t.config,n=t.state.current,i=t.$el.title;if(i){var a=ji(e.title_position,n.width),r=(e.title_padding.top||0)+t.getTextRect(t.$el.title,Ce.title).height;i.attr("transform","translate(".concat(a,", ").concat(r,")"))}},getTitlePadding:function(){var t=this,e=t.$el.title,n=t.config;return(n.title_padding.top||0)+(e?t.getTextRect(e,Ce.title).height:0)+(n.title_padding.bottom||0)}},$c={initTooltip:function(){var t=this,e=t.config,n=t.$el;n.tooltip=z(e.tooltip_contents.bindto),n.tooltip.empty()&&(n.tooltip=n.chart.append("div").attr("class",fn.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),t.bindTooltipResizePos()},initShowTooltip:function(){var t,e,n=this,i=n.config,a=n.$el,r=n.state,s=r.hasAxis,o=r.hasRadar;if(i.tooltip_init_show){var l=!(s||o);!((e=n.axis)===null||e===void 0)&&e.isTimeSeries()&&W(i.tooltip_init_x)&&(i.tooltip_init_x=De.call(n,i.tooltip_init_x)),n.api.tooltip.show({data:(t={},t[l?"index":"x"]=i.tooltip_init_x,t)});var c=i.tooltip_init_position;if(!i.tooltip_contents.bindto&&!Ue(c)){var u=c.top,f=u===void 0?0:u,d=c.left,g=d===void 0?50:d;a.tooltip.style("top",W(f)?f:"".concat(f,"px")).style("left",W(g)?g:"".concat(g,"px")).style("display",null)}}},getTooltipHTML:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this,i=n.api,a=n.config;return B(a.tooltip_contents)?a.tooltip_contents.bind(i).apply(void 0,t):n.getTooltipContent.apply(n,t)},getTooltipContent:function(t,e,n,i){var a,r=this,s=r.api,o=r.config,l=r.state,c=r.$el,u=["title","name","value"].map(function(S){var L=o["tooltip_format_".concat(S)];return B(L)?L.bind(s):L}),f=u[0],d=u[1],g=u[2],h=function(){for(var S=[],L=0;L<arguments.length;L++)S[L]=arguments[L];return Pn((f||e).apply(void 0,S))},p=function(){for(var S=[],L=0;L<arguments.length;L++)S[L]=arguments[L];return Pn((d||function(N){return N}).apply(void 0,S))},v=function(){for(var S=[],L=0;L<arguments.length;L++)S[L]=arguments[L];var N=g||(l.hasTreemap||r.isStackNormalized()?function(M,Te){return"".concat((Te*100).toFixed(2),"%")}:n);return Pn(N.apply(void 0,S))},m=o.tooltip_order,x=function(S){return r.axis&&r.isBubbleZType(S)?r.getBubbleZData(S.value,"z"):r.getBaseValue(S)},y=r.levelColor?function(S){return r.levelColor(S.value)}:function(S){return i(S)},_=o.tooltip_contents,$=_.template,b=r.mapToTargetIds();if(m===null&&o.data_groups.length){var T=r.orderTargets(r.data.targets).map(function(S){return S.id}).reverse();t.sort(function(S,L){var N=S?S.value:null,M=L?L.value:null;return N>0&&M>0&&(N=S.id?T.indexOf(S.id):null,M=L.id?T.indexOf(L.id):null),N-M})}else if(/^(asc|desc)$/.test(m)){var A=m==="asc";t.sort(function(S,L){var N=S?x(S):null,M=L?x(L):null;return A?N-M:M-N})}else B(m)&&t.sort(m.bind(s));var k=r.getTooltipContentTemplate($),I=t.length,R,C,D,O,ee,st=function(){if(C=t[ee],!C||!(x(C)||x(C)===0))return"continue";if($e(R)){var S=(l.hasAxis||l.hasRadar)&&h(C.x);R=Qn(k[0],{CLASS_TOOLTIP:fn.tooltip,TITLE:G(S)?$?S:'<tr><th colspan="2">'.concat(S,"</th></tr>"):""})}if(!C.ratio&&c.arcs&&(D=["arc",r.$el.arcs.select("path.".concat(qt.arc,"-").concat(C.id)).data()[0]],C.ratio=r.getRatio.apply(r,D)),D=[C.ratio,C.id,C.index],r.isAreaRangeType(C)){var L=["high","low"].map(function(We){return v.apply(void 0,oe([r.getRangedData(C,We)],D,!1))}),N=L[0],M=L[1],Te=v.apply(void 0,oe([x(C)],D,!1));O="<b>Mid:</b> ".concat(Te," <b>High:</b> ").concat(N," <b>Low:</b> ").concat(M)}else if(r.isCandlestickType(C)){var ne=["open","high","low","close","volume"].map(function(pt){var mt=r.getRangedData(C,pt,"candlestick");return mt?v.apply(void 0,oe([r.getRangedData(C,pt,"candlestick")],D,!1)):void 0}),Se=ne[0],N=ne[1],M=ne[2],U=ne[3],q=ne[4];O="<b>Open:</b> ".concat(Se," <b>High:</b> ").concat(N," <b>Low:</b> ").concat(M," <b>Close:</b> ").concat(U).concat(q?" <b>Volume:</b> ".concat(q):"")}else if(r.isBarRangeType(C)){var P=C.value,pe=C.id,me=C.index;O="".concat(v(P,void 0,pe,me))}else O=v.apply(void 0,oe([x(C)],D,!1));if(O!==void 0){if(C.name===null)return"continue";var Re=p.apply(void 0,oe([(a=C.name)!==null&&a!==void 0?a:C.id],D,!1)),qe=y(C),He={CLASS_TOOLTIP_NAME:fn.tooltipName+r.getTargetSelectorSuffix(C.id),COLOR:$||!r.patterns?qe:'<svg><rect style="fill:'.concat(qe,'" width="10" height="10"></rect></svg>'),NAME:Re,VALUE:O};if($&&te(_.text)){var ot=b.indexOf(C.id);Object.keys(_.text).forEach(function(We){He[We]=_.text[We][ot]})}R+=Qn(k[1],He)}};for(ee=0;ee<I;ee++)st();return"".concat(R,"</table>")},getTooltipContentTemplate:function(t){return(t||`<table class="{=CLASS_TOOLTIP}"><tbody>
				{=TITLE}
				{{<tr class="{=CLASS_TOOLTIP_NAME}">
					<td class="name">`.concat(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>',`{=NAME}</td>
					<td class="value">{=VALUE}</td>
				</tr>}}
			</tbody></table>`)).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},setTooltipPosition:function(t,e){var n,i,a=this,r=a.config,s=a.scale,o=a.state,l=a.$el,c=l.eventRect,u=l.tooltip,f=l.svg,d=r.tooltip_contents.bindto,g=r.axis_rotated,h=u?.datum();if(!d&&h){var p=t??JSON.parse(h.current),v=Ve(o.event,e??c?.node()),m=v[0],x=v[1],y={x:m,y:x};if(o.hasAxis&&s.x&&h&&"x"in h){var _=function(I,R,C){var D;I===void 0&&(I=0),C===void 0&&(C="y");var O=s[R?(D=a.axis)===null||D===void 0?void 0:D.getId(R):C];return O?O(I)+(g?o.margin.left:o.margin.top):0};y.xAxis=s.x(h.x)+(r.tooltip_position?g?o.margin.top:o.margin.left:0),p.length===1?y.yAxis=_(p[0].value,p[0].id):y.yAxis=_}var $=h.width,b=$===void 0?0:$,T=h.height,A=T===void 0?0:T,k=(i=(n=r.tooltip_position)===null||n===void 0?void 0:n.bind(a.api)(p,b,A,c?.node(),y))!==null&&i!==void 0?i:Ti(f)?a.getTooltipPositionViewBox.bind(a)(b,A,y):a.getTooltipPosition.bind(a)(b,A,y);["top","left"].forEach(function(I){var R=k[I];u.style(I,"".concat(R,"px")),I==="left"&&!h.xPosInPercent&&(h.xPosInPercent=R/o.current.width*100)})}},getTooltipPositionViewBox:function(t,e,n){var i,a,r=this,s=r.$el,o=s.eventRect,l=s.svg,c=r.config,u=r.state,f=c.axis_rotated,d=r.hasArcType()||u.hasFunnel||u.hasTreemap,g=(a=(i=d?l:o)===null||i===void 0?void 0:i.node())!==null&&a!==void 0?a:u.event.target,h=n.x,p=n.y;u.hasAxis&&(h=f?h:n.xAxis,p=f?n.xAxis:p);var v=xn(g,h,p,!1),m=g.getBoundingClientRect(),x=xn(g,20,0,!1).x,y=v.y,_=v.x+t/2+x;return d&&(u.hasFunnel||u.hasTreemap||u.hasRadar?(_-=t/2+x,y+=e):(y+=m.height/2,_+=m.width/2-(t-x))),_+t>m.width&&(_=m.width-t-x),y+e>m.height&&(y-=e*2),{top:y,left:_}},getTooltipPosition:function(t,e,n){var i,a,r,s=this,o=s.config,l=s.scale,c=s.state,u=c.width,f=c.height,d=c.current,g=c.hasFunnel,h=c.hasRadar,p=c.hasTreemap,v=c.isLegendRight,m=c.inputType,x=s.hasType("gauge")&&!o.gauge_fullCircle,y=o.axis_rotated,_=s.hasArcType(),$=s.getSvgLeft(!0),b=$+d.width-s.getCurrentPaddingByDirection("right"),T=20,A=n.x,k=n.y;if(h)A+=A>=u/2?15:-(t+15),k+=15;else if(_){var I=m!=="touch";if(I){var R=(a=(i=s.getTitlePadding)===null||i===void 0?void 0:i.call(s))!==null&&a!==void 0?a:0;R&&x&&(!((r=o.arc_rangeText_values)===null||r===void 0)&&r.length)&&(R+=10),A+=(u-(v?s.getLegendWidth():0))/2,k+=(x?f:f/2+e)+R}}else if(g||p)k+=e;else{var C={top:s.getCurrentPaddingByDirection("top",!0),left:s.getCurrentPaddingByDirection("left",!0)};y?(A+=$+C.left+T,k=C.top+n.xAxis+T,b-=$):(A=$+C.left+T+(l.zoom?A:n.xAxis),k+=C.top-5)}if(A+t+15>b&&(A-=t+(g||p||_?0:y?T*2:38)),k+e>d.height){var D=p?e+10:30;k-=x?e*1.5:e+D}var O={top:k,left:A};return Object.keys(O).forEach(function(ee){O[ee]<0&&(O[ee]=0)}),O},showTooltip:function(t,e){var n=this,i=n.config,a=n.$el.tooltip,r=t.filter(function(f){return f&&G(n.getBaseValue(f))});if(!(!a||r.length===0||!i.tooltip_show)){var s=a.datum(),o=JSON.stringify(t);if(!s||s.current!==o){var l=t.concat().sort()[0],c=l.index,u=l.x;fe(i.tooltip_onshow,n.api,t),a.html(n.getTooltipHTML(t,n.axis?n.axis.getXAxisTickFormat():n.categoryName.bind(n),n.getDefaultValueFormat(),n.color)).style("display",null).style("visibility",null).datum(s={index:c,x:u,current:o,width:a.property("offsetWidth"),height:a.property("offsetHeight")}),fe(i.tooltip_onshown,n.api,t),n._handleLinkedCharts(!0,c)}n.setTooltipPosition(r,e)}},bindTooltipResizePos:function(){var t=this,e=t.resizeFunction,n=t.state,i=t.$el.tooltip;e.add(function(){if(i.style("display")==="block"){var a=n.current,r=i.datum(),s=r.width,o=r.xPosInPercent,l=a.width/100*o,c=a.width-(l+s);c<0&&(l+=c),i.style("left","".concat(l,"px"))}})},hideTooltip:function(t){var e,n=this,i=n.api,a=n.config,r=n.$el.tooltip;if(r&&r.style("display")!=="none"&&(!a.tooltip_doNotHide||t)){var s=JSON.parse((e=r.datum().current)!==null&&e!==void 0?e:{});fe(a.tooltip_onhide,i,s),r.style("display","none").style("visibility","hidden").datum(null),fe(a.tooltip_onhidden,i,s)}},_handleLinkedCharts:function(t,e){var n=this,i=n.charts,a=n.config,r=n.state.event;if(r?.isTrusted&&a.tooltip_linked&&i.length>1){var s=a.tooltip_linked_name;i.filter(function(o){return o!==n.api}).forEach(function(o){var l=o.internal,c=l.config,u=l.$el,f=c.tooltip_linked,d=c.tooltip_linked_name,g=le.body.contains(u.chart.node());if(f&&s===d&&g){var h=u.tooltip.data()[0],p=e!==h?.index;try{o.tooltip[t&&p?"show":"hide"]({index:e})}catch{}}})}},updateTooltipOnRedraw:function(t,e){var n,i=this,a=i.config,r=i.$el,s=r.eventRect,o=r.svg,l=r.tooltip,c=i.state,u=c.event,f=c.hasAxis,d=c.hasRadar,g=c.hasTreemap;if(l?.style("display")==="block"&&u){var h=t??((n=d?o:s)===null||n===void 0?void 0:n.node());if(f||d)if(i.isMultipleX())i.selectRectForMultipleXs(h,!1);else{var p=e??i.getDataIndexFromEvent(u);e===-1?i.api.tooltip.hide():(i.selectRectForSingle(h,p),i.setExpand(p,null,!0))}else{var v=u.clientX,m=u.clientY;setTimeout(function(){var x=[v,m].every(Number.isFinite)&&le.elementFromPoint(v,m),y=x&&z(x).datum();if(y){var _=i.hasArcType()?i.convertToArcData(i.updateAngle(y)):y?.data;g&&(x=o.node()),_&&i.showTooltip([_],x)}else i.api.tooltip.hide()},a.transition_duration)}}}},Tc={getTranslate:function(t,e){var n;e===void 0&&(e=0);var i=this,a=i.config,r=i.state,s=a.axis_rotated,o=0,l,c;if(e&&/^(x|y2?)$/.test(t)&&(o=i.getAxisSize(t)*e),t==="main")l=an(r.margin.left),c=an(r.margin.top);else if(t==="context")l=an(r.margin2.left),c=an(r.margin2.top);else if(t==="legend")l=r.margin3.left,c=r.margin3.top;else if(t==="x")l=s?-o:0,c=s?0:r.height+o;else if(t==="y")l=s?0:-o,c=s?r.height+o:0;else if(t==="y2")l=s?0:r.width+o,c=s?-o-1:0;else if(t==="subX")l=0,c=s?0:r.height2;else if(t==="arc")l=r.arcWidth/2,c=r.arcHeight/2,!((n=a.arc_rangeText_values)===null||n===void 0)&&n.length&&(c+=5+(i.hasType("gauge")&&a.title_text?10:0));else if(t==="polar")l=r.arcWidth/2,c=r.arcHeight/2;else if(t==="radar"){var u=i.getRadarSize(),f=u[0],d=u[1];l=r.width/2-f,c=r.height/2-d}return"translate(".concat(l,", ").concat(c,")")},transformMain:function(t,e){var n=this,i=n.$el.main,a=n.$T,r=e?.axisX?e.axisX:a(i.select(".".concat(Ee.axisX)),t),s=e?.axisY?e.axisY:a(i.select(".".concat(Ee.axisY)),t),o=e?.axisY2?e.axisY2:a(i.select(".".concat(Ee.axisY2)),t);a(i,t).attr("transform",n.getTranslate("main")),r.attr("transform",n.getTranslate("x")),s.attr("transform",n.getTranslate("y")),o.attr("transform",n.getTranslate("y2")),i.select(".".concat(qt.chartArcs)).attr("transform",n.getTranslate("arc"))},transformAll:function(t,e){var n=this,i=n.config,a=n.state,r=a.hasAxis,s=a.hasFunnel,o=a.hasTreemap,l=n.$el;!s&&!o&&n.transformMain(t,e),r&&i.subchart_show&&n.transformContext(t,e),l.legend&&n.transformLegend(t)}},wc={isValidChartType:function(t){return!!(t&&Object.values(X).indexOf(t)>-1)},setTargetType:function(t,e){var n=this,i=n.config,a=n.state.withoutFadeIn;n.mapToTargetIds(t).forEach(function(r){a[r]=e===i.data_types[r],i.data_types[r]=e}),t||(i.data_type=e)},updateTypesElements:function(){var t=this,e=t.state.current;Object.keys(X).forEach(function(n){var i=X[n],a=t.hasType(i,null,!0),r=e.types.indexOf(i);r===-1&&a?e.types.push(i):r>-1&&!a&&e.types.splice(r,1)}),t.setChartElements()},hasType:function(t,e,n){var i;n===void 0&&(n=!1);var a=this,r=a.config,s=a.state.current,o=r.data_types,l=e||a.data.targets,c=!1;return!n&&((i=s.types)===null||i===void 0?void 0:i.indexOf(t))>-1?c=!0:l?.length?l.forEach(function(u){var f=o[u.id];(f===t||!f&&t==="line")&&(c=!0)}):Object.keys(o).length?Object.keys(o).forEach(function(u){o[u]===t&&(c=!0)}):c=r.data_type===t,c},hasTypeOf:function(t,e,n){var i=this;return n===void 0&&(n=[]),t in Ze?!Ze[t].filter(function(a){return n.indexOf(a)===-1}).every(function(a){return!i.hasType(a,e)}):!1},isTypeOf:function(t,e){var n,i=W(t)?t:t.id,a=this.config&&(((n=this.config.data_types)===null||n===void 0?void 0:n[i])||this.config.data_type);return Z(e)?e.indexOf(a)>=0:a===e},hasPointType:function(){var t=this;return t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&this.config.gauge_type==="multi"},isLineType:function(t){var e=W(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,Ze.Line)},isStepType:function(t){return this.isTypeOf(t,Ze.Step)},isSplineType:function(t){return this.isTypeOf(t,Ze.Spline)},isAreaType:function(t){return this.isTypeOf(t,Ze.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,Ze.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isTreemapType:function(t){return this.isTypeOf(t,"treemap")},isPieType:function(t){return this.isTypeOf(t,"pie")},isFunnelType:function(t){return this.isTypeOf(t,"funnel")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isPolarType:function(t){return this.isTypeOf(t,"polar")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isPolarType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,n=e.point_pattern,i=!1;return t?.tagName==="circle"?i=!0:i=e.point_type==="circle"&&(!n||Z(n)&&n.length===0),i},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isFunnelType(t)||this.isRadarType(t)||this.isTreemapType(t)?t.values.filter(function(e){return Y(e.value)||!!e.value}):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}};function Sc(t){var e=this,n;return e.isLineType(t)?n=e.generateGetLinePoints(e.getShapeIndices(e.isLineType)):e.isBarType(t)&&(n=e.generateGetBarPoints(e.getShapeIndices(e.isBarType))),n}var Ac={getDrawShape:function(){var t=this,e=t.config.axis_rotated,n=t.state,i=n.hasRadar,a=n.hasTreemap,r={type:{},indices:{},pos:{}};if(!a&&["bar","candlestick","line","area"].forEach(function(l){var c=je(/^(bubble|scatter)$/.test(l)?"line":l);if(t.hasType(l)||t.hasTypeOf(c)||l==="line"&&(t.hasType("bubble")||t.hasType("scatter"))){var u=t.getShapeIndices(t["is".concat(c,"Type")]),f=t["generateDraw".concat(c)];r.indices[l]=u,r.type[l]=f?f.bind(t)(u,!1):void 0}}),!t.hasArcType()||i||a){var s=void 0,o=void 0;a||(s=i?t.radarCircleX:e?t.circleY:t.circleX,o=i?t.radarCircleY:e?t.circleX:t.circleY),r.pos={xForText:t.generateXYForText(r.indices,!0),yForText:t.generateXYForText(r.indices,!1),cx:(s||function(){}).bind(t),cy:(o||function(){}).bind(t)}}return r},getShapeIndices:function(t){var e=this,n=e.config,i=n.data_xs,a=ce(i),r={},s=a?{}:0;return a&&Zn(Object.keys(i).map(function(o){return i[o]})).forEach(function(o){s[o]=0,r[o]={}}),e.filterTargetsToShow(e.data.targets.filter(t,e)).forEach(function(o){for(var l,c=(o.id in i)?i[o.id]:"",u=c?r[c]:r,f=0,d=void 0;d=n.data_groups[f];f++)if(!(d.indexOf(o.id)<0))for(var g=0,h=void 0;h=d[g];g++){if(h in u){u[o.id]=u[h];break}o.id!==h&&c&&(u[h]=(l=u[o.id])!==null&&l!==void 0?l:s[c])}$e(u[o.id])&&(u[o.id]=c?s[c]++:s++,u.__max__=(c?s[c]:s)-1)}),r},getIndices:function(t,e,n){var i=this,a=i.config,r=a.data_xs,s=a.bar_indices_removeNull,o=e.id,l=e.index;if(i.isBarType(o)&&s){var c={};return i.getAllValuesOnIndex(l,!0).forEach(function(u,f){c[u.id]=f,c.__max__=f}),c}return ce(r)?t[r[o]]:t},getIndicesMax:function(t){return ce(this.config.data_xs)?Object.keys(t).map(function(e){return t[e].__max__||0}).reduce(function(e,n){return e+n}):t.__max__},getShapeX:function(t,e,n){var i=this,a=i.config,r=i.scale,s=n?r.subX:r.zoom||r.x,o=a.bar_overlap,l=a.bar_padding,c=function(f,d){return f+d},u=Ye(t)&&(t._$total.length?t._$total.reduce(c)/2:0);return function(f){var d=i.getIndices(e,f,"getShapeX"),g=f.id in d?d[f.id]:0,h=(d.__max__||0)+1,p=0;if(ce(f.x)){var v=s(f.x,!0);if(u){var m=t[f.id]||t._$width;p=o?v-m/2:v-m+t._$total.slice(0,g+1).reduce(c)-u}else p=v-(Y(t)?t:t._$width)*(h/2-(o?1:g))}return t&&p&&h>1&&l&&(g&&(p+=l*g),h>2?p-=(h-1)*l/2:h===2&&(p-=l/2)),p}},getShapeY:function(t){var e=this,n=e.isStackNormalized();return function(i){var a=i.value;return Y(i)?a=i:e.isAreaRangeType(i)?a=e.getBaseValue(i,"mid"):n?a=e.getRatio("index",i,!0):e.isBubbleZType(i)?a=e.getBubbleZData(i.value,"y"):e.isBarRangeType(i)&&(a=a[1]),e.getYScaleById(i.id,t)(a)}},getShapeYMin:function(t){var e=this,n=e.axis.getId(t),i=e.scale[n],a=i.domain()[0],r=e.config["axis_".concat(n,"_inverted")];return!e.isGrouped(t)&&!r&&a>0?a:0},getShapeOffsetData:function(t){var e=this,n=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(t,e))),i=e.isStackNormalized(),a=n.map(function(s){var o=s.values,l={};e.isStepType(s)&&(o=e.convertValuesToStep(o));var c=o.reduce(function(u,f){var d=Number(f.x);return u[d]=f,l[d]=i?e.getRatio("index",f,!0):f.value,u},{});return{id:s.id,rowValues:o,rowValueMapByXValue:c,values:l}}),r=n.reduce(function(s,o,l){var c=o.id;return s[c]=l,s},{});return{indexMapByTargetId:r,shapeOffsetTargets:a}},getShapeOffset:function(t,e,n){var i=this,a=i.getShapeOffsetData(t),r=a.shapeOffsetTargets,s=a.indexMapByTargetId,o=i.config.data_groupsZeroAs;return function(l,c){var u=l.id,f=l.value,d=l.x,g=i.getIndices(e,l),h=i.getYScaleById(u,n);if(i.isBarRangeType(l))return h(f[0]);var p=Number(d),v=h(o==="zero"?0:i.getShapeYMin(u)),m=v;return r.filter(function(x){return x.id!==u&&g[x.id]===g[u]}).forEach(function(x){var y=x.id,_=x.rowValueMapByXValue,$=x.rowValues,b=x.values;if(s[y]<s[u]){var T=b[p],A=$[c];if((!A||Number(A.x)!==p)&&(A=_[p]),A?.value*f>=0&&Y(T)){var k=f===0?o==="positive"&&T>0||o==="negative"&&T<0:!0;k&&(m+=h(T)-v)}}}),m}},circleY:function(t,e){var n=this,i=t.id,a;return n.isGrouped(i)&&(a=Sc.bind(n)(t)),a?a(t,e)[0][1]:n.getYScaleById(i)(n.getBaseValue(t))},getBarW:function(t,e,n){var i,a,r,s,o,l=this,c=l.config,u=l.org,f=l.scale,d=l.state,g=l.getMaxDataCount(),h=t==="bar"&&((i=c.data_groups)===null||i===void 0?void 0:i.length),p="".concat(t,"_width"),v=((r=(a=l.getZoomTransform)===null||a===void 0?void 0:a.call(l))!==null&&r!==void 0?r:{k:1}).k,m=[(s=c.axis_x_min)!==null&&s!==void 0?s:u.xDomain[0],(o=c.axis_x_max)!==null&&o!==void 0?o:u.xDomain[1]].map(l.axis.isTimeSeries()?De.bind(l):Number),x=e.tickInterval(g);if(f.zoom&&!l.axis.isCategorized()&&v>1){var y=m.every(function(b,T){return b===u.xDomain[T]});x=u.xDomain.map(function(b,T){var A=y?b:b-Math.abs(m[T]);return f.zoom(A)}).reduce(function(b,T){return Math.abs(b)+T})/g}var _=function(b){var T=b?c[p][b]:c[p],A=b?T.ratio:c["".concat(p,"_ratio")],k=b?T.max:c["".concat(p,"_max")],I=Y(T)?T:B(T)?T.call(l,d.width,n,g):n?x*A/n:0;return k&&I>k?k:I},$=_();return!h&&Ye(c[p])&&($={_$width:$,_$total:[]},l.filterTargetsToShow(l.data.targets).forEach(function(b){c[p][b.id]&&($[b.id]=_(b.id),$._$total.push($[b.id]||$._$width))})),$},getShapeByIndex:function(t,e,n){var i=this,a=i.$el,r=G(e)?"-".concat(e):"",s=a[t];return s&&!s.empty()?s=s.filter(function(o){return n?o.id===n:!0}).filter(function(o){return G(e)?o.index===e:!0}):s=(n?a.main.selectAll(".".concat(_e["".concat(t,"s")]).concat(i.getTargetSelectorSuffix(n))):a.main).selectAll(".".concat(_e[t]).concat(r)),s},isWithinShape:function(t,e){var n,i=this,a=z(t),r;return i.isTargetToShow(e.id)?!((n=i.hasValidPointType)===null||n===void 0)&&n.call(i,t.nodeName)?r=i.isStepType(e)?i.isWithinStep(t,i.getYScaleById(e.id)(i.getBaseValue(e))):i.isWithinCircle(t,i.isBubbleType(e)?i.pointSelectR(e)*1.5:0):t.nodeName==="path"&&(r=a.classed(_e.bar)?i.isWithinBar(t):!0):r=!1,r},getInterpolate:function(t){var e=this,n=e.getInterpolateType(t);return{basis:ws,"basis-closed":Ts,"basis-open":$s,bundle:bs,cardinal:_s,"cardinal-closed":ys,"cardinal-open":xs,"catmull-rom":ms,"catmull-rom-closed":ps,"catmull-rom-open":vs,"monotone-x":hs,"monotone-y":gs,natural:ds,"linear-closed":fs,linear:us,step:cs,"step-after":ls,"step-before":os}[n]},getInterpolateType:function(t){var e=this,n=e.config,i=n.spline_interpolation_type,a=e.isInterpolationType(i)?i:"cardinal";return e.isSplineType(t)?a:e.isStepType(t)?n.line_step_type:"linear"},isWithinBar:function(t){var e=Ve(this.state.event,t),n=qa(t),i=n[0],a=n[1],r=Math.min(i.x,a.x),s=Math.min(i.y,a.y),o=this.config.bar_sensitivity,l=t.getBBox(),c=l.width,u=l.height,f=r-o,d=r+c+o,g=s+u+o,h=s-o,p=f<e[0]&&e[0]<d&&h<e[1]&&e[1]<g;return p}},Si=function(){function t(e){this.data={xs:{},targets:[]},this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var n=this;n.api=e,n.config=new wi,n.cache=new Gl;var i=new jl;n.$el=i.getStore("element"),n.state=i.getStore("state"),n.$T=n.$T.bind(n)}return t.prototype.$T=function(e,n,i){var a=this,r=a.config,s=a.state,o=r.transition_duration,l=r.subchart_show,c=e;if(c){"tagName"in c&&(c=z(c));var u=(n!==!1&&o||n)&&(!s.zooming||s.dragging)&&!s.resizing&&s.rendered&&!l;c=u?c.transition(i).duration(o):c}return c},t.prototype.beforeInit=function(){var e=this;e.callPluginHook("$beforeInit"),fe(e.config.onbeforeinit,e.api)},t.prototype.afterInit=function(){var e=this;e.callPluginHook("$afterInit"),fe(e.config.onafterinit,e.api)},t.prototype.init=function(){var e=this,n=e.config,i=e.state,a=e.$el,r=n.boost_useCssRule;if(Yl(e),i.hasRadar=!i.hasAxis&&e.hasType("radar"),i.hasFunnel=!i.hasAxis&&e.hasType("funnel"),i.hasTreemap=!i.hasAxis&&e.hasType("treemap"),i.hasAxis=!e.hasArcType()&&!i.hasFunnel&&!i.hasTreemap,i.datetimeId="bb-".concat(+new Date*Pt()),r){var s=le.createElement("style");s.type="text/css",le.head.appendChild(s),i.style={rootSelctor:".".concat(i.datetimeId),sheet:s.sheet},a.style=s}var o={element:n.bindto,classname:"bb"};te(n.bindto)&&(o.element=n.bindto.element||"#chart",o.classname=n.bindto.classname||o.classname),a.chart=B(o.element.node)?n.bindto.element:z(o.element||[]),a.chart.empty()&&(a.chart=z(le.body.appendChild(le.createElement("div")))),a.chart.html("").classed(o.classname,!0).classed(i.datetimeId,r).style("position","relative"),e.initParams(),e.initToRender()},t.prototype.initToRender=function(e){var n=this,i=n.config,a=n.state,r=n.$el.chart,s=function(){return Bl(r,{display:"none",visibility:"hidden"})},o=i.render.lazy===!1?!1:i.render.lazy||s(),l=H.MutationObserver;o&&l&&i.render.observe!==!1&&!e&&new l(function(c,u){s()||(u.disconnect(),!a.rendered&&n.initToRender(!0))}).observe(r.node(),{attributes:!0,attributeFilter:["class","style"]}),(!o||e)&&n.convertData(i,function(c){n.initWithData(c),n.afterInit()})},t.prototype.initParams=function(){var e,n=this,i=n.config,a=n.format,r=n.state,s=i.axis_rotated;if(n.color=n.generateColor(),n.levelColor=n.generateLevelColor(),i.padding===!1&&(i.axis_x_show=!1,i.axis_y_show=!1,i.axis_y2_show=!1,i.subchart_show=!1),(n.hasPointType()||!((e=n.hasLegendDefsPoint)===null||e===void 0)&&e.call(n))&&(n.point=n.generatePoint()),r.hasAxis){n.initClip(),a.extraLineClasses=n.generateExtraLineClass(),a.dataTime=i.data_xLocaltime?Zr:Qr,a.axisTime=i.axis_x_localtime?es:ts;var o=n.config.zoom_enabled&&n.config.zoom_type==="drag";a.defaultAxisTime=function(l){var c=n.scale,u=c.x,f=c.zoom,d=o?f:f&&u.orgDomain().toString()!==f.domain().toString(),g=l.getMilliseconds()&&".%L"||l.getSeconds()&&".:%S"||l.getMinutes()&&"%I:%M"||l.getHours()&&"%I %p"||l.getDate()!==1&&"%b %d"||d&&l.getDate()===1&&"%b'%y"||l.getMonth()&&"%-m/%-d"||"%Y";return a.axisTime(g)(l)}}r.isLegendRight=i.legend_position==="right",r.isLegendInset=i.legend_position==="inset",r.isLegendTop=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="top-right",r.isLegendLeft=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="bottom-left",r.rotatedPadding.top=n.getResettedPadding(r.rotatedPadding.top),r.rotatedPadding.right=s&&!i.axis_x_show?0:30,r.inputType=zl(i.interaction_inputType_mouse,i.interaction_inputType_touch)},t.prototype.initWithData=function(e){var n,i,a,r=this,s=r.config,o=r.scale,l=r.state,c=r.$el,u=r.org,f=l.hasAxis,d=l.hasFunnel,g=l.hasTreemap,h=s.interaction_enabled,p=r.hasType("polar"),v=s.data_labels_backgroundColors;if(f&&(r.axis=r.getAxisInstance(),s.zoom_enabled&&r.initZoom()),r.data.xs={},r.data.targets=r.convertDataToTargets(e),s.data_filter&&(r.data.targets=r.data.targets.filter(s.data_filter.bind(r.api))),s.data_hide&&r.addHiddenTargetIds(s.data_hide===!0?r.mapToIds(r.data.targets):s.data_hide),s.legend_hide&&r.addHiddenLegendIds(s.legend_hide===!0?r.mapToIds(r.data.targets):s.legend_hide),r.updateSizes(),r.updateScales(!0),f){var m=o.x,x=o.y,y=o.y2,_=o.subX,$=o.subY,b=o.subY2;m&&(m.domain(kt(r.getXDomain(r.data.targets),!s.axis_x_inverted)),_.domain(m.domain()),u.xDomain=m.domain()),x&&(x.domain(r.getYDomain(r.data.targets,"y")),$.domain(x.domain())),y&&(y.domain(r.getYDomain(r.data.targets,"y2")),b&&b.domain(y.domain()))}if(c.svg=c.chart.append("svg").style("overflow","hidden").style("display","block"),h&&l.inputType){var T=l.inputType==="touch",A=s.onclick,k=s.onover,I=s.onout;c.svg.on("click",A?.bind(r.api)||null).on(T?"touchstart":"mouseenter",k?.bind(r.api)||null).on(T?"touchend":"mouseleave",I?.bind(r.api)||null)}s.svg_classname&&c.svg.attr("class",s.svg_classname);var R=B(s.color_tiles)&&r.patterns;(f||R||p||g||v||!((n=r.hasLegendDefsPoint)===null||n===void 0)&&n.call(r))&&(c.defs=c.svg.append("defs"),f&&["id","idXAxis","idYAxis","idGrid"].forEach(function(O){r.appendClip(c.defs,l.clip[O])}),r.generateTextBGColorFilter(v),R&&r.patterns.forEach(function(O){return c.defs.append(function(){return O.node})})),r.updateSvgSize(),r.bindResize();var C=c.svg.append("g").classed(K.main,!0).attr("transform",d||g?null:r.getTranslate("main"));if(c.main=C,s.subchart_show&&r.initSubchart(),s.tooltip_show&&r.initTooltip(),s.title_text&&r.initTitle(),!g&&s.legend_show&&r.initLegend(),s.data_empty_label_text&&C.append("text").attr("class","".concat(Ce.text," ").concat(K.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),f&&(s.regions.length&&r.initRegion(),!s.clipPath&&r.axis.init()),C.append("g").classed(K.chart,!0).attr("clip-path",f?l.clip.path:null),r.callPluginHook("$init"),r.initChartElements(),f&&(h&&((i=r.initEventRect)===null||i===void 0||i.call(r)),r.initGrid(),s.clipPath&&((a=r.axis)===null||a===void 0||a.init())),r.updateTargets(r.data.targets),r.updateDimension(),fe(s.oninit,r.api),r.setBackground(),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),s.data_onmin||s.data_onmax){var D=r.getMinMaxData();fe(s.data_onmin,r.api,D.min),fe(s.data_onmax,r.api,D.max)}s.tooltip_show&&r.initShowTooltip(),l.rendered=!0},t.prototype.initChartElements=function(){var e=this,n=e.state,i=n.hasAxis,a=n.hasRadar,r=n.hasTreemap,s=[];if(i){var o=["bar","bubble","candlestick","line"];e.config.bar_front&&o.push(o.shift()),o.forEach(function(c){var u=je(c);(c==="line"&&e.hasTypeOf(u)||e.hasType(c))&&s.push(u)})}else if(r)s.push("Treemap");else if(e.hasType("funnel"))s.push("Funnel");else{var l=e.hasType("polar");a||s.push("Arc","Pie"),e.hasType("gauge")?s.push("Gauge"):a?s.push("Radar"):l&&s.push("Polar")}s.forEach(function(c){e["init".concat(c)]()}),ce(e.config.data_labels)&&!e.hasArcType(null,["radar"])&&e.initText()},t.prototype.setChartElements=function(){var e=this,n=e.$el,i=n.chart,a=n.svg,r=n.defs,s=n.main,o=n.tooltip,l=n.legend,c=n.title,u=n.grid,f=n.needle,d=n.arcs,g=n.circle,h=n.bar,p=n.candlestick,v=n.line,m=n.area,x=n.text;e.api.$={chart:i,svg:a,defs:r,main:s,tooltip:o,legend:l,title:c,grid:u,arc:d,circles:g,bar:{bars:h},candlestick:p,line:{lines:v,areas:m},needle:f,text:{texts:x}}},t.prototype.setBackground=function(){var e=this,n=e.config.background,i=e.state,a=e.$el.svg;if(ce(n)){var r=a.select("g").insert(n.imgUrl?"image":"rect",":first-child");n.imgUrl?r.attr("href",n.imgUrl):n.color&&r.style("fill",n.color).attr("clip-path",i.clip.path),r.attr("class",n.class||null).attr("width","100%").attr("height","100%")}},t.prototype.updateTargets=function(e){var n,i=this,a=i.state,r=a.hasAxis,s=a.hasFunnel,o=a.hasRadar,l=a.hasTreemap,c=function(d){return i["updateTargetsFor".concat(d)](e.filter(i["is".concat(d,"Type")].bind(i)))};if(i.updateTargetsForText(e),r)["bar","candlestick","line"].forEach(function(d){var g=je(d);(d==="line"&&i.hasTypeOf(g)||i.hasType(d))&&c(g)}),i.updateTargetsForSubchart&&i.updateTargetsForSubchart(e);else if(i.hasArcType(e)){var u="Arc";o?u="Radar":i.hasType("polar")&&(u="Polar"),c(u)}else s?c("Funnel"):l&&c("Treemap");var f=i.hasType("bubble")||i.hasType("scatter");f&&((n=i.updateTargetForCircle)===null||n===void 0||n.call(i)),i.filterTargetsToShowAtInit(f)},t.prototype.filterTargetsToShowAtInit=function(e){e===void 0&&(e=!1);var n=this,i=n.$el.svg,a=n.$T,r=".".concat(K.target);e&&(r+=", .".concat(we.chartCircles," > .").concat(we.circles)),a(i.selectAll(r).filter(function(s){return n.isTargetToShow(s.id)})).style("opacity",null)},t.prototype.getWithOption=function(e){var n={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(n).forEach(function(i){var a=n[i];W(a)&&(a=n[a]),n[i]=it(e,"with".concat(i),a)}),n},t.prototype.initialOpacity=function(e){var n=this,i=n.state.withoutFadeIn,a=n.getBaseValue(e)!==null&&i[e.id]?null:"0";return a},t.prototype.bindResize=function(){var e=this,n=e.$el,i=e.config,a=e.state,r=Kl(i.resize_timer),s=[];s.push(function(){return fe(i.onresize,e.api)}),/^(true|parent)$/.test(i.resize_auto)&&s.push(function(){a.resizing=!0,i.legend_show&&(e.updateSizes(),e.updateLegend()),e.api.flush(!1)}),s.push(function(){fe(i.onresized,e.api),a.resizing=!1}),s.forEach(function(o){return r.add(o)}),e.resizeFunction=r,i.resize_auto==="parent"?(e.resizeFunction.resizeObserver=new ResizeObserver(e.resizeFunction.bind(e))).observe(n.chart.node().parentNode):H.addEventListener("resize",e.resizeFunction)},t.prototype.callPluginHook=function(e){for(var n=this,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];this.config.plugins.forEach(function(r){e==="$beforeInit"&&(r.$$=n,n.api.plugins.push(r)),r[e].apply(r,i)})},t}();ze(Si.prototype,[tc,nc,ic,rc,sc,uc,fc,ac,dc,gc,hc,vc,Ac,pc,mc,_c,bc,$c,Tc,wc]);function Cc(t){var e=this.config,n,i,a,r=function(){var s=i.shift();if(s&&n&&Ye(n)&&s in n)return n=n[s],r();if(!s)return n};Object.keys(e).forEach(function(s){n=t,i=s.split("_"),a=r(),re(a)&&(e[s]=a)}),this.api&&(this.state.orgConfig=t)}var Ec={resize:function(t){var e=this.internal,n=e.config,i=e.state;i.rendered&&(n.size_width=t?t.width:null,n.size_height=t?t.height:null,i.resizing=!0,this.flush(!1),e.resizeFunction())},flush:function(t){var e,n,i=this.internal,a=i.state,r=i.$el.zoomResetBtn;a.rendered?(a.resizing?(e=i.brush)===null||e===void 0||e.updateResize():(n=i.axis)===null||n===void 0||n.setOrient(),r?.style("display","none"),i.scale.zoom=null,t?i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):i.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!a.resizing&&i.brush&&(i.brush.getSelection().call(i.brush.move),i.unselectRect())):i.initToRender(!0)},destroy:function(){var t=this,e,n=this.internal,i=n.$el,a=i.chart,r=i.style,s=i.svg;if(ce(n)){n.callPluginHook("$willDestroy"),n.charts.splice(n.charts.indexOf(this),1),n.unbindAllEvents(),s.select("*").interrupt(),n.resizeFunction.clear(),(e=n.resizeFunction.resizeObserver)===null||e===void 0||e.disconnect(),H.removeEventListener("resize",n.resizeFunction),a.classed("bb",!1).style("position",null).selectChildren().remove(),r&&r.parentNode.removeChild(r),Object.keys(this).forEach(function(l){l==="internal"&&Object.keys(n).forEach(function(c){n[c]=null}),t[l]=null,delete t[l]});for(var o in this)this[o]=function(){}}return null},config:function(t,e,n){var i=this.internal,a=i.config,r=i.state,s=t?.replace(/\./g,"_"),o;return t&&s in a?re(e)?(a[s]=e,o=e,n&&this.flush()):o=a[s]:(arguments.length===0||Ue(t))&&(o=r.orgConfig),o}},kc={color:function(t){return this.internal.color(t)}},rr=function(t){var e=this.internal.data.targets;if(!$e(t)){var n=Z(t)?t:[t];return e.filter(function(i){return n.some(function(a){return a===i.id})})}return e};ze(rr,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){e===void 0&&(e=!0);var n=null;if(t){var i=this.data(t);Z(i)&&(n=[],i.forEach(function(a){var r=a.values.map(function(s){return s.value});e?n=n.concat(r):n.push(r)}))}return n},names:function(t){var e=this.internal;return e.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var Rc={data:rr},Lc=function(t){var e;return(e=H.btoa)===null||e===void 0?void 0:e.call(H,encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(n,i){return String.fromCharCode(Number("0x".concat(i)))}))};function Oc(t,e,n){var i=e||n,a=i.width,r=i.height,s=new XMLSerializer,o=t.cloneNode(!0),l=Nl(Ct(le.styleSheets)).filter(function(g){return g.cssText}).map(function(g){return g.cssText});o.setAttribute("xmlns",gn.xhtml),o.style.margin="0",o.style.padding="0",e.preserveFontStyle&&o.querySelectorAll("text").forEach(function(g){g.innerHTML=""});var c=s.serializeToString(o),u=le.createElement("style");u.appendChild(le.createTextNode(l.join(`
`)));var f=s.serializeToString(u),d='<svg xmlns="'.concat(gn.svg,'" width="').concat(a,'" height="').concat(r,`" 
		viewBox="0 0 `).concat(n.width," ").concat(n.height,`" 
		preserveAspectRatio="`).concat(e?.preserveAspectRatio===!1?"none":"xMinYMid meet",`">
			<foreignObject width="100%" height="100%">
				`).concat(f,`
				`).concat(c.replace(/(url\()[^#]+/g,"$1"),`
			</foreignObject></svg>`);return"data:image/svg+xml;base64,".concat(Lc(d))}function Ic(t,e){var n=e.top,i=e.left,a=t.getBBox(),r=a.x,s=a.y,o=t.getScreenCTM(),l=o.a,c=o.b,u=o.c,f=o.d,d=o.e,g=o.f,h=t.getBoundingClientRect(),p=h.width,v=h.height;return{x:l*r+u*s+d-i,y:c*r+f*s+g-n+(v-Math.round(v/4)),width:p,height:v}}function Pc(t){var e=t.getBoundingClientRect(),n=e.left,i=e.top,a=function(s){return s.textContent||s.childElementCount},r=[];return Ct(t.querySelectorAll("text")).filter(a).forEach(function(s){var o=function(c){var u,f=H.getComputedStyle(c),d=f.fill,g=f.fontFamily,h=f.fontSize,p=f.textAnchor,v=f.transform,m=Ic(c,{left:n,top:i}),x=m.x,y=m.y,_=m.width,$=m.height;return u={},u[c.textContent]={x,y,width:_,height:$,fill:d,fontFamily:g,fontSize:h,textAnchor:p,transform:v},u};if(s.childElementCount>1){var l=[];return Ct(s.querySelectorAll("tspan")).filter(a).forEach(function(c){r.push(o(c))}),l}else r.push(o(s))}),r}function Fc(t,e){e.forEach(function(n){Object.keys(n).forEach(function(i){var a=n[i],r=a.x,s=a.y,o=a.width,l=a.height,c=a.fill,u=a.fontFamily,f=a.fontSize,d=a.transform;if(t.save(),t.font="".concat(f," ").concat(u),t.fillStyle=c,d==="none")t.fillText(i,r,s);else{var g=d.replace(/(matrix|\(|\))/g,"").split(",");g.splice(4).every(function(h){return+h==0})?(g.push(r+o-o/4),g.push(s-l+l/3)):(g.push(r),g.push(s)),t.transform.apply(t,g),t.fillText(i,0,0)}t.restore()})})}var Dc={export:function(t,e){var n=this,i=this.internal,a=i.state,r=i.$el,s=r.chart,o=r.svg,l=a.current,c=l.width,u=l.height,f=Et(Object.create(null),{width:c,height:u,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},t),d=Oc(s.node(),f,{width:c,height:u}),g=f.preserveFontStyle?Pc(o.node()):[];if(e&&B(e)){var h=new Image;h.crossOrigin="Anonymous",h.onload=function(){var p=le.createElement("canvas"),v=p.getContext("2d");p.width=f.width||c,p.height=f.height||u,v.drawImage(h,0,0),g.length&&(Fc(v,g),g.length=0),e.bind(n)(p.toDataURL(f.mimeType))},h.src=d}return d}},Nc={focus:function(t){var e=this.internal,n=e.state,i=e.mapToTargetIds(t),a=e.$el.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),a.classed(ie.focused,!0).classed(ie.defocused,!1),e.hasArcType()&&!n.hasRadar&&(e.expandArc(i),e.hasType("gauge")&&e.markOverlapped(t,e,".".concat(Gt.gaugeValue))),e.toggleFocusLegend(i,!0),n.focusedTargetIds=i,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(r){return i.indexOf(r)<0})},defocus:function(t){var e=this.internal,n=e.state,i=e.mapToTargetIds(t),a=e.$el.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));a.classed(ie.focused,!1).classed(ie.defocused,!0),e.hasArcType(null,["polar"])&&(e.unexpandArc(i),e.hasType("gauge")&&e.undoMarkOverlapped(e,".".concat(Gt.gaugeValue))),e.toggleFocusLegend(i,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(r){return i.indexOf(r)<0}),n.defocusedTargetIds=i},revert:function(t){var e=this.internal,n=e.config,i=e.state,a=e.$el,r=e.mapToTargetIds(t),s=a.svg.selectAll(e.selectorTargets(r));s.classed(ie.focused,!1).classed(ie.defocused,!1),e.hasArcType(null,["polar"])&&e.unexpandArc(r),n.legend_show&&(e.showLegend(r.filter(e.isLegendToShow.bind(e))),a.legend.selectAll(e.selectorLegends(r)).filter(function(){return z(this).classed(ie.legendItemFocused)}).classed(ie.legendItemFocused,!1)),i.focusedTargetIds=[],i.defocusedTargetIds=[]}},Mc={show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}},Bc={legend:Mc},zc={load:function(t){var e=this.internal,n=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(i){n.data_classes[i]=t.classes[i]}),"categories"in t&&e.axis.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(i){n.data_axes[i]=t.axes[i]}),"colors"in t&&Object.keys(t.colors).forEach(function(i){n.data_colors[i]=t.colors[i]}),"unload"in t&&t.unload!==!1?e.unload(e.mapToTargetIds(t.unload===!0?null:t.unload),function(){Wa(function(){return e.loadFromArgs(t)})}):e.loadFromArgs(t)},unload:function(t){var e=this.internal,n=t||{};Ue(n)&&this.tooltip.hide(),Z(n)?n={ids:n}:W(n)&&(n={ids:[n]});var i=e.mapToTargetIds(n.ids);e.unload(i,function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.cache.remove(i),ar.call(e,n.done,n.resizeAfter)})}};function Gi(t,e,n){var i=this,a=this.internal,r=a.mapToTargetIds(e),s=a.state.hiddenTargetIds.map(function(c){return r.indexOf(c)>-1&&c}).filter(Boolean);a.state.toggling=!0,a["".concat(t?"remove":"add","HiddenTargetIds")](r);var o=a.$el.svg.selectAll(a.selectorTargets(r)),l=t?null:"0";t&&s.length&&(o.style("display",null),fe(a.config.data_onshown,this,s)),a.$T(o).style("opacity",l,"important").call(Ka,function(){var c;!t&&s.length===0&&(o.style("display","none"),fe((c=a.config)===null||c===void 0?void 0:c.data_onhidden,i,r)),o.style("opacity",l)}),n.withLegend&&a["".concat(t?"show":"hide","Legend")](r),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.state.toggling=!1}var Xc={show:function(t,e){e===void 0&&(e={}),Gi.call(this,!0,t,e)},hide:function(t,e){e===void 0&&(e={}),Gi.call(this,!1,t,e)},toggle:function(t,e){var n=this;e===void 0&&(e={});var i=this.internal,a={show:[],hide:[]};i.mapToTargetIds(t).forEach(function(r){return a[i.isTargetToShow(r)?"hide":"show"].push(r)}),a.show.length&&this.show(a.show,e),a.hide.length&&setTimeout(function(){return n.hide(a.hide,e)},0)}},Vc={show:function(t){var e,n,i,a=this.internal,r=a.$el,s=a.config,o=a.state,l=o.eventReceiver,c=o.hasFunnel,u=o.hasTreemap,f=o.inputType,d,g;if(t.mouse&&(g=t.mouse),t.data){var h=t.data,p=(e=a.getYScaleById(h.id))===null||e===void 0?void 0:e(h.value);if((c||u)&&h.id){var v=a.selectorTarget(h.id,void 0,".".concat(be.shape));l.rect=r.main.select(v)}else a.isMultipleX()?g=[a.xx(h),p]:(s.tooltip_grouped||(g=[0,p]),d=(n=h.index)!==null&&n!==void 0?n:a.hasArcType()&&h.id?(i=a.getArcElementByIdOrIndex(h.id))===null||i===void 0?void 0:i.datum().index:a.getIndexByX(h.x))}else re(t.x)?d=a.getIndexByX(t.x):re(t.index)&&(d=t.index);(f==="mouse"?["mouseover","mousemove"]:["touchstart"]).forEach(function(m){a.dispatchEvent(m,d,g)})},hide:function(){var t,e,n,i=this.internal,a=i.state.inputType,r=i.$el.tooltip,s=r?.datum();if(s){var o=JSON.parse(s.current)[0].index;(a==="mouse"?["mouseout"]:["touchend"]).forEach(function(l){i.dispatchEvent(l,o)})}a==="touch"&&i.callOverOutForTouch(),i.hideTooltip(!0),(t=i.hideGridFocus)===null||t===void 0||t.call(i),(e=i.unexpandCircles)===null||e===void 0||e.call(i),(n=i.expandBarTypeShapes)===null||n===void 0||n.call(i,!1)}},jc={tooltip:Vc},Ai=function(){function t(e){this.plugins=[];var n=new Si(this);this.internal=n,function i(a,r,s){Object.keys(a).forEach(function(o){var l=B(a[o]),c=r!==s,u=ce(a[o]),f=u&&Object.keys(a[o]).length>0;l&&(!c&&f||c)?r[o]=a[o].bind(s):u&&!l?r[o]={}:r[o]=a[o],f&&i(a[o],r[o],s)})}(t.prototype,this,this),Cc.call(n,e),n.beforeInit(),n.init()}return t}();ze(Ai.prototype,[Ec,kc,Rc,Dc,Nc,Bc,zc,Xc,jc]);function Yi(t,e,n){var i=t.config,a=function(r,s){var o=Y(s)?s:s===!1?void 0:null;o!==null&&(i["axis_".concat(r,"_").concat(e)]=o)};re(n)&&(Ye(n)?Object.keys(n).forEach(function(r){a(r,n[r])}):(Y(n)||n===!1)&&["y","y2"].forEach(function(r){a(r,n)}),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Ui(t,e){var n=t.config;return{x:n["axis_x_".concat(e)],y:n["axis_y_".concat(e)],y2:n["axis_y2_".concat(e)]}}var Gc={labels:function(t){var e=this.internal,n;return t&&(Object.keys(t).forEach(function(i){e.axis.setLabelText(i,t[i])}),e.axis.updateLabels()),["x","y","y2"].forEach(function(i){var a=e.axis.getLabelText(i);a&&(!n&&(n={}),n[i]=a)}),n},min:function(t){var e=this.internal;return G(t)||t===!1?Yi(e,"min",t):Ui(e,"min")},max:function(t){var e=this.internal;return G(t)||t===!1?Yi(e,"max",t):Ui(e,"max")},range:function(t){var e=this.axis;if(arguments.length){var n=t.min,i=t.max;re(i)&&e.max(i),re(n)&&e.min(n)}else return{max:e.max(),min:e.min()}}},Yc={axis:Gc},Uc={category:function(t,e){var n=this.internal,i=n.config;return arguments.length>1&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},categories:function(t){var e=this.internal,n=e.config;if(!t||!Array.isArray(t)){var i=n.axis_x_categories;return Ue(i)?Object.values(e.data.xs)[0]:i}return n.axis_x_categories=t,e.redraw(),n.axis_x_categories}},Hc={flow:function(t){var e=this.internal,n;(t.json||t.rows||t.columns)&&e.convertData(t,function(a){n=a,i()});function i(){var a,r=0,s=0,o,l;if(!(e.state.redrawing||!n||!Zt())){var c=[],u=e.getMaxDataCount(),f=e.convertDataToTargets(n,!0),d=e.axis.isTimeSeries();e.data.targets.forEach(function(p){for(var v=!1,m=0;m<f.length;m++)if(p.id===f[m].id){v=!0,p.values[p.values.length-1]&&(s=p.values[p.values.length-1].index+1),r=f[m].values.length;for(var x=0;x<r;x++)f[m].values[x].index=s+x,d||(f[m].values[x].x=s+x);p.values=p.values.concat(f[m].values),f.splice(m,1);break}!v&&c.push(p.id)}),e.data.targets.forEach(function(p){for(var v=0;v<c.length;v++)if(p.id===c[v]){s=p.values[p.values.length-1].index+1;for(var m=0;m<r;m++)p.values.push({id:p.id,index:s+m,x:d?e.getOtherTargetX(s+m):s+m,value:null})}}),e.data.targets.length&&f.forEach(function(p){for(var v=[],m=e.data.targets[0].values[0].index;m<s;m++)v.push({id:p.id,index:m,x:d?e.getOtherTargetX(m):m,value:null});p.values.forEach(function(x){x.index+=s,d||(x.x+=s)}),p.values=v.concat(p.values)}),e.data.targets=e.data.targets.concat(f);var g=e.data.targets[0],h=g.values[0];re(t.to)?(r=0,l=d?De.call(e,t.to):t.to,g.values.forEach(function(p){p.x<l&&r++})):re(t.length)&&(r=t.length),u?u===1&&d&&(o=(g.values[g.values.length-1].x-h.x)/2,a=[new Date(+h.x-o),new Date(+h.x+o)]):(d?o=g.values.length>1?g.values[g.values.length-1].x-h.x:h.x-e.getXDomain(e.data.targets)[0]:o=1,a=[h.x-o,h.x]),a&&e.updateXDomain(null,!0,!0,!1,a),e.updateTargets(e.data.targets),e.redraw({flow:{index:h.index,length:r,duration:G(t.duration)?t.duration:e.config.transition_duration,done:t.done,orgDataCount:u},withLegend:!0,withTransition:u>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}}};function Ci(t,e){var n=this.internal,i=n.config,a=i.transition_duration&&Zt(),r="grid_".concat(e,"_lines");return t&&(i[r]=t,n.updateGrid(),n.redrawGrid(a)),i[r]}function sr(t,e){var n="grid_".concat(e,"_lines");return Ci.bind(this)(this.internal.config[n].concat(t||[]),e)}function or(t,e){this.internal.removeGridLines(t,e)}var lr=function(t){return Ci.bind(this)(t,"x")};ze(lr,{add:function(t){return sr.bind(this)(t,"x")},remove:function(t){return or.bind(this)(t,!0)}});var cr=function(t){return Ci.bind(this)(t,"y")};ze(cr,{add:function(t){return sr.bind(this)(t,"y")},remove:function(t){return or.bind(this)(t,!1)}});var Wc={xgrids:lr,ygrids:cr},Kc={groups:function(t){var e=this.internal,n=e.config;return $e(t)||(n.data_groups=t,e.redraw()),n.data_groups}};function ur(t,e){e===void 0&&(e=!1);var n=this.internal,i=n.config,a=i.transition_duration&&Zt();return t?(i.regions=e?i.regions.concat(t):t,n.updateRegion(),n.redrawRegion(a),e?i.regions:t):i.regions}var fr=function(t){return ur.bind(this)(t)};ze(fr,{add:function(t){return ur.bind(this)(t,!0)},remove:function(t){var e=this.internal,n=e.config,i=e.$T,a=t||{},r=it(a,"classes",[Yt.region]),s=e.$el.main.select(".".concat(Yt.regions)).selectAll(r.map(function(o){return".".concat(o)}));return i(s).style("opacity","0").remove(),s=n.regions,Object.keys(a).length?(s=s.filter(function(o){var l=!1;return o.class?(o.class.split(" ").forEach(function(c){r.indexOf(c)>=0&&(l=!0)}),!l):!0}),n.regions=s):n.regions=[],s}});var Jc={regions:fr},qc={x:function(t){var e=this.internal,n=e.axis,i=e.data,a=n.isCustomX()&&n.isCategorized();return Z(t)&&(a?this.categories(t):(e.updateTargetX(i.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),a?this.categories():i.xs},xs:function(t){var e=this.internal;return te(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},Hi=function(){function t(e){var n=ht(),i=e.config,a=e.params;this.owner=e,this.config=i,this.scale=n,(i.noTransition||!a.config.transition_duration)&&(i.withoutTransition=!0),i.range=this.scaleExtent((a.orgXScale||n).range())}return t.getSizeFor1Char=function(e,n){n===void 0&&(n=!0);var i={w:5.5,h:11.5};return!e.empty()&&e.text("0").call(function(a){try{var r=a.node().getBBox(),s=r.width,o=r.height;s&&o&&(i.w=s,i.h=o)}finally{a.text("")}}),n&&(this.getSizeFor1Char=function(){return i}),i},t.prototype.getTickTransformSetter=function(e){var n=this.config,i=e==="x"?function(a){return"translate(".concat(a+n.tickOffset,",0)")}:function(a){return"translate(0,".concat(a,")")};return function(a,r){a.attr("transform",function(s){var o=r(s);return G(s)?i(o):null})}},t.prototype.scaleExtent=function(e){var n=e[0],i=e[e.length-1];return n<i?[n,i]:[i,n]},t.prototype.generateTicks=function(e,n){var i=this.owner.params.tickStepSize,a=e.domain(),r=a[0],s=a[1],o=[];if(n&&i)for(var l=Math.round(r);l<=s;)o.push(l),l+=i;else if(e.ticks){var c=this.config.tickArguments;if(e.type==="log"&&!c){var u=ht("_log").domain([r>0?r:1,s]).range(e.range());o=u.ticks();for(var f=s.toFixed().length;o.length>15;f--)o=u.ticks(f);o.splice(0,1,r),o.splice(o.length-1,1,s)}else o=e.ticks.apply(e,this.config.tickArguments||[]);o=o.map(function(d){var g=W(d)&&Y(d)&&!isNaN(d)&&Math.round(d*10)/10||d;return g})}return o},t.prototype.copyScale=function(){var e=this.scale.copy();return e.domain().length||e.domain(this.scale.domain()),e.type=this.scale.type,e},t.prototype.textFormatted=function(e){var n=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(e)?+String(e).replace(/0+\d$/,""):e,a=n?n(i):i;return re(a)?a:""},t.prototype.transitionise=function(e){var n=this.config,i=e;if(n.withoutTransition)i=e.interrupt();else if(n.transition||!this.owner.params.noTransition)try{i=e.transition(n.transition)}catch{}return i},t}(),Zc=function(){function t(e){e===void 0&&(e={});var n={innerTickSize:6,outerTickSize:e.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:e.noTransition};n.tickLength=Math.max(n.innerTickSize,0)+n.tickPadding,this.config=n,this.params=e,this.helper=new Hi(this)}return t.prototype.create=function(e){var n=this,i=n.config,a=n.helper,r=n.params,s=a.scale,o=i.orient,l=this.splitTickText.bind(n),c=/^(left|right)$/.test(o),u=/^(top|bottom)$/.test(o),f=a.getTickTransformSetter(u?"x":"y"),d=f===a.axisX?"y":"x",g=/^(top|left)$/.test(o)?-1:1,h=r.tickTextRotate;this.config.range=s.rangeExtent?s.rangeExtent():a.scaleExtent((r.orgXScale||s).range());var p=i.innerTickSize,v=i.tickLength,m=i.range,x=r.id,y=x&&/^(x|y|y2)$/.test(x)?r.config["axis_".concat(x,"_tick_text_position")]:{x:0,y:0},_=x==="subX"?"subchart_axis_x":"axis_".concat(x),$=r.config["".concat(_,"_show")],b={tick:$?r.config["".concat(_,"_tick_show")]:!1,text:$?r.config["".concat(_,"_tick_text_show")]:!1},T=r.config.axis_evalTextSize,A;e.each(function(){var k=z(this),I=this.__chart__||s,R=a.copyScale();A=k,this.__chart__=R,i.tickOffset=r.isCategory?(R(1)-R(0))/2:0;var C=k.selectAll(".domain").data([0]);if(C.enter().append("path").attr("class","domain").merge(C).attr("d",function(){var P=i.outerTickSize*g;return u?"M".concat(m[0],",").concat(P,"V0H").concat(m[1],"V").concat(P):"M".concat(P,",").concat(m[0],"H0V").concat(m[1],"H").concat(P)}),b.tick||b.text){var D=i.tickValues||a.generateTicks(R,c);n.generatedTicks=D;var O=k.selectAll(".tick").data(D,R),ee=O.enter().insert("g",".domain").attr("class","tick"),st=O.exit().remove();O=ee.merge(O),b.tick&&ee.append("line"),b.text&&ee.append("text");var S=O.select("text"),L=B(T)?T.bind(n.params.owner.api)(S.node()):Hi.getSizeFor1Char(S,T),N=[],M=S.selectAll("tspan").data(function(P,pe){var me=r.tickMultiline?l(P,R,D,c,L.w):Z(a.textFormatted(P))?a.textFormatted(P).concat():[a.textFormatted(P)];return N[pe]=me.length,me.map(function(Re){return{index:pe,splitted:Re}})});M.exit().remove(),M=M.enter().append("tspan").merge(M).text(function(P){return P.splitted}),M.attr("x",u?0:v*g).attr("dx",function(){var P=0;return/(top|bottom)/.test(o)&&h&&(P=8*Math.sin(Math.PI*(h/180))*(o==="top"?-1:1)),P+(y.x||0)}()).attr("dy",function(P,pe){var me=".71em",Re=0;return o!=="top"&&(Re=L.h,pe===0&&(Re=c?-((N[P.index]-1)*(L.h/2)-3):y.y===0?me:0)),Y(Re)&&y.y?Re+y.y:Re||me});var Te=O.select("line"),ne=O.select("text");if(ee.select("line").attr("".concat(d,"2"),p*g),ee.select("text").attr(d,v*g),n.setTickLineTextPosition(Te,ne),r.tickTitle){var Se=ne.select("title");(Se.empty()?ne.append("title"):Se).text(function(P){return r.tickTitle[P]})}if(R.bandwidth){var U=R,q=U.bandwidth()/2;I=function(P){return U(P)+q},R=I}else I.bandwidth?I=R:f(st,R);O=r.owner.state.flowing?a.transitionise(O):r.owner.$T(O),f(ee,I),f(O.style("opacity",null),R)}}),this.g=A},t.prototype.getGeneratedTicks=function(e){var n,i=((n=this.generatedTicks)===null||n===void 0?void 0:n.length)-1,a=this.generatedTicks;if(i>e){var r=Math.round(i/e+.1);a=this.generatedTicks.map(function(s,o){return o%r===0?s:null}).filter(function(s){return s!==null}).splice(0,e)}return a},t.prototype.getTickXY=function(){var e=this.config,n={x:0,y:0};return this.params.isCategory&&(n.x=e.tickCentered?0:e.tickOffset,n.y=e.tickCentered?e.tickOffset:0),n},t.prototype.getTickSize=function(e){var n=this.helper.scale,i=this.config,a=i.innerTickSize,r=i.range,s=n(e)+(i.tickCentered?0:i.tickOffset);return r[0]<s&&s<r[1]?a:0},t.prototype.setTickLineTextPosition=function(e,n){var i=this.getTickXY(),a=this.config,r=a.innerTickSize,s=a.orient,o=a.tickLength,l=a.tickOffset,c=this.params.tickTextRotate,u=function(v){var m=["start","end"];return s==="top"&&m.reverse(),v?m[v>0?0:1]:"middle"},f=function(v){return v?"rotate(".concat(v,")"):null},d=function(v){var m=v/(s==="bottom"?15:23);return v?11.5-2.5*m*(v>0?1:-1):o},g=this.params.owner.config,h=g.axis_rotated,p=g.axis_x_tick_text_inner;switch(s){case"bottom":e.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),n.attr("x",0).attr("y",d(c)).style("text-anchor",u(c)).style("text-anchor",function(v,m,x){var y=x.length;return!h&&m===0&&(p===!0||p.first)?"start":!h&&m===y-1&&(p===!0||p.last)?"end":u(c)}).attr("transform",f(c));break;case"top":e.attr("x2",0).attr("y2",-r),n.attr("x",0).attr("y",-d(c)*2).style("text-anchor",u(c)).attr("transform",f(c));break;case"left":e.attr("x2",-r).attr("y1",i.y).attr("y2",i.y),n.attr("x",-o).attr("y",l).style("text-anchor","end");break;case"right":e.attr("x2",r).attr("y2",0),n.attr("x",o).attr("y",0).style("text-anchor","start")}},t.prototype.splitTickText=function(e,n,i,a,r){var s=this.params,o=this.helper.textFormatted(e),l=W(o)&&o.indexOf(`
`)>-1?o.split(`
`):[];if(l.length)return l;if(Z(o))return o;var c=s.tickWidth;(!c||c<=0)&&(c=a?95:s.isCategory?(s.isInverted?n(i[0])-n(i[1]):n(i[1])-n(i[0]))-12:110);function u(f,d){for(var g,h,p,v=1;v<d.length;v++)if(d.charAt(v)===" "&&(h=v),g=d.substr(0,v+1),p=r*g.length,c<p)return u(f.concat(d.substr(0,h||v)),d.slice(h?h+1:v));return f.concat(d)}return u(l,String(o))},t.prototype.scale=function(e){return arguments.length?(this.helper.scale=e,this):this.helper.scale},t.prototype.orient=function(e){return arguments.length?(this.config.orient=e in{top:1,right:1,bottom:1,left:1}?String(e):"bottom",this):this.config.orient},t.prototype.tickFormat=function(e){var n=this.config;return arguments.length?(n.tickFormat=e,this):n.tickFormat},t.prototype.tickCentered=function(e){var n=this.config;return arguments.length?(n.tickCentered=e,this):n.tickCentered},t.prototype.tickOffset=function(){return this.config.tickOffset},t.prototype.tickInterval=function(e){var n,i=this.config,a=i.outerTickSize,r=i.tickOffset,s=i.tickValues,o;if(this.params.isCategory)o=r*2;else{var l=(n=this.params.owner.scale.zoom)!==null&&n!==void 0?n:this.helper.scale,c=this.g.select("path.domain").node().getTotalLength()-a*2;o=c/(e||this.g.selectAll("line").size());var u=s?s.map(function(f,d,g){var h=d+1;return h<g.length?l(g[h])-l(f):null}).filter(Boolean):[];o=Math.min.apply(Math,oe(oe([],u,!1),[o],!1))}return o===1/0?0:o},t.prototype.ticks=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this.config;return e.length?(i.tickArguments=Ct(e),this):i.tickArguments},t.prototype.tickCulling=function(e){var n=this.config;return arguments.length?(n.tickCulling=e,this):n.tickCulling},t.prototype.tickValues=function(e){var n=this,i=this.config;if(B(e))i.tickValues=function(){return e(n.helper.scale.domain())};else{if(!arguments.length)return i.tickValues;i.tickValues=e}return this},t.prototype.setTransition=function(e){return this.config.transition=e,this},t}(),Qc={getAxisInstance:function(){return this.axis||new eu(this)}},eu=function(){function t(e){this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=e,this.setOrient()}return t.prototype.getAxisClassName=function(e){return"".concat(Ee.axis," ").concat(Ee["axis".concat(je(e))])},t.prototype.isHorizontal=function(e,n){var i=e.config.axis_rotated;return n?i:!i},t.prototype.isCategorized=function(){var e=this.owner,n=e.config,i=e.state;return n.axis_x_type.indexOf("category")>=0||i.hasRadar},t.prototype.isCustomX=function(){var e=this.owner.config;return!this.isTimeSeries()&&(e.data_x||ce(e.data_xs))},t.prototype.isTimeSeries=function(e){return e===void 0&&(e="x"),this.owner.config["axis_".concat(e,"_type")]==="timeseries"},t.prototype.isLog=function(e){return e===void 0&&(e="x"),this.owner.config["axis_".concat(e,"_type")]==="log"},t.prototype.isTimeSeriesY=function(){return this.isTimeSeries("y")},t.prototype.getAxisType=function(e){e===void 0&&(e="x");var n="linear";return this.isTimeSeries(e)?n=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(e)&&(n="log"),n},t.prototype.getExtent=function(){var e=this.owner,n=e.config,i=e.scale,a=n.axis_x_extent;if(a){if(B(a))a=a.bind(e.api)(e.getXDomain(e.data.targets),i.subX);else if(this.isTimeSeries()&&a.every(isNaN)){var r=De.bind(e);a=a.map(function(s){return i.subX(r(s))})}}return a},t.prototype.init=function(){var e=this,n=this.owner,i=n.config,a=n.$el,r=a.main,s=a.axis,o=n.state.clip,l=["x","y"];i.axis_y2_show&&l.push("y2"),l.forEach(function(c){var u=e.getAxisClassName(c);s[c]=r.append("g").attr("class",u).attr("clip-path",function(){var f=null;return c==="x"?f=o.pathXAxis:c==="y"&&(f=o.pathYAxis),f}).attr("transform",n.getTranslate(c)).style("visibility",i["axis_".concat(c,"_show")]?null:"hidden"),e.generateAxes(c)})},t.prototype.setOrient=function(){var e=this.owner,n=e.config,i=n.axis_rotated,a=n.axis_y_inner,r=n.axis_y2_inner;this.orient={x:i?"left":"bottom",y:i?a?"top":"bottom":a?"right":"left",y2:i?r?"bottom":"top":r?"left":"right",subX:i?"left":"bottom"}},t.prototype.generateAxes=function(e){var n=this.owner,i=n.config,a=[],r=i["axis_".concat(e,"_axes")],s=i.axis_rotated,o;e==="x"?o=s?Li:Oi:e==="y"?o=s?Oi:Li:e==="y2"&&(o=s?Ds:Ns),r.length&&r.forEach(function(l){var c=l.tick||{},u=n.scale[e].copy();l.domain&&u.domain(l.domain),a.push(o(u).ticks(c.count).tickFormat(B(c.format)?c.format.bind(n.api):function(f){return f}).tickValues(c.values).tickSizeOuter(c.outer===!1?0:6))}),this.axesList[e]=a},t.prototype.updateAxes=function(){var e=this,n=this.owner,i=n.config,a=n.$el.main,r=n.$T;Object.keys(this.axesList).forEach(function(s){var o=i["axis_".concat(s,"_axes")],l=n.scale[s].copy(),c=l.range();e.axesList[s].forEach(function(u,f){var d=u.scale().range();c.every(function(p,v){return p===d[v]})||u.scale().range(c);var g="".concat(e.getAxisClassName(s),"-").concat(f+1),h=a.select(".".concat(g.replace(/\s/,".")));h.empty()?h=a.append("g").attr("class",g).style("visibility",i["axis_".concat(s,"_show")]?null:"hidden").call(u):(o[f].domain&&l.domain(o[f].domain),r(h).call(u.scale(l))),h.attr("transform",n.getTranslate(s,f+1))})})},t.prototype.setAxis=function(e,n,i,a){var r=this.owner;e!=="subX"&&(this.tick[e]=this.getTickValues(e)),this[e]=this.getAxis(e,n,i,e==="x"&&(r.scale.zoom||r.config.subchart_show||r.state.resizing)?!0:a)},t.prototype.getAxis=function(e,n,i,a,r){var s=this.owner,o=s.config,l=/^(x|subX)$/.test(e),c=l?"x":e,u=l&&this.isCategorized(),f=this.orient[e],d=r?0:s.getAxisTickRotate(c),g;if(l)g=e==="subX"?s.format.subXAxisTick:s.format.xAxisTick;else{var h=o["axis_".concat(e,"_tick_format")];B(h)&&(g=h.bind(s.api))}var p=this.tick[c],v=Et({outerTick:i,noTransition:a,config:o,id:e,tickTextRotate:d,owner:s},l&&{isCategory:u,isInverted:o.axis_x_inverted,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTitle:u&&o.axis_x_tick_tooltip&&s.api.categories(),orgXScale:s.scale.x});l||(v.tickStepSize=o["axis_".concat(c,"_tick_stepSize")]);var m=new Zc(v).scale(l&&s.scale.zoom||n).orient(f);if(l&&this.isTimeSeries()&&p&&!B(p)){var x=De.bind(s);p=p.map(function(_){return x(_)})}else!l&&this.isTimeSeriesY()&&(m.ticks(o.axis_y_tick_time_value),p=null);p&&m.tickValues(p),m.tickFormat(g||!l&&s.isStackNormalized()&&function(_){return"".concat(_,"%")}),u&&(m.tickCentered(o.axis_x_tick_centered),Ue(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1));var y=o["axis_".concat(c,"_tick_count")];return y&&m.ticks(y),m},t.prototype.updateXAxisTickValues=function(e,n){var i,a=this.owner,r=a.config,s=r.axis_x_tick_fit,o=r.axis_x_tick_count,l;return(s||o&&s)&&(l=a.mapTargetsToUniqueXs(e),this.isCategorized()&&o>l.length&&(o=l.length),l=this.generateTickValues(l,o,this.isTimeSeries())),n?n.tickValues(l):this.x&&(this.x.tickValues(l),(i=this.subX)===null||i===void 0||i.tickValues(l)),l},t.prototype.getId=function(e){var n=this.owner,i=n.config,a=n.scale,r=i.data_axes[e];return(!r||!a[r])&&(r="y"),r},t.prototype.getXAxisTickFormat=function(e){var n=this.owner,i=n.config,a=n.format,r=e&&i.subchart_axis_x_tick_format||i.axis_x_tick_format,s=this.isTimeSeries(),o=this.isCategorized(),l;return r?B(r)?l=r.bind(n.api):s&&(l=function(c){return c?a.axisTime(r)(c):""}):l=s?a.defaultAxisTime:o?n.categoryName:function(c){return c<0?c.toFixed(0):c},B(l)?function(c){return l.apply(n,o?[c,n.categoryName(c)]:[c])}:l},t.prototype.getTickValues=function(e){var n=this.owner,i=n.config["axis_".concat(e,"_tick_values")],a=n["".concat(e,"Axis")];return(B(i)?i.call(n.api):i)||(a?a.tickValues():void 0)},t.prototype.getLabelOptionByAxisId=function(e){return this.owner.config["axis_".concat(e,"_label")]},t.prototype.getLabelText=function(e){var n=this.getLabelOptionByAxisId(e);return W(n)?n:n?n.text:null},t.prototype.setLabelText=function(e,n){var i=this.owner,a=i.config,r=this.getLabelOptionByAxisId(e);W(r)?a["axis_".concat(e,"_label")]=n:r&&(r.text=n)},t.prototype.getLabelPosition=function(e,n){var i=this.owner.config.axis_rotated,a=this.getLabelOptionByAxisId(e),r=Ye(a)&&a.position?a.position:n[+!i],s=function(o){return!!~r.indexOf(o)};return{isInner:s("inner"),isOuter:s("outer"),isLeft:s("left"),isCenter:s("center"),isRight:s("right"),isTop:s("top"),isMiddle:s("middle"),isBottom:s("bottom")}},t.prototype.getAxisLabelPosition=function(e){return this.getLabelPosition(e,e==="x"?["inner-top","inner-right"]:["inner-right","inner-top"])},t.prototype.getLabelPositionById=function(e){return this.getAxisLabelPosition(e)},t.prototype.xForAxisLabel=function(e){var n=this.owner,i=n.state,a=i.width,r=i.height,s=this.getAxisLabelPosition(e),o=s.isMiddle?-r/2:0;return this.isHorizontal(n,e!=="x")?o=s.isLeft?0:s.isCenter?a/2:a:s.isBottom&&(o=-r),o},t.prototype.textAnchorForAxisLabel=function(e){var n=this.owner,i=this.getAxisLabelPosition(e),a=i.isMiddle?"middle":"end";return this.isHorizontal(n,e!=="x")?a=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(a="start"),a},t.prototype.dxForAxisLabel=function(e){var n=this.owner,i=this.getAxisLabelPosition(e),a=i.isBottom?"0.5em":"0";return this.isHorizontal(n,e!=="x")?a=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(a="-0.5em"),a},t.prototype.dyForAxisLabel=function(e){var n=this.owner,i=n.config,a=i.axis_rotated,r=this.getAxisLabelPosition(e).isInner,s=i["axis_".concat(e,"_tick_rotate")]?n.getHorizontalAxisHeight(e):0,o=this.getMaxTickSize(e).width,l;if(e==="x"){var c=i.axis_x_height;a?l=r?"1.2em":-25-o:r?l="-0.5em":c?l=c-10:s?l=s-10:l="3em"}else l={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[e],a?r?l=l[0]:s?l=s*(e==="y2"?-1:1)-l[1]:l=l[2]:l=r?l[3]:(l[4]+(i["axis_".concat(e,"_inner")]?0:o+l[4]))*(e==="y"?-1:1);return l},t.prototype.getMaxTickSize=function(e,n){var i=this.owner,a=i.config,r=i.state.current,s=i.$el,o=s.svg,l=s.chart,c=r.maxTickSize[e],u="axis_".concat(e),f={width:0,height:0};if(n||!a["".concat(u,"_show")]||c.width>0&&i.filterTargetsToShow().length===0)return c;if(o){var d=/^y2?$/.test(e),g=i.filterTargetsToShow(i.data.targets),h=i.scale[e].copy().domain(i["get".concat(d?"Y":"X","Domain")](g,e)),p=h.domain(),v=p[0]===p[1]&&p.every(function(T){return T>0}),m=Z(c.domain)&&c.domain[0]===c.domain[1]&&c.domain.every(function(T){return T>0});if(v||m)return c.size;c.domain=p,d||c.ticks.splice(0);var x=this.getAxis(e,h,!1,!1,!0),y=a["".concat(u,"_tick_rotate")],_=a["".concat(u,"_tick_count")],$=a["".concat(u,"_tick_values")];!$&&_&&x.tickValues(this.generateTickValues(p,_,d?this.isTimeSeriesY():this.isTimeSeries())),!d&&this.updateXAxisTickValues(g,x);var b=l.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");x.create(b),b.selectAll("text").attr("transform",Y(y)?"rotate(".concat(y,")"):null).each(function(T,A){var k=this.getBoundingClientRect(),I=k.width,R=k.height;f.width=Math.max(f.width,I),f.height=Math.max(f.height,R),d||(c.ticks[A]=I)}),b.remove()}return Object.keys(f).forEach(function(T){f[T]>0&&(c[T]=f[T])}),c},t.prototype.getXAxisTickTextY2Overflow=function(e){var n=this.owner,i=n.axis,a=n.config,r=n.state,s=r.current,o=r.isLegendRight,l=r.legendItemWidth,c=n.getAxisTickRotate("x"),u=c>0&&c<90;if((i.isCategorized()||i.isTimeSeries())&&a.axis_x_tick_fit&&(!a.axis_x_tick_culling||Ue(a.axis_x_tick_culling))&&!a.axis_x_tick_multiline&&u){var f=a.axis_y2_show&&s.maxTickSize.y2.width||0,d=o&&l||0,g=s.width-n.getCurrentPaddingByDirection("left"),h=this.getXAxisTickMaxOverflow(c,g-e)-f-d,p=Math.max(0,h)+e;return Math.min(p,g/2)}return 0},t.prototype.getXAxisTickMaxOverflow=function(e,n){for(var i=this.owner,a=i.axis,r=i.config,s=i.state,o=a.isTimeSeries(),l=s.current.maxTickSize.x.ticks,c=l.length,u=s.axis.x.padding,f=u.left,d=u.right,g=0,h=c-(o&&r.axis_x_tick_fit?.5:0),p=0;p<c;p++){var v=p+1,m=Math.cos(Math.PI*e/180)*l[p],x=v-(o?1:.5)+f;if(!(x<=0)){var y=n-m,_=y/x,$=h-v,b=d*_,T=$*_+b,A=m-_/2-T;g=Math.max(g,A)}}var k=i.filterTargetsToShow(i.data.targets),I=0;if(!o&&r.axis_x_tick_count<=k.length&&k[0].values.length){var R=ht(i.axis.getAxisType("x"),0,n-g).domain([f*-1,i.getXDomainMax(i.data.targets)+1+d]);I=(R(1)-R(0))/2}return g+I},t.prototype.updateLabels=function(e){var n=this,i=this.owner,a=i.config,r=i.$el.main,s=i.$T,o=a.axis_rotated;["x","y","y2"].forEach(function(l){var c=n.getLabelText(l),u="axis".concat(je(l)),f=Ee["".concat(u,"Label")];if(c){var d=r.select("text.".concat(f));d.empty()&&(d=r.select("g.".concat(Ee[u])).insert("text",":first-child").attr("class",f).attr("transform",["rotate(-90)",null][l==="x"?+!o:+o]).style("text-anchor",function(){return n.textAnchorForAxisLabel(l)})),s(d,e).attr("x",function(){return n.xForAxisLabel(l)}).attr("dx",function(){return n.dxForAxisLabel(l)}).attr("dy",function(){return n.dyForAxisLabel(l)}).text(c)}})},t.prototype.getPadding=function(e,n,i,a){var r=Y(e)?e:e[n];return G(r)?this.owner.convertPixelToScale(/(bottom|top)/.test(n)?"y":"x",r,a):i},t.prototype.generateTickValues=function(e,n,i){var a=e;if(n){var r=B(n)?n():n;if(r===1)a=[e[0]];else if(r===2)a=[e[0],e[e.length-1]];else if(r>2){var s=this.isCategorized(),o=r-2,l=e[0],c=e[e.length-1],u=(c-l)/(o+1),f=void 0;a=[l];for(var d=0;d<o;d++)f=+l+u*(d+1),a.push(i?new Date(f):s?Math.round(f):f);a.push(c)}}return i||(a=a.sort(function(g,h){return g-h})),a},t.prototype.generateTransitions=function(e){var n=this.owner,i=n.$el.axis,a=n.$T,r=["x","y","y2","subX"].map(function(u){return a(i[u],e)}),s=r[0],o=r[1],l=r[2],c=r[3];return{axisX:s,axisY:o,axisY2:l,axisSubX:c}},t.prototype.redraw=function(e,n,i){var a=this,r=this.owner,s=r.config,o=r.state,l=r.$el,c=n?"0":null;["x","y","y2","subX"].forEach(function(u){var f=a[u],d=l.axis[u];f&&d&&(!i&&!s.transition_duration&&(f.config.withoutTransition=!0),d.style("opacity",c),f.create(e["axis".concat(je(u))]))}),this.updateAxes(),!o.rendered&&s.axis_tooltip&&this.setAxisTooltip()},t.prototype.redrawAxis=function(e,n,i,a,r){var s=this,o,l,c,u=this.owner,f=u.config,d=u.scale,g=u.$el,h=!!d.zoom,p;!h&&this.isCategorized()&&e.length===0&&d.x.domain([0,g.axis.x.selectAll(".tick").size()]),d.x&&e.length?(!h&&u.updateXDomain(e,n.UpdateXDomain,n.UpdateOrgXDomain,n.TrimXDomain),f.axis_x_tick_values||this.updateXAxisTickValues(e)):this.x&&(this.x.tickValues([]),(o=this.subX)===null||o===void 0||o.tickValues([])),f.zoom_rescale&&!a&&(p=d.x.orgDomain()),["y","y2"].forEach(function(v){var m="axis_".concat(v,"_"),x=d[v];if(x){var y=f["".concat(m,"tick_values")],_=f["".concat(m,"tick_count")];if(x.domain(u.getYDomain(e,v,p)),!y&&_){var $=u.axis[v],b=x.domain();$.tickValues(s.generateTickValues(b,b.every(function(T){return T===0})?1:_,s.isTimeSeriesY()))}}}),this.redraw(i,u.hasArcType(),r),this.updateLabels(n.Transition),(n.UpdateXDomain||n.UpdateXAxis||n.Y)&&e.length&&this.setCulling(),n.Y&&((l=d.subY)===null||l===void 0||l.domain(u.getYDomain(e,"y")),(c=d.subY2)===null||c===void 0||c.domain(u.getYDomain(e,"y2")))},t.prototype.setCulling=function(){var e=this.owner,n=e.config,i=e.state,a=i.clip,r=i.current,s=e.$el;["subX","x","y","y2"].forEach(function(o){var l=s.axis[o],c=o==="subX"?"x":o,u="axis_".concat(c,"_tick_culling"),f=n[u];if(l&&f){var d=l.selectAll(".tick"),g=kt(d.data()),h=g.length,p=n["".concat(u,"_max")],v=n["".concat(u,"_lines")],m;if(h){for(var x=1;x<h;x++)if(h/x<p){m=x;break}d.each(function(_){var $=v?this.querySelector("text"):this;$&&($.style.display=g.indexOf(_)%m?"none":null)})}else d.style("display",null);if(o==="x"){var y=r.maxTickSize.x.clipPath?a.pathXAxisTickTexts:null;s.svg.selectAll(".".concat(Ee.axisX," .tick text")).attr("clip-path",y)}}})},t.prototype.setAxisTooltip=function(){var e,n=this.owner,i=n.config,a=i.axis_rotated,r=i.axis_tooltip,s=n.$el,o=s.axis,l=s.axisTooltip,c=(e=r.backgroundColor)!==null&&e!==void 0?e:"black";n.generateTextBGColorFilter(c,{x:-.15,y:-.2,width:1.3,height:1.3}),["x","y","y2"].forEach(function(u){var f,d,g;if(W(c)||c[u])if(l[u]=(f=o[u])===null||f===void 0?void 0:f.append("text").classed(Ee["axis".concat(u.toUpperCase(),"Tooltip")],!0).attr("filter",n.updateTextBGColor({id:u},c)),a){var h=u==="x"?"x":"y",p=u==="y"?"1.15em":u==="x"?"-0.3em":"-0.4em";(d=l[u])===null||d===void 0||d.attr(h,p).attr("d".concat(u==="x"?"y":"x"),u==="x"?"0.4em":"-1.3em").style("text-anchor",u==="x"?"end":null)}else{var h=u==="x"?"y":"x",p=u==="x"?"1.15em":"".concat(u==="y"?"-":"","0.4em");(g=l[u])===null||g===void 0||g.attr(h,p).attr("d".concat(u==="x"?"x":"y"),u==="x"?"-1em":"0.3em").style("text-anchor",u==="y"?"end":null)}})},t}(),tu={initEventRect:function(){var t=this;t.$el.main.select(".".concat(K.chart)).append("g").attr("class",Me.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t,e=this,n=e.config,i=e.state,a=e.$el,r=e.isMultipleX(),s=n.axis_x_inverted;if(a.eventRect)e.updateEventRect(a.eventRect,!0);else if(e.data.targets.length){var o=e.$el.main.select(".".concat(Me.eventRects)).style("cursor",n.zoom_enabled&&n.zoom_type!=="drag"?n.axis_rotated?"ns-resize":"ew-resize":null).classed(Me.eventRectsMultiple,r).classed(Me.eventRectsSingle,!r),l=o.selectAll(".".concat(Me.eventRect)).data([0]).enter().append("rect");e.updateEventRect(l),e.updateEventType(l),l.call(e.getDraggableSelection()),a.eventRect=l,e.state.inputType==="touch"&&!a.svg.on("touchstart.eventRect")&&!e.hasArcType()&&e.bindTouchOnEventRect(),i.rendered&&e.updateEventRect(a.eventRect,!0)}if(!r){var c=e.getMaxDataCountTarget();(!n.data_xSort||s)&&c.sort(function(u,f){return s?f.x-u.x:u.x-f.x}),e.updateDataIndexByX(c),e.updateXs(c),(t=e.updatePointClass)===null||t===void 0||t.call(e,!0),i.eventReceiver.data=c}e.updateEventRectData()},bindTouchOnEventRect:function(){var t=this,e=t.config,n=t.state,i=t.$el,a=i.eventRect,r=i.svg,s=function(g){if(t.isMultipleX())t.selectRectForMultipleXs(g);else{var h=t.getDataIndexFromEvent(n.event);t.callOverOutForTouch(h),h===-1?t.unselectRect():t.selectRectForSingle(g,h)}},o=function(){t.unselectRect(),t.callOverOutForTouch()},l=e.interaction_inputType_touch.preventDefault,c=Jn(l)&&l||!1,u=!isNaN(l)&&l||null,f,d=function(g){var h=g.type,p=g.changedTouches[0],v=p["client".concat(e.axis_rotated?"Y":"X")];h==="touchstart"?c?g.preventDefault():u!==null&&(f=v):h==="touchmove"&&(c||f===!0||u!==null&&Math.abs(f-v)>=u)&&(f=!0,g.preventDefault())};a.on("touchstart",function(g){n.event=g,t.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",function(g){if(n.event=g,!a.empty()&&a.classed(Me.eventRect)){if(n.dragging||n.flowing||t.hasArcType()||g.touches.length>1)return;d(g),s(a.node())}else o()},!0).on("touchend.eventRect",function(g){n.event=g,!a.empty()&&a.classed(Me.eventRect)&&(t.hasArcType()||!t.toggleShape||n.cancelClick)&&n.cancelClick&&(n.cancelClick=!1)},!0),r.on("touchstart",function(g){n.event=g;var h=g.target;h&&h!==a.node()&&o()})},updateEventRect:function(t,e){e===void 0&&(e=!1);var n=this,i=n.state,a=n.$el,r=i.eventReceiver,s=i.width,o=i.height,l=i.rendered,c=i.resizing,u=t||a.eventRect,f=function(){if(r){var d=Qa(a.chart.node());r.rect=u.node().getBoundingClientRect().toJSON(),r.rect.top+=d.y,r.rect.left+=d.x}};(!l||c||e)&&(u.attr("x",0).attr("y",0).attr("width",s).attr("height",o),(!l||e)&&u.classed(Me.eventRect,!0)),f()},updateEventType:function(t){var e=this,n=Jn(t),i=n?e.$el.eventRect:t,a=n?t!==i?.datum().multipleX:!1;i&&(a&&i?.on("mouseover mousemove mouseout click",null),e.isMultipleX()?e.generateEventRectsForMultipleXs(i):e.generateEventRectsForSingleX(i))},updateEventRectData:function(){var t=this,e=t.config,n=t.scale,i=t.state,a=n.zoom||n.x,r=e.axis_rotated,s=t.isMultipleX(),o,l,c,u;if(t.updateEventType(s),s)o=0,l=0,c=i.width,u=i.height;else{var f,d=void 0;if(t.axis.isCategorized())f=t.getEventRectWidth(),d=function(v){return a(v.x)-f/2};else{var g=function(v){var m=v.index;return{prev:t.getPrevX(m),next:t.getNextX(m)}};f=function(v){var m=g(v),x=a.domain(),y;return m.prev===null&&m.next===null?y=r?i.height:i.width:m.prev===null?y=(a(m.next)+a(v.x))/2:m.next===null?y=a(x[1])-(a(m.prev)+a(v.x))/2:(Object.keys(m).forEach(function(_,$){var b;m[_]=(b=m[_])!==null&&b!==void 0?b:x[$]}),y=Math.max(0,(a(m.next)-a(m.prev))/2)),y},d=function(v){var m=g(v),x;return m.prev===null&&m.next===null?x=0:m.prev===null?x=a(a.domain()[0]):x=(a(v.x)+a(m.prev))/2,x}}o=r?0:d,l=r?d:0,c=r?i.width:f,u=r?f:i.height}var h=i.eventReceiver,p=function(v,m){return B(v)?v(m):v};h.coords.splice(h.data.length),h.data.forEach(function(v,m){h.coords[m]={x:p(o,v),y:p(l,v),w:p(c,v),h:p(u,v)}})},selectRectForSingle:function(t,e){var n,i,a=this,r=a.config,s=a.$el,o=s.main,l=s.circle,c=r.data_selection_enabled,u=r.data_selection_grouped,f=r.data_selection_isselectable,d=r.tooltip_grouped,g=a.getAllValuesOnIndex(e);if(!(d&&(a.showTooltip(g,t),(n=a.showGridFocus)===null||n===void 0||n.call(a,g),!c||u))){!l&&o.selectAll(".".concat(K.EXPANDED,":not(.").concat(be.shape,"-").concat(e,")")).classed(K.EXPANDED,!1);var h=o.selectAll(".".concat(be.shape,"-").concat(e)).classed(K.EXPANDED,!0).style("cursor",f?"pointer":null).filter(function(p){return a.isWithinShape(this,p)});h.empty()&&!d&&r.interaction_onout&&((i=a.hideGridFocus)===null||i===void 0||i.call(a),a.hideTooltip(),!u&&a.setExpand(e)),h.call(function(p){var v,m,x=p.data();c&&(u||f?.bind(a.api)(x))&&(t.style.cursor="pointer"),d||(a.showTooltip(x,t),(v=a.showGridFocus)===null||v===void 0||v.call(a,x),(m=a.unexpandCircles)===null||m===void 0||m.call(a),p.each(function(y){return a.setExpand(e,y.id)}))})}},selectRectForMultipleXs:function(t,e){e===void 0&&(e=!0);var n=this,i=n.config,a=n.state,r=n.filterTargetsToShow(n.data.targets);if(!(a.dragging||n.hasArcType(r))){var s=Ve(a.event,t),o=n.findClosestFromTargets(r,s);if(e&&a.mouseover&&(!o||o.id!==a.mouseover.id)&&(i.data_onout.call(n.api,a.mouseover),a.mouseover=void 0),!o){n.unselectRect();return}var l=n.isBubbleType(o)||n.isScatterType(o)||!i.tooltip_grouped?[o]:n.filterByX(r,o.x),c=l.map(function(f){return n.addName(f)});n.showTooltip(c,t),n.setExpand(o.index,o.id,!0),n.showGridFocus(c);var u=n.dist(o,s);(n.isBarType(o.id)||u<n.getPointSensitivity(o))&&(n.$el.svg.select(".".concat(Me.eventRect)).style("cursor","pointer"),e&&!a.mouseover&&(i.data_onover.call(n.api,o),a.mouseover=o))}},unselectRect:function(){var t=this,e=t.$el,n=e.circle,i=e.tooltip;t.$el.svg.select(".".concat(Me.eventRect)).style("cursor",null),t.hideGridFocus(),i&&(t.hideTooltip(),t._handleLinkedCharts(!1)),n&&!t.isPointFocusOnly()&&t.unexpandCircles(),t.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var e=this,n=e.config,i=e.state,a=i.eventReceiver,r=t.style("cursor",n.data_selection_enabled&&n.data_selection_grouped?"pointer":null).on("click",function(o){i.event=o;var l=a.currentIdx,c=a.data,u=c[l===-1?e.getDataIndexFromEvent(o):l];e.clickHandlerForSingleX.bind(this)(u,e)}).datum({multipleX:!1});if(i.inputType==="mouse"){var s=function(o){var l=o?e.getDataIndexFromEvent(o):a.currentIdx;return l>-1?a.data[l]:null};r.on("mouseover",function(o){i.event=o,e.updateEventRect(),Object.values(e.$el.axisTooltip).forEach(function(l){return l?.style("display",null)})}).on("mousemove",function(o){var l=s(o);if(i.event=o,!!l){var c=l.index,u=n.line_step_type;if(n.line_step_tooltipMatch&&e.hasType("step")&&/^step\-(before|after)$/.test(u)){var f=e.scale.zoom||e.scale.x,d=e.axis.xs[c],g=f.invert(Ve(o,this)[0]);u==="step-after"&&g<d?c-=1:u==="step-before"&&g>d&&(c+=1)}e.showAxisGridFocus();var h=n.tooltip_grouped&&c===a.currentIdx;if(i.dragging||i.flowing||e.hasArcType()||h){n.tooltip_show&&h&&e.setTooltipPosition();return}c!==a.currentIdx&&(e.setOverOut(!1,a.currentIdx),a.currentIdx=c),c===-1?e.unselectRect():e.selectRectForSingle(this,c),e.setOverOut(c!==-1,c)}}).on("mouseout",function(o){i.event=o,!(!n||e.hasArcType()||a.currentIdx===-1||!n.interaction_onout)&&(e.hideAxisGridFocus(),e.unselectRect(),e.setOverOut(!1,a.currentIdx),a.currentIdx=-1)})}return r},clickHandlerForSingleX:function(t,e){var n=e,i=n.config,a=n.state,r=n.$el.main;if(!t||n.hasArcType()||a.cancelClick){a.cancelClick&&(a.cancelClick=!1);return}var s=t.index;r.selectAll(".".concat(be.shape,"-").concat(s)).each(function(o){var l;(i.data_selection_grouped||n.isWithinShape(this,o))&&((l=n.toggleShape)===null||l===void 0||l.call(n,this,o,s),i.data_onclick.bind(n.api)(o,this))})},generateEventRectsForMultipleXs:function(t){var e=this,n=e.config,i=e.state;t.on("click",function(a){i.event=a,e.clickHandlerForMultipleXS.bind(this)(e)}).datum({multipleX:!0}),i.inputType==="mouse"&&t.on("mouseover mousemove",function(a){i.event=a,e.selectRectForMultipleXs(this)}).on("mouseout",function(a){i.event=a,!(!e.config||e.hasArcType()||!n.interaction_onout)&&e.unselectRect()})},clickHandlerForMultipleXS:function(t){var e=t,n=e.config,i=e.state,a=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(a)){var r=Ve(i.event,this),s=e.findClosestFromTargets(a,r),o=e.getPointSensitivity(s);s&&(e.isBarType(s.id)||e.dist(s,r)<o)&&e.$el.main.selectAll(".".concat(be.shapes).concat(e.getTargetSelectorSuffix(s.id))).selectAll(".".concat(be.shape,"-").concat(s.index)).each(function(){var l;(n.data_selection_grouped||e.isWithinShape(this,s))&&((l=e.toggleShape)===null||l===void 0||l.call(e,this,s,s.index),n.data_onclick.bind(e.api)(s,this))})}}},nu={generateFlow:function(t){var e=this,n=e.data,i=e.state,a=e.$el;return function(){var r=t.flow.length;i.flowing=!0,n.targets.forEach(function(o){o.values.splice(0,r)}),e.updateXGrid&&e.updateXGrid(!0);var s={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(o){var l=o.split("."),c=a[l[0]];c&&l.length>1&&(c=c[l[1]]),c?.size()&&(s[o]=c)}),e.hideGridFocus(),e.setFlowList(s,t)}},setFlowList:function(t,e){var n=this,i=e.flow,a=e.targets,r=i.duration,s=r===void 0?e.duration:r,o=i.index,l=i.length,c=i.orgDataCount,u=n.getFlowTransform(a,c,o,l),f=tr(),d;f.add(Object.keys(t).map(function(g){return d=t[g].transition().ease(ns).duration(s),g==="axis.x"?d=d.call(function(h){n.axis.x.setTransition(h).create(h)}):g==="region.list"?d=d.filter(n.isRegionOnX).attr("transform",u):d=d.attr("transform",u),d})),d.call(f,function(){n.cleanUpFlow(t,e)})},cleanUpFlow:function(t,e){var n=this,i=n.config,a=n.state,r=n.$el.svg,s=i.axis_rotated,o=e.flow,l=e.shape,c=e.xv,u=l.pos,f=u.cx,d=u.cy,g=u.xForText,h=u.yForText,p=o.done,v=p===void 0?function(){}:p,m=o.length;m&&(["circle","text","shape","eventRect"].forEach(function(x){for(var y=[],_=0;_<m;_++)y.push(".".concat(_e[x],"-").concat(_));r.selectAll(".".concat(_e["".concat(x,"s")])).selectAll(y).remove()}),r.select(".".concat(_e.xgrid)).remove()),Object.keys(t).forEach(function(x){var y=t[x];if(x!=="axis.x"&&y.attr("transform",null),x==="grid.x")y.attr(a.xgridAttr);else if(x==="gridLines.x")y.attr("x1",s?0:c).attr("x2",s?a.width:c),y.select("text").attr("x",s?a.width:0).attr("y",c);else if(/^(area|bar|line)$/.test(x))y.attr("d",l.type[x]);else if(x==="text")y.attr("x",g).attr("y",h).style("fill-opacity",n.opacityForText.bind(n));else if(x==="circle")if(n.isCirclePoint())y.attr("cx",f).attr("cy",d);else{var _=function(b){return f(b)-i.point_r},$=function(b){return d(b)-i.point_r};y.attr("x",_).attr("y",$)}else x==="region.list"&&y.select("rect").filter(n.isRegionOnX).attr("x",n.regionX.bind(n)).attr("width",n.regionWidth.bind(n))}),i.interaction_enabled&&n.redrawEventRect(),v.call(n.api),a.flowing=!1},getFlowTransform:function(t,e,n,i){var a=this,r=a.data,s=a.scale.x,o=r.targets[0].values,l=a.getValueOnIndex(o,n),c=a.getValueOnIndex(o,n+i),u,f=s.domain(),d=a.updateXDomain(t,!0,!0);e?e===1||l?.x===c?.x?u=s(f[0])-s(d[0]):u=a.axis.isTimeSeries()?s(f[0])-s(d[0]):s(l?.x||0)-s(c.x):o.length!==1?u=s(f[0])-s(d[0]):a.axis.isTimeSeries()?(l=a.getValueOnIndex(o,0),c=a.getValueOnIndex(o,o.length-1),u=s(l.x)-s(c.x)):u=Bt(d)/2;var g=Bt(f)/Bt(d);return"translate(".concat(u,",0) scale(").concat(g,",1)")}},iu={initClip:function(){var t=this,e=t.state,n=e.clip,i=e.datetimeId;n.id="".concat(i,"-clip"),n.idXAxis="".concat(n.id,"-xaxis"),n.idYAxis="".concat(n.id,"-yaxis"),n.idGrid="".concat(n.id,"-grid"),n.path=t.getClipPath(n.id),n.pathXAxis=t.getClipPath(n.idXAxis),n.pathYAxis=t.getClipPath(n.idYAxis),n.pathGrid=t.getClipPath(n.idGrid)},getClipPath:function(t){var e=this,n=e.config;return!n.clipPath&&/-clip$/.test(t)||!n.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!n.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url(#".concat(t,")")},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this,n=e.config,i=e.state,a=i.margin,r=i.width,s=i.height,o=n.axis_rotated,l=Math.max(30,a.left)-(o?0:20),c=(o?a.top+s+10:a.bottom)+20,u=o?-(1+l):-(l-1),f=-15,d=o?a.left+20:r+10+l;t.attr("x",u).attr("y",f).attr("width",d).attr("height",c)},setYAxisClipPath:function(t){var e=this,n=e.config,i=e.state,a=i.margin,r=i.width,s=i.height,o=n.axis_rotated,l=Math.max(30,a.left)-(o?20:0),c=n.axis_y_inner,u=c&&!o?n.axis_y_label.text?-20:-1:o?-(1+l):-(l-1),f=-(o?20:a.top),d=(o?r+15+l:a.left+20)+(c?20:0),g=(o?a.bottom+10:a.top+s)+10;t.attr("x",u).attr("y",f).attr("width",d).attr("height",g)},updateXAxisTickClip:function(){var t=this,e=t.config,n=t.state,i=n.clip,a=n.xAxisHeight,r=t.$el.defs,s=t.getHorizontalAxisHeight("x");if(r&&!i.idXAxisTickTexts){var o="".concat(i.id,"-xaxisticktexts");t.appendClip(r,o),i.pathXAxisTickTexts=t.getClipPath(i.idXAxisTickTexts),i.idXAxisTickTexts=o}!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&s!==a&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=s},setXAxisTickClipWidth:function(){var t=this,e=t.config,n=t.state.current.maxTickSize,i=t.getAxisTickRotate("x");if(!e.axis_x_tick_multiline&&i){var a=Math.sin(Math.PI/180*Math.abs(i));n.x.clipPath=(t.getHorizontalAxisHeight("x")-20)/a}else n.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this,e=t.state,n=e.clip,i=e.current,a=t.$el.svg;a&&a.select("#".concat(n.idXAxisTickTexts," rect")).attr("width",i.maxTickSize.x.clipPath).attr("height",30)}},au=function(t){return G(t.position)||"end"},ru=function(t){return t.position==="start"?4:t.position==="middle"?0:-4};function Wi(t,e,n){return function(i){var a=t?0:e;return i.position==="start"?a=t?-n:0:i.position==="middle"&&(a=(t?-n:e)/2),a}}function Ki(t,e){t.each(function(){var n=z(this);["x1","x2","y1","y2"].forEach(function(i){return n.attr(i,+n.attr(i))})})}var su={hasGrid:function(){var t=this.config;return["x","y"].some(function(e){return t["grid_".concat(e,"_show")]||t["grid_".concat(e,"_lines")].length})},initGrid:function(){var t=this;t.hasGrid()&&t.initGridLines(),t.initFocusGrid()},initGridLines:function(){var t=this,e=t.config,n=t.state.clip,i=t.$el;(e.grid_x_lines.length||e.grid_y_lines.length)&&(i.gridLines.main=i.main.insert("g",".".concat(K.chart).concat(e.grid_lines_front?" + *":"")).attr("clip-path",n.pathGrid).attr("class","".concat(se.grid," ").concat(se.gridLines)),i.gridLines.main.append("g").attr("class",se.xgridLines),i.gridLines.main.append("g").attr("class",se.ygridLines),i.gridLines.x=da([]))},updateXGrid:function(t){var e=this,n=e.config,i=e.scale,a=e.state,r=e.$el,s=r.main,o=r.grid,l=n.axis_rotated,c=e.generateGridData(n.grid_x_type,i.x),u=e.axis.isCategorized()?e.axis.x.tickOffset():0,f=function(d){return(i.zoom||i.x)(d)+u*(l?-1:1)};a.xgridAttr=l?{x1:0,x2:a.width,y1:f,y2:f}:{x1:f,x2:f,y1:0,y2:a.height},o.x=s.select(".".concat(se.xgrids)).selectAll(".".concat(se.xgrid)).data(c),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",se.xgrid).merge(o.x),t||o.x.each(function(){var d=z(this);Object.keys(a.xgridAttr).forEach(function(g){d.attr(g,a.xgridAttr[g]).style("opacity",function(){return d.attr(l?"y1":"x1")===(l?a.height:0)?"0":null})})})},updateYGrid:function(){var t=this,e=t.axis,n=t.config,i=t.scale,a=t.state,r=t.$el,s=r.grid,o=r.main,l=n.axis_rotated,c=function(f){return i.y(f)},u=e.y.getGeneratedTicks(n.grid_y_ticks)||t.scale.y.ticks(n.grid_y_ticks);s.y=o.select(".".concat(se.ygrids)).selectAll(".".concat(se.ygrid)).data(u),s.y.exit().remove(),s.y=s.y.enter().append("line").attr("class",se.ygrid).merge(s.y),s.y.attr("x1",l?c:0).attr("x2",l?c:a.width).attr("y1",l?0:c).attr("y2",l?a.height:c),Ki(s.y)},updateGrid:function(){var t=this,e=t.$el,n=e.grid,i=e.gridLines;!i.main&&t.initGridLines(),n.main.style("visibility",t.hasArcType()?"hidden":null),t.hideGridFocus(),t.updateGridLines("x"),t.updateGridLines("y")},updateGridLines:function(t){var e=this,n=e.config,i=e.$el,a=i.gridLines,r=i.main,s=e.$T,o=n.axis_rotated,l=t==="x";n["grid_".concat(t,"_show")]&&e["update".concat(t.toUpperCase(),"Grid")]();var c=r.select(".".concat(se["".concat(t,"gridLines")])).selectAll(".".concat(se["".concat(t,"gridLine")])).data(n["grid_".concat(t,"_lines")]);s(c.exit()).style("opacity","0").remove();var u=c.enter().append("g");u.append("line").style("opacity","0"),c=u.merge(c),c.each(function(f){var d=z(this);d.select("text").empty()&&f.text&&d.append("text").style("opacity","0")}),s(c.attr("class",function(f){return"".concat(se["".concat(t,"gridLine")]," ").concat(f.class||"").trim()}).select("text").attr("text-anchor",au).attr("transform",function(){return l?o?null:"rotate(-90)":o?"rotate(-90)":null}).attr("dx",ru).attr("dy",-5)).text(function(f){var d;return(d=f.text)!==null&&d!==void 0?d:this.remove()}),a[t]=c},redrawGrid:function(t){var e=this,n=e.config.axis_rotated,i=e.state,a=i.width,r=i.height,s=e.$el.gridLines,o=e.$T,l=e.xv.bind(e),c=e.yv.bind(e),u=s.x.select("line"),f=s.x.select("text"),d=s.y.select("line"),g=s.y.select("text");return u=o(u,t).attr("x1",n?0:l).attr("x2",n?a:l).attr("y1",n?l:0).attr("y2",n?l:r),f=o(f,t).attr("x",Wi(!n,a,r)).attr("y",l),d=o(d,t).attr("x1",n?c:0).attr("x2",n?c:a).attr("y1",n?0:c).attr("y2",n?r:c),g=o(g,t).attr("x",Wi(n,a,r)).attr("y",c),[u.style("opacity",null),f.style("opacity",null),d.style("opacity",null),g.style("opacity",null)]},initFocusGrid:function(){var t=this,e=t.config,n=t.state.clip,i=t.$el,a=e.grid_front,r=".".concat(a&&i.gridLines.main?se.gridLines:K.chart).concat(a?" + *":""),s=i.main.insert("g",r).attr("clip-path",n.pathGrid).attr("class",se.grid);if(i.grid.main=s,e.grid_x_show&&s.append("g").attr("class",se.xgrids),e.grid_y_show&&s.append("g").attr("class",se.ygrids),e.axis_tooltip){var o=s.append("g").attr("class","bb-axis-tooltip");o.append("line").attr("class","bb-axis-tooltip-x"),o.append("line").attr("class","bb-axis-tooltip-y")}e.interaction_enabled&&e.grid_focus_show&&!e.axis_tooltip&&(s.append("g").attr("class",ie.xgridFocus).append("line").attr("class",ie.xgridFocus),e.grid_focus_y&&!e.tooltip_grouped&&s.append("g").attr("class",ie.ygridFocus).append("line").attr("class",ie.ygridFocus))},showAxisGridFocus:function(){for(var t,e,n=this,i=n.config,a=n.format,r=n.state,s=r.event,o=r.width,l=r.height,c=i.axis_rotated,u=Ve(s,(t=n.$el.eventRect)===null||t===void 0?void 0:t.node()),f=u[0],d=u[1],g={x:f,y:d},h=0,p=Object.entries(n.$el.axisTooltip);h<p.length;h++){var v=p[h],m=v[0],x=v[1],y=m==="x"&&!c||m!=="x"&&c?"x":"y",_=g[y],$=(e=n.scale[m])===null||e===void 0?void 0:e.invert(_);$&&($=m==="x"&&n.axis.isTimeSeries()?a.xAxisTick($):$?.toFixed(2),x?.attr(y,_).text($))}n.$el.main.selectAll("line.bb-axis-tooltip-x, line.bb-axis-tooltip-y").style("visibility",null).each(function(b,T){var A=z(this);T===0?A.attr("x1",f).attr("x2",f).attr("y1",T?0:l).attr("y2",T?l:0):A.attr("x1",T?0:o).attr("x2",T?o:0).attr("y1",d).attr("y2",d)})},hideAxisGridFocus:function(){var t=this;t.$el.main.selectAll("line.bb-axis-tooltip-x, line.bb-axis-tooltip-y").style("visibility","hidden"),Object.values(t.$el.axisTooltip).forEach(function(e){return e?.style("display","none")})},showGridFocus:function(t){var e,n=this,i=n.config,a=n.state,r=a.width,s=a.height,o=i.axis_rotated,l=n.$el.main.selectAll("line.".concat(ie.xgridFocus,", line.").concat(ie.ygridFocus)),c=(t||[l.datum()]).filter(function(d){return d&&G(n.getBaseValue(d))});if(!(!i.tooltip_show||c.length===0||!i.axis_x_forceAsSingle&&n.hasType("bubble")||n.hasArcType())){var u=i.grid_focus_edge&&!i.tooltip_grouped,f=n.xx.bind(n);l.style("visibility",null).data(c.concat(c)).each(function(d){var g=z(this),h={x:f(d),y:n.getYScaleById(d.id)(d.value)},p;if(g.classed(ie.xgridFocus))p=o?[null,h.x,u?h.y:r,h.x]:[h.x,u?h.y:null,h.x,s];else{var v=n.axis.getId(d.id)==="y2";p=o?[h.y,u&&!v?h.x:null,h.y,u&&v?h.x:s]:[u&&v?h.x:null,h.y,u&&!v?h.x:r,h.y]}["x1","y1","x2","y2"].forEach(function(m,x){return g.attr(m,p[x])})}),Ki(l),(e=n.showCircleFocus)===null||e===void 0||e.call(n,t)}},hideGridFocus:function(){var t,e=this,n=e.state,i=n.inputType,a=n.resizing,r=e.$el.main;(i==="mouse"||!a)&&(r.selectAll("line.".concat(ie.xgridFocus,", line.").concat(ie.ygridFocus)).style("visibility","hidden"),(t=e.hideCircleFocus)===null||t===void 0||t.call(e))},updateGridFocus:function(){var t,e=this,n=e.state,i=n.inputType,a=n.width,r=n.height,s=n.resizing,o=e.$el.grid,l=o.main.select("line.".concat(ie.xgridFocus));if(i==="touch")l.empty()?s&&((t=e.showCircleFocus)===null||t===void 0||t.call(e)):e.showGridFocus();else{var c=e.config.axis_rotated;l.attr("x1",c?0:-10).attr("x2",c?a:-10).attr("y1",c?-10:0).attr("y2",c?-10:r)}return!0},generateGridData:function(t,e){var n=this,i=n.$el.main.select(".".concat(Ee.axisX)).selectAll(".tick").size(),a=[];if(t==="year")for(var r=n.getXDomain(),s=r.map(function(u){return u.getFullYear()}),o=s[0],l=s[1],c=o;c<=l;c++)a.push(new Date("".concat(c,"-01-01 00:00:00")));else a=e.ticks(10),a.length>i&&(a=a.filter(function(u){return String(u).indexOf(".")<0}));return a},getGridFilterToRemove:function(t){return t?function(e){var n=!1;return(Z(t)?t.concat():[t]).forEach(function(i){("value"in i&&e.value===i.value||"class"in i&&e.class===i.class)&&(n=!0)}),n}:function(){return!0}},removeGridLines:function(t,e){var n=this,i=n.config,a=n.$T,r=n.getGridFilterToRemove(t),s=function(u){return!r(u)},o=e?se.xgridLines:se.ygridLines,l=e?se.xgridLine:se.ygridLine;a(n.$el.main.select(".".concat(o)).selectAll(".".concat(l)).filter(r)).style("opacity","0").remove();var c="grid_".concat(e?"x":"y","_lines");i[c]=i[c].filter(s)}},ou={initRegion:function(){var t=this,e=t.$el;e.region.main=e.main.insert("g",":first-child").attr("clip-path",t.state.clip.path).attr("class",Yt.regions)},updateRegion:function(){var t=this,e=t.config,n=t.$el.region,i=t.$T;n.main||t.initRegion(),n.main.style("visibility",t.hasArcType()?"hidden":null);var a=n.main.selectAll(".".concat(Yt.region)).data(e.regions);i(a.exit()).style("opacity","0").remove();var r=a.enter().append("g");r.append("rect").style("fill-opacity","0"),n.list=r.merge(a).attr("class",t.classRegion.bind(t)),n.list.each(function(s){var o,l=z(this);l.select("text").empty()&&(!((o=s.label)===null||o===void 0)&&o.text)&&z(this).append("text").style("opacity","0")})},redrawRegion:function(t){var e=this,n=e.$el.region,i=e.$T,a=e.regionX.bind(e),r=e.regionY.bind(e),s=["width","height"],o=n.list.select("rect"),l=n.list.selectAll("text");return o=i(o,t).attr("x",a).attr("y",r).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),l=i(l,t).text(function(c){var u;return(u=c.label)===null||u===void 0?void 0:u.text}).attr("transform",function(c){var u=c.label;return u.rotated?" rotate(-90)":null}).attr("transform",function(c){var u=this,f,d=(f=c.label)!==null&&f!==void 0?f:{},g=d.x,h=g===void 0?0:g,p=d.y,v=p===void 0?0:p,m=d.center,x=m===void 0?!1:m,y=d.rotated,_=y===void 0?!1:y,$=this.previousElementSibling,b={x:0,y:0};return W(x)&&["x","y"].forEach(function(T,A){x.indexOf(T)>-1&&(b[T]=(+$.getAttribute(s[A])-zt(u)[s[A]])/2)}),"translate(".concat(a(c)+b.x+h,", ").concat(r(c)+b.y+v,")").concat(_?" rotate(-90)":"")}).attr("text-anchor",function(c){var u=c.label;return u?.rotated?"end":null}).attr("dy","1em").style("fill",function(c){var u,f=c.label;return(u=f?.color)!==null&&u!==void 0?u:null}),[o.style("fill-opacity",function(c){return G(c.opacity)?c.opacity:null}).on("end",function(){z(this.parentNode).selectAll("rect:not([x])").remove()}),l.style("opacity",null)]},regionX:function(t){return this.getRegionSize("x",t)},regionY:function(t){return this.getRegionSize("y",t)},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},getRegionSize:function(t,e){var n=this,i=n.config,a=n.scale,r=n.state,s=i.axis_rotated,o=/(x|y|y2)/.test(t),l=o?t==="x":t==="width",c=!o&&n[l?"regionX":"regionY"](e),u=o?"start":"end",f=o?0:r[t],d;if(e.axis==="y"||e.axis==="y2"?(!o&&!l?u="start":o&&!l&&(u="end"),(l?s:!s)&&u in e&&(d=a[e.axis])):(l?!s:s)&&u in e&&(d=a.zoom||a.x),d){var g=0;f=e[u],n.axis.isTimeSeries(e.axis)?f=De.call(n,f):/(x|width)/.test(t)&&n.axis.isCategorized()&&isNaN(f)&&(f=i.axis_x_categories.indexOf(f),g=n.axis.x.tickOffset()*(u==="start"?-1:1)),f=d(f)+g}return o?f:f<c?0:f-c},isRegionOnX:function(t){return!t.axis||t.axis==="x"}},lu={getAxisSize:function(t){var e=this,n=e.config.axis_rotated;return n&&t==="x"||!n&&/y2?/.test(t)?e.getAxisWidthByAxisId(t,!0):e.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){var n,i,a=this;if(a.axis){var r=(n=a.axis)===null||n===void 0?void 0:n.getLabelPositionById(t),s=a.axis.getMaxTickSize(t,e).width,o=s===0?.5:0;return s+(((i=a.config.padding)===null||i===void 0?void 0:i.mode)==="fit"?r.isInner?10+o:10:r.isInner?20+o:40)}else return 40},getHorizontalAxisHeight:function(t){var e,n,i=this,a=i.config,r=i.state,s=r.rotatedPadding,o=r.isLegendRight,l=r.isLegendInset,c=a.axis_rotated,u=((e=a.padding)===null||e===void 0?void 0:e.mode)==="fit",f=a["axis_".concat(t,"_inner")],d=a["axis_".concat(t,"_label")].text,g=13,h=((n=a.padding)===null||n===void 0?void 0:n.mode)==="fit"?f&&!d?t==="y"?1:0:20:30;if(t==="x"&&!a.axis_x_show)return 8;if(t==="x"&&Y(a.axis_x_height))return a.axis_x_height;if(t==="y"&&!a.axis_y_show)return a.legend_show&&!o&&!l?10:1;if(t==="y2"&&!a.axis_y2_show)return u?0:s.top;var p=i.axis.getMaxTickSize(t),v=Math.abs(a.axis_x_tick_rotate)>0&&(!a.axis_x_tick_autorotate||i.needToRotateXAxisTickTexts());return(a.axis_x_tick_multiline||v)&&p.height>g&&(h+=p.height-g),h+(i.axis.getLabelPositionById(t).isInner?0:10)+(t==="y2"&&!c?-10:0)},getEventRectWidth:function(){var t=this,e=t.config,n=t.axis,i=e.axis_x_inverted,a=n.x.tickInterval();return Math.max(0,i?Math.abs(a):a)},getAxisTickRotate:function(t){var e=this,n=e.axis,i=e.config,a=e.state,r=e.$el,s=i["axis_".concat(t,"_tick_rotate")];if(t==="x"){var o=n.isCategorized()||n.isTimeSeries();if(i.axis_x_tick_fit&&o){var l=i.axis_x_tick_count,c=a.current.maxTickSize.x.ticks.length,u=0;if(l?u=l>c?c:l:c&&(u=c),u!==a.axis.x.tickCount){var f=e.data.targets;a.axis.x.padding=e.getXDomainPadding([e.getXDomainMinMax(f,"min"),e.getXDomainMinMax(f,"max")],u)}a.axis.x.tickCount=u}r.svg&&i.axis_x_tick_autorotate&&i.axis_x_tick_fit&&!i.axis_x_tick_multiline&&!i.axis_x_tick_culling&&o&&(s=e.needToRotateXAxisTickTexts()?i.axis_x_tick_rotate:0)}return s},needToRotateXAxisTickTexts:function(){var t=this,e=t.state,n=e.axis,i=e.current,a=e.isLegendRight,r=e.legendItemWidth,s=a&&r,o=i.width-s-t.getCurrentPaddingByDirection("left")-t.getCurrentPaddingByDirection("right"),l=n.x.tickCount+n.x.padding.left+n.x.padding.right,c=t.axis.getMaxTickSize("x").width,u=l?o/l:0;return c>u}},cu={axis_x_clipPath:!0,axis_x_show:!0,axis_x_forceAsSingle:!1,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_inner:!1,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]},uu={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},fu={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},du=V(V(V({axis_evalTextSize:!0,axis_rotated:!1,axis_tooltip:!1},cu),uu),fu),gu={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0},hu={data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},vu=[Yc,Uc,Hc,Wc,Kc,Jc,qc],pu={axis:Qc,clip:iu,eventrect:tu,flow:nu,grid:su,region:ou,sizeAxis:lu},mu={optDataAxis:hu,optAxis:du,optGrid:gu},xu={initArea:function(t){var e=this,n=e.config;t.insert("g",".".concat(n.area_front?we.circles:Qe.lines)).attr("class",e.getClass("areas",!0))},updateAreaColor:function(t){var e=this;return e.config.area_linearGradient?e.getGradienColortUrl(t.id):e.color(t)},updateArea:function(t,e){e===void 0&&(e=!1);var n=this,i=n.config,a=n.state,r=n.$el,s=n.$T,o=e?r.subchart:r;i.area_linearGradient&&n.updateLinearGradient();var l=o.main.selectAll(".".concat(Hn.areas)).selectAll(".".concat(Hn.area)).data(n.lineData.bind(n));s(l.exit(),t).style("opacity","0").remove(),o.area=l.enter().append("path").attr("class",n.getClass("area",!0)).style("fill",n.updateAreaColor.bind(n)).style("opacity",function(){return a.orgAreaOpacity=z(this).style("opacity"),"0"}).merge(l),l.style("opacity",a.orgAreaOpacity),n.setRatioForGroupedData(o.area.data())},redrawArea:function(t,e,n){n===void 0&&(n=!1);var i=this,a=(n?this.$el.subchart:this.$el).area,r=i.state.orgAreaOpacity;return[i.$T(a,e,Pt()).attr("d",t).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(s){return String(i.isAreaRangeType(s)?r/1.75:r)})]},generateDrawArea:function(t,e){var n=this,i=n.config,a=i.line_connectNull,r=i.axis_rotated,s=n.generateGetAreaPoints(t,e),o=n.getYScaleById.bind(n),l=function(f){return(e?n.subxx:n.xx).call(n,f)},c=function(f,d){return n.isGrouped(f.id)?s(f,d)[0][1]:o(f.id,e)(n.isAreaRangeType(f)?n.getRangedData(f,"high"):n.getShapeYMin(f.id))},u=function(f,d){return n.isGrouped(f.id)?s(f,d)[1][1]:o(f.id,e)(n.isAreaRangeType(f)?n.getRangedData(f,"low"):f.value)};return function(f){var d=a?n.filterRemoveNull(f.values):f.values,g=0,h=0,p;if(n.isAreaType(f)){var v=Rs();v=r?v.y(l).x0(c).x1(u):v.x(l).y0(i.area_above?0:i.area_below?n.state.height:c).y1(u),a||(v=v.defined(function(m){return n.getBaseValue(m)!==null})),n.isStepType(f)&&(d=n.convertValuesToStep(d)),p=v.curve(n.getCurve(f))(d)}else d[0]&&(g=n.scale.x(d[0].x),h=n.getYScaleById(f.id)(d[0].value)),p=r?"M ".concat(h," ").concat(g):"M ".concat(g," ").concat(h);return p||"M 0 0"}},generateGetAreaPoints:function(t,e){var n=this,i=n.config,a=n.getShapeX(0,t,e),r=n.getShapeY(!!e),s=n.getShapeOffset(n.isAreaType,t,e),o=n.getYScaleById.bind(n);return function(l,c){var u=o.call(n,l.id,e)(n.getShapeYMin(l.id)),f=s(l,c)||u,d=a(l),g=l.value,h=r(l);return i.axis_rotated&&(g>0&&h<u||g<0&&u<h)&&(h=u),[[d,f],[d,h-(u-f)],[d,h-(u-f)],[d,f]]}}};function yu(t,e,n,i){i===void 0&&(i=!1);for(var a=t?[t,0]:n,r=function(l){n.forEach(function(c){l+c<=e&&a.push(c),l+=c}),s=l},s,o=t||n.reduce(function(l,c){return l+c});o<=e;)r(o),o=s;return a.length%2!==0&&a.push(i?n[1]:0),{dash:a.join(" "),length:a.reduce(function(l,c){return l+c},0)}}function _u(t,e,n){var i=this,a=[],r="2 2";if(re(e))for(var s=function(d,g){return $e(d)?g:n?De.call(i,d):d},o=0,l=void 0;l=e[o];o++){var c=s(l.start,t[0].x),u=s(l.end,t[t.length-1].x),f=l.style||{dasharray:r};a[o]={start:c,end:u,style:f}}return a}var bu={initLine:function(){var t=this.$el;t.line=t.main.select(".".concat(K.chart)).append("g").attr("class",Qe.chartLines).call(this.setCssRule(!1,".".concat(Qe.chartLines),["pointer-events:none"]))},updateTargetsForLine:function(t){var e=this,n=e.$el,i=n.area,a=n.line,r=n.main,s=e.getChartClass("Line"),o=e.getClass("lines",!0),l=e.classFocus.bind(e);a||e.initLine();var c=t.filter(function(g){return!(e.isScatterType(g)||e.isBubbleType(g))}),u=r.select(".".concat(Qe.chartLines)).selectAll(".".concat(Qe.chartLine)).data(c).attr("class",function(g){return s(g)+l(g)}),f=u.enter().append("g").attr("class",s).style("opacity","0").style("pointer-events",e.getStylePropValue("none"));if(f.append("g").attr("class",o),e.hasTypeOf("Area")){var d=(!i&&f.empty()?u:f).filter(e.isAreaType.bind(e));e.initArea(d)}e.updateTargetForCircle(c,f)},updateLine:function(t,e){e===void 0&&(e=!1);var n=this,i=n.format.extraLineClasses,a=n.$el,r=n.$T,s=e?a.subchart:a,o=s.main.selectAll(".".concat(Qe.lines)).selectAll(".".concat(Qe.line)).data(n.lineData.bind(n));r(o.exit(),t).style("opacity","0").remove(),s.line=o.enter().append("path").attr("class",function(l){return"".concat(n.getClass("line",!0)(l)," ").concat(i(l)||"")}).style("stroke",n.color).merge(o).style("opacity",n.initialOpacity.bind(n)).attr("transform",null)},redrawLine:function(t,e,n){n===void 0&&(n=!1);var i=this,a=i.$el,r=i.$T,s=(n?a.subchart:a).line;return[r(s,e,Pt()).attr("d",t).style("stroke",this.color).style("opacity",null)]},getCurve:function(t){var e=this,n=e.config.axis_rotated&&e.isStepType(t);return n?function(i){var a=e.getInterpolate(t)(i);return a.orgPoint=a.point,a.pointRotated=function(r,s){this._point===1&&(this._point=2);var o=this._y*(1-this._t)+s*this._t;this._context.lineTo(this._x,o),this._context.lineTo(r,o),this._x=r,this._y=s},a.point=function(r,s){this._point===0?this.orgPoint(r,s):this.pointRotated(r,s)},a}:e.getInterpolate(t)},generateDrawLine:function(t,e){var n=this,i=n.config,a=n.scale,r=i.line_connectNull,s=i.axis_rotated,o=n.generateGetLinePoints(t,e),l=n.getYScaleById.bind(n),c=function(g){return(e?n.subxx:n.xx).call(n,g)},u=function(g,h){return n.isGrouped(g.id)?o(g,h)[0][1]:l(g.id,e)(n.getBaseValue(g))},f=ks();f=s?f.x(u).y(c):f.x(c).y(u),r||(f=f.defined(function(g){return n.getBaseValue(g)!==null}));var d=e?a.subX:a.x;return function(g){var h=l(g.id,e),p=r?n.filterRemoveNull(g.values):g.values,v=0,m=0,x;if(n.isLineType(g)){var y=i.data_regions[g.id];y?x=n.lineWithRegions(p,a.zoom||d,h,y):(n.isStepType(g)&&(p=n.convertValuesToStep(p)),x=f.curve(n.getCurve(g))(p))}else p[0]&&(v=d(p[0].x),m=h(p[0].value)),x=s?"M ".concat(m," ").concat(v):"M ".concat(v," ").concat(m);return x||"M 0 0"}},lineWithRegions:function(t,e,n,i){for(var a=this,r=a.config,s=r.axis_rotated,o=a.axis.isTimeSeries(),l="2 2",c=_u.bind(a)(t,i,o),u=a.hasNullDataValue(t),f,d,g,h,p=s?function(P){return n(P.value)}:function(P){return e(P.x)},v=s?function(P){return e(P.x)}:function(P){return n(P.value)},m=function(P){return"M".concat(P[0][0],",").concat(P[0][1],"L").concat(P[1][0],",").concat(P[1][1])},x=o?function(P,pe,me,Re){var qe=P.x.getTime(),He=pe.x-P.x,ot=new Date(qe+He*me),We=new Date(qe+He*(me+Re)),Rn=s?[[n(d(me)),e(ot)],[n(d(me+g)),e(We)]]:[[e(ot),n(d(me))],[e(We),n(d(me+g))]];return m(Rn)}:function(P,pe,me,Re){var qe=e(pe.x,!s),He=n(pe.value,s),ot=me+Re,We=e(f(me),!s),Rn=n(d(me),s),pt=e(f(ot),!s),mt=n(d(ot),s);pt>qe&&(pt=qe),P.value>pe.value&&(s?mt<He:mt>He)&&(mt=He);var Ei=[[We,Rn],[pt,mt]];return s&&Ei.forEach(function(gr){return gr.reverse()}),m(Ei)},y={x:a.axis.getAxisType("x"),y:a.axis.getAxisType("y")},_="",$=a.$el.line.filter(function(P){var pe=P.id;return pe===t[0].id}),b=$.clone().style("display","none"),T=function(P,pe){return P.attr("d",pe).node().getTotalLength()},A={dash:[],lastLength:0},k=!1,I=0,R=void 0;R=t[I];I++){var C=t[I-1],D=C&&G(C.value),O=a.isWithinRegions(R.x,c);if(G(R.value)){if($e(c)||!O||!D)_+="".concat(I&&D?"L":"M").concat(p(R),",").concat(v(R));else if(D)if(O=(O?.dasharray||l).split(" ").map(Number),f=ht(y.x,C.x,R.x),d=ht(y.y,C.value,R.value),u){var ee=e(R.x)-e(C.x),st=n(R.value)-n(C.value),S=Math.sqrt(Math.pow(ee,2)+Math.pow(st,2));g=O[0]/S,h=g*O[1];for(var L=g;L<=1;L+=h)_+=x(C,R,L,g),L+h>=1&&(_+=x(C,R,1,0))}else{var N=[];if(k=R.x===t[t.length-1].x,o){var M=+C.x,Te=new Date(M),ne=new Date(M+(+R.x-M));N=[[e(Te),n(d(0))],[e(ne),n(d(1))]]}else N=[[e(f(0)),n(d(0))],[e(f(1)),n(d(1))]];s&&N.forEach(function(P){return P.reverse()});var Se=T(b,_),U=T(b,_+="L".concat(N[1].join(","))),q=yu(Se-A.lastLength,U-A.lastLength,O,k);A.lastLength+=q.length,A.dash.push(q.dash)}}}return A.dash.length&&(!k&&A.dash.push(T(b,_)),b.remove(),$.attr("stroke-dasharray",A.dash.join(" "))),_},isWithinRegions:function(t,e){for(var n=0,i=void 0;i=e[n];n++)if(i.start<t&&t<=i.end)return i.style;return!1},isWithinStep:function(t,e){return Math.abs(e-Ve(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return e===!0||Z(e)&&e.indexOf(t.id)!==-1}},_t=function(){return Pt()},$u={initialOpacityForCircle:function(t){var e=this,n=e.config,i=e.state.withoutFadeIn,a=n.point_opacity;return $e(a)&&(a=this.getBaseValue(t)!==null&&i[t.id]?this.opacityForCircle(t):"0"),a},opacityForCircle:function(t){var e,n=this.config,i=n.point_opacity;return $e(i)&&(i=n.point_show&&!(!((e=this.isPointFocusOnly)===null||e===void 0)&&e.call(this))?null:"0",i=G(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":i:"0"),i},initCircle:function(){var t=this,e=t.$el.main;!t.point&&(t.point=t.generatePoint()),(t.hasType("bubble")||t.hasType("scatter"))&&e.select(".".concat(K.chart," > .").concat(we.chartCircles)).empty()&&e.select(".".concat(K.chart)).append("g").attr("class",we.chartCircles)},updateTargetForCircle:function(t,e){var n=this,i=this,a=i.config,r=i.data,s=i.$el,o=a.interaction_enabled&&a.data_selection_enabled,l=o&&a.data_selection_isselectable,c=i.getClass("circles",!0);if(a.point_show){i.initCircle();var u=t,f=e;if(!u){u=r.targets.filter(function(g){return n.isScatterType(g)||n.isBubbleType(g)});var d=s.main.select(".".concat(we.chartCircles)).style("pointer-events","none").selectAll(".".concat(we.circles)).data(u);d.exit().remove(),f=d.enter()}o&&f.append("g").attr("class",function(g){return i.generateClass(he.selectedCircles,g.id)}),f.append("g").attr("class",c).call(function(g){i.setCssRule(!0,".".concat(we.circles),["cursor:pointer"],l)(g),i.setCssRule(!0," .".concat(we.circle),["fill","stroke"],i.color)(g)}).style("opacity",function(){var g=z(this.parentNode);return g.attr("class").indexOf(we.chartCircles)>-1?"0":null}),o&&u.forEach(function(g){s.main.selectAll(".".concat(he.selectedCircles).concat(i.getTargetSelectorSuffix(g.id))).selectAll("".concat(he.selectedCircle)).each(function(h){h.value=g.values[h.index].value})})}},updateCircle:function(t){t===void 0&&(t=!1);var e=this,n=e.config,i=e.state,a=e.$el,r=e.isPointFocusOnly(),s=t?a.subchart:a;if(n.point_show&&!i.toggling){n.point_radialGradient&&e.updateLinearGradient();var o=s.main.selectAll(".".concat(we.circles)).selectAll(".".concat(we.circle)).data(function(l){return e.isLineType(l)&&e.shouldDrawPointsForLine(l)||e.isBubbleType(l)||e.isRadarType(l)||e.isScatterType(l)?r?[l.values[0]]:l.values:[]});o.exit().remove(),o.enter().filter(Boolean).append(e.point("create",this,e.pointR.bind(e),e.updateCircleColor.bind(e))),s.circle=s.main.selectAll(".".concat(we.circles," .").concat(we.circle)).style("stroke",e.getStylePropValue(e.color)).style("opacity",e.initialOpacityForCircle.bind(e))}},updateCircleColor:function(t){var e=this,n=e.getStylePropValue(e.color);return e.config.point_radialGradient?e.getGradienColortUrl(t.id):n?n(t):null},redrawCircle:function(t,e,n,i,a){a===void 0&&(a=!1);var r=this,s=r.state.rendered,o=r.$el,l=r.$T,c=a?o.subchart:o,u=c.main.selectAll(".".concat(he.selectedCircle));if(!r.config.point_show)return[];var f=r.point("update",r,t,e,r.updateCircleColor.bind(r),n,i,u),d=r.isCirclePoint()?"c":"",g=Pt(),h=r.opacityForCircle.bind(r),p=[];return c.circle.each(function(v){var m=f.bind(this)(v);m=l(m,n||!s,g).style("opacity",h),p.push(m)}),[p,l(u,n).attr("".concat(d,"x"),t).attr("".concat(d,"y"),e)]},showCircleFocus:function(t){var e=this,n=e.state,i=n.hasRadar,a=n.resizing,r=n.toggling,s=n.transiting,o=e.$el,l=o.circle;if(s===!1&&l&&e.isPointFocusOnly()){var c=(i?e.radarCircleX:e.circleX).bind(e),u=(i?e.radarCircleY:e.circleY).bind(e),f=r||$e(t),d=e.point("update",e,c,u,e.getStylePropValue(e.color),a?!1:f);t&&(l=l.filter(function(g){var h,p=(h=t.filter)===null||h===void 0?void 0:h.call(t,function(v){return v.id===g.id});return p.length?z(this).datum(p[0]):!1})),l.attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(g){var h=g.id,p=g.index,v=g.value,m="hidden";G(v)&&(d.bind(this)(g),e.expandCircles(p,h),m=""),this.style.visibility=m})}},hideCircleFocus:function(){var t=this,e=t.$el.circle;t.isPointFocusOnly()&&e&&(t.unexpandCircles(),e.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(t){t===void 0&&(t=!1);var e=this,n=e.generateGetLinePoints(e.getShapeIndices(e.isLineType),t);return function(i,a){var r=i.id;return e.isGrouped(r)?n(i,a)[0][1]:e.getYScaleById(r,t)(e.getBaseValue(i))}},expandCircles:function(t,e,n){var i=this,a=i.pointExpandedR.bind(i);n&&i.unexpandCircles();var r=i.getShapeByIndex("circle",t,e).classed(K.EXPANDED,!0),s=a(r)/i.config.point_r,o=1-s;i.isCirclePoint()?r.attr("r",a):r.each(function(){var l=z(this);if(this.tagName==="circle")l.attr("r",a);else{var c=this.getBBox(),u=c.width,f=c.height,d=o*(+l.attr("x")+u/2),g=o*(+l.attr("y")+f/2);l.attr("transform","translate(".concat(d," ").concat(g,") scale(").concat(s,")"))}})},unexpandCircles:function(t){var e=this,n=e.pointR.bind(e),i=e.getShapeByIndex("circle",t).filter(function(){return z(this).classed(K.EXPANDED)}).classed(K.EXPANDED,!1);if(i.attr("r",n),!e.isCirclePoint()){var a=n(i)/e.config.point_r;i.attr("transform",a!==1?"scale(".concat(a,")"):null)}},pointR:function(t){var e=this,n=e.config,i=n.point_r,a=i;return e.isBubbleType(t)?a=e.getBubbleR(t):B(i)&&(a=i.bind(e.api)(t)),t.r=a,a},pointExpandedR:function(t){var e=this,n=e.config,i=e.isBubbleType(t)?1.15:1.75;return n.point_focus_expand_enabled?n.point_focus_expand_r||e.pointR(t)*i:e.pointR(t)},pointSelectR:function(t){var e=this,n=e.config.point_select_r;return B(n)?n(t):n||e.pointR(t)*4},isPointFocusOnly:function(){var t=this;return t.config.point_focus_only&&!t.hasType("bubble")&&!t.hasType("scatter")&&!t.hasArcType(null,["radar"])},isWithinCircle:function(t,e){var n=this.state,i=Ve(n.event,t),a=z(t),r=this.isCirclePoint(t)?"c":"",s=this.getPointSensitivity(a?.datum()),o=+a.attr("".concat(r,"x")),l=+a.attr("".concat(r,"y"));if(!(o||l)&&t.nodeType===1){var c=zt(t),u=c.x,f=c.y;o=u,l=f}return Math.sqrt(Math.pow(o-i[0],2)+Math.pow(l-i[1],2))<(e||s)},getPointSensitivity:function(t){var e=this,n=e.config.point_sensitivity;if(t)B(n)?n=n.call(e.api,t):n==="radius"&&(n=t.r);else return n;return n},updatePointClass:function(t){var e=this,n=e.$el.circle,i=!1;return(te(t)||n)&&(i=t===!0?n.each(function(a){var r=e.getClass("circle",!0)(a);this.getAttribute("class").indexOf(K.EXPANDED)>-1&&(r+=" ".concat(K.EXPANDED)),this.setAttribute("class",r)}):e.getClass("circle",!0)(t)),i},generateGetLinePoints:function(t,e){var n=this,i=n.config,a=n.getShapeX(0,t,e),r=n.getShapeY(e),s=n.getShapeOffset(n.isLineType,t,e),o=n.getYScaleById.bind(n);return function(l,c){var u=o.call(n,l.id,e)(n.getShapeYMin(l.id)),f=s(l,c)||u,d=a(l),g=r(l);i.axis_rotated&&(l.value>0&&g<u||l.value<0&&u<g)&&(g=u);var h=[d,g-(u-f)];return[h,h,h,h]}},custom:{create:function(t,e,n){return t.append("use").attr("xlink:href","#".concat(e)).attr("class",this.updatePointClass.bind(this)).style("fill",n).node()},update:function(t,e,n,i,a,r,s){var o=this,l=t.node().getBBox(),c=l.width,u=l.height,f=function(h){return G(h.value)?e(h)-c/2:0},d=function(h){return G(h.value)?n(h)-u/2:0},g=t;return a&&(r&&g.attr("x",f),g=o.$T(g,a,_t()),s&&o.$T(s,a,_t())),g.attr("x",f).attr("y",d).style("fill",i)}},circle:{create:function(t,e,n){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",n).node()},update:function(t,e,n,i,a,r,s){var o=this,l=t;return o.hasType("bubble")&&l.attr("r",o.pointR.bind(o)),a&&(r&&l.attr("cx",e),l.attr("cx")&&(l=o.$T(l,a,_t())),s&&o.$T(l,a,_t())),l.attr("cx",e).attr("cy",n).style("fill",i)}},rectangle:{create:function(t,e,n){var i=function(a){return e(a)*2};return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",i).attr("height",i).style("fill",n).node()},update:function(t,e,n,i,a,r,s){var o=this,l=o.config.point_r,c=function(d){return e(d)-l},u=function(d){return n(d)-l},f=t;return a&&(r&&f.attr("x",c),f=o.$T(f,a,_t()),s&&o.$T(s,a,_t())),f.attr("x",c).attr("y",u).style("fill",i)}}};function Tu(t){return Ye(t)&&B(t.create)&&B(t.update)}function wu(t,e){var n,i=this,a=function(c,u){for(var f=c.attributes,d=0,g;g=f[d];d++)g=g.name,u.setAttribute(g,c.getAttribute(g))},r=new DOMParser().parseFromString(t,"image/svg+xml"),s=r.documentElement,o=le.createElementNS(gn.svg,s.nodeName.toLowerCase());if(o.id=e,o.style.fill="inherit",o.style.stroke="inherit",a(s,o),!((n=s.childNodes)===null||n===void 0)&&n.length){var l=z(o);"innerHTML"in o?l.html(s.innerHTML):Ct(s.childNodes).forEach(function(c){a(c,l.append(c.tagName).node())})}i.$el.defs.node().appendChild(o)}var Su={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasLegendDefsPoint:function(){var t,e=this.config;return e.legend_show&&((t=e.point_pattern)===null||t===void 0?void 0:t.length)&&e.legend_usePoint},getDefsPointId:function(t){var e=this.state.datetimeId;return"".concat(e,"-point").concat(t)},generatePoint:function(){var t=this,e=t.$el,n=t.config,i=[],a=ce(n.point_pattern)?n.point_pattern:[n.point_type];return function(r,s){for(var o=[],l=2;l<arguments.length;l++)o[l-2]=arguments[l];return function(c){var u,f,d,g,h=t.getTargetSelectorSuffix(c.id||((u=c.data)===null||u===void 0?void 0:u.id)||c),p=z(this);i.indexOf(h)<0&&i.push(h);var v=a[i.indexOf(h)%a.length];if(t.hasValidPointType(v))v=t[v];else if(!Tu(v||n.point_type)){var m=t.getDefsPointId(h),x=e.defs.select("#".concat(m));if(x.size()<1&&wu.bind(t)(v,m),r==="create")return(f=t.custom)===null||f===void 0?void 0:f.create.bind(s).apply(void 0,oe([p,m],o,!1));if(r==="update")return(d=t.custom)===null||d===void 0?void 0:d.update.bind(s).apply(void 0,oe([p],o,!1))}return(g=v[r])===null||g===void 0?void 0:g.bind(s).apply(void 0,oe([p],o,!1))}}}},Au={point_show:!0,point_r:2.5,point_radialGradient:!1,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},Cu={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Eu={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0};function ku(t,e){ze(Si.prototype,Object.values(pu).concat(t)),ze(Ai.prototype,vu),wi.setOptions(Object.values(mu).concat([]))}function Ru(t,e){ku([Su,$u,bu].concat(t||[])),wi.setOptions([Au,Eu].concat(e||[]))}var dr=function(){return Ru(xu,[Cu]),(dr=function(){return X.AREA})()},Lu=function(t){var e,n=this.internal,i=n.axis,a=n.brush,r=n.config,s=n.scale,o=s.x,l=s.subX,c=n.state,u;if(r.subchart_show)if(u=t,Array.isArray(u)){i.isTimeSeries()&&(u=u.map(function(d){return De.bind(n)(d)}));var f=n.withinRange(u,n.getZoomDomain("subX",!0),n.getZoomDomain("subX"));f&&(c.domain=u,a.move(a.getSelection(),u.map(l)))}else u=(e=c.domain)!==null&&e!==void 0?e:o.orgDomain();return u};ze(Lu,{show:function(){var t,e,n=this.internal,i=n.$el.subchart,a=n.config,r=a.subchart_show;if(!r){n.unbindZoomEvent(),a.subchart_show=!r,!i.main&&n.initSubchart();var s=i.main.selectAll(".".concat(K.target));n.data.targets.length!==s.size()&&(n.updateSizes(),n.updateTargetsForSubchart(n.data.targets),s=(t=i.main)===null||t===void 0?void 0:t.selectAll(".".concat(K.target))),s?.style("opacity",null),(e=i.main)===null||e===void 0||e.style("display",null),this.resize()}},hide:function(){var t=this.internal,e=t.$el.subchart.main,n=t.config;n.subchart_show&&e?.style("display")!=="none"&&(n.subchart_show=!1,e.style("display","none"),this.resize())},toggle:function(){var t=this.internal,e=t.config;this.subchart[e.subchart_show?"hide":"show"]()},reset:function(){var t=this.internal,e=t.brush;e.clear(e.getSelection())}});var Ou=function(t){var e,n=this.internal,i=n.axis,a=n.config,r=n.org,s=n.scale,o=n.state,l=i.isCategorized(),c;if(a.zoom_enabled)if(c=t,Array.isArray(c)){i.isTimeSeries()&&(c=c.map(function(d){return De.bind(n)(d)}));var u=n.withinRange(c,n.getZoomDomain("zoom",!0),n.getZoomDomain("zoom"));if(u){if(o.domain=c,c=n.getZoomDomainValue(c),n.api.tooltip.hide(),a.subchart_show){var f=s.zoom||s.x;n.brush.getSelection().call(n.brush.move,c.map(f))}else{var f=l?s.x.orgScale():r.xScale||s.x;n.updateCurrentZoomTransform(f,c)}n.setZoomResetButton()}}else c=n.zoom.getDomain();return(e=o.domain)!==null&&e!==void 0?e:c};ze(Ou,{enable:function(t){var e=this.internal,n=e.config;/^(drag|wheel)$/.test(t)&&(n.zoom_type=t),n.zoom_enabled=!!t,e.zoom?t===!1&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,n=e.config,i=e.org.xDomain;return(t===0||t)&&(n.zoom_x_max=et("max",[i[1],t])),n.zoom_x_max},min:function(t){var e=this.internal,n=e.config,i=e.org.xDomain;return(t===0||t)&&(n.zoom_x_min=et("min",[i[0],t])),n.zoom_x_min},range:function(t){var e=this.zoom;if(te(t)){var n=t.min,i=t.max;re(n)&&e.min(n),re(i)&&e.max(i)}return{min:e.min(),max:e.max()}}});var Iu={drag:function(t){var e=this,n=e.config,i=e.state,a=e.$el.main,r=n.data_selection_grouped,s=n.interaction_enabled&&n.data_selection_isselectable;if(!(e.hasArcType()||!n.data_selection_enabled||n.zoom_enabled&&!e.zoom.altDomain||!n.data_selection_multiple)){var o=i.dragStart||[0,0],l=o[0],c=o[1],u=t[0],f=t[1],d=Math.min(l,u),g=Math.max(l,u),h=r?i.margin.top:Math.min(c,f),p=r?i.height:Math.max(c,f);a.select(".".concat(ct.dragarea)).attr("x",d).attr("y",h).attr("width",g-d).attr("height",p-h),a.selectAll(".".concat(be.shapes)).selectAll(".".concat(be.shape)).filter(function(v){return s?.bind(e.api)(v)}).each(function(v,m){var x=z(this),y=x.classed(he.SELECTED),_=x.classed(ct.INCLUDED),$=!1,b;if(x.classed(we.circle)){var T=+x.attr("cx")*1,A=+x.attr("cy")*1;b=e.togglePoint,$=d<T&&T<g&&h<A&&A<p}else if(x.classed(mn.bar)){var k=Ol(this),T=k.x,A=k.y,I=k.width,R=k.height;b=e.togglePath,$=!(g<T||T+I<d)&&!(p<A||A+R<h)}else return;$^_&&(x.classed(ct.INCLUDED,!_),x.classed(he.SELECTED,!y),b.call(e,!y,x,v,m))})}},dragstart:function(t){var e=this,n=e.config,i=e.state,a=e.$el.main;e.hasArcType()||!n.data_selection_enabled||(i.dragStart=t,a.select(".".concat(K.chart)).append("rect").attr("class",ct.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){var t=this,e=t.config,n=t.$el.main,i=t.$T;t.hasArcType()||!e.data_selection_enabled||(i(n.select(".".concat(ct.dragarea))).style("opacity","0").remove(),n.selectAll(".".concat(be.shape)).classed(ct.INCLUDED,!1),t.setDragStatus(!1))}};V(V({},Iu),{selectPoint:function(t,e,n){var i=this,a=i.config,r=i.$el.main,s=i.$T,o=a.axis_rotated,l=(o?i.circleY:i.circleX).bind(i),c=(o?i.circleX:i.circleY).bind(i),u=i.pointSelectR.bind(i);fe(a.data_onselected,i.api,e,t.node()),s(r.select(".".concat(he.selectedCircles).concat(i.getTargetSelectorSuffix(e.id))).selectAll(".".concat(he.selectedCircle,"-").concat(n)).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(he.selectedCircle,n)}).attr("cx",l).attr("cy",c).attr("stroke",i.color).attr("r",function(f){return i.pointSelectR(f)*1.4})).attr("r",u)},unselectPoint:function(t,e,n){var i=this,a=i.config,r=i.$el.main,s=i.$T;fe(a.data_onunselected,i.api,e,t?.node()),s(r.select(".".concat(he.selectedCircles).concat(i.getTargetSelectorSuffix(e.id))).selectAll(".".concat(he.selectedCircle,"-").concat(n))).attr("r",0).remove()},togglePoint:function(t,e,n,i){var a="".concat(t?"":"un","selectPoint");this[a](e,n,i)},selectPath:function(t,e){var n=this,i=n.config;fe(i.data_onselected,n.api,e,t.node()),i.interaction_brighten&&t.style("filter","brightness(1.25)")},unselectPath:function(t,e){var n=this,i=n.config;fe(i.data_onunselected,n.api,e,t.node()),i.interaction_brighten&&t.style("filter",null)},togglePath:function(t,e,n,i){this["".concat(t?"":"un","selectPath")](e,n,i)},getToggle:function(t,e){var n=this;return t.nodeName==="path"?n.togglePath:n.isStepType(e)?function(){}:n.togglePoint},toggleShape:function(t,e,n){var i,a=this,r=a.config,s=a.$el.main;if(r.data_selection_enabled&&r.data_selection_isselectable.bind(a.api)(e)){var o=z(t),l=o.classed(he.SELECTED),c=a.getToggle(t,e).bind(a),u;if(!r.data_selection_multiple){var f=(i=a.isPointFocusOnly)===null||i===void 0?void 0:i.call(a),d=".".concat(f?he.selectedCircles:be.shapes);r.data_selection_grouped&&(d+=a.getTargetSelectorSuffix(e.id)),s.selectAll(d).selectAll(f?".".concat(he.selectedCircle):".".concat(be.shape,".").concat(he.SELECTED)).classed(he.SELECTED,!1).each(function(g){var h=z(this);u=h,c(!1,h,g,g.index)})}(!u||u.node()!==o.node())&&(o.classed(he.SELECTED,!l),c(!l,o,e,n))}}});var zn=Object.create(null),Pu={version:"3.15.1",generate:function(t){var e=Et(Object.create(null),zn,t),n=new Ai(e);return n.internal.charts=this.instance,this.instance.push(n),n},defaults:function(t){return te(t)&&(zn=t),zn},instance:[],plugin:{}},Fu=F('<div class="field has-addons"><p class=control><a class="button is-static">X Axis</a></p><p class=control><span class=select><select><option value>Index</option></select></span></p><p class=control><a class="button is-static">Y Axis</a></p><p class=control><span class=select><select>'),Du=F("<div><div>Plot"),ni=F("<option>"),Nu=F("<div>"),Mu=F('<div><table class="table is-striped is-fullwidth"><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody>'),Bu=F('<div><table class="table is-striped is-fullwidth"><thead><tr><th>Index</th><th>Value</th></tr></thead><tbody>'),zu=F('<div><table class="table is-striped is-fullwidth"><thead><tr><th>Index</th></tr></thead><tbody>'),Xu=F('<div class=msg-code><header class=flex-split><span>@</span><span><button class="tag is-info ml-1">Copy</button><div class="select is-small"><select class=ml-1>'),Ji=F("<tr><td></td><td>"),Vu=F("<th>"),ju=F("<tr><td>"),Gu=F("<td>");const Yu=t=>{const e={isArray:Array.isArray(t),isObject:typeof t=="object"&&!Array.isArray(t),isArrayOfNumbers:!0,isArrayOfObjects:!0,arrayFields:new Set,arrayNumberFields:new Set,displayTypes:["fold","raw"]};if(e.isArray){const n=t;n.length>0&&n.forEach(i=>{const a=typeof i;a!=="number"&&(e.isArrayOfNumbers=!1),a==="object"&&!Array.isArray(i)?Object.entries(i).forEach(([r,s])=>{e.arrayFields.add(r),typeof s=="number"&&e.arrayNumberFields.add(r)}):e.isArrayOfObjects=!1})}else e.isArrayOfNumbers=!1,e.isArrayOfObjects=!1;return e.isObject&&e.displayTypes.push("object"),e.isArray&&e.displayTypes.push("array"),(e.isArrayOfNumbers||e.arrayNumberFields.size>0)&&e.displayTypes.push("plot"),e.isArrayOfObjects&&e.displayTypes.push("table"),e},Uu=t=>{let e;const n=Array.from(t.analysis.arrayNumberFields),[i,a]=J(n.length>=2?n[0]:void 0),[r,s]=J(n.length>=2?n[1]:n[0]),o=()=>{let u=[],f=[];if(t.analysis.isArrayOfNumbers)f=t.data,u=f.map((d,g)=>g);else if(t.analysis.isArrayOfObjects){const d=t.data;if(i()===void 0)u=Array.from(d.keys());else{const h=i();u=d.map(p=>p[h])}const g=r();f=d.map(h=>h[g])}else throw new Error("Invalid data for plot");Pu.generate({bindto:e,data:{type:dr(),x:"x",columns:[["x",...u],["y",...f]]}})},l=u=>{const f=u.target;a(f.value),o()},c=u=>{const f=u.target;s(f.value),o()};return ke(()=>{o()}),[(()=>{var u=Fu(),f=u.firstChild,d=f.nextSibling,g=d.firstChild,h=g.firstChild,p=h.firstChild,v=d.nextSibling,m=v.nextSibling,x=m.firstChild,y=x.firstChild;return h.addEventListener("change",l),E(h,w(Le,{get each(){return Array.from(t.analysis.arrayNumberFields)},children:_=>(()=>{var $=ni();return $.value=_,E($,_),Oe(()=>$.selected=i()===_),$})()}),null),y.addEventListener("change",c),E(y,w(Le,{get each(){return Array.from(t.analysis.arrayNumberFields)},children:_=>(()=>{var $=ni();return $.value=_,E($,_),Oe(()=>$.selected=r()===_),$})()})),Oe(()=>p.selected=i()===void 0),u})(),(()=>{var u=Du(),f=u.firstChild,d=e;return typeof d=="function"?dt(d,f):e=f,u})()]},Hu=t=>{const[e,n]=J(null),[i,a]=J(),[r,s]=J("raw"),[o,l]=J("");ke(async()=>{let u=t.type,f=null;switch(t.type){case"json":try{f=JSON.parse(t.content),n(f)}catch{}break}a(Yu(f)),dn.getLanguage(u)===void 0&&(u="plaintext");const d=dn.highlight(t.content,{language:u});l(Ut.sanitize(d.value))});const c=()=>{yn(t.content),xe.success("Copied to clipboard")};return[(()=>{var u=Xu(),f=u.firstChild,d=f.firstChild;d.firstChild;var g=d.nextSibling,h=g.firstChild,p=h.nextSibling,v=p.firstChild;return E(d,()=>t.type,null),h.$$click=c,v.addEventListener("change",m=>s(m.currentTarget.value)),E(v,()=>i()?.displayTypes.map(m=>(()=>{var x=ni();return x.value=m,E(x,m),Oe(()=>x.selected=m===r()),x})())),E(u,w(Ge,{get children(){return[w(ae,{get when(){return r()==="raw"},get children(){var m=Nu();return Oe(()=>m.innerHTML=o()),m}}),w(ae,{get when(){return r()==="object"},get children(){var m=Mu(),x=m.firstChild,y=x.firstChild,_=y.nextSibling;return E(_,w(Le,{get each(){return Object.entries(e())},children:([$,b])=>(()=>{var T=Ji(),A=T.firstChild,k=A.nextSibling;return E(A,$),E(k,()=>JSON.stringify(b)),T})()})),m}}),w(ae,{get when(){return r()==="array"},get children(){var m=Bu(),x=m.firstChild,y=x.firstChild,_=y.nextSibling;return E(_,w(Le,{get each(){return e().map(($,b)=>({index:b,value:$}))},children:({index:$,value:b})=>(()=>{var T=Ji(),A=T.firstChild,k=A.nextSibling;return E(A,$),E(k,()=>JSON.stringify(b)),T})()})),m}}),w(ae,{get when(){return r()==="table"},get children(){var m=zu(),x=m.firstChild,y=x.firstChild,_=y.firstChild;_.firstChild;var $=y.nextSibling;return E(_,w(Le,{get each(){return Array.from(i()?.arrayFields||[])},children:b=>(()=>{var T=Vu();return E(T,b),T})()}),null),E($,w(Le,{get each(){return e().map((b,T)=>({index:T,obj:b}))},children:({index:b,obj:T})=>(()=>{var A=ju(),k=A.firstChild;return E(k,b),E(A,w(Le,{get each(){return Array.from(i()?.arrayFields||[])},children:I=>(()=>{var R=Gu();return E(R,()=>JSON.stringify(T[I])),R})()}),null),A})()})),m}}),w(ae,{get when(){return r()==="plot"},get children(){return w(Uu,{get analysis(){return i()},get data(){return e()}})}})]}}),null),u})(),w(li,{getContent:()=>t.content,getLang:()=>t.type})]};Ne(["click"]);var Wu=F("<div class=content>"),Ku=F('<div class="msg-code msg-code-fold flex-split"><span> (<!> lines)</span><button>'),Ju=F("<div class=msg-code><header class=flex-split><span></span><span><button class=px-2>copy</button><button></button></span></header><div class=msg-code-body>"),qu=F('<div class="notification is-danger">Redering Error: <hr>'),Zu=F("<div class=msg-preview>"),Qu=F("<div class=msg-code><header class=flex-split><span></span><span><button class=px-2> copy</button><span></span></span></header><div class=msg-code-body>"),ef=F("<div class=msg-raw>"),qi=F("<div>");oi.use(Bs({nonStandard:!0,throwOnError:!1}));let Zi=!1;const tf=async()=>{const t=(await Ms(async()=>{const{default:e}=await import("./mermaid-BOfcbsIe.js").then(n=>n.c6);return{default:e}},__vite__mapDeps([0,1,2]))).default;return Zi||(t.initialize({suppressErrorRendering:!0,htmlLabels:!1}),Zi=!0),t},nf=t=>{const[e,n]=J(""),i=async a=>{const r=await oi(a,{async:!0}),s=Ut.sanitize(r);n(s.replaceAll("<a href",'<a target="_blank" href'))};return ke(async()=>{await i(t.content)}),(()=>{var a=Wu();return Oe(()=>a.innerHTML=e()),a})()},af=t=>{const[e,n]=J(""),[i,a]=J(t.type===Xr||t.content.length>32e3),[r,s]=J(0);return ke(async()=>{let o=t.type;o==="run-js"&&(o="javascript"),dn.getLanguage(o)===void 0&&(o="plaintext");const l=dn.highlight(t.content,{language:o});n(l.value),s(t.content.split(`
`).length)}),w(Ge,{get children(){return[w(ae,{get when(){return i()},get children(){var o=Ku(),l=o.firstChild,c=l.firstChild,u=c.nextSibling;u.nextSibling;var f=l.nextSibling;return o.$$click=()=>a(!1),E(l,()=>t.type,c),E(l,r,u),E(f,w(pa,{})),o}}),w(ae,{when:!0,get children(){return[(()=>{var o=Ju(),l=o.firstChild,c=l.firstChild,u=c.nextSibling,f=u.firstChild,d=f.firstChild,g=f.nextSibling,h=l.nextSibling;return l.$$click=()=>a(!0),E(c,()=>t.type),f.$$click=p=>{yn(t.content),xe.success("Copied!"),p.stopPropagation()},E(f,w(xa,{}),d),E(g,w(ma,{})),Oe(()=>h.innerHTML=e()),o})(),w(li,{getContent:()=>t.content,getLang:()=>t.type,onToggleFold:()=>a(o=>!o)})]}})]}})},kn=t=>e=>{const[n,i]=J(""),[a,r]=J(""),[s,o]=J(!1);return ke(async()=>{try{const l=await t(e.content);i(Ut.sanitize(l))}catch(l){at.error("Error rendering preview:",l),r(`${l}`)}}),[(()=>{var l=Qu(),c=l.firstChild,u=c.firstChild,f=u.nextSibling,d=f.firstChild,g=d.firstChild,h=d.nextSibling,p=c.nextSibling;return c.$$click=()=>o(v=>!v),E(u,()=>e.type),d.$$click=v=>{yn(e.content),xe.success("Copied!"),v.stopPropagation()},E(d,w(xa,{}),g),E(h,()=>s()?"raw":"preview"),E(p,w(Ge,{get children(){return[w(ae,{get when(){return a()},get children(){var v=qu(),m=v.firstChild,x=m.nextSibling;return E(v,a,x),E(v,()=>e.content,null),v}}),w(ae,{get when(){return s()},get children(){return e.content}}),w(ae,{when:!0,get children(){var v=Zu();return Oe(()=>v.innerHTML=n()),v}})]}})),l})(),w(li,{getContent:()=>e.content,getLang:()=>e.type})]},rf=kn(async t=>Ut.sanitize(t)),sf=kn(async t=>{const e=await tf(),{svg:n}=await e.render("mermaid",t);return Ut.sanitize(n)}),of=kn(async t=>await oi(t,{async:!0})),lf=kn(async t=>(await Vt()).genQRSVG(t)),cf=new Map([[Mr,nf],[Br,hl],[zr,Ao],["svg",rf],["mermaid",sf],["json",Hu],["markdown",of],["qr",lf]]),uf=t=>{const[e,n]=J("");return ke(async()=>{const i=nt().models[nt().currentModelIdx],a=new Nr(i),r=[];a.formatMsg(r,t.msg),n(r.map(s=>s.extractText()).join(`

`))}),(()=>{var i=ef();return E(i,e),i})()},ii=t=>{const e="message-body "+(t.msg.role==="user"?"msg-user theme-dark ":"msg-assistant ")+(t.msg.uphurry?" is-uphurry":"");return w(Ge,{get children(){return[w(ae,{get when(){return Dr()},get children(){var n=qi();return Xt(n,e),E(n,w(uf,{get msg(){return t.msg}})),n}}),w(ae,{when:!0,get children(){var n=qi();return Xt(n,e),E(n,w(Le,{get each(){return t.msg.parts},children:i=>w(ra,{get component(){return cf.get(i.type)||af},get type(){return i.type},get content(){return i.content}})})),n}})]}})};Ne(["click"]);var ff=F('<div class="field has-addons"><div class=control><button class="button is-primary"></button></div><div class="control is-expanded"><input class=input type=text></div><div class=control><button class="button is-success">Save'),df=F("<i>untitled"),gf=F('<h1 class="title is-3"><button class="ml-1 tag">Edit');const hf=t=>{let e;const n=a=>{a.key==="Enter"&&(a.preventDefault(),t.onSave(e.value))},i=async()=>{await xe.promise(Gr(),{loading:"Generating...",success:"Generated",error:a=>(at.error(a),"Failed to generate")})};return(()=>{var a=ff(),r=a.firstChild,s=r.firstChild,o=r.nextSibling,l=o.firstChild,c=o.nextSibling,u=c.firstChild;s.$$click=i,E(s,w(Vr,{})),l.$$keyup=n;var f=e;return typeof f=="function"?dt(f,l):e=l,u.$$click=()=>t.onSave(e.value),Oe(()=>ai(l,"placeholder",t.originalTitle||"<untitled>")),a})()},vf=()=>{const[t,e]=J(!1),n=()=>e(!t()),i=a=>{n(),jr(a)};return w(Ge,{get children(){return[w(ae,{get when(){return t()},get children(){return w(hf,{get originalTitle(){return on().title},onSave:i})}}),w(ae,{when:!0,get children(){var a=gf(),r=a.firstChild;return E(a,w(Ge,{get children(){return[w(ae,{get when(){return on().title},get children(){return on().title}}),w(ae,{when:!0,get children(){return df()}})]}}),r),r.$$click=n,a}})]}})};Ne(["click","keyup"]);var pf=F('<div class=box><ul></ul><div class="buttons is-right">'),mf=F("<li>");const xf=t=>ca(n=>(()=>{var i=pf(),a=i.firstChild,r=a.nextSibling;return E(a,w(Le,{each:t,children:s=>(()=>{var o=mf();return E(o,s),o})()})),E(r,w(zs,{autofocus:!0,onEscape:()=>n.onClose(),buttons:[{class:"button is-danger",label:"Close",onClick:()=>n.onClose()}]})),i})());var yf=F("<div class=streaming-msg>"),_f=F('<div class="message-body msg-user theme-dark is-uphurry has-text-centered"><span class=spinner>'),bf=F('<div class=has-text-centered><span class="spinner spinner-primary">'),$f=F("<span class=is-underlined>(<!> more warnings...)"),Tf=F('<div class="notification is-warning px-3 py-2"><b>'),wf=F("<div class=msg-group>");const Sf=()=>[w(ye,{get when(){return ki()},get children(){return w(ii,{get msg(){return Hr(ki())}})}}),w(ye,{get when(){return Ri()},get children(){var t=yf();return E(t,Ri),t}}),w(Ge,{get children(){return[w(ae,{get when(){return Wr()},get children(){return _f()}}),w(ae,{get when(){return Dt()},get children(){return bf()}})]}}),w(ye,{get when(){return xt().length>0},get children(){var t=Tf(),e=t.firstChild;return t.$$click=()=>{xt().length>1&&xf(xt())},E(e,()=>xt().at(-1)),E(t,w(ye,{get when(){return xt().length>1},get children(){var n=$f(),i=n.firstChild,a=i.nextSibling;return a.nextSibling,E(n,()=>xt().length,a),n}}),null),t}})],Qi=t=>(()=>{var e=wf();return E(e,w(ye,{get when(){return t.pair.user},get children(){return w(ii,{get msg(){return t.pair.user}})}}),null),E(e,w(ye,{get when(){return t.pair.assistant},get children(){return w(ii,{get msg(){return t.pair.assistant}})}}),null),E(e,w(ye,{get when(){return t.isLast},get children(){return w(Sf,{})}}),null),e})(),Af=()=>{const t=Yr(()=>on().history.msgPairs);return ke(()=>{setTimeout(()=>Ur(),100)}),[w(vf,{}),w(Le,{get each(){return t()},children:(e,n)=>w(Qi,{pair:e,get isLast(){return n()===t().length-1}})}),w(ye,{get when(){return t().length===0},get children(){return w(Qi,{pair:{},isLast:!0})}})]};Ne(["click"]);var Cf=F('<div class="container p-1">'),Ef=F('<div class="bottom-fixed container">');const Df=()=>[(()=>{var t=Cf();return E(t,w(Af,{})),t})(),(()=>{var t=Ef();return E(t,w(wo,{})),t})()];export{Df as default};
