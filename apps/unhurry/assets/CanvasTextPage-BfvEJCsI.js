import{q as T,c as w,o as D,r as M,j as f,t as c,i as v,a as h,s as m,e as p,v as C,w as k,x as R,y as I,z as F,g as L,p as N}from"./index-CF6Yk-Rb.js";import"./mermaid-BOfcbsIe.js";import"./hljs-nSGkUMep.js";import"./marked-DPzEbV2M.js";var P=c("<div class=mb-2><b>Created At</b>: "),q=c('<label class="is-flex flex-split gap-2 is-align-items-center my-1"><div class="label mb-0">URI</div><div class="control w-full"><input class=input type=text>'),j=c('<label class="is-flex flex-split gap-2 is-align-items-center my-1"><div class="label mb-0">Name</div><div class="control w-full"><input class=input type=text>'),z=c('<label class="is-flex flex-split gap-2 is-align-items-center my-1"><div class="label mb-0">MIME</div><div class="control w-full"><input class=input type=text>'),B=c('<div class=my-1><button class="button is-primary"><span class=icon></span><span>Save as'),K=c('<textarea class="textarea is-family-monospace"rows=20>'),U=c("<div class=container><h1 class=title>Artifact ");const Q=()=>{const S=T(),$=()=>S.artifactID;let _,d,o,i;const[u,y]=w(),[x,g]=w();D(async()=>{if($()==="_"){y({_id:"_",uri:"",name:"",mimeType:"text/plain",createdAt:Date.now()}),g("");return}const t=await M($());if(!t){f.error("Artifact not found");return}y(t.meta);const a=t.data.data;g(typeof a=="string"?a:new TextDecoder().decode(a))});const A=t=>{switch(t.key){case"Tab":{t.preventDefault();const a=i.value.slice(0,i.selectionStart),e=i.value.slice(i.selectionEnd);i.value=a+"	"+e,i.selectionStart=i.selectionEnd=a.length+1}break}},b=()=>{const t=d.value,a=R(t);o.value=a},E=async()=>{d.value||f.error("Please enter a name"),(!o.value||o.value.split("/").length!==2)&&f.error("Invalid MIME type");const t=await f.promise(I(_.value,d.value,o.value,i.value),{loading:"Saving...",success:"Saved!",error:a=>(F.error(`[Canvas/Text] Failed to create artifact, ${a}`),"Failed to save")});L("/artifacts?q="+t)};return(()=>{var t=U(),a=t.firstChild;return a.firstChild,v(a,$,null),v(t,h(C,{get when(){return u()},get children(){return[(()=>{var e=P(),l=e.firstChild;return l.nextSibling,v(e,()=>new Date(u()?.createdAt||0).toLocaleString(),null),e})(),(()=>{var e=q(),l=e.firstChild,n=l.nextSibling,s=n.firstChild;s.addEventListener("change",b);var r=_;return typeof r=="function"?p(r,s):_=s,m(()=>s.value=u()?.uri),e})(),(()=>{var e=j(),l=e.firstChild,n=l.nextSibling,s=n.firstChild;s.addEventListener("change",b);var r=d;return typeof r=="function"?p(r,s):d=s,m(()=>s.value=u()?.name),e})(),(()=>{var e=z(),l=e.firstChild,n=l.nextSibling,s=n.firstChild,r=o;return typeof r=="function"?p(r,s):o=s,m(()=>s.value=u()?.mimeType),e})()]}}),null),v(t,h(C,{get when(){return x()!==void 0},get children(){return[(()=>{var e=B(),l=e.firstChild,n=l.firstChild;return l.$$click=E,v(n,h(k,{})),e})(),(()=>{var e=K();e.$$keydown=A;var l=i;return typeof l=="function"?p(l,e):i=e,m(()=>e.value=x()),e})()]}}),null),t})()};N(["click","keydown"]);export{Q as default};
