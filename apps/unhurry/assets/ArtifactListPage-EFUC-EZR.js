import{u as q,c as k,o as G,t as r,i as e,a,B as H,g as D,b as L,d as J,e as K,M as $,F as Q,S as R,l as V,f as M,h as W,T as X,j as x,k as Y,m as Z,n as ee,p as te}from"./index-CF6Yk-Rb.js";import{o as B}from"./ConfirmModal-TQMJ_Tbz.js";import{c as ae,P as ie,s as le}from"./Pagination-CN3GakfK.js";import{o as ne,D as se,a as re}from"./Dropdown-CSb7DZo9.js";import"./mermaid-BOfcbsIe.js";import"./hljs-nSGkUMep.js";import"./marked-DPzEbV2M.js";var ce=r("<b>"),oe=r("<i>"),de=r('<a class="panel-block panel-item"><div class=panel-item-content><div class=panel-item-body><div class=panel-item-title></div><div class=is-size-7> <code></code></div></div><div class=panel-item-date><div></div></div></div><button class="button is-danger is-outlined is-small"><span class=icon>'),ue=r("<span class=icon>"),ge=r("<span>Add"),me=r('<a class="panel-block is-active"><span class=spinner></span> Loading...'),pe=r('<div class=container><div class=m-2><nav class="panel is-primary"><p class="panel-block has-text-weight-bold flex-split"><span>Artifacts (<!>/<!>)</span></p><div class=panel-block><p class=control><input class=input type=text placeholder="Filter by..."></p></div></nav><p class="control is-fullwidth"><button class="button is-danger is-outlined is-fullwidth">Clear All');const he=i=>(()=>{var g=de(),c=g.firstChild,f=c.firstChild,m=f.firstChild,p=m.nextSibling,o=p.firstChild,v=o.nextSibling,d=f.nextSibling,n=d.firstChild,h=c.nextSibling,b=h.firstChild;return M(g,"click",i.onOpen,!0),e(m,a(R,{get children(){return[a($,{get when(){return i.meta.name},get children(){var s=ce();return e(s,()=>i.meta.name),s}}),a($,{when:!0,get children(){var s=oe();return e(s,()=>i.meta._id),s}})]}})),e(p,()=>i.meta.mimeType,o),e(v,()=>i.meta._id),e(n,a(W,{}),null),e(n,()=>le(new Date(i.meta.createdAt)),null),M(h,"click",i.onDelete,!0),e(b,a(X,{})),g})(),Ae=()=>{const[i]=q(),g=10,[c,f]=k(),[m,p]=k([]),[o,v]=ae(m,g);let d;const n=async()=>{const t=await V();f(t),b()},h=()=>c().filter(t=>(t.name+" "+t._id).indexOf(d.value)>=0),b=()=>{p(h().sort((t,l)=>(t.createdAt||0)<(l.createdAt||0)?1:-1))},s=async()=>{await B("Are you sure to delete all files?")&&(await x.promise(ee(),{loading:"Deleting...",success:"Deleted",error:"Failed to delete"}),await n())},T=()=>{p(h())},I=t=>async l=>{l.stopPropagation(),await B("Are you sure to delete this file?")&&(x.promise(Y(t),{loading:"Deleting...",success:"Deleted",error:"Failed to delete"}),n())},O=t=>async()=>{const l=await Z(t);if(!l){x.error("File not found");return}await re(l)&&await n()};return G(()=>{d.value=`${i.q||""}`,n()}),(()=>{var t=pe(),l=t.firstChild,_=l.firstChild,C=_.firstChild,w=C.firstChild,U=w.firstChild,y=U.nextSibling,z=y.nextSibling,S=z.nextSibling;S.nextSibling;var E=C.nextSibling,N=E.firstChild,A=N.firstChild,F=_.nextSibling,j=F.firstChild;e(w,()=>m().length,y),e(w,()=>c()?.length,S),e(C,a(se,{divClass:"is-right",btnClass:"button is-primary is-small",items:[[{label:"Upload File",icon:H,onClick:async()=>{await ne(),n()}}],[{label:"New File",icon:L,onClick:()=>D("/canvas/_/text")},{label:"New Image",icon:J,onClick:()=>D("/canvas/_/image")}]],get children(){return[(()=>{var u=ue();return e(u,a(L,{})),u})(),ge()]}}),null),A.$$input=T;var P=d;return typeof P=="function"?K(P,A):d=A,e(_,a(R,{get children(){return[a($,{get when(){return c()===void 0},get children(){return me()}}),a($,{when:!0,get children(){return a(Q,{get each(){return o().items},children:u=>a(he,{meta:u,get onOpen(){return O(u._id)},onDelete:()=>I(u._id)})})}})]}}),null),e(l,a(ie,{get currentPage(){return o().page},get totalPages(){return o().totalPages},onPageChange:v}),F),j.$$click=s,t})()};te(["click","input"]);export{Ae as default};
