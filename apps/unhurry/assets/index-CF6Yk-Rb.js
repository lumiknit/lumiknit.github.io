const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/tauri-CEDqh0Nj.js","assets/mermaid-BOfcbsIe.js","assets/hljs-nSGkUMep.js","assets/marked-DPzEbV2M.js","assets/About-nkxEY2qi.js","assets/ConfirmModal-TQMJ_Tbz.js","assets/About-BTo0VP5G.css","assets/ArtifactListPage-EFUC-EZR.js","assets/Pagination-CN3GakfK.js","assets/Dropdown-CSb7DZo9.js","assets/CanvasImagePage-CjQwRvOl.js","assets/CanvasTextPage-BfvEJCsI.js","assets/ChatPage-CkEkpJ7y.js","assets/clipboard-BoHkaDj2.js","assets/ChatPage-BEmnddmi.css","assets/ChatListPage-BzgamiT6.js","assets/LogsPage-CU9TNxdN.js","assets/SettingsPage-C2ay_qQC.js"])))=>i.map(i=>d[i]);
import{bI as ue}from"./mermaid-BOfcbsIe.js";import"./hljs-nSGkUMep.js";import"./marked-DPzEbV2M.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const S={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Nn(this.context.count)},getNextContextId(){return Nn(this.context.count++)}};function Nn(e){const t=String(e),n=t.length-1;return S.context.id+(n?String.fromCharCode(96+n):"")+t}function Ke(e){S.context=e}const ur=!1,va=(e,t)=>e===t,ee=Symbol("solid-proxy"),fr=typeof Proxy=="function",ln=Symbol("solid-track"),Ct={equals:va};let dr=wr;const fe=1,kt=2,hr={owned:null,cleanups:null,context:null,owner:null},Yt={};var E=null;let Kt=null,ba=null,P=null,W=null,ce=null,It=0;function ze(e,t){const n=P,r=E,a=e.length===0,s=t===void 0?r:t,i=a?hr:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=a?e:()=>e(()=>F(()=>nt(i)));E=i,P=null;try{return se(l,!0)}finally{P=n,E=r}}function T(e,t){t=t?Object.assign({},Ct,t):Ct;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=a=>(typeof a=="function"&&(a=a(n.value)),yr(n,a));return[pr.bind(n),r]}function xa(e,t,n){const r=Bt(e,t,!0,fe);Ze(r)}function R(e,t,n){const r=Bt(e,t,!1,fe);Ze(r)}function pe(e,t,n){dr=$a;const r=Bt(e,t,!1,fe);r.user=!0,ce?ce.push(r):Ze(r)}function $(e,t,n){n=n?Object.assign({},Ct,n):Ct;const r=Bt(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ze(r),pr.bind(r)}function Aa(e){return e&&typeof e=="object"&&"then"in e}function Sa(e,t,n){let r,a,s;r=!0,a=e,s={};let i=null,l=Yt,u=null,g=!1,m="initialValue"in s,o=typeof r=="function"&&$(r);const c=new Set,[h,d]=(s.storage||T)(s.initialValue),[f,p]=T(void 0),[y,w]=T(void 0,{equals:!1}),[v,b]=T(m?"ready":"unresolved");S.context&&(u=S.getNextContextId(),s.ssrLoadFrom==="initial"?l=s.initialValue:S.load&&S.has(u)&&(l=S.load(u)));function A(q,B,j,de){return i===q&&(i=null,de!==void 0&&(m=!0),(q===l||B===l)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(de,{value:B})),l=Yt,_(B,j)),B}function _(q,B){se(()=>{B===void 0&&d(()=>q),b(B!==void 0?"errored":m?"ready":"unresolved"),p(B);for(const j of c.keys())j.decrement();c.clear()},!1)}function D(){const q=ka,B=h(),j=f();if(j!==void 0&&!i)throw j;return P&&P.user,B}function K(q=!0){if(q!==!1&&g)return;g=!1;const B=o?o():r;if(B==null||B===!1){A(i,F(h));return}const j=l!==Yt?l:F(()=>a(B,{value:h(),refetching:q}));return Aa(j)?(i=j,"value"in j?(j.status==="success"?A(i,j.value,void 0,B):A(i,void 0,un(j.value),B),j):(g=!0,queueMicrotask(()=>g=!1),se(()=>{b(m?"refreshing":"pending"),w()},!1),j.then(de=>A(j,de,void 0,B),de=>A(j,void 0,un(de),B)))):(A(i,j,void 0,B),j)}Object.defineProperties(D,{state:{get:()=>v()},error:{get:()=>f()},loading:{get(){const q=v();return q==="pending"||q==="refreshing"}},latest:{get(){if(!m)return D();const q=f();if(q&&!i)throw q;return h()}}});let re=E;return o?xa(()=>(re=E,K(!1))):K(!1),[D,{refetch:q=>vn(re,()=>K(q)),mutate:d}]}function He(e){return se(e,!1)}function F(e){if(P===null)return e();const t=P;P=null;try{return e()}finally{P=t}}function wn(e,t,n){const r=Array.isArray(e);let a,s=n&&n.defer;return i=>{let l;if(r){l=Array(e.length);for(let g=0;g<e.length;g++)l[g]=e[g]()}else l=e();if(s)return s=!1,i;const u=F(()=>t(l,a,i));return a=l,u}}function Dt(e){pe(()=>F(e))}function Ee(e){return E===null||(E.cleanups===null?E.cleanups=[e]:E.cleanups.push(e)),e}function cn(){return P}function mr(){return E}function vn(e,t){const n=E,r=P;E=e,P=null;try{return se(t,!0)}catch(a){xn(a)}finally{E=n,P=r}}function Ca(e){const t=P,n=E;return Promise.resolve().then(()=>{P=t,E=n;let r;return se(e,!1),P=E=null,r?r.done:void 0})}const[Oc,_c]=T(!1);function gr(e,t){const n=Symbol("context");return{id:n,Provider:Ma(n),defaultValue:e}}function bn(e){let t;return E&&E.context&&(t=E.context[e.id])!==void 0?t:e.defaultValue}function Nt(e){const t=$(e),n=$(()=>fn(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let ka;function pr(){if(this.sources&&this.state)if(this.state===fe)Ze(this);else{const e=W;W=null,se(()=>Tt(this),!1),W=e}if(P){const e=this.observers?this.observers.length:0;P.sources?(P.sources.push(this),P.sourceSlots.push(e)):(P.sources=[this],P.sourceSlots=[e]),this.observers?(this.observers.push(P),this.observerSlots.push(P.sources.length-1)):(this.observers=[P],this.observerSlots=[P.sources.length-1])}return this.value}function yr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&se(()=>{for(let a=0;a<e.observers.length;a+=1){const s=e.observers[a],i=Kt&&Kt.running;i&&Kt.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?W.push(s):ce.push(s),s.observers&&vr(s)),i||(s.state=fe)}if(W.length>1e6)throw W=[],new Error},!1)),t}function Ze(e){if(!e.fn)return;nt(e);const t=It;Ea(e,e.value,t)}function Ea(e,t,n){let r;const a=E,s=P;P=E=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=fe,e.owned&&e.owned.forEach(nt),e.owned=null),e.updatedAt=n+1,xn(i)}finally{P=s,E=a}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?yr(e,r):e.value=r,e.updatedAt=n)}function Bt(e,t,n,r=fe,a){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:E,context:E?E.context:null,pure:n};return E===null||E!==hr&&(E.owned?E.owned.push(s):E.owned=[s]),s}function Et(e){if(e.state===0)return;if(e.state===kt)return Tt(e);if(e.suspense&&F(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<It);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===fe)Ze(e);else if(e.state===kt){const r=W;W=null,se(()=>Tt(e,t[0]),!1),W=r}}function se(e,t){if(W)return e();let n=!1;t||(W=[]),ce?n=!0:ce=[],It++;try{const r=e();return Ta(n),r}catch(r){n||(ce=null),W=null,xn(r)}}function Ta(e){if(W&&(wr(W),W=null),e)return;const t=ce;ce=null,t.length&&se(()=>dr(t),!1)}function wr(e){for(let t=0;t<e.length;t++)Et(e[t])}function $a(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Et(r)}if(S.context){if(S.count){S.effects||(S.effects=[]),S.effects.push(...e.slice(0,n));return}Ke()}for(S.effects&&(S.done||!S.count)&&(e=[...S.effects,...e],n+=S.effects.length,delete S.effects),t=0;t<n;t++)Et(e[t])}function Tt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const a=r.state;a===fe?r!==t&&(!r.updatedAt||r.updatedAt<It)&&Et(r):a===kt&&Tt(r,t)}}}function vr(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=kt,n.pure?W.push(n):ce.push(n),n.observers&&vr(n))}}function nt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),a=n.observers;if(a&&a.length){const s=a.pop(),i=n.observerSlots.pop();r<a.length&&(s.sourceSlots[i]=r,a[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)nt(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)nt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function un(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function xn(e,t=E){throw un(e)}function fn(e){if(typeof e=="function"&&!e.length)return fn(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=fn(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Ma(e,t){return function(r){let a;return R(()=>a=F(()=>(E.context={...E.context,[e]:r.value},Nt(()=>r.children))),void 0),a}}const Pa=Symbol("fallback");function Bn(e){for(let t=0;t<e.length;t++)e[t]()}function Fa(e,t,n={}){let r=[],a=[],s=[],i=0,l=t.length>1?[]:null;return Ee(()=>Bn(s)),()=>{let u=e()||[],g=u.length,m,o;return u[ln],F(()=>{let h,d,f,p,y,w,v,b,A;if(g===0)i!==0&&(Bn(s),s=[],r=[],a=[],i=0,l&&(l=[])),n.fallback&&(r=[Pa],a[0]=ze(_=>(s[0]=_,n.fallback())),i=1);else if(i===0){for(a=new Array(g),o=0;o<g;o++)r[o]=u[o],a[o]=ze(c);i=g}else{for(f=new Array(g),p=new Array(g),l&&(y=new Array(g)),w=0,v=Math.min(i,g);w<v&&r[w]===u[w];w++);for(v=i-1,b=g-1;v>=w&&b>=w&&r[v]===u[b];v--,b--)f[b]=a[v],p[b]=s[v],l&&(y[b]=l[v]);for(h=new Map,d=new Array(b+1),o=b;o>=w;o--)A=u[o],m=h.get(A),d[o]=m===void 0?-1:m,h.set(A,o);for(m=w;m<=v;m++)A=r[m],o=h.get(A),o!==void 0&&o!==-1?(f[o]=a[m],p[o]=s[m],l&&(y[o]=l[m]),o=d[o],h.set(A,o)):s[m]();for(o=w;o<g;o++)o in f?(a[o]=f[o],s[o]=p[o],l&&(l[o]=y[o],l[o](o))):a[o]=ze(c);a=a.slice(0,i=g),r=u.slice(0)}return a});function c(h){if(s[o]=h,l){const[d,f]=T(o);return l[o]=f,t(u[o],d)}return t(u[o])}}}function x(e,t){return F(()=>e(t||{}))}function ht(){return!0}const dn={get(e,t,n){return t===ee?n:e.get(t)},has(e,t){return t===ee?!0:e.has(t)},set:ht,deleteProperty:ht,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ht,deleteProperty:ht}},ownKeys(e){return e.keys()}};function Jt(e){return(e=typeof e=="function"?e():e)?e:{}}function Oa(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function V(...e){let t=!1;for(let i=0;i<e.length;i++){const l=e[i];t=t||!!l&&ee in l,e[i]=typeof l=="function"?(t=!0,$(l)):l}if(fr&&t)return new Proxy({get(i){for(let l=e.length-1;l>=0;l--){const u=Jt(e[l])[i];if(u!==void 0)return u}},has(i){for(let l=e.length-1;l>=0;l--)if(i in Jt(e[l]))return!0;return!1},keys(){const i=[];for(let l=0;l<e.length;l++)i.push(...Object.keys(Jt(e[l])));return[...new Set(i)]}},dn);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const l=e[i];if(!l)continue;const u=Object.getOwnPropertyNames(l);for(let g=u.length-1;g>=0;g--){const m=u[g];if(m==="__proto__"||m==="constructor")continue;const o=Object.getOwnPropertyDescriptor(l,m);if(!r[m])r[m]=o.get?{enumerable:!0,configurable:!0,get:Oa.bind(n[m]=[o.get.bind(l)])}:o.value!==void 0?o:void 0;else{const c=n[m];c&&(o.get?c.push(o.get.bind(l)):o.value!==void 0&&c.push(()=>o.value))}}}const a={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const l=s[i],u=r[l];u&&u.get?Object.defineProperty(a,l,u):a[l]=u?u.value:void 0}return a}function An(e,...t){if(fr&&ee in e){const a=new Set(t.length>1?t.flat():t[0]),s=t.map(i=>new Proxy({get(l){return i.includes(l)?e[l]:void 0},has(l){return i.includes(l)&&l in e},keys(){return i.filter(l=>l in e)}},dn));return s.push(new Proxy({get(i){return a.has(i)?void 0:e[i]},has(i){return a.has(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!a.has(i))}},dn)),s}const n={},r=t.map(()=>({}));for(const a of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,a),i=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let l=!1,u=0;for(const g of t)g.includes(a)&&(l=!0,i?r[u][a]=s.value:Object.defineProperty(r[u],a,s)),++u;l||(i?n[a]=s.value:Object.defineProperty(n,a,s))}return[...r,n]}function ye(e){let t,n;const r=a=>{const s=S.context;if(s){const[l,u]=T();S.count||(S.count=0),S.count++,(n||(n=e())).then(g=>{!S.done&&Ke(s),S.count--,u(()=>g.default),Ke()}),t=l}else if(!t){const[l]=Sa(()=>(n||(n=e())).then(u=>u.default));t=l}let i;return $(()=>(i=t())?F(()=>{if(!s||S.done)return i(a);const l=S.context;Ke(s);const u=i(a);return Ke(l),u}):"")};return r.preload=()=>n||((n=e()).then(a=>t=()=>a.default),n),r}const br=e=>`Stale read from <${e}>.`;function jt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return $(Fa(()=>e.each,e.children,t||void 0))}function Be(e){const t=e.keyed,n=$(()=>e.when,void 0,void 0),r=t?n:$(n,void 0,{equals:(a,s)=>!a==!s});return $(()=>{const a=r();if(a){const s=e.children;return typeof s=="function"&&s.length>0?F(()=>s(t?a:()=>{if(!F(r))throw br("Show");return n()})):s}return e.fallback},void 0,void 0)}function _a(e){const t=Nt(()=>e.children),n=$(()=>{const r=t(),a=Array.isArray(r)?r:[r];let s=()=>{};for(let i=0;i<a.length;i++){const l=i,u=a[i],g=s,m=$(()=>g()?void 0:u.when,void 0,void 0),o=u.keyed?m:$(m,void 0,{equals:(c,h)=>!c==!h});s=()=>g()||(o()?[l,m,u]:void 0)}return s});return $(()=>{const r=n()();if(!r)return e.fallback;const[a,s,i]=r,l=i.children;return typeof l=="function"&&l.length>0?F(()=>l(i.keyed?s():()=>{if(F(n)()?.[0]!==a)throw br("Match");return s()})):l},void 0,void 0)}function mt(e){return e}const La=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Ra=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...La]),za=new Set(["innerHTML","textContent","innerText","children"]),Ia=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Da=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Na(e,t){const n=Da[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Ba=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),ja=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Ua={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Sn=e=>$(()=>e());function Va(e,t,n){let r=n.length,a=t.length,s=r,i=0,l=0,u=t[a-1].nextSibling,g=null;for(;i<a||l<s;){if(t[i]===n[l]){i++,l++;continue}for(;t[a-1]===n[s-1];)a--,s--;if(a===i){const m=s<r?l?n[l-1].nextSibling:n[s-l]:u;for(;l<s;)e.insertBefore(n[l++],m)}else if(s===l)for(;i<a;)(!g||!g.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[l]===t[a-1]){const m=t[--a].nextSibling;e.insertBefore(n[l++],t[i++].nextSibling),e.insertBefore(n[--s],m),t[a]=n[s]}else{if(!g){g=new Map;let o=l;for(;o<s;)g.set(n[o],o++)}const m=g.get(t[i]);if(m!=null)if(l<m&&m<s){let o=i,c=1,h;for(;++o<a&&o<s&&!((h=g.get(t[o]))==null||h!==m+c);)c++;if(c>m-l){const d=t[i];for(;l<m;)e.insertBefore(n[l++],d)}else e.replaceChild(n[l++],t[i++])}else i++;else t[i++].remove()}}}const jn="_$DX_DELEGATE";function qa(e,t,n,r={}){let a;return ze(s=>{a=s,t===document?e():k(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{a(),t.textContent=""}}function M(e,t,n,r){let a;const s=()=>{const l=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:r?l.firstChild:l.content.firstChild},i=t?()=>F(()=>document.importNode(a||(a=s()),!0)):()=>(a||(a=s())).cloneNode(!0);return i.cloneNode=i,i}function Te(e,t=window.document){const n=t[jn]||(t[jn]=new Set);for(let r=0,a=e.length;r<a;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Ja))}}function te(e,t,n){$e(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function Ha(e,t,n,r){$e(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function Za(e,t,n){$e(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function ke(e,t){$e(e)||(t==null?e.removeAttribute("class"):e.className=t)}function xr(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const a=n[0];e.addEventListener(t,n[0]=s=>a.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Wa(e,t,n={}){const r=Object.keys(t||{}),a=Object.keys(n);let s,i;for(s=0,i=a.length;s<i;s++){const l=a[s];!l||l==="undefined"||t[l]||(Un(e,l,!1),delete n[l])}for(s=0,i=r.length;s<i;s++){const l=r[s],u=!!t[l];!l||l==="undefined"||n[l]===u||!u||(Un(e,l,!0),n[l]=u)}return n}function oe(e,t,n){if(!t)return n?te(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let a,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)a=t[s],a!==n[s]&&(r.setProperty(s,a),n[s]=a);return n}function H(e,t={},n,r){const a={};return r||R(()=>a.children=rt(e,t.children,a.children)),R(()=>typeof t.ref=="function"&&ge(t.ref,e)),R(()=>Ga(e,t,n,!0,a,!0)),a}function ge(e,t,n){return F(()=>e(t,n))}function k(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return rt(e,t,r,n);R(a=>rt(e,t(),a,n),r)}function Ga(e,t,n,r,a={},s=!1){t||(t={});for(const i in a)if(!(i in t)){if(i==="children")continue;a[i]=Vn(e,i,null,a[i],n,s,t)}for(const i in t){if(i==="children")continue;const l=t[i];a[i]=Vn(e,i,l,a[i],n,s,t)}}function Ya(e){let t,n;return!$e()||!(t=S.registry.get(n=Xa()))?e():(S.completed&&S.completed.add(t),S.registry.delete(n),t)}function $e(e){return!!S.context&&!S.done&&(!e||e.isConnected)}function Ka(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Un(e,t,n){const r=t.trim().split(/\s+/);for(let a=0,s=r.length;a<s;a++)e.classList.toggle(r[a],n)}function Vn(e,t,n,r,a,s,i){let l,u,g,m,o;if(t==="style")return oe(e,n,r);if(t==="classList")return Wa(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const c=t.slice(3);r&&e.removeEventListener(c,r,typeof r!="function"&&r),n&&e.addEventListener(c,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const c=t.slice(10);r&&e.removeEventListener(c,r,!0),n&&e.addEventListener(c,n,!0)}else if(t.slice(0,2)==="on"){const c=t.slice(2).toLowerCase(),h=Ba.has(c);if(!h&&r){const d=Array.isArray(r)?r[0]:r;e.removeEventListener(c,d)}(h||n)&&(xr(e,c,n,h),h&&Te([c]))}else if(t.slice(0,5)==="attr:")te(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Za(e,t.slice(5),n);else if((o=t.slice(0,5)==="prop:")||(g=za.has(t))||!a&&((m=Na(t,e.tagName))||(u=Ra.has(t)))||(l=e.nodeName.includes("-")||"is"in i)){if(o)t=t.slice(5),u=!0;else if($e(e))return n;t==="class"||t==="className"?ke(e,n):l&&!u&&!g?e[Ka(t)]=n:e[m||t]=n}else{const c=a&&t.indexOf(":")>-1&&Ua[t.split(":")[0]];c?Ha(e,c,t,n):te(e,Ia[t]||t,n)}return n}function Ja(e){if(S.registry&&S.events&&S.events.find(([u,g])=>g===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,a=e.currentTarget,s=u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),i=()=>{const u=t[n];if(u&&!t.disabled){const g=t[`${n}Data`];if(g!==void 0?u.call(t,g,e):u.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},l=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),S.registry&&!S.done&&(S.done=_$HY.done=!0),e.composedPath){const u=e.composedPath();s(u[0]);for(let g=0;g<u.length-2&&(t=u[g],!!i());g++){if(t._$host){t=t._$host,l();break}if(t.parentNode===a)break}}else l();s(r)}function rt(e,t,n,r,a){const s=$e(e);if(s){!n&&(n=[...e.childNodes]);let u=[];for(let g=0;g<n.length;g++){const m=n[g];m.nodeType===8&&m.data.slice(0,2)==="!$"?m.remove():u.push(m)}n=u}for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,l=r!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(s||i==="number"&&(t=t.toString(),t===n))return n;if(l){let u=n[0];u&&u.nodeType===3?u.data!==t&&(u.data=t):u=document.createTextNode(t),n=Oe(e,n,r,u)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean"){if(s)return n;n=Oe(e,n,r)}else{if(i==="function")return R(()=>{let u=t();for(;typeof u=="function";)u=u();n=rt(e,u,n,r)}),()=>n;if(Array.isArray(t)){const u=[],g=n&&Array.isArray(n);if(hn(u,t,n,a))return R(()=>n=rt(e,u,n,r,!0)),()=>n;if(s){if(!u.length)return n;if(r===void 0)return n=[...e.childNodes];let m=u[0];if(m.parentNode!==e)return n;const o=[m];for(;(m=m.nextSibling)!==r;)o.push(m);return n=o}if(u.length===0){if(n=Oe(e,n,r),l)return n}else g?n.length===0?qn(e,u,r):Va(e,n,u):(n&&Oe(e),qn(e,u));n=u}else if(t.nodeType){if(s&&t.parentNode)return n=l?[t]:t;if(Array.isArray(n)){if(l)return n=Oe(e,n,r,t);Oe(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function hn(e,t,n,r){let a=!1;for(let s=0,i=t.length;s<i;s++){let l=t[s],u=n&&n[e.length],g;if(!(l==null||l===!0||l===!1))if((g=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))a=hn(e,l,u)||a;else if(g==="function")if(r){for(;typeof l=="function";)l=l();a=hn(e,Array.isArray(l)?l:[l],Array.isArray(u)?u:[u])||a}else e.push(l),a=!0;else{const m=String(l);u&&u.nodeType===3&&u.data===m?e.push(u):e.push(document.createTextNode(m))}}return a}function qn(e,t,n=null){for(let r=0,a=t.length;r<a;r++)e.insertBefore(t[r],n)}function Oe(e,t,n,r){if(n===void 0)return e.textContent="";const a=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const l=t[i];if(a!==l){const u=l.parentNode===e;!s&&!i?u?e.replaceChild(a,l):e.insertBefore(a,n):u&&l.remove()}else s=!0}}else e.insertBefore(a,n);return[a]}function Xa(){return S.getNextContextId()}const Ar=!1,Qa="http://www.w3.org/2000/svg";function es(e,t=!1){return t?document.createElementNS(Qa,e):document.createElement(e)}function ts(e,t){const n=$(e);return $(()=>{const r=n();switch(typeof r){case"function":return F(()=>r(t));case"string":const a=ja.has(r),s=S.context?Ya():es(r,a);return H(s,t,a),s}})}function Cn(e){const[,t]=An(e,["component"]);return ts(()=>e.component,t)}function Sr(){let e=new Set;function t(a){return e.add(a),()=>e.delete(a)}let n=!1;function r(a,s){if(n)return!(n=!1);const i={to:a,options:s,defaultPrevented:!1,preventDefault:()=>i.defaultPrevented=!0};for(const l of e)l.listener({...i,from:l.location,retry:u=>{u&&(n=!0),l.navigate(a,{...s,resolve:!1})}});return!i.defaultPrevented}return{subscribe:t,confirm:r}}let mn;function kn(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),mn=window.history.state._depth}kn();function ns(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function rs(e,t){let n=!1;return()=>{const r=mn;kn();const a=r==null?null:mn-r;if(n){n=!1;return}a&&t(a)?(n=!0,window.history.go(-a)):e()}}const as=/^(?:[a-z0-9]+:)?\/\//i,ss=/^\/+|(\/)\/+$/g,Cr="http://sr";function Ae(e,t=!1){const n=e.replace(ss,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function xt(e,t,n){if(as.test(t))return;const r=Ae(e),a=n&&Ae(n);let s="";return!a||t.startsWith("/")?s=r:a.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+a:s=a,(s||"/")+Ae(t,!s)}function is(e,t){if(e==null)throw new Error(t);return e}function os(e,t){return Ae(e).replace(/\/*(\*.*)?$/g,"")+Ae(t)}function kr(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function ls(e,t,n){const[r,a]=e.split("/*",2),s=r.split("/").filter(Boolean),i=s.length;return l=>{const u=l.split("/").filter(Boolean),g=u.length-i;if(g<0||g>0&&a===void 0&&!t)return null;const m={path:i?"":"/",params:{}},o=c=>n===void 0?void 0:n[c];for(let c=0;c<i;c++){const h=s[c],d=h[0]===":",f=d?u[c]:u[c].toLowerCase(),p=d?h.slice(1):h.toLowerCase();if(d&&Xt(f,o(p)))m.params[p]=f;else if(d||!Xt(f,p))return null;m.path+=`/${f}`}if(a){const c=g?u.slice(-g).join("/"):"";if(Xt(c,o(a)))m.params[a]=c;else return null}return m}}function Xt(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function cs(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((a,s)=>a+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Er(e){const t=new Map,n=mr();return new Proxy({},{get(r,a){return t.has(a)||vn(n,()=>t.set(a,$(()=>e()[a]))),t.get(a)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function us(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([a,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(a):s instanceof Array?(n.delete(a),s.forEach(i=>{n.append(a,String(i))})):n.set(a,String(s))});const r=n.toString();return r?`?${r}`:""}function Tr(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const a=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)a.push(n+=t[1]),r=r.slice(t[0].length);return Tr(r).reduce((s,i)=>[...s,...a.map(l=>l+i)],[])}const fs=100,$r=gr(),En=gr(),ut=()=>is(bn($r),"<A> and 'use' router primitives can be only used inside a Route."),ds=()=>bn(En)||ut().base,hs=e=>{const t=ds();return $(()=>t.resolvePath(e()))},ms=e=>{const t=ut();return $(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Mr=()=>ut().navigatorFactory(),Pr=()=>ut().location,Lc=()=>ut().params,Rc=()=>{const e=Pr(),t=Mr(),n=(r,a)=>{const s=F(()=>us(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...a})};return[e.query,n]};function gs(e,t=""){const{component:n,preload:r,load:a,children:s,info:i}=e,l=!s||Array.isArray(s)&&!s.length,u={key:e,component:n,preload:r||a,info:i};return Fr(e.path).reduce((g,m)=>{for(const o of Tr(m)){const c=os(t,o);let h=l?c:c.split("/*",1)[0];h=h.split("/").map(d=>d.startsWith(":")||d.startsWith("*")?d:encodeURIComponent(d)).join("/"),g.push({...u,originalPath:m,pattern:h,matcher:ls(h,!l,e.matchFilters)})}return g},[])}function ps(e,t=0){return{routes:e,score:cs(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let a=e.length-1;a>=0;a--){const s=e[a],i=s.matcher(n);if(!i)return null;r.unshift({...i,route:s})}return r}}}function Fr(e){return Array.isArray(e)?e:[e]}function Or(e,t="",n=[],r=[]){const a=Fr(e);for(let s=0,i=a.length;s<i;s++){const l=a[s];if(l&&typeof l=="object"){l.hasOwnProperty("path")||(l.path="");const u=gs(l,t);for(const g of u){n.push(g);const m=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!m)Or(l.children,g.pattern,n,r);else{const o=ps([...n],r.length);r.push(o)}n.pop()}}}return n.length?r:r.sort((s,i)=>i.score-s.score)}function Qt(e,t){for(let n=0,r=e.length;n<r;n++){const a=e[n].matcher(t);if(a)return a}return[]}function ys(e,t,n){const r=new URL(Cr),a=$(m=>{const o=e();try{return new URL(o,r)}catch{return console.error(`Invalid path ${o}`),m}},r,{equals:(m,o)=>m.href===o.href}),s=$(()=>a().pathname),i=$(()=>a().search,!0),l=$(()=>a().hash),u=()=>"",g=wn(i,()=>kr(a()));return{get pathname(){return s()},get search(){return i()},get hash(){return l()},get state(){return t()},get key(){return u()},query:n?n(g):Er(g)}}let ve;function ws(){return ve}function vs(e,t,n,r={}){const{signal:[a,s],utils:i={}}=e,l=i.parsePath||(O=>O),u=i.renderPath||(O=>O),g=i.beforeLeave||Sr(),m=xt("",r.base||"");if(m===void 0)throw new Error(`${m} is not a valid base path`);m&&!a().value&&s({value:m,replace:!0,scroll:!1});const[o,c]=T(!1);let h;const d=(O,L)=>{L.value===f()&&L.state===y()||(h===void 0&&c(!0),ve=O,h=L,Ca(()=>{h===L&&(p(h.value),w(h.state),A[1](J=>J.filter(Pe=>Pe.pending)))}).finally(()=>{h===L&&He(()=>{ve=void 0,O==="navigate"&&j(h),c(!1),h=void 0})}))},[f,p]=T(a().value),[y,w]=T(a().state),v=ys(f,y,i.queryWrapper),b=[],A=T([]),_=$(()=>typeof r.transformUrl=="function"?Qt(t(),r.transformUrl(v.pathname)):Qt(t(),v.pathname)),D=()=>{const O=_(),L={};for(let J=0;J<O.length;J++)Object.assign(L,O[J].params);return L},K=i.paramsWrapper?i.paramsWrapper(D,t):Er(D),re={pattern:m,path:()=>m,outlet:()=>null,resolvePath(O){return xt(m,O)}};return R(wn(a,O=>d("native",O),{defer:!0})),{base:re,location:v,params:K,isRouting:o,renderPath:u,parsePath:l,navigatorFactory:B,matches:_,beforeLeave:g,preloadRoute:de,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:A};function q(O,L,J){F(()=>{if(typeof L=="number"){L&&(i.go?i.go(L):console.warn("Router integration does not support relative routing"));return}const Pe=!L||L[0]==="?",{replace:Wt,resolve:Fe,scroll:Gt,state:Ye}={replace:!1,resolve:!Pe,scroll:!0,...J},dt=Fe?O.resolvePath(L):xt(Pe&&v.pathname||"",L);if(dt===void 0)throw new Error(`Path '${L}' is not a routable path`);if(b.length>=fs)throw new Error("Too many redirects");const Dn=f();(dt!==Dn||Ye!==y())&&(Ar||g.confirm(dt,J)&&(b.push({value:Dn,replace:Wt,scroll:Gt,state:y()}),d("navigate",{value:dt,state:Ye})))})}function B(O){return O=O||bn(En)||re,(L,J)=>q(O,L,J)}function j(O){const L=b[0];L&&(s({...O,replace:L.replace,scroll:L.scroll}),b.length=0)}function de(O,L){const J=Qt(t(),O.pathname),Pe=ve;ve="preload";for(let Wt in J){const{route:Fe,params:Gt}=J[Wt];Fe.component&&Fe.component.preload&&Fe.component.preload();const{preload:Ye}=Fe;L&&Ye&&vn(n(),()=>Ye({params:Gt,location:{pathname:O.pathname,search:O.search,hash:O.hash,query:kr(O),state:null,key:""},intent:"preload"}))}ve=Pe}}function bs(e,t,n,r){const{base:a,location:s,params:i}=e,{pattern:l,component:u,preload:g}=r().route,m=$(()=>r().path);u&&u.preload&&u.preload();const o=g?g({params:i,location:s,intent:ve||"initial"}):void 0;return{parent:t,pattern:l,path:m,outlet:()=>u?x(u,{params:i,location:s,data:o,get children(){return n()}}):n(),resolvePath(h){return xt(a.path(),h,m())}}}const xs=e=>t=>{const{base:n}=t,r=Nt(()=>t.children),a=$(()=>Or(r(),t.base||""));let s;const i=vs(e,a,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(i),x($r.Provider,{value:i,get children(){return x(As,{routerState:i,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[Sn(()=>(s=mr())&&null),x(Ss,{routerState:i,get branches(){return a()}})]}})}})};function As(e){const t=e.routerState.location,n=e.routerState.params,r=$(()=>e.preload&&F(()=>{e.preload({params:n,location:t,intent:ws()||"initial"})}));return x(Be,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:a=>x(a,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Ss(e){const t=[];let n;const r=$(wn(e.routerState.matches,(a,s,i)=>{let l=s&&a.length===s.length;const u=[];for(let g=0,m=a.length;g<m;g++){const o=s&&s[g],c=a[g];i&&o&&c.route.key===o.route.key?u[g]=i[g]:(l=!1,t[g]&&t[g](),ze(h=>{t[g]=h,u[g]=bs(e.routerState,u[g-1]||e.routerState.base,Hn(()=>r()[g+1]),()=>e.routerState.matches()[g])}))}return t.splice(a.length).forEach(g=>g()),i&&l?i:(n=u[0],u)}));return Hn(()=>r()&&n)()}const Hn=e=>()=>x(Be,{get when(){return e()},keyed:!0,children:t=>x(En.Provider,{value:t,get children(){return t.outlet()}})}),he=e=>{const t=Nt(()=>e.children);return V(e,{get children(){return t()}})};function Cs([e,t],n,r){return[e,r?a=>t(r(a)):t]}function ks(e){let t=!1;const n=a=>typeof a=="string"?{value:a}:a,r=Cs(T(n(e.get()),{equals:(a,s)=>a.value===s.value&&a.state===s.state}),void 0,a=>(!t&&e.set(a),S.registry&&!S.done&&(S.done=!0),a));return e.init&&Ee(e.init((a=e.get())=>{t=!0,r[1](n(a)),t=!1})),xs({signal:r,create:e.create,utils:e.utils})}function Es(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Ts(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const $s=new Map;function Ms(e=!0,t=!1,n="/_server",r){return a=>{const s=a.base.path(),i=a.navigatorFactory(a.base);let l,u;function g(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function m(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const p=f.composedPath().find(_=>_ instanceof Node&&_.nodeName.toUpperCase()==="A");if(!p||t&&!p.hasAttribute("link"))return;const y=g(p),w=y?p.href.baseVal:p.href;if((y?p.target.baseVal:p.target)||!w&&!p.hasAttribute("state"))return;const b=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||b&&b.includes("external"))return;const A=y?new URL(w,document.baseURI):new URL(w);if(!(A.origin!==window.location.origin||s&&A.pathname&&!A.pathname.toLowerCase().startsWith(s.toLowerCase())))return[p,A]}function o(f){const p=m(f);if(!p)return;const[y,w]=p,v=a.parsePath(w.pathname+w.search+w.hash),b=y.getAttribute("state");f.preventDefault(),i(v,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:b?JSON.parse(b):void 0})}function c(f){const p=m(f);if(!p)return;const[y,w]=p;r&&(w.pathname=r(w.pathname)),a.preloadRoute(w,y.getAttribute("preload")!=="false")}function h(f){clearTimeout(l);const p=m(f);if(!p)return u=null;const[y,w]=p;u!==y&&(r&&(w.pathname=r(w.pathname)),l=setTimeout(()=>{a.preloadRoute(w,y.getAttribute("preload")!=="false"),u=y},20))}function d(f){if(f.defaultPrevented)return;let p=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.getAttribute("formaction"):f.target.getAttribute("action");if(!p)return;if(!p.startsWith("https://action/")){const w=new URL(p,Cr);if(p=a.parsePath(w.pathname+w.search),!p.startsWith(n))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=$s.get(p);if(y){f.preventDefault();const w=new FormData(f.target,f.submitter);y.call({r:a,f:f.target},f.target.enctype==="multipart/form-data"?w:new URLSearchParams(w))}}Te(["click","submit"]),document.addEventListener("click",o),e&&(document.addEventListener("mousemove",h,{passive:!0}),document.addEventListener("focusin",c,{passive:!0}),document.addEventListener("touchstart",c,{passive:!0})),document.addEventListener("submit",d),Ee(()=>{document.removeEventListener("click",o),e&&(document.removeEventListener("mousemove",h),document.removeEventListener("focusin",c),document.removeEventListener("touchstart",c)),document.removeEventListener("submit",d)})}}function Ps(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,a=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:a}},n=Sr();return ks({get:t,set({value:r,replace:a,scroll:s,state:i}){a?window.history.replaceState(ns(i),"",r):window.history.pushState(i,"",r),Ts(decodeURIComponent(window.location.hash.slice(1)),s),kn()},init:r=>Es(window,"popstate",rs(r,a=>{if(a&&a<0)return!n.confirm(a);{const s=t();return!n.confirm(s.value,{state:s.state})}})),create:Ms(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}var Fs=M("<a>");function _e(e){e=V({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=An(e,["href","state","class","activeClass","inactiveClass","end"]),n=hs(()=>e.href),r=ms(n),a=Pr(),s=$(()=>{const i=n();if(i===void 0)return[!1,!1];const l=Ae(i.split(/[?#]/,1)[0]).toLowerCase(),u=decodeURI(Ae(a.pathname).toLowerCase());return[e.end?l===u:u.startsWith(l+"/")||u===l,l===u]});return(()=>{var i=Fs();return H(i,V(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s()[0],[e.activeClass]:s()[0],...t.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1,!1),i})()}const $t=Symbol("store-raw"),Ie=Symbol("store-node"),le=Symbol("store-has"),_r=Symbol("store-self");function Lr(e){let t=e[ee];if(!t&&(Object.defineProperty(e,ee,{value:t=new Proxy(e,Ls)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let a=0,s=n.length;a<s;a++){const i=n[a];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function je(e){let t;return e!=null&&typeof e=="object"&&(e[ee]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Ue(e,t=new Set){let n,r,a,s;if(n=e!=null&&e[$t])return n;if(!je(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,l=e.length;i<l;i++)a=e[i],(r=Ue(a,t))!==a&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let u=0,g=i.length;u<g;u++)s=i[u],!l[s].get&&(a=e[s],(r=Ue(a,t))!==a&&(e[s]=r))}return e}function Mt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function at(e,t,n){if(e[t])return e[t];const[r,a]=T(n,{equals:!1,internal:!0});return r.$=a,e[t]=r}function Os(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===ee||t===Ie||(delete n.value,delete n.writable,n.get=()=>e[ee][t]),n}function Rr(e){cn()&&at(Mt(e,Ie),_r)()}function _s(e){return Rr(e),Reflect.ownKeys(e)}const Ls={get(e,t,n){if(t===$t)return e;if(t===ee)return n;if(t===ln)return Rr(e),n;const r=Mt(e,Ie),a=r[t];let s=a?a():e[t];if(t===Ie||t===le||t==="__proto__")return s;if(!a){const i=Object.getOwnPropertyDescriptor(e,t);cn()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=at(r,t,s)())}return je(s)?Lr(s):s},has(e,t){return t===$t||t===ee||t===ln||t===Ie||t===le||t==="__proto__"?!0:(cn()&&at(Mt(e,le),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:_s,getOwnPropertyDescriptor:Os};function Ve(e,t,n,r=!1){if(!r&&e[t]===n)return;const a=e[t],s=e.length;n===void 0?(delete e[t],e[le]&&e[le][t]&&a!==void 0&&e[le][t].$()):(e[t]=n,e[le]&&e[le][t]&&a===void 0&&e[le][t].$());let i=Mt(e,Ie),l;if((l=at(i,t,a))&&l.$(()=>n),Array.isArray(e)&&e.length!==s){for(let u=e.length;u<s;u++)(l=i[u])&&l.$();(l=at(i,"length",s))&&l.$(e.length)}(l=i[_r])&&l.$()}function zr(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const a=n[r];Ve(e,a,t[a])}}function Rs(e,t){if(typeof t=="function"&&(t=t(e)),t=Ue(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const a=t[n];e[n]!==a&&Ve(e,n,a)}Ve(e,"length",r)}else zr(e,t)}function Je(e,t,n=[]){let r,a=e;if(t.length>1){r=t.shift();const i=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let u=0;u<r.length;u++)Je(e,[r[u]].concat(t),n);return}else if(l&&i==="function"){for(let u=0;u<e.length;u++)r(e[u],u)&&Je(e,[u].concat(t),n);return}else if(l&&i==="object"){const{from:u=0,to:g=e.length-1,by:m=1}=r;for(let o=u;o<=g;o+=m)Je(e,[o].concat(t),n);return}else if(t.length>1){Je(e[r],t,[r].concat(n));return}a=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(a,n),s===a)||r===void 0&&s==null||(s=Ue(s),r===void 0||je(a)&&je(s)&&!Array.isArray(s)?zr(a,s):Ve(e,r,s))}function zs(...[e,t]){const n=Ue(e||{}),r=Array.isArray(n),a=Lr(n);function s(...i){He(()=>{r&&i.length===1?Rs(n,i[0]):Je(n,i)})}return[a,s]}const Pt=new WeakMap,Ir={get(e,t){if(t===$t)return e;const n=e[t];let r;return je(n)?Pt.get(n)||(Pt.set(n,r=new Proxy(n,Ir)),r):n},set(e,t,n){return Ve(e,t,Ue(n)),!0},deleteProperty(e,t){return Ve(e,t,void 0,!0),!0}};function gt(e){return t=>{if(je(t)){let n;(n=Pt.get(t))||Pt.set(t,n=new Proxy(t,Ir)),e(n)}return t}}const Is=e=>typeof e=="function",Ft=(e,t)=>Is(e)?e(t):e;var U;(function(e){e[e.ADD_TOAST=0]="ADD_TOAST",e[e.UPDATE_TOAST=1]="UPDATE_TOAST",e[e.UPSERT_TOAST=2]="UPSERT_TOAST",e[e.DISMISS_TOAST=3]="DISMISS_TOAST",e[e.REMOVE_TOAST=4]="REMOVE_TOAST",e[e.START_PAUSE=5]="START_PAUSE",e[e.END_PAUSE=6]="END_PAUSE"})(U||(U={}));const[Se,me]=zs({toasts:[],pausedAt:void 0}),Ds=()=>{const{pausedAt:e,toasts:t}=Se;if(e)return;const n=Date.now();return t.map(a=>{if(a.duration===1/0)return;const s=(a.duration||0)+a.pauseDuration-(n-a.createdAt);if(s<=0){a.visible&&ne({type:U.DISMISS_TOAST,toastId:a.id});return}return setTimeout(()=>{ne({type:U.DISMISS_TOAST,toastId:a.id})},s)})},et=new Map,Zn=(e,t)=>{if(et.has(e))return;const n=setTimeout(()=>{et.delete(e),ne({type:U.REMOVE_TOAST,toastId:e})},t);et.set(e,n)},Ns=e=>{const t=et.get(e);et.delete(e),t&&clearTimeout(t)},ne=e=>{switch(e.type){case U.ADD_TOAST:me("toasts",a=>{const s=a;return[e.toast,...s]});break;case U.DISMISS_TOAST:const{toastId:t}=e,n=Se.toasts;if(t){const a=n.find(s=>s.id===t);a&&Zn(t,a.unmountDelay),me("toasts",s=>s.id===t,gt(s=>s.visible=!1))}else n.forEach(a=>{Zn(a.id,a.unmountDelay)}),me("toasts",a=>a.id!==void 0,gt(a=>a.visible=!1));break;case U.REMOVE_TOAST:if(!e.toastId){me("toasts",[]);break}me("toasts",a=>a.filter(i=>i.id!==e.toastId));break;case U.UPDATE_TOAST:e.toast.id&&Ns(e.toast.id),me("toasts",a=>a.id===e.toast.id,a=>({...a,...e.toast}));break;case U.UPSERT_TOAST:Se.toasts.find(a=>a.id===e.toast.id)?ne({type:U.UPDATE_TOAST,toast:e.toast}):ne({type:U.ADD_TOAST,toast:e.toast});break;case U.START_PAUSE:me(gt(a=>{a.pausedAt=Date.now(),a.toasts.forEach(s=>{s.paused=!0})}));break;case U.END_PAUSE:const r=e.time-(Se.pausedAt||0);me(gt(a=>{a.pausedAt=void 0,a.toasts.forEach(s=>{s.pauseDuration+=r,s.paused=!1})}));break}},Bs={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},De={id:"",icon:"",unmountDelay:500,duration:3e3,ariaProps:{role:"status","aria-live":"polite"},className:"",style:{},position:"top-right",iconTheme:{}},Dr={position:"top-right",toastOptions:De,gutter:8,containerStyle:{},containerClassName:""},pt="16px",js={position:"fixed","z-index":9999,top:pt,bottom:pt,left:pt,right:pt,"pointer-events":"none"},Us=(()=>{let e=0;return()=>String(++e)})(),Vs=e=>{Ks(t=>({containerClassName:e.containerClassName??t.containerClassName,containerStyle:e.containerStyle??t.containerStyle,gutter:e.gutter??t.gutter,position:e.position??t.position,toastOptions:{...e.toastOptions}}))},qs=(e,t)=>{const r=e.includes("top")?{top:0,"margin-top":`${t}px`}:{bottom:0,"margin-bottom":`${t}px`},a=e.includes("center")?{"justify-content":"center"}:e.includes("right")?{"justify-content":"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:"all 230ms cubic-bezier(.21,1.02,.73,1)",...r,...a}},Hs=(e,t)=>{const n=e.getBoundingClientRect();n.height!==t.height&&ne({type:U.UPDATE_TOAST,toast:{id:t.id,height:n.height}})},Zs=(e,t)=>{const{toasts:n}=Se,r=Le().gutter||Dr.gutter||8,a=n.filter(u=>(u.position||t)===t&&u.height),s=a.findIndex(u=>u.id===e.id),i=a.filter((u,g)=>g<s&&u.visible).length;return a.slice(0,i).reduce((u,g)=>u+r+(g.height||0),0)},Ws=(e,t)=>(e.position||t).includes("top")?1:-1,Gs={display:"flex","align-items":"center",color:"#363636",background:"white","box-shadow":"0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05)","max-width":"350px","pointer-events":"auto",padding:"8px 10px","border-radius":"4px","line-height":"1.3","will-change":"transform"},Ys={display:"flex","align-items":"center",flex:"1 1 auto",margin:"4px 10px","white-space":"pre-line"},yt={"flex-shrink":0,"min-width":"20px","min-height":"20px",display:"flex","align-items":"center","justify-content":"center","text-align":"center"},Ot=e=>({calcMode:"spline",keyTimes:"0; 1",keySplines:e}),[Le,Ks]=T(Dr),Js=(e,t="blank",n)=>({...De,...Le().toastOptions,...n,type:t,message:e,pauseDuration:0,createdAt:Date.now(),visible:!0,id:n.id||Us(),paused:!1,style:{...De.style,...Le().toastOptions?.style,...n.style},duration:n.duration||Le().toastOptions?.duration||Bs[t],position:n.position||Le().toastOptions?.position||Le().position||De.position}),ft=e=>(t,n={})=>ze(()=>{const r=Se.toasts.find(s=>s.id===n.id),a=Js(t,e,{...r,duration:void 0,...n});return ne({type:U.UPSERT_TOAST,toast:a}),a.id}),z=(e,t)=>ft("blank")(e,t);F(()=>z);z.error=ft("error");z.success=ft("success");z.loading=ft("loading");z.custom=ft("custom");z.dismiss=e=>{ne({type:U.DISMISS_TOAST,toastId:e})};z.promise=(e,t,n)=>{const r=z.loading(t.loading,{...n});return e.then(a=>(z.success(Ft(t.success,a),{id:r,...n}),a)).catch(a=>{z.error(Ft(t.error,a),{id:r,...n})}),e};z.remove=e=>{ne({type:U.REMOVE_TOAST,toastId:e})};var Xs=M("<div><style>.sldt-active{z-index:9999;}.sldt-active>*{pointer-events:auto;}");const Qs=e=>(pe(()=>{Vs(e)}),pe(()=>{const t=Ds();Ee(()=>{t&&t.forEach(n=>n&&clearTimeout(n))})}),(()=>{var t=Xs();return t.firstChild,k(t,x(jt,{get each(){return Se.toasts},children:n=>x(ri,{toast:n})}),null),R(n=>{var r={...js,...e.containerStyle},a=e.containerClassName;return n.e=oe(t,r,n.e),a!==n.t&&ke(t,n.t=a),n},{e:void 0,t:void 0}),t})());var wt=M("<div>"),ei=M("<div><div>");const ti=e=>{let t;return pe(()=>{if(!t)return;const n=Ws(e.toast,e.position);e.toast.visible?t.animate([{transform:`translate3d(0,${n*-200}%,0) scale(.6)`,opacity:.5},{transform:"translate3d(0,0,0) scale(1)",opacity:1}],{duration:350,fill:"forwards",easing:"cubic-bezier(.21,1.02,.73,1)"}):t.animate([{transform:"translate3d(0,0,-1px) scale(1)",opacity:1},{transform:`translate3d(0,${n*-150}%,-1px) scale(.4)`,opacity:0}],{duration:400,fill:"forwards",easing:"cubic-bezier(.06,.71,.55,1)"})}),(()=>{var n=ei(),r=n.firstChild,a=t;return typeof a=="function"?ge(a,n):t=n,k(n,x(_a,{get children(){return[x(mt,{get when(){return e.toast.icon},get children(){var s=wt();return k(s,()=>e.toast.icon),R(i=>oe(s,yt,i)),s}}),x(mt,{get when(){return e.toast.type==="loading"},get children(){var s=wt();return k(s,x(fi,V(()=>e.toast.iconTheme))),R(i=>oe(s,yt,i)),s}}),x(mt,{get when(){return e.toast.type==="success"},get children(){var s=wt();return k(s,x(oi,V(()=>e.toast.iconTheme))),R(i=>oe(s,yt,i)),s}}),x(mt,{get when(){return e.toast.type==="error"},get children(){var s=wt();return k(s,x(ci,V(()=>e.toast.iconTheme))),R(i=>oe(s,yt,i)),s}})]}}),r),H(r,V(()=>e.toast.ariaProps),!1,!0),k(r,()=>Ft(e.toast.message,e.toast)),R(s=>{var i=e.toast.className,l={...Gs,...e.toast.style},u=Ys;return i!==s.e&&ke(n,s.e=i),s.t=oe(n,l,s.t),s.a=oe(r,u,s.a),s},{e:void 0,t:void 0,a:void 0}),n})()};var ni=M("<div>");const ri=e=>{const t=()=>{const a=e.toast.position||De.position,s=Zs(e.toast,a);return qs(a,s)},n=$(()=>t());let r;return Dt(()=>{r&&Hs(r,e.toast)}),(()=>{var a=ni();a.addEventListener("mouseleave",()=>ne({type:U.END_PAUSE,time:Date.now()})),a.addEventListener("mouseenter",()=>ne({type:U.START_PAUSE,time:Date.now()}));var s=r;return typeof s=="function"?ge(s,a):r=a,k(a,(()=>{var i=Sn(()=>e.toast.type==="custom");return()=>i()?Ft(e.toast.message,e.toast):x(ti,{get toast(){return e.toast},get position(){return e.toast.position||De.position}})})()),R(i=>{var l=n(),u=e.toast.visible?"sldt-active":"";return i.e=oe(a,l,i.e),u!==i.t&&ke(a,i.t=u),i},{e:void 0,t:void 0}),a})()};var ai=M('<svg><circle cx=16 cy=16 r=0><animate attributeName=opacity values="0; 1; 1"></animate><animate attributeName=r values="0; 17.5; 16"></svg>',!1,!0,!1),si=M('<svg><circle cx=16 cy=16 r=12 opacity=0><animate attributeName=opacity values="1; 0"></animate><animate attributeName=r values="12; 26"></svg>',!1,!0,!1);const Nr=e=>{const t={dur:"0.35s",begin:"100ms",fill:"freeze",calcMode:"spline",keyTimes:"0; 0.6; 1",keySplines:"0.25 0.71 0.4 0.88; .59 .22 .87 .63"};return(()=>{var n=ai(),r=n.firstChild,a=r.nextSibling;return H(r,t,!0,!1),H(a,t,!0,!1),R(()=>te(n,"fill",e.fill)),n})()},Br=e=>{const t={dur:"1s",begin:e.begin||"320ms",fill:"freeze",...Ot("0.0 0.0 0.2 1")};return(()=>{var n=si(),r=n.firstChild,a=r.nextSibling;return H(r,t,!0,!1),H(a,t,!0,!1),R(()=>te(n,"fill",e.fill)),n})()};var ii=M('<svg viewBox="0 0 32 32"width=1.25rem height=1.25rem><path fill=none stroke-width=4 stroke-dasharray=22 stroke-dashoffset=22 stroke-linecap=round stroke-miterlimit=10 d=M9.8,17.2l3.8,3.6c0.1,0.1,0.3,0.1,0.4,0l9.6-9.7><animate attributeName=stroke-dashoffset values=22;0 dur=0.25s begin=250ms fill=freeze>');const oi=e=>{const t=e.primary||"#34C759";return(()=>{var n=ii(),r=n.firstChild,a=r.firstChild;return n.style.setProperty("overflow","visible"),k(n,x(Nr,{fill:t}),r),k(n,x(Br,{fill:t,begin:"350ms"}),r),H(a,V(()=>Ot("0.0, 0.0, 0.58, 1.0")),!0,!1),R(()=>te(r,"stroke",e.secondary||"#FCFCFC")),n})()};var li=M('<svg viewBox="0 0 32 32"width=1.25rem height=1.25rem><path fill=none stroke-width=4 stroke-dasharray=9 stroke-dashoffset=9 stroke-linecap=round d=M16,7l0,9><animate attributeName=stroke-dashoffset values=9;0 dur=0.2s begin=250ms fill=freeze></animate></path><circle cx=16 cy=23 r=2.5 opacity=0><animate attributeName=opacity values=0;1 dur=0.25s begin=350ms fill=freeze>');const ci=e=>{const t=e.primary||"#FF3B30";return(()=>{var n=li(),r=n.firstChild,a=r.firstChild,s=r.nextSibling,i=s.firstChild;return n.style.setProperty("overflow","visible"),k(n,x(Nr,{fill:t}),r),k(n,x(Br,{fill:t}),r),H(a,V(()=>Ot("0.0, 0.0, 0.58, 1.0")),!0,!1),H(i,V(()=>Ot("0.0, 0.0, 0.58, 1.0")),!0,!1),R(l=>{var u=e.secondary||"#FFFFFF",g=e.secondary||"#FFFFFF";return u!==l.e&&te(r,"stroke",l.e=u),g!==l.t&&te(s,"fill",l.t=g),l},{e:void 0,t:void 0}),n})()};var ui=M('<svg viewBox="0 0 32 32"width=1.25rem height=1.25rem><path fill=none stroke-width=4 stroke-miterlimit=10 d=M16,6c3,0,5.7,1.3,7.5,3.4c1.5,1.8,2.5,4,2.5,6.6c0,5.5-4.5,10-10,10S6,21.6,6,16S10.5,6,16,6z></path><path fill=none stroke-width=4 stroke-linecap=round stroke-miterlimit=10 d=M16,6c3,0,5.7,1.3,7.5,3.4c0.6,0.7,1.1,1.4,1.5,2.2><animateTransform attributeName=transform type=rotate from="0 16 16"to="360 16 16"dur=0.75s repeatCount=indefinite>');const fi=e=>(()=>{var t=ui(),n=t.firstChild,r=n.nextSibling;return t.style.setProperty("overflow","visible"),R(a=>{var s=e.primary||"#E5E7EB",i=e.secondary||"#4b5563";return s!==a.e&&te(n,"stroke",a.e=s),i!==a.t&&te(r,"stroke",a.t=i),a},{e:void 0,t:void 0}),t})(),Ut=()=>{const e=Date.now().toString(36),t=Math.random().toString(36).slice(2);return e+t},di=()=>{window.scrollTo({top:0,behavior:"smooth"})},jr=()=>{const e=document.getElementsByClassName("msg-user");if(e.length>0){const r=e[e.length-1].getBoundingClientRect().top-54;r>0&&window.scrollTo({top:window.scrollY+r,behavior:"smooth"})}};var hi=M("<div class=modal-background>"),mi=M('<div class="modal is-active"><div class="modal-content p-4"></div><button class="modal-close is-large"aria-label=close>');const[Wn,Ur]=T([]);function zc(e){return new Promise((t,n)=>{const a={id:Ut(),resolve:t,reject:n,component:e};Ur(s=>[...s,a])})}const gi=e=>{const t=n=>{e.modal.resolve(n),Ur(r=>r.filter(a=>a.id!==e.modal.id))};return(()=>{var n=mi(),r=n.firstChild,a=r.nextSibling;return k(n,x(Be,{get when(){return e.isLast()},get children(){var s=hi();return s.$$click=()=>t(),s}}),r),k(r,x(Cn,{get component(){return e.modal.component},get id(){return e.modal.id},onClose:t})),a.$$click=()=>t(),n})()},pi=()=>x(jt,{get each(){return Wn()},children:(e,t)=>x(gi,{modal:e,isLast:()=>t()===Wn().length-1})});Te(["click"]);var yi=M("<svg stroke-width=0>");function C(e,t){const n=V(e.a,t),[r,a]=An(n,["src"]),[s,i]=T(""),l=$(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return pe(()=>i(l())),Ee(()=>{i("")}),(()=>{var u=yi();return H(u,V({get stroke(){return e.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},a,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return s()}}),!0,!0),k(u,()=>Ar),u})()}function Ic(e){return C({a:{viewBox:"0 0 24 24"},c:'<path fill-rule="evenodd" d="M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336 9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z" clip-rule="evenodd"/>'},e)}function Dc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M19 4h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm.002 16H5V8h14l.002 12z"/><path d="M11 10h2v5h-2zm0 6h2v2h-2z"/>'},e)}function Nc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M7 11h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"/><path d="M5 22h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM19 8l.001 12H5V8h14z"/>'},e)}function Bc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M12 8c-2.168 0-4 1.832-4 4s1.832 4 4 4 4-1.832 4-4-1.832-4-4-4zm0 6c-1.065 0-2-.935-2-2s.935-2 2-2 2 .935 2 2-.935 2-2 2z"/><path d="M20 5h-2.586l-2.707-2.707A.996.996 0 0 0 14 2h-4a.996.996 0 0 0-.707.293L6.586 5H4c-1.103 0-2 .897-2 2v11c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V7c0-1.103-.897-2-2-2zM4 18V7h3c.266 0 .52-.105.707-.293L10.414 4h3.172l2.707 2.707A.996.996 0 0 0 17 7h3l.002 11H4z"/>'},e)}function wi(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M12 16c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.084 0 2 .916 2 2s-.916 2-2 2-2-.916-2-2 .916-2 2-2z"/><path d="m2.845 16.136 1 1.73c.531.917 1.809 1.261 2.73.73l.529-.306A8.1 8.1 0 0 0 9 19.402V20c0 1.103.897 2 2 2h2c1.103 0 2-.897 2-2v-.598a8.132 8.132 0 0 0 1.896-1.111l.529.306c.923.53 2.198.188 2.731-.731l.999-1.729a2.001 2.001 0 0 0-.731-2.732l-.505-.292a7.718 7.718 0 0 0 0-2.224l.505-.292a2.002 2.002 0 0 0 .731-2.732l-.999-1.729c-.531-.92-1.808-1.265-2.731-.732l-.529.306A8.1 8.1 0 0 0 15 4.598V4c0-1.103-.897-2-2-2h-2c-1.103 0-2 .897-2 2v.598a8.132 8.132 0 0 0-1.896 1.111l-.529-.306c-.924-.531-2.2-.187-2.731.732l-.999 1.729a2.001 2.001 0 0 0 .731 2.732l.505.292a7.683 7.683 0 0 0 0 2.223l-.505.292a2.003 2.003 0 0 0-.731 2.733zm3.326-2.758A5.703 5.703 0 0 1 6 12c0-.462.058-.926.17-1.378a.999.999 0 0 0-.47-1.108l-1.123-.65.998-1.729 1.145.662a.997.997 0 0 0 1.188-.142 6.071 6.071 0 0 1 2.384-1.399A1 1 0 0 0 11 5.3V4h2v1.3a1 1 0 0 0 .708.956 6.083 6.083 0 0 1 2.384 1.399.999.999 0 0 0 1.188.142l1.144-.661 1 1.729-1.124.649a1 1 0 0 0-.47 1.108c.112.452.17.916.17 1.378 0 .461-.058.925-.171 1.378a1 1 0 0 0 .471 1.108l1.123.649-.998 1.729-1.145-.661a.996.996 0 0 0-1.188.142 6.071 6.071 0 0 1-2.384 1.399A1 1 0 0 0 13 18.7l.002 1.3H11v-1.3a1 1 0 0 0-.708-.956 6.083 6.083 0 0 1-2.384-1.399.992.992 0 0 0-1.188-.141l-1.144.662-1-1.729 1.124-.651a1 1 0 0 0 .471-1.108z"/>'},e)}function jc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="m12 16 4-5h-3V4h-2v7H8z"/><path d="M20 18H4v-7H2v7c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2v-7h-2v7z"/>'},e)}function Uc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="m7 17.013 4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"/><path d="M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"/>'},e)}function Vc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M19.903 8.586a.997.997 0 0 0-.196-.293l-6-6a.997.997 0 0 0-.293-.196c-.03-.014-.062-.022-.094-.033a.991.991 0 0 0-.259-.051C13.04 2.011 13.021 2 13 2H6c-1.103 0-2 .897-2 2v16c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V9c0-.021-.011-.04-.013-.062a.952.952 0 0 0-.051-.259c-.01-.032-.019-.063-.033-.093zM16.586 8H14V5.414L16.586 8zM6 20V4h6v5a1 1 0 0 0 1 1h5l.002 10H6z"/><path d="M8 12h8v2H8zm0 4h8v2H8zm0-8h2v2H8z"/>'},e)}function vi(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M12 8v5h5v-2h-3V8z"/><path d="M21.292 8.497a8.957 8.957 0 0 0-1.928-2.862 9.004 9.004 0 0 0-4.55-2.452 9.09 9.09 0 0 0-3.626 0 8.965 8.965 0 0 0-4.552 2.453 9.048 9.048 0 0 0-1.928 2.86A8.963 8.963 0 0 0 4 12l.001.025H2L5 16l3-3.975H6.001L6 12a6.957 6.957 0 0 1 1.195-3.913 7.066 7.066 0 0 1 1.891-1.892 7.034 7.034 0 0 1 2.503-1.054 7.003 7.003 0 0 1 8.269 5.445 7.117 7.117 0 0 1 0 2.824 6.936 6.936 0 0 1-1.054 2.503c-.25.371-.537.72-.854 1.036a7.058 7.058 0 0 1-2.225 1.501 6.98 6.98 0 0 1-1.313.408 7.117 7.117 0 0 1-2.823 0 6.957 6.957 0 0 1-2.501-1.053 7.066 7.066 0 0 1-1.037-.855l-1.414 1.414A8.985 8.985 0 0 0 13 21a9.05 9.05 0 0 0 3.503-.707 9.009 9.009 0 0 0 3.959-3.26A8.968 8.968 0 0 0 22 12a8.928 8.928 0 0 0-.708-3.503z"/>'},e)}function qc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M4 5h13v7h2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h8v-2H4V5z"/><path d="m8 11-3 4h11l-4-6-3 4z"/><path d="M19 14h-2v3h-3v2h3v3h2v-3h3v-2h-3z"/>'},e)}function Hc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M7.499 8A1.5 1.5 0 1 0 7.499 11 1.5 1.5 0 1 0 7.499 8z"/><path d="m10.499 14-1.5-2-3 4h12l-4.5-6z"/><path d="M19.999 4h-16c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm-16 14V6h16l.002 12H3.999z"/>'},e)}function Zc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M12.707 17.293 8.414 13H18v-2H8.414l4.293-4.293-1.414-1.414L4.586 12l6.707 6.707z"/>'},e)}function Wc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M18.464 2.114a.998.998 0 0 0-1.033.063l-13 9a1.003 1.003 0 0 0 0 1.645l13 9A1 1 0 0 0 19 21V3a1 1 0 0 0-.536-.886zM17 19.091 6.757 12 17 4.909v14.182z"/>'},e)}function Gc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="m21.707 20.293-3.388-3.388A7.942 7.942 0 0 0 20 12.021h-2a5.95 5.95 0 0 1-1.109 3.456l-1.452-1.452c.348-.591.561-1.27.561-2.004v-6C16 3.804 14.215 2 12.021 2c-.07 0-.14.009-.209.025A4.005 4.005 0 0 0 8 6.021v.565L3.707 2.293 2.293 3.707l18 18 1.414-1.414zM10 6.021c0-1.103.897-2 2-2a.918.918 0 0 0 .164-.015C13.188 4.08 14 4.956 14 6.021v6c0 .172-.029.335-.071.494L10 8.586V6.021zm-4 6H4c0 4.072 3.06 7.436 7 7.931v2.069h2v-2.07a7.993 7.993 0 0 0 2.218-.611l-1.558-1.558a5.979 5.979 0 0 1-1.66.239c-3.309 0-6-2.692-6-6z"/><path d="M8.011 12.132a3.993 3.993 0 0 0 3.877 3.877l-3.877-3.877z"/>'},e)}function Yc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M16 12V6c0-2.217-1.785-4.021-3.979-4.021a.933.933 0 0 0-.209.025A4.006 4.006 0 0 0 8 6v6c0 2.206 1.794 4 4 4s4-1.794 4-4zm-6 0V6c0-1.103.897-2 2-2a.89.89 0 0 0 .163-.015C13.188 4.06 14 4.935 14 6v6c0 1.103-.897 2-2 2s-2-.897-2-2z"/><path d="M6 12H4c0 4.072 3.061 7.436 7 7.931V22h2v-2.069c3.939-.495 7-3.858 7-7.931h-2c0 3.309-2.691 6-6 6s-6-2.691-6-6z"/>'},e)}function Kc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M17.004 5H9c-1.838 0-3.586.737-4.924 2.076C2.737 8.415 2 10.163 2 12c0 1.838.737 3.586 2.076 4.924C5.414 18.263 7.162 19 9 19h8v-2H9c-1.303 0-2.55-.529-3.51-1.49C4.529 14.55 4 13.303 4 12c0-1.302.529-2.549 1.49-3.51C6.45 7.529 7.697 7 9 7h8V6l.001 1h.003c.79 0 1.539.314 2.109.886.571.571.886 1.322.887 2.116a2.966 2.966 0 0 1-.884 2.11A2.988 2.988 0 0 1 17 13H9a.99.99 0 0 1-.698-.3A.991.991 0 0 1 8 12c0-.252.11-.507.301-.698A.987.987 0 0 1 9 11h8V9H9c-.79 0-1.541.315-2.114.889C6.314 10.461 6 11.211 6 12s.314 1.54.888 2.114A2.974 2.974 0 0 0 9 15h8.001a4.97 4.97 0 0 0 3.528-1.473 4.967 4.967 0 0 0-.001-7.055A4.95 4.95 0 0 0 17.004 5z"/>'},e)}function Jc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M4 21a1 1 0 0 0 .24 0l4-1a1 1 0 0 0 .47-.26L21 7.41a2 2 0 0 0 0-2.82L19.42 3a2 2 0 0 0-2.83 0L4.3 15.29a1.06 1.06 0 0 0-.27.47l-1 4A1 1 0 0 0 3.76 21 1 1 0 0 0 4 21zM18 4.41 19.59 6 18 7.59 16.42 6zM5.91 16.51 15 7.41 16.59 9l-9.1 9.1-2.11.52z"/>'},e)}function bi(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"/>'},e)}function xi(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M12 4C9.243 4 7 6.243 7 9h2c0-1.654 1.346-3 3-3s3 1.346 3 3c0 1.069-.454 1.465-1.481 2.255-.382.294-.813.626-1.226 1.038C10.981 13.604 10.995 14.897 11 15v2h2v-2.009c0-.024.023-.601.707-1.284.32-.32.682-.598 1.031-.867C15.798 12.024 17 11.1 17 9c0-2.757-2.243-5-5-5zm-1 14h2v2h-2z"/>'},e)}function Xc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="m11.293 17.293 1.414 1.414L19.414 12l-6.707-6.707-1.414 1.414L15.586 11H6v2h9.586z"/>'},e)}function Qc(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M5.536 21.886a1.004 1.004 0 0 0 1.033-.064l13-9a1 1 0 0 0 0-1.644l-13-9A.998.998 0 0 0 5 3v18a1 1 0 0 0 .536.886zM7 4.909 17.243 12 7 19.091V4.909z"/>'},e)}function eu(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="m21.426 11.095-17-8A.999.999 0 0 0 3.03 4.242L4.969 12 3.03 19.758a.998.998 0 0 0 1.396 1.147l17-8a1 1 0 0 0 0-1.81zM5.481 18.197l.839-3.357L12 12 6.32 9.16l-.839-3.357L18.651 12l-13.17 6.197z"/>'},e)}function tu(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"/><path d="M9 10h2v8H9zm4 0h2v8h-2z"/>'},e)}function nu(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M11 15h2V9h3l-4-5-4 5h3z"/><path d="M20 18H4v-7H2v7c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2v-7h-2v7z"/>'},e)}function Ai(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M2 3h20v4H2zm17 5H3v11a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8h-2zm-3 6H8v-2h8v2z"/>'},e)}function ru(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M9.38 21.646A9.985 9.985 0 0 0 12 22l.141-.001a2.998 2.998 0 0 0 2.515-1.425c.542-.876.6-1.953.153-2.88l-.198-.415c-.453-.942-.097-1.796.388-2.281.485-.485 1.341-.841 2.28-.388h.001l.413.199a2.99 2.99 0 0 0 2.881-.153A2.997 2.997 0 0 0 22 12.141a9.926 9.926 0 0 0-.353-2.76c-1.038-3.827-4.353-6.754-8.246-7.285-3.149-.427-6.241.602-8.471 2.833S1.666 10.247 2.096 13.4c.53 3.894 3.458 7.208 7.284 8.246zM15.5 6a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5-1a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zM9 15.506a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-2.5-6.5a1.5 1.5 0 1 1-.001 3.001A1.5 1.5 0 0 1 6.5 9.006z"/>'},e)}function au(e){return C({a:{viewBox:"0 0 24 24"},c:'<path d="M5 21h14a2 2 0 0 0 2-2V8l-5-5H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2zM7 5h4v2h2V5h2v4H7V5zm0 8h10v6H7v-6z"/>'},e)}const Y="/apps/unhurry";class Si{recognizing=!1;languages=[];recognition=null;accumulatedText="";onError;onTranscript;onStopped;constructor(){const t=window,n=t.SpeechRecognition||t.webkitSpeechRecognition;if(!n)throw new Error("Speech recognition not supported in this browser.");this.recognition=new n,this.recognition.interimResults=!0,this.recognition.continuous=!0,this.recognition.maxAlternatives=1,this.recognition.onresult=r=>{const a=r.resultIndex,s=r.results[a],i=s.isFinal,l=s[0].transcript+(i?" ":"");this.onTranscript?.(l,i,this.accumulatedText),this.accumulatedText=i?"":l},this.recognition.onerror=r=>{this.onError?.(r.error)},this.recognition.onend=()=>{this.recognizing=!1,this.onStopped?.()}}async start(){return this.recognizing?!1:(this.recognizing=!0,this.accumulatedText="",this.recognition.start(),!0)}async stop(){return this.recognizing?(this.recognizing=!1,this.recognition.stop(),!0):!1}}const Ci=/[/\\]+/,Vr=e=>{const t=e.split(Ci);return t[t.length-1]||""},ki=e=>{const t=Vr(e),n=t.lastIndexOf(".");return t.slice(n+1)},qr={"7z":"application/7z-compressed",aac:"audio/aac",ada:"text/ada",apng:"image/apng",avi:"video/avi",avif:"image/avif",bash:"application/sh",bat:"application/bat",bf:"text/bf",bmp:"image/bmp",bz2:"application/bzip2",c:"text/c",clj:"text/clojure",coffee:"text/coffeescript",cpp:"text/c++",crx:"application/chrome-extension",cs:"text/csharp",css:"text/css",csv:"text/csv",d:"text/d",dart:"application/dart",el:"text/emacs-lisp",erl:"text/erlang",f:"text/fortran",f90:"text/fortran",flac:"audio/flac",flc:"video/flc",frag:"text/glsl",geo:"text/glsl",gif:"image/gif",go:"text/go",gz:"application/gzip",h:"text/cpp",haml:"text/haml",hs:"text/haskell",hpp:"text/cpp",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",iso:"application/iso9660-image",java:"text/java-source",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsx:"text/jsx",kt:"text/kotlin",latex:"application/latex",lisp:"text/lisp",lua:"text/lua",lz:"application/lzip",lzma:"application/lzma",m:"text/matlab",m4a:"audio/m4a",m4v:"video/mp4",md:"text/markdown",mht:"multipart/related",mhtml:"multipart/related",mid:"audio/midi",midi:"audio/midi",mjs:"text/javascript",ml:"text/ocaml",mli:"text/ocaml",mov:"video/quicktime",mp3:"audio/mpeg",mp4:"video/mp4",oga:"audio/ogg",ogg:"audio/ogg",ogm:"video/ogg",ogv:"video/ogg",opus:"audio/ogg",otf:"font/otf",php:"application/httpd-php",pl:"text/perl",png:"image/png",py:"text/python",r:"text/r",ra:"audio/vnd.rn-realaudio",rar:"application/vnd.rar",rb:"text/ruby",rs:"text/rust",scala:"text/scala",sh:"application/sh",shtm:"text/html",shtml:"text/html",sql:"application/sql",svg:"image/svg+xml",svgz:"image/svg+xml",swift:"text/swift",tar:"application/tar",tex:"application/tex",tiff:"image/tiff",toml:"application/toml",ts:"text/typescript",tsx:"text/tsx",ttf:"font/ttf",vb:"text/vb",vert:"text/glsl",wasm:"application/wasm",wat:"text/wasm-text",wast:"text/wasm-text",wav:"audio/wav",webm:"video/webm",webp:"image/webp",wma:"audio/ms-wma",wmv:"video/ms-wmv",woff:"font/woff",woff2:"font/woff2",xht:"application/xhtml+xml",xhtm:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"text/xml",xz:"application/xz",yaml:"text/yaml",yml:"text/yaml",zig:"text/zig",zip:"application/zip",zst:"application/zstd"},Ei=Object.entries(qr).reduce((e,[t,n])=>(e[n]||(e[n]=t),e),{});function Hr(e){if(e==="")return"application/octet-stream";const t=qr[e.toLowerCase()];return t||`text/${e}`}function su(e){const t=Ei[e.toLowerCase()];if(t)return t;const n=e.split("/",2);return n.length===2?n[1].startsWith("x-")?n[1].slice(2):n[1]:n[0]}const Gn=e=>{const t=ki(e);return Hr(t)},Ti=e=>{const t=Hr(e),[,n]=t.split("/",2);return n.startsWith("x-")?n.slice(2):n},$i=e=>{const t=Math.max(e.lastIndexOf("\\"),e.lastIndexOf("/")),r=(t>=0?e.slice(t+1):e).split(".").pop()||"";return Ti(r)};class Mi{items=[];log(t,...n){const r=Date.now();this.items.push({level:t,message:n.join("	"),timestamp:r}),console[t](...n)}info(...t){this.log("info",...t)}warn(...t){this.log("warn",...t)}error(...t){this.log("error",...t)}clear(){this.items=[]}}const N=new Mi,Pi=new Map([["light",[10]],["medium",[40]],["heavy",[100]],["soft",[10,20,10]],["rigid",[40,20,40]],["success",[30,20,30]],["warning",[30,20,30,20,30]],["error",[30,20,30,20,30,20,30]]]);class Zr{constructor(){}name(){return"Browser"}fetch=async(...t)=>await fetch(...t);async myIP(){throw new Error("IP address not supported in browser")}async genQRSVG(){throw new Error("QR SVG not supported in browser")}async scanQRCode(){throw new Error("Barcode scanning not supported in browser")}async vibrate(t){if(navigator.vibrate)if(typeof t=="number")navigator.vibrate(t);else{const n=Pi.get(t);n&&navigator.vibrate(n)}}onDrop;onDragOver=t=>{t.preventDefault(),t.stopPropagation()};onDropFiles=async t=>{if(t.preventDefault(),t.stopPropagation(),!this.onDrop||!t.dataTransfer)return;const n=await Promise.all(Array.from(t.dataTransfer.files).map(async r=>{const a="file://"+r.name,s=Vr(r.name),i=r.type||Gn(r.name);return{uri:a,name:s,mimeType:i,data:new Uint8Array(await r.arrayBuffer())}}));this.onDrop(n)};mountDragAndDrop(t){this.onDrop=t,window.addEventListener("dragover",this.onDragOver),window.addEventListener("drop",this.onDropFiles)}unmountDragAndDrop(){window.removeEventListener("dragover",this.onDragOver),window.removeEventListener("drop",this.onDropFiles),this.onDrop=void 0}async uploadFiles(t,n){const r=await new Promise((s,i)=>{const l=document.createElement("input");l.type="file",l.accept=t,n&&l.setAttribute("capture",n),l.onchange=u=>{console.log("File selected:",u);const g=u.target.files;g&&g.length>0&&s(Array.from(g)),l.remove()},l.onerror=u=>{N.error("Failed to upload file:",u),i(new Error("Failed to upload file: "+u)),l.remove()},l.click()});return await Promise.all(r.map(async s=>{const i=await new Promise((l,u)=>{const g=new FileReader;g.onerror=m=>{N.error("Failed to read file:",m),u(new Error("Failed to read file: "+m))},g.onload=m=>{const o=new Uint8Array(m.target.result);l(o)},g.readAsArrayBuffer(s)});return{uri:"file://"+s.name,name:s.name,mimeType:s.type||Gn(s.name),data:i}}))}async downloadFile(t,n){const r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=t,a.click(),URL.revokeObjectURL(r)}async speechRecognizer(){return new Si}}let we=null,Xe=null;const st=async()=>{if(we)return we;if(window.__TAURI_INTERNALS__){const e=(await ue(async()=>{const{TauriService:t}=await import("./tauri-CEDqh0Nj.js");return{TauriService:t}},__vite__mapDeps([0,1,2,3]))).TauriService;return we=new e,we}return we=new Zr,Xe=we,we},iu=async()=>Xe||(Xe=new Zr,Xe),Fi=["none","primary","info","success","warning","danger"];new Set(Fi);const Yn=()=>({models:[],currentModelIdx:0,enableLLMFallback:!0,enableTools:!0,enableAutoSend:!1,enableVibration:!0,enterKeyToSend:!1,blurOnSendButton:!1,fontFamily:"sans-serif",fontSize:16,autoSendMillis:2e3,promptTags:[],tools:{}}),Oi=e=>{try{const t=JSON.parse(JSON.stringify(e)),n=Yn(),r={...n,...t};return Object.entries(n).forEach(([s,i])=>{typeof r[s]!=typeof i&&(r[s]=i)}),Object.entries(r).forEach(([s])=>{typeof n[s]>"u"&&delete r[s]}),r.fontSize=Math.max(10,Math.min(r.fontSize,24)),new Set(["sans-serif","serif"]).has(r.fontFamily)||(r.fontFamily="sans-serif"),r}catch{return Yn()}};class _i{tx;store;constructor(t,n){this.tx=t,this.store=t.objectStore(n)}get(t){return new Promise((n,r)=>{const a=this.store.get(t);a.onsuccess=()=>{n(a.result)},a.onerror=()=>{r(a.error)}})}put(t,n){return new Promise((r,a)=>{const s=this.store.put(t,n);s.onsuccess=()=>{r()},s.onerror=()=>{a(s.error)}})}delete(t){return new Promise((n,r)=>{const a=this.store.delete(t);a.onsuccess=()=>{n()},a.onerror=()=>{r(a.error)}})}clear(){return new Promise((t,n)=>{const r=this.store.clear();r.onsuccess=()=>{t()},r.onerror=()=>{n(r.error)}})}getAll(t,n){return new Promise((r,a)=>{const s=this.store.getAll(t,n);s.onsuccess=()=>{r(s.result)},s.onerror=()=>{a(s.error)}})}}class Me{name;stores;version;upgradeCallback;db=null;constructor(t,n,r=1){this.name=t,this.stores=typeof n=="string"?[n]:n,this.version=r}setUpgradeCallback(t){this.upgradeCallback=t}open(){return new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onupgradeneeded=()=>{const a=r.result;for(const s of this.stores)a.objectStoreNames.contains(s)||a.createObjectStore(s,{keyPath:"_id",autoIncrement:!0});this.upgradeCallback&&this.upgradeCallback(a)},r.onsuccess=()=>{this.db=r.result,t()},r.onerror=()=>{n(r.error)}})}async transaction(t="readonly",n,r){return this.db||await this.open(),r||(r=this.stores[0]),new _i(this.db.transaction(r,t,n),r)}}const Li=new Me("local-user-config","configs",1),Wr="current",Gr=async()=>await Li.transaction("readwrite"),Ri=async e=>{await(await Gr()).put({config:JSON.stringify(e),_id:Wr})},zi=async()=>{const e=await Gr();try{const t=await e.get(Wr);return JSON.parse(t.config)}catch{return{}}},Ii=new Me("chat-list","chats",1),_t=async()=>await Ii.transaction("readwrite"),Di=e=>new Me("chat:"+e,"messages",1),en=async e=>await Di(e).transaction("readwrite"),ou=async e=>{if(e)await Promise.all(e.map(t=>Ni(t)));else{(await _t()).clear();const n=await indexedDB.databases();for(const r of n)r.name&&r.name.startsWith("chat:")&&indexedDB.deleteDatabase(r.name)}},Ni=async e=>{await(await _t()).delete(e),indexedDB.deleteDatabase("chat:"+e)},Bi=()=>({enabled:!1,maxSize:128,contents:[]}),ji=(e,t)=>{const n=new Set(e.contents);for(const a of t.split(`
`))a.startsWith("+")?n.add(a.slice(1).trim()):a.startsWith("-")&&n.delete(a.slice(1).trim());let r=Array.from(n.values());return e.maxSize>0&&(r=r.slice(0,e.maxSize)),{...e,contents:r}},Ui="_@per_sig_",Vi=(e,t,n,r)=>{const[a,s]=T(void 0,r),i=Ui+e,l=new Me(i,t);(async()=>{const o=await(await l.transaction("readonly")).get(i);s(o?o.value:n())})();const u=async m=>{const o=await l.transaction("readwrite");m===void 0?await o.clear():await o.put({_id:i,value:m})};return[a,m=>{const o=s(m);return u(o),o}]},[qe,Yr]=T(void 0,{equals:!1}),[lu,cu]=T(null,{equals:!1});(async()=>{const e=await zi(),t=Oi(e);Yr(t)})();const Kr=e=>{N.info("[store/config] User config updated, will save persistently");const t=Yr(e);return Ri(t),t},[Lt,qi]=Vi("memory_cfg","1",Bi),Qe=e=>{switch(e.type){case"null":case"boolean":case"number":return e.type;case"string":return e.enum?e.enum.map(t=>JSON.stringify(t)).join(" | "):e.type;case"array":if(e.prefixItems){const t=e.prefixItems.map(Qe).join(", ");return e.items?`[${t}, ...${Qe(e.items)}[]]`:`[${t}]`}else return e.items?`${Qe(e.items)}[]`:"[]";case"object":{if(!e.properties)return"{}";const t=[];for(const[n,r]of Object.entries(e.properties)){const a=r.description?`/** ${r.description} */
`:"",s=e.required?.includes(n);t.push(`${a}${n}${s?"":"?"}: ${Qe(r)};`)}return`{
${t.join(`
`)}
}`}}},Hi=(e,t,n)=>`/** ${n.replaceAll(`
`,`
 * `)} */
interface ${t} ${Qe(e)}`,Zi=(e,t)=>e===void 0?t:{id:e.id+t.id,name:e.name+t.name,args:e.args+t.args},Wi=e=>Hi(e.parameters,e.name,e.description),Gi=async(e,t)=>{switch(e){case"gemma":return`
`+`
## Tools

You can call a tool (which is a function) by markdown code block with language 'tool_code'
System will call the tool then put result in 'tool_output' block in user's message.
DO NOT give 'tool_output' in yourself.
The block content is a tool name and arguments.
Arguments should be a JSON object, but with slightly generous grammar like JSON5:
- Trailing comma, omitting quotes and multiline strings are allowed.
- Use multiple quotes (''' or """. Three or more quotes.) is available.

For example, to use 'myTool' with argument \`{"lang": "javascript", "val": 42, "code": "...(multiple lines)"}\`,

\`\`\`tool_code
myTool{
	"lang": "javascript",
	code: '''
const resp = await fetch('test');
console.log("Hello, world!");
'''
}
\`\`\`

### Available Tools

The following interfaces are available tools.
Each interface name is a tool name, and the interface body is the arguments.

\`\`\`typescript
${t.map(n=>Wi(n)).join(`

`)}
\`\`\`
`.trim();default:return`
`+`
## Tools

- You can use tools by tool function callings.
- You MUST fill all required arguments.
  - Based on the history, you should guess the arguments.
  - If you did not provide the arguments, you will see Argument Error.
- Do not forget to use tools, and do not say it's impossible which can be done by tools.
`.trim()}},Yi=e=>e?.enabled?`
## Memory

The belows are facts you already know from the previous conversations.
It may includes user's personal information, or notes of last conversations.

\`\`\`memory
${e.contents}
\`\`\`
`.trim():"",Ki=async(e,t,n,r)=>`
You are a helpful assistant 'Unhurry' ().

# Important Guidelines

${["- Respond in the user's language.","- Ensure your answer is in **correct Markdown format.** (GitHub Flavored Markdown)","- For URL, use markdown format (e.g., [link text](url)).","- You can show images to users using ![alt text](url) in your answer.","- You can use HTML tags to show audios, videos for users in your answer.","- To show some special chracters ([`~#$*_]), use backslash escape.","- You can use more than 3 backticks to open and close code blocks (e.g. ````).","  **You need this to show markdown in markdown correctly** (e.g. ````markdown)","- LaTeX is supported with dollar signs (e.g., $\\frac{x}{y}$ or $$y=x$$). Do not use brackets `\\(...\\)` or `\\[...\\]`.","- Some code blocks follow by Artifact Information (ID, URI). It means the content is saved as an artifact (like a file). If the code block is empty, you can request the content with get artifact tool.","- **Simple Tasks** (e.g., summary, translation, format conversion, or tasks that LLMs can handle): Provide short, straightforward answers without extra explanations.","- **Complex Questions** (e.g., computation, search, investigation, code execution, drawing images or diagrams): Follow this strategy:","  1. **Enumerate Steps**: Plan and brief the solution steps, and which Tools may be useful.","  2. For each step, if you can provide the answer directly, do so.","  3. Otherwise, use *tools* to get hints, and derive the answer from them.","- **Use tool calling actively.**. If you have no idea, use tools to get hints."].join(`
`)}

## Preview-able Code Blocks

Some markdown code blocks are shown with preview for user.
If user requested a content to show or make **in special format**,
just provide the code block with the language name.

For example, to show QR code image for 'www.example.com', just say:

\`\`\`qr
www.example.com
\`\`\`

### List of Preview-able Code Blocks

The list of language names and how they are displayed.

- 'svg': Shown as image. The content MUST be <svg ...> ... </svg>. You MUST use viewBox instead of width and height.
- 'mermaid': Shown as a diagram using mermaid.js. Use mermaid syntax.
- 'qr': Shown as QR Code Image. You can use any words, json, string, or URL.

NOTE: all other languages except above 'svg', 'mermaid', 'qr' just show the code. (No execution)

${await Gi(t,n)}

${Yi(r)}

# Additional info

${e}
- Current time: ${new Date().toLocaleString()}
  - Use this wisely for search / answer.
`.trim(),Kn=/[[\]{}'"`,:]/g,Ji={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Xi=(e,t)=>{let n=t;const r={};let a;for(;n<e.length;){const[s,i]=it(e,n);if(n=i,s===void 0){if(e[n-1]==="}")break;e[n-1]===","&&a!==void 0&&(r[a]=null,a=void 0),e[n-1]===":"&&a===void 0&&(a="")}else a===void 0?typeof s=="string"?a=s:a=JSON.stringify(s):(r[a]=s,a=void 0)}return a!==void 0&&(r[a]=null),[r,n]},Qi=(e,t)=>{let n=t;const r=[];for(;n<e.length;){const[a,s]=it(e,n);if(n=s,a===void 0){if(e[n-1]==="]")break}else r.push(a)}return[r,n]},eo=(e,t)=>{const n=e[t];let r=t+1;for(;e[r]===n;)r++;const a=e.slice(t,r);if(a.length===2)return["",r];const s=r;for(;r<e.length;){const u=e.indexOf(a,r);if(u<0){r=e.length;break}if(e[u-1]!=="\\"){r=u;break}r=u+1}const i=e.slice(s,r);let l="";for(let u=0;u<i.length;u++)if(i[u]==="\\"){if(u++,u>=i.length){l+="\\";break}const g=Ji[i[u]];if(g)l+=g;else if(i[u]==="u"){const m=parseInt(i.slice(u+1,u+5),16);m>=0&&m<=65535?(l+=String.fromCharCode(m),u+=4):l+="\\u"}else l+=i[u]}else l+=i[u];return[l,r+a.length]},it=(e,t)=>{Kn.lastIndex=t;const n=Kn.exec(e),r=(n?n.index:e.length)-t,a=e.slice(t,t+r).trim();if(a){try{return[JSON.parse(a.toLowerCase()),t+r]}catch{}if(a.length>0)return[a,t+r]}switch(e[t+r]){case"{":return Xi(e,t+r+1);case"[":return Qi(e,t+r+1);case'"':case"'":case"`":return eo(e,t+r);default:return[void 0,t+r+1]}},to=e=>{const t=it(e,0)[0];return t===void 0?null:t},no=e=>{const t=it(e,0),n=typeof t[0]!="string"?JSON.stringify(t[0]):t[0],[r]=it(e,t[1]);return[n,r??null,t[1]]},ie="",Re="*fn:call",Jr="*artifact",tn="*think",ro=e=>({role:"user",parts:Array.isArray(e)?e:[{type:ie,content:e}],timestamp:Date.now()}),At=e=>({role:"assistant",parts:Array.isArray(e)?e:[{type:ie,content:e}],timestamp:Date.now()}),Xr=new Me("artf-i",["meta","data"],2),We=async()=>await Xr.transaction("readwrite",void 0,"meta"),Vt=async()=>await Xr.transaction("readwrite",void 0,"data"),uu=async(e,t,n,r)=>{const a=Ut(),s={_id:a,uri:e,name:t,createdAt:Date.now(),mimeType:n},i={_id:a,data:r};return await Promise.all([(async()=>{await(await We()).put(s)})(),(async()=>{await(await Vt()).put(i)})()]),s},fu=async()=>await(await We()).getAll(),Tn=async e=>await(await We()).get(e),ao=async e=>await Tn(e)?await(await Vt()).get(e):void 0,$n=async e=>{const[t,n]=await Promise.all([Tn(e),ao(e)]);if(!(!t||!n))return{meta:t,data:n}},so=async e=>{const t=await $n(e);if(t)return new Blob([t.data.data],{type:t.meta.mimeType})},io=async e=>{const t=await $n(e);if(!t)return;const n=new Blob([t.data.data],{type:t.meta.mimeType});return await new Promise((r,a)=>{const s=new FileReader;s.onload=i=>{r(i.target?.result)},s.onerror=a,s.readAsDataURL(n)})},du=async e=>{const t=await $n(e);if(!t)throw new Error("Artifact not found: "+e);const n=new Blob([t.data.data],{type:t.meta.mimeType});return await new Promise((r,a)=>{const s=new FileReader;s.onload=i=>{r(i.target?.result)},s.onerror=a,s.readAsText(n,"utf-8")})},hu=async(e,t)=>{const n=await We(),r=await n.get(e);if(!r)return;const a={...r,...t,_id:e};await n.put(a)},mu=async e=>{await Promise.all([(async()=>{await(await We()).delete(e)})(),(async()=>{await(await Vt()).delete(e)})()])},gu=async()=>{await Promise.all([(async()=>{await(await We()).clear()})(),(async()=>{await(await Vt()).clear()})()])};class X{role;content;constructor(t,n){this.role=t,this.content=n}static assistant(t){return new X("assistant",t)}static user(t){return new X("user",t)}extractText(){if(typeof this.content=="string")return this.content;const t=[];for(const n of this.content)n.type==="text"&&t.push(n.text);return t.join(`

`)}functionCalls(){return typeof this.content=="string"?[]:this.content.filter(t=>t.type==="function_call")}}const vt=(e,t,n="")=>{let r="```";for(;t.indexOf(r)>=0;)r+="`";return n.length>0&&(t=t.replaceAll(`
`,`
${n}`)),`${n}${r}${e}
${n}${t}
${n}${r}`};class Ge{cursor=0;buffer="";parts=[{type:ie,content:""}];thinkOpenText="";thinkCloseText="";useThink=!1;toolCallStyle="builtin";quotes=3;constructor(t){this.thinkOpenText=t?.thinkOpen||"",this.thinkCloseText=t?.thinkClose||"",this.useThink=!!this.thinkOpenText&&!!this.thinkCloseText,this.toolCallStyle=t?.toolCallStyle||"builtin"}static parse(t,n){const r=new Ge(n);return r.inputToParse(t),r.parseStep(),r.finishParsing()}parseState(){return[this.parts,this.buffer.slice(this.cursor)]}inputToParse(t){this.buffer+=t,this.parseStep()}finishParsing(){return this.inputToParse(`
`),this.parts.filter(n=>n.type!==ie||n.content.trim().length>0)}checkCallPart(t){if(console.log(t,this.toolCallStyle),this.toolCallStyle==="builtin"||t.type!=="tool_code")return t;const[n,,r]=no(t.content),a={type:"function_call",id:Math.random().toString(36).slice(2),name:n,args:t.content.slice(r)};return{type:Re,content:JSON.stringify(a)}}parseStep(){let t=this.buffer.indexOf(`
`,this.cursor);if(t<0)return;let n=this.parts.pop();do{let r=this.buffer.slice(this.cursor,t+1);this.useThink&&(n.type===ie&&r.startsWith(this.thinkOpenText)&&(this.parts.push(n),n={type:tn,content:""},r=r.slice(this.thinkOpenText.length)),n.type===tn&&r.startsWith(this.thinkCloseText)&&(this.parts.push(n),n={type:ie,content:""},r=r.slice(this.thinkCloseText.length)));const a=r.match(/^(\s*)(```+)/);if(a!==null){const s=a[1],i=a[2].length;let l=r.slice(a[0].length).trim();n.type===ie?(l||(l="plaintext"),this.quotes=i,n.content=n.content.trimEnd(),this.parts.push(n),n={type:l,content:"",indent:s},r=""):i>=this.quotes&&!l&&(n.content=n.content.trimEnd(),this.parts.push(this.checkCallPart(n)),n={type:ie,content:""},r="")}n.indent&&r.startsWith(n.indent)&&(r=r.slice(n.indent.length)),n.content+=r,this.cursor=t+1,t=this.buffer.indexOf(`
`,this.cursor)}while(this.cursor<this.buffer.length&&t>=0);this.parts=[...this.parts,{...n}]}async formatMsg(t,n){const r=(s,...i)=>{let l=t[t.length-1];(!l||l.role!==s)&&(l=new X(s,[]),t.push(l));const u=typeof l.content=="string"?[{type:"text",text:l.content}]:l.content;l.content=u;for(const g of i){const m=u[u.length-1];g.type==="text"&&m&&m.type==="text"?m.text+=`

`+g.text:u.push(g)}},a=[];for(const s of n.parts)switch(s.type){case tn:break;case Jr:{const i=await Tn(s.content);if(i)if(i.mimeType.startsWith("image/")){const l=await io(s.content);l&&r(n.role,{type:"image_url",image_url:{url:l}})}else{let l="";const u=await so(s.content);if(u){const m=new Uint8Array(await u.arrayBuffer());m.length===0?l="<EMPTY FILE>":l=new TextDecoder("utf-8").decode(m)}else l="<FILE NOT FOUND>";const g=$i(i.name);r(n.role,{type:"text",text:`(Below is an artifact; URI=${i.uri}; ID=${i._id})
`+vt(`${g}`,l)})}}break;case Re:{const i=JSON.parse(s.content);switch(this.toolCallStyle){case"gemma":r(n.role,{type:"text",text:vt("tool_code",`${i.name} ${i.args}`)}),i.result&&a.push({type:"text",text:vt("tool_output",i.result)});break;default:r(n.role,i)}}break;default:s.type===ie?r(n.role,{type:"text",text:s.content}):r(n.role,{type:"text",text:vt(s.type,s.content,s.indent)})}for(const s of a)r("user",s)}async format(t){const n=[];for(const r of t.msgPairs)r.user&&await this.formatMsg(n,r.user),r.assistant&&await this.formatMsg(n,r.assistant);return console.log(n),n}}var ae={},Z={},Jn;function xe(){if(Jn)return Z;Jn=1;var e=Z.ValidationError=function(f,p,y,w,v,b){if(Array.isArray(w)?(this.path=w,this.property=w.reduce(function(_,D){return _+l(D)},"instance")):w!==void 0&&(this.property=w),f&&(this.message=f),y){var A=y.$id||y.id;this.schema=A||y}p!==void 0&&(this.instance=p),this.name=v,this.argument=b,this.stack=this.toString()};e.prototype.toString=function(){return this.property+" "+this.message};var t=Z.ValidatorResult=function(f,p,y,w){this.instance=f,this.schema=p,this.options=y,this.path=w.path,this.propertyPath=w.propertyPath,this.errors=[],this.throwError=y&&y.throwError,this.throwFirst=y&&y.throwFirst,this.throwAll=y&&y.throwAll,this.disableFormat=y&&y.disableFormat===!0};t.prototype.addError=function(f){var p;if(typeof f=="string")p=new e(f,this.instance,this.schema,this.path);else{if(!f)throw new Error("Missing error detail");if(!f.message)throw new Error("Missing error message");if(!f.name)throw new Error("Missing validator type");p=new e(f.message,this.instance,this.schema,this.path,f.name,f.argument)}if(this.errors.push(p),this.throwFirst)throw new r(this);if(this.throwError)throw p;return p},t.prototype.importErrors=function(f){typeof f=="string"||f&&f.validatorType?this.addError(f):f&&f.errors&&(this.errors=this.errors.concat(f.errors))};function n(d,f){return f+": "+d.toString()+`
`}t.prototype.toString=function(f){return this.errors.map(n).join("")},Object.defineProperty(t.prototype,"valid",{get:function(){return!this.errors.length}}),Z.ValidatorResultError=r;function r(d){typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r),this.instance=d.instance,this.schema=d.schema,this.options=d.options,this.errors=d.errors}r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Validation Error";var a=Z.SchemaError=function d(f,p){this.message=f,this.schema=p,Error.call(this,f),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,d)};a.prototype=Object.create(Error.prototype,{constructor:{value:a,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var s=Z.SchemaContext=function(f,p,y,w,v){this.schema=f,this.options=p,Array.isArray(y)?(this.path=y,this.propertyPath=y.reduce(function(b,A){return b+l(A)},"instance")):this.propertyPath=y,this.base=w,this.schemas=v};s.prototype.resolve=function(f){return h(this.base,f)},s.prototype.makeChild=function(f,p){var y=p===void 0?this.path:this.path.concat([p]),w=f.$id||f.id;let v=h(this.base,w||"");var b=new s(f,this.options,y,v,Object.create(this.schemas));return w&&!b.schemas[v]&&(b.schemas[v]=f),b};var i=Z.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(d){return typeof d=="string"&&parseFloat(d)===parseInt(d,10)&&!isNaN(d)},regex:function(d){var f=!0;try{new RegExp(d)}catch{f=!1}return f},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/};i.regexp=i.regex,i.pattern=i.regex,i.ipv4=i["ip-address"],Z.isFormat=function(f,p,y){if(typeof f=="string"&&i[p]!==void 0){if(i[p]instanceof RegExp)return i[p].test(f);if(typeof i[p]=="function")return i[p](f)}else if(y&&y.customFormats&&typeof y.customFormats[p]=="function")return y.customFormats[p](f);return!0};var l=Z.makeSuffix=function(f){return f=f.toString(),!f.match(/[.\s\[\]]/)&&!f.match(/^[\d]/)?"."+f:f.match(/^\d+$/)?"["+f+"]":"["+JSON.stringify(f)+"]"};Z.deepCompareStrict=function d(f,p){if(typeof f!=typeof p)return!1;if(Array.isArray(f))return!Array.isArray(p)||f.length!==p.length?!1:f.every(function(v,b){return d(f[b],p[b])});if(typeof f=="object"){if(!f||!p)return f===p;var y=Object.keys(f),w=Object.keys(p);return y.length!==w.length?!1:y.every(function(v){return d(f[v],p[v])})}return f===p};function u(d,f,p,y){typeof p=="object"?f[y]=o(d[y],p):d.indexOf(p)===-1&&f.push(p)}function g(d,f,p){f[p]=d[p]}function m(d,f,p,y){typeof f[y]!="object"||!f[y]?p[y]=f[y]:d[y]?p[y]=o(d[y],f[y]):p[y]=f[y]}function o(d,f){var p=Array.isArray(f),y=p&&[]||{};return p?(d=d||[],y=y.concat(d),f.forEach(u.bind(null,d,y))):(d&&typeof d=="object"&&Object.keys(d).forEach(g.bind(null,d,y)),Object.keys(f).forEach(m.bind(null,d,f,y))),y}Z.deepMerge=o,Z.objectGetPath=function(f,p){for(var y=p.split("/").slice(1),w;typeof(w=y.shift())=="string";){var v=decodeURIComponent(w.replace(/~0/,"~").replace(/~1/g,"/"));if(!(v in f))return;f=f[v]}return f};function c(d){return"/"+encodeURIComponent(d).replace(/~/g,"%7E")}Z.encodePath=function(f){return f.map(c).join("")},Z.getDecimalPlaces=function(f){var p=0;if(isNaN(f))return p;typeof f!="number"&&(f=Number(f));var y=f.toString().split("e");if(y.length===2){if(y[1][0]!=="-")return p;p=Number(y[1].slice(1))}var w=y[0].split(".");return w.length===2&&(p+=w[1].length),p},Z.isSchema=function(f){return typeof f=="object"&&f||typeof f=="boolean"};var h=Z.resolveUrl=function(f,p){const y=new URL(p,new URL(f,"resolve://"));if(y.protocol==="resolve:"){const{pathname:w,search:v,hash:b}=y;return w+v+b}return y.toString()};return Z}var nn,Xn;function oo(){if(Xn)return nn;Xn=1;var e=xe(),t=e.ValidatorResult,n=e.SchemaError,r={};r.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var a=r.validators={};a.type=function(o,c,h,d){if(o===void 0)return null;var f=new t(o,c,h,d),p=Array.isArray(c.type)?c.type:[c.type];if(!p.some(this.testType.bind(this,o,c,h,d))){var y=p.map(function(w){if(w){var v=w.$id||w.id;return v?"<"+v+">":w+""}});f.addError({name:"type",argument:y,message:"is not of a type(s) "+y})}return f};function s(m,o,c,h,d){var f=o.throwError,p=o.throwAll;o.throwError=!1,o.throwAll=!1;var y=this.validateSchema(m,d,o,c);return o.throwError=f,o.throwAll=p,!y.valid&&h instanceof Function&&h(y),y.valid}a.anyOf=function(o,c,h,d){if(o===void 0)return null;var f=new t(o,c,h,d),p=new t(o,c,h,d);if(!Array.isArray(c.anyOf))throw new n("anyOf must be an array");if(!c.anyOf.some(s.bind(this,o,h,d,function(w){p.importErrors(w)}))){var y=c.anyOf.map(function(w,v){var b=w.$id||w.id;return b?"<"+b+">":w.title&&JSON.stringify(w.title)||w.$ref&&"<"+w.$ref+">"||"[subschema "+v+"]"});h.nestedErrors&&f.importErrors(p),f.addError({name:"anyOf",argument:y,message:"is not any of "+y.join(",")})}return f},a.allOf=function(o,c,h,d){if(o===void 0)return null;if(!Array.isArray(c.allOf))throw new n("allOf must be an array");var f=new t(o,c,h,d),p=this;return c.allOf.forEach(function(y,w){var v=p.validateSchema(o,y,h,d);if(!v.valid){var b=y.$id||y.id,A=b||y.title&&JSON.stringify(y.title)||y.$ref&&"<"+y.$ref+">"||"[subschema "+w+"]";f.addError({name:"allOf",argument:{id:A,length:v.errors.length,valid:v},message:"does not match allOf schema "+A+" with "+v.errors.length+" error[s]:"}),f.importErrors(v)}}),f},a.oneOf=function(o,c,h,d){if(o===void 0)return null;if(!Array.isArray(c.oneOf))throw new n("oneOf must be an array");var f=new t(o,c,h,d),p=new t(o,c,h,d),y=c.oneOf.filter(s.bind(this,o,h,d,function(v){p.importErrors(v)})).length,w=c.oneOf.map(function(v,b){var A=v.$id||v.id;return A||v.title&&JSON.stringify(v.title)||v.$ref&&"<"+v.$ref+">"||"[subschema "+b+"]"});return y!==1&&(h.nestedErrors&&f.importErrors(p),f.addError({name:"oneOf",argument:w,message:"is not exactly one from "+w.join(",")})),f},a.if=function(o,c,h,d){if(o===void 0)return null;if(!e.isSchema(c.if))throw new Error('Expected "if" keyword to be a schema');var f=s.call(this,o,h,d,null,c.if),p=new t(o,c,h,d),y;if(f){if(c.then===void 0)return;if(!e.isSchema(c.then))throw new Error('Expected "then" keyword to be a schema');y=this.validateSchema(o,c.then,h,d.makeChild(c.then)),p.importErrors(y)}else{if(c.else===void 0)return;if(!e.isSchema(c.else))throw new Error('Expected "else" keyword to be a schema');y=this.validateSchema(o,c.else,h,d.makeChild(c.else)),p.importErrors(y)}return p};function i(m,o){if(Object.hasOwnProperty.call(m,o))return m[o];if(o in m){for(;m=Object.getPrototypeOf(m);)if(Object.propertyIsEnumerable.call(m,o))return m[o]}}a.propertyNames=function(o,c,h,d){if(this.types.object(o)){var f=new t(o,c,h,d),p=c.propertyNames!==void 0?c.propertyNames:{};if(!e.isSchema(p))throw new n('Expected "propertyNames" to be a schema (object or boolean)');for(var y in o)if(i(o,y)!==void 0){var w=this.validateSchema(y,p,h,d.makeChild(p));f.importErrors(w)}return f}},a.properties=function(o,c,h,d){if(this.types.object(o)){var f=new t(o,c,h,d),p=c.properties||{};for(var y in p){var w=p[y];if(w!==void 0){if(w===null)throw new n('Unexpected null, expected schema in "properties"');typeof h.preValidateProperty=="function"&&h.preValidateProperty(o,y,w,h,d);var v=i(o,y),b=this.validateSchema(v,w,h,d.makeChild(w,y));b.instance!==f.instance[y]&&(f.instance[y]=b.instance),f.importErrors(b)}}return f}};function l(m,o,c,h,d,f){if(this.types.object(m)&&!(o.properties&&o.properties[d]!==void 0))if(o.additionalProperties===!1)f.addError({name:"additionalProperties",argument:d,message:"is not allowed to have the additional property "+JSON.stringify(d)});else{var p=o.additionalProperties||{};typeof c.preValidateProperty=="function"&&c.preValidateProperty(m,d,p,c,h);var y=this.validateSchema(m[d],p,c,h.makeChild(p,d));y.instance!==f.instance[d]&&(f.instance[d]=y.instance),f.importErrors(y)}}a.patternProperties=function(o,c,h,d){if(this.types.object(o)){var f=new t(o,c,h,d),p=c.patternProperties||{};for(var y in o){var w=!0;for(var v in p){var b=p[v];if(b!==void 0){if(b===null)throw new n('Unexpected null, expected schema in "patternProperties"');try{var A=new RegExp(v,"u")}catch{A=new RegExp(v)}if(A.test(y)){w=!1,typeof h.preValidateProperty=="function"&&h.preValidateProperty(o,y,b,h,d);var _=this.validateSchema(o[y],b,h,d.makeChild(b,y));_.instance!==f.instance[y]&&(f.instance[y]=_.instance),f.importErrors(_)}}}w&&l.call(this,o,c,h,d,y,f)}return f}},a.additionalProperties=function(o,c,h,d){if(this.types.object(o)){if(c.patternProperties)return null;var f=new t(o,c,h,d);for(var p in o)l.call(this,o,c,h,d,p,f);return f}},a.minProperties=function(o,c,h,d){if(this.types.object(o)){var f=new t(o,c,h,d),p=Object.keys(o);return p.length>=c.minProperties||f.addError({name:"minProperties",argument:c.minProperties,message:"does not meet minimum property length of "+c.minProperties}),f}},a.maxProperties=function(o,c,h,d){if(this.types.object(o)){var f=new t(o,c,h,d),p=Object.keys(o);return p.length<=c.maxProperties||f.addError({name:"maxProperties",argument:c.maxProperties,message:"does not meet maximum property length of "+c.maxProperties}),f}},a.items=function(o,c,h,d){var f=this;if(this.types.array(o)&&c.items!==void 0){var p=new t(o,c,h,d);return o.every(function(y,w){if(Array.isArray(c.items))var v=c.items[w]===void 0?c.additionalItems:c.items[w];else var v=c.items;if(v===void 0)return!0;if(v===!1)return p.addError({name:"items",message:"additionalItems not permitted"}),!1;var b=f.validateSchema(y,v,h,d.makeChild(v,w));return b.instance!==p.instance[w]&&(p.instance[w]=b.instance),p.importErrors(b),!0}),p}},a.contains=function(o,c,h,d){var f=this;if(this.types.array(o)&&c.contains!==void 0){if(!e.isSchema(c.contains))throw new Error('Expected "contains" keyword to be a schema');var p=new t(o,c,h,d),y=o.some(function(w,v){var b=f.validateSchema(w,c.contains,h,d.makeChild(c.contains,v));return b.errors.length===0});return y===!1&&p.addError({name:"contains",argument:c.contains,message:"must contain an item matching given schema"}),p}},a.minimum=function(o,c,h,d){if(this.types.number(o)){var f=new t(o,c,h,d);return c.exclusiveMinimum&&c.exclusiveMinimum===!0?o>c.minimum||f.addError({name:"minimum",argument:c.minimum,message:"must be greater than "+c.minimum}):o>=c.minimum||f.addError({name:"minimum",argument:c.minimum,message:"must be greater than or equal to "+c.minimum}),f}},a.maximum=function(o,c,h,d){if(this.types.number(o)){var f=new t(o,c,h,d);return c.exclusiveMaximum&&c.exclusiveMaximum===!0?o<c.maximum||f.addError({name:"maximum",argument:c.maximum,message:"must be less than "+c.maximum}):o<=c.maximum||f.addError({name:"maximum",argument:c.maximum,message:"must be less than or equal to "+c.maximum}),f}},a.exclusiveMinimum=function(o,c,h,d){if(typeof c.exclusiveMinimum!="boolean"&&this.types.number(o)){var f=new t(o,c,h,d),p=o>c.exclusiveMinimum;return p||f.addError({name:"exclusiveMinimum",argument:c.exclusiveMinimum,message:"must be strictly greater than "+c.exclusiveMinimum}),f}},a.exclusiveMaximum=function(o,c,h,d){if(typeof c.exclusiveMaximum!="boolean"&&this.types.number(o)){var f=new t(o,c,h,d),p=o<c.exclusiveMaximum;return p||f.addError({name:"exclusiveMaximum",argument:c.exclusiveMaximum,message:"must be strictly less than "+c.exclusiveMaximum}),f}};var u=function(o,c,h,d,f,p){if(this.types.number(o)){var y=c[f];if(y==0)throw new n(f+" cannot be zero");var w=new t(o,c,h,d),v=e.getDecimalPlaces(o),b=e.getDecimalPlaces(y),A=Math.max(v,b),_=Math.pow(10,A);return Math.round(o*_)%Math.round(y*_)!==0&&w.addError({name:f,argument:y,message:p+JSON.stringify(y)}),w}};a.multipleOf=function(o,c,h,d){return u.call(this,o,c,h,d,"multipleOf","is not a multiple of (divisible by) ")},a.divisibleBy=function(o,c,h,d){return u.call(this,o,c,h,d,"divisibleBy","is not divisible by (multiple of) ")},a.required=function(o,c,h,d){var f=new t(o,c,h,d);return o===void 0&&c.required===!0?f.addError({name:"required",message:"is required"}):this.types.object(o)&&Array.isArray(c.required)&&c.required.forEach(function(p){i(o,p)===void 0&&f.addError({name:"required",argument:p,message:"requires property "+JSON.stringify(p)})}),f},a.pattern=function(o,c,h,d){if(this.types.string(o)){var f=new t(o,c,h,d),p=c.pattern;try{var y=new RegExp(p,"u")}catch{y=new RegExp(p)}return o.match(y)||f.addError({name:"pattern",argument:c.pattern,message:"does not match pattern "+JSON.stringify(c.pattern.toString())}),f}},a.format=function(o,c,h,d){if(o!==void 0){var f=new t(o,c,h,d);return!f.disableFormat&&!e.isFormat(o,c.format,this)&&f.addError({name:"format",argument:c.format,message:"does not conform to the "+JSON.stringify(c.format)+" format"}),f}},a.minLength=function(o,c,h,d){if(this.types.string(o)){var f=new t(o,c,h,d),p=o.match(/[\uDC00-\uDFFF]/g),y=o.length-(p?p.length:0);return y>=c.minLength||f.addError({name:"minLength",argument:c.minLength,message:"does not meet minimum length of "+c.minLength}),f}},a.maxLength=function(o,c,h,d){if(this.types.string(o)){var f=new t(o,c,h,d),p=o.match(/[\uDC00-\uDFFF]/g),y=o.length-(p?p.length:0);return y<=c.maxLength||f.addError({name:"maxLength",argument:c.maxLength,message:"does not meet maximum length of "+c.maxLength}),f}},a.minItems=function(o,c,h,d){if(this.types.array(o)){var f=new t(o,c,h,d);return o.length>=c.minItems||f.addError({name:"minItems",argument:c.minItems,message:"does not meet minimum length of "+c.minItems}),f}},a.maxItems=function(o,c,h,d){if(this.types.array(o)){var f=new t(o,c,h,d);return o.length<=c.maxItems||f.addError({name:"maxItems",argument:c.maxItems,message:"does not meet maximum length of "+c.maxItems}),f}};function g(m,o,c){var h,d=c.length;for(h=o+1,d;h<d;h++)if(e.deepCompareStrict(m,c[h]))return!1;return!0}return a.uniqueItems=function(o,c,h,d){if(c.uniqueItems===!0&&this.types.array(o)){var f=new t(o,c,h,d);return o.every(g)||f.addError({name:"uniqueItems",message:"contains duplicate item"}),f}},a.dependencies=function(o,c,h,d){if(this.types.object(o)){var f=new t(o,c,h,d);for(var p in c.dependencies)if(o[p]!==void 0){var y=c.dependencies[p],w=d.makeChild(y,p);if(typeof y=="string"&&(y=[y]),Array.isArray(y))y.forEach(function(b){o[b]===void 0&&f.addError({name:"dependencies",argument:w.propertyPath,message:"property "+b+" not found, required by "+w.propertyPath})});else{var v=this.validateSchema(o,y,h,w);f.instance!==v.instance&&(f.instance=v.instance),v&&v.errors.length&&(f.addError({name:"dependencies",argument:w.propertyPath,message:"does not meet dependency required by "+w.propertyPath}),f.importErrors(v))}}return f}},a.enum=function(o,c,h,d){if(o===void 0)return null;if(!Array.isArray(c.enum))throw new n("enum expects an array",c);var f=new t(o,c,h,d);return c.enum.some(e.deepCompareStrict.bind(null,o))||f.addError({name:"enum",argument:c.enum,message:"is not one of enum values: "+c.enum.map(String).join(",")}),f},a.const=function(o,c,h,d){if(o===void 0)return null;var f=new t(o,c,h,d);return e.deepCompareStrict(c.const,o)||f.addError({name:"const",argument:c.const,message:"does not exactly match expected constant: "+c.const}),f},a.not=a.disallow=function(o,c,h,d){var f=this;if(o===void 0)return null;var p=new t(o,c,h,d),y=c.not||c.disallow;return y?(Array.isArray(y)||(y=[y]),y.forEach(function(w){if(f.testType(o,c,h,d,w)){var v=w&&(w.$id||w.id),b=v||w;p.addError({name:"not",argument:b,message:"is of prohibited type "+b})}}),p):null},nn=r,nn}var bt={},Qn;function gn(){if(Qn)return bt;Qn=1;var e=xe();bt.SchemaScanResult=t;function t(n,r){this.id=n,this.ref=r}return bt.scan=function(r,a){function s(m,o){if(!o||typeof o!="object")return;if(o.$ref){let f=e.resolveUrl(m,o.$ref);g[f]=g[f]?g[f]+1:0;return}var c=o.$id||o.id;let h=e.resolveUrl(m,c);var d=c?h:m;if(d){if(d.indexOf("#")<0&&(d+="#"),u[d]){if(!e.deepCompareStrict(u[d],o))throw new Error("Schema <"+d+"> already exists with different definition");return u[d]}u[d]=o,d[d.length-1]=="#"&&(u[d.substring(0,d.length-1)]=o)}i(d+"/items",Array.isArray(o.items)?o.items:[o.items]),i(d+"/extends",Array.isArray(o.extends)?o.extends:[o.extends]),s(d+"/additionalItems",o.additionalItems),l(d+"/properties",o.properties),s(d+"/additionalProperties",o.additionalProperties),l(d+"/definitions",o.definitions),l(d+"/patternProperties",o.patternProperties),l(d+"/dependencies",o.dependencies),i(d+"/disallow",o.disallow),i(d+"/allOf",o.allOf),i(d+"/anyOf",o.anyOf),i(d+"/oneOf",o.oneOf),s(d+"/not",o.not)}function i(m,o){if(Array.isArray(o))for(var c=0;c<o.length;c++)s(m+"/"+c,o[c])}function l(m,o){if(!(!o||typeof o!="object"))for(var c in o)s(m+"/"+c,o[c])}var u={},g={};return s(r,a),new t(u,g)},bt}var rn,er;function lo(){if(er)return rn;er=1;var e=oo(),t=xe(),n=gn().scan,r=t.ValidatorResult,a=t.ValidatorResultError,s=t.SchemaError,i=t.SchemaContext,l="/",u=function o(){this.customFormats=Object.create(o.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(m),this.attributes=Object.create(e.validators)};u.prototype.customFormats={},u.prototype.schemas=null,u.prototype.types=null,u.prototype.attributes=null,u.prototype.unresolvedRefs=null,u.prototype.addSchema=function(c,h){var d=this;if(!c)return null;var f=n(h||l,c),p=h||c.$id||c.id;for(var y in f.id)this.schemas[y]=f.id[y];for(var y in f.ref)this.unresolvedRefs.push(y);return this.unresolvedRefs=this.unresolvedRefs.filter(function(w){return typeof d.schemas[w]>"u"}),this.schemas[p]},u.prototype.addSubSchemaArray=function(c,h){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addSubSchema(c,h[d])},u.prototype.addSubSchemaObject=function(c,h){if(!(!h||typeof h!="object"))for(var d in h)this.addSubSchema(c,h[d])},u.prototype.setSchemas=function(c){this.schemas=c},u.prototype.getSchema=function(c){return this.schemas[c]},u.prototype.validate=function(c,h,d,f){if(typeof h!="boolean"&&typeof h!="object"||h===null)throw new s("Expected `schema` to be an object or boolean");d||(d={});var p=h.$id||h.id;let y=t.resolveUrl(d.base,p||"");if(!f){f=new i(h,d,[],y,Object.create(this.schemas)),f.schemas[y]||(f.schemas[y]=h);var w=n(y,h);for(var v in w.id){var b=w.id[v];f.schemas[v]=b}}if(d.required&&c===void 0){var A=new r(c,h,d,f);return A.addError("is required, but is undefined"),A}var A=this.validateSchema(c,h,d,f);if(A){if(d.throwAll&&A.errors.length)throw new a(A)}else throw new Error("Result undefined");return A};function g(o){var c=typeof o=="string"?o:o.$ref;return typeof c=="string"?c:!1}u.prototype.validateSchema=function(c,h,d,f){var p=new r(c,h,d,f);if(typeof h=="boolean")h===!0?h={}:h===!1&&(h={type:[]});else if(!h)throw new Error("schema is undefined");if(h.extends)if(Array.isArray(h.extends)){var y={schema:h,ctx:f};h.extends.forEach(this.schemaTraverser.bind(this,y)),h=y.schema,y.schema=null,y.ctx=null,y=null}else h=t.deepMerge(h,this.superResolve(h.extends,f));var w=g(h);if(w){var v=this.resolve(h,w,f),b=new i(v.subschema,d,f.path,v.switchSchema,f.schemas);return this.validateSchema(c,v.subschema,d,b)}var A=d&&d.skipAttributes||[];for(var _ in h)if(!e.ignoreProperties[_]&&A.indexOf(_)<0){var D=null,K=this.attributes[_];if(K)D=K.call(this,c,h,d,f);else if(d.allowUnknownAttributes===!1)throw new s("Unsupported attribute: "+_,h);D&&p.importErrors(D)}if(typeof d.rewrite=="function"){var re=d.rewrite.call(this,c,h,d,f);p.instance=re}return p},u.prototype.schemaTraverser=function(c,h){c.schema=t.deepMerge(c.schema,this.superResolve(h,c.ctx))},u.prototype.superResolve=function(c,h){var d=g(c);return d?this.resolve(c,d,h).subschema:c},u.prototype.resolve=function(c,h,d){if(h=d.resolve(h),d.schemas[h])return{subschema:d.schemas[h],switchSchema:h};let p=new URL(h,"thismessage::/").hash;var y=p&&p.length&&h.substr(0,h.length-p.length);if(!y||!d.schemas[y])throw new s("no such schema <"+h+">",c);var w=t.objectGetPath(d.schemas[y],p.substr(1));if(w===void 0)throw new s("no such schema "+p+" located in <"+y+">",c);return{subschema:w,switchSchema:h}},u.prototype.testType=function(c,h,d,f,p){if(p!==void 0){if(p===null)throw new s('Unexpected null in "type" keyword');if(typeof this.types[p]=="function")return this.types[p].call(this,c);if(p&&typeof p=="object"){var y=this.validateSchema(c,p,d,f);return y===void 0||!(y&&y.errors.length)}return!0}};var m=u.prototype.types={};return m.string=function(c){return typeof c=="string"},m.number=function(c){return typeof c=="number"&&isFinite(c)},m.integer=function(c){return typeof c=="number"&&c%1===0},m.boolean=function(c){return typeof c=="boolean"},m.array=function(c){return Array.isArray(c)},m.null=function(c){return c===null},m.date=function(c){return c instanceof Date},m.any=function(c){return!0},m.object=function(c){return c&&typeof c=="object"&&!Array.isArray(c)&&!(c instanceof Date)},rn=u,rn}var tr;function co(){if(tr)return ae;tr=1;var e=ae.Validator=lo();return ae.ValidatorResult=xe().ValidatorResult,ae.ValidatorResultError=xe().ValidatorResultError,ae.ValidationError=xe().ValidationError,ae.SchemaError=xe().SchemaError,ae.SchemaScanResult=gn().SchemaScanResult,ae.scan=gn().scan,ae.validate=function(t,n,r){var a=new e;return a.validate(t,n,r)},ae}var uo=co();function fo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function pn(e,t){return Array(t+1).join(e)}function ho(e){return e.replace(/^\n*/,"")}function mo(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var go=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Mn(e){return Pn(e,go)}var Qr=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function ea(e){return Pn(e,Qr)}function po(e){return na(e,Qr)}var ta=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function yo(e){return Pn(e,ta)}function wo(e){return na(e,ta)}function Pn(e,t){return t.indexOf(e.nodeName)>=0}function na(e,t){return e.getElementsByTagName&&t.some(function(n){return e.getElementsByTagName(n).length})}var G={};G.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};G.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+`
`}};G.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var r=Number(t.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var a=pn(r===1?"=":"-",e.length);return`

`+e+`
`+a+`

`}else return`

`+pn("#",r)+" "+e+`

`}};G.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};G.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return n.nodeName==="LI"&&n.lastElementChild===t?`
`+e:`

`+e+`

`}};G.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=n.bulletListMarker+"   ",a=t.parentNode;if(a.nodeName==="OL"){var s=a.getAttribute("start"),i=Array.prototype.indexOf.call(a.children,t);r=(s?Number(s)+i:i+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};G.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};G.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){for(var r=t.firstChild.getAttribute("class")||"",a=(r.match(/language-(\S+)/)||[null,""])[1],s=t.firstChild.textContent,i=n.fence.charAt(0),l=3,u=new RegExp("^"+i+"{3,}","gm"),g;g=u.exec(s);)g[0].length>=l&&(l=g[0].length+1);var m=pn(i,l);return`

`+m+a+`
`+s.replace(/\n$/,"")+`
`+m+`

`}};G.horizontalRule={filter:"hr",replacement:function(e,t,n){return`

`+n.hr+`

`}};G.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=Rt(t.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+e+"]("+n+r+")"}};G.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,n){var r=t.getAttribute("href"),a=Rt(t.getAttribute("title"));a&&(a=' "'+a+'"');var s,i;switch(n.linkReferenceStyle){case"collapsed":s="["+e+"][]",i="["+e+"]: "+r+a;break;case"shortcut":s="["+e+"]",i="["+e+"]: "+r+a;break;default:var l=this.references.length+1;s="["+e+"]["+l+"]",i="["+l+"]: "+r+a}return this.references.push(i),s},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};G.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}};G.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}};G.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+t+e+t+n}};G.image={filter:"img",replacement:function(e,t){var n=Rt(t.getAttribute("alt")),r=t.getAttribute("src")||"",a=Rt(t.getAttribute("title")),s=a?' "'+a+'"':"";return r?"!["+n+"]("+r+s+")":""}};function Rt(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function ra(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}ra.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=an(this.array,e,this.options))||(t=an(this._keep,e,this.options))||(t=an(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function an(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if(vo(a,t,n))return a}}function vo(e,t,n){var r=e.filter;if(typeof r=="string"){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(e,t,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function bo(e){var t=e.element,n=e.isBlock,r=e.isVoid,a=e.isPre||function(o){return o.nodeName==="PRE"};if(!(!t.firstChild||a(t))){for(var s=null,i=!1,l=null,u=nr(l,t,a);u!==t;){if(u.nodeType===3||u.nodeType===4){var g=u.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!i&&g[0]===" "&&(g=g.substr(1)),!g){u=sn(u);continue}u.data=g,s=u}else if(u.nodeType===1)n(u)||u.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,i=!1):r(u)||a(u)?(s=null,i=!0):s&&(i=!1);else{u=sn(u);continue}var m=nr(l,u,a);l=u,u=m}s&&(s.data=s.data.replace(/ $/,""),s.data||sn(s))}}function sn(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function nr(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var Fn=typeof window<"u"?window:{};function xo(){var e=Fn.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function Ao(){var e=function(){};return So()?e.prototype.parseFromString=function(t){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(t),n.close(),n}:e.prototype.parseFromString=function(t){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(t),n.close(),n},e}function So(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{Fn.ActiveXObject&&(e=!0)}return e}var Co=xo()?Fn.DOMParser:Ao();function ko(e,t){var n;if(typeof e=="string"){var r=Eo().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=e.cloneNode(!0);return bo({element:n,isBlock:Mn,isVoid:ea,isPre:t.preformattedCode?To:null}),n}var on;function Eo(){return on=on||new Co,on}function To(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function $o(e,t){return e.isBlock=Mn(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=Mo(e),e.flankingWhitespace=Po(e,t),e}function Mo(e){return!ea(e)&&!yo(e)&&/^\s*$/i.test(e.textContent)&&!po(e)&&!wo(e)}function Po(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=Fo(e.textContent);return n.leadingAscii&&rr("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&rr("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function Fo(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function rr(e,t,n){var r,a,s;return e==="left"?(r=t.previousSibling,a=/ $/):(r=t.nextSibling,a=/^ /),r&&(r.nodeType===3?s=a.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?s=!1:r.nodeType===1&&!Mn(r)&&(s=a.test(r.textContent))),s}var Oo=Array.prototype.reduce,_o=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function zt(e){if(!(this instanceof zt))return new zt(e);var t={rules:G,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=fo({},t,e),this.rules=new ra(this.options)}zt.prototype={turndown:function(e){if(!zo(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=aa.call(this,new ko(e,this.options));return Lo.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return _o.reduce(function(t,n){return t.replace(n[0],n[1])},e)}};function aa(e){var t=this;return Oo.call(e.childNodes,function(n,r){r=new $o(r,t.options);var a="";return r.nodeType===3?a=r.isCode?r.nodeValue:t.escape(r.nodeValue):r.nodeType===1&&(a=Ro.call(t,r)),sa(n,a)},"")}function Lo(e){var t=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(e=sa(e,n.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Ro(e){var t=this.rules.forNode(e),n=aa.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function sa(e,t){var n=mo(e),r=ho(t),a=Math.max(e.length-n.length,t.length-r.length),s=`

`.substring(0,a);return n+s+r}function zo(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}class Io{worker=null;running=!1;resolveRun=()=>{};lineCallback=()=>{};constructor(){this.createInstance()}onMessage(t){const n=t.data;switch(n.type){case"<text-out":this.lineCallback(n.text);break;case"<run":{this.running=!1,this.resolveRun(n.output),console.log("<run",n),this.resolveRun=()=>{},this.lineCallback=()=>{};break}}}createInstance(){this.worker=new Worker(new URL("/apps/unhurry/assets/worker-Di-f6Z6_.js",import.meta.url)),this.worker.onmessage=this.onMessage.bind(this),this.worker.onerror=t=>{console.error("Worker error",t)}}terminateInstance(){this.worker.terminate(),this.resolveRun(""),this.createInstance()}run(t,n){if(this.running)throw new Error("Worker is already running");const r={type:">run",code:t};return this.lineCallback=n??(()=>{}),this.worker.postMessage(r),new Promise(a=>{this.resolveRun=a})}}const yn=new zt,Do=new uo.Validator,ia=[],oa={},la=e=>e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase(),No=e=>ia.filter(t=>!e[t.name]?.disabled),On=(e,t)=>{ia.push(e),oa[la(e.name)]=async n=>{const r=Do.validate(n,e.parameters);return r.valid?await t(n):`Argument Error: Your arguments are invalid (missing arguments or wrong types). Please check again.
`+r.errors.map(a=>a.stack).join(`
`)}};On({name:"runJS",description:["Execute the given JavaScript code in web worker.","The result is the output of the code (console.log). If no console.log, the output will be <EMPTY>.","Use it for precise calculation, date processing, random, string manipulation, etc"].join(`
`),parameters:{type:"object",properties:{code:{type:"string",description:"The JavaScript code to be executed. Run in web worker. Use console to output."}},required:["code"]}},async e=>{if(!e.code)return"Error: no code is provide. Please give `code` parameter.";const t=new Io,n=await t.run(e.code);return N.info("[tool/runJS] Run Result",e.code,n),t.terminateInstance(),n});const Bo=["136.0.0.0","135.0.0.0","134.0.0.0","133.0.0.0","132.0.0.0"],jo=["605.1.15","537.36","537.35","536"],Uo=["10_15_7","10_15_6","10_14_3","10_14_6"],Vo=()=>{const e=a=>a[Math.floor(Math.random()*a.length)],t=e(Bo),n=e(jo);return`Mozilla/5.0 (Macintosh; Intel Mac OS X ${e(Uo)}) AppleWebKit/${n} (KHTML, like Gecko) Chrome/${t} Safari/${n}`},St=async(e,t,n)=>{const r=await st();if(!r)return"HTTP fetch error: not available";try{let a="GET";const s=[["Accept","text/html"],["User-Agent",Vo()]];n&&(a="POST");const i=await r.fetch(e,{method:a,headers:s,body:n});let l=await i.text();const u=i.headers.get("content-type")||"text/plain";if(u&&u.startsWith("text/html"))try{l=await t(new DOMParser().parseFromString(l,"text/html"))}catch(g){N.error(g)}if(i.status>=400)throw new Error(`Status ${i.status}, ${l}`);return l}catch(a){return N.error(a),"HTTP fetch error: "+a}};On({name:"webSearch",description:["Search the given query from web search engine.",'If user request "search", "find", "invest", etc., you may used this function first.',"When you rephrase the result, show source. you should show link as markdown grammar. (e.g. [link](url))"].join(`
`),parameters:{type:"object",properties:{query:{type:"string",description:"Search query or keywords",minLength:1},engine:{type:"string",description:"Search engine name. If not specified, default is DuckDuckGo.",enum:["duckduckgo","ddg","brave","bravesearch","bing"]},page:{type:"number",description:"Page number. Starts from 1. Default is 1."}},required:["query"]}},async({query:e,engine:t,page:n})=>{console.log("webSearch",e,t,n),n||(n=1),n<1&&(n=1);const r=async a=>{switch(a.toLowerCase()){case"ddg":case"duckduckgo":return await St("https://html.duckduckgo.com/html/",async i=>{i.querySelectorAll("style, input, select, script").forEach(u=>u.remove()),console.log(i);const l=i.querySelectorAll(".results_links");return l.length===0?"":Array.from(l).map(u=>{const g=u.querySelector(".result__a"),m=g?.getAttribute("href")||"",o=g?.textContent||"",c=u.querySelector(".result__snippet")?.textContent||"";return`## [${o}](${m})
${c}`}).join(`

`)},new URLSearchParams({q:e,df:"y",s:"10",dc:`${1+10*(n-1)}`}));case"bravesearch":case"brave":{const s=async u=>{u.querySelectorAll("noscript, style, script, link, meta, noscript, iframe, embed, object, svg").forEach(m=>m.remove());const g=u.querySelectorAll("#results > .snippet");return g.length===0?"":Array.from(g).map(m=>yn.turndown(m.innerHTML)).join(`

`)},i=await St(`https://search.brave.com/search?q=${encodeURI(e)}&offset=${n-1}`,s),l=yn.turndown(i);return console.log(l),l}case"bing":{const s=async i=>{const l=i.querySelectorAll("#b_results > li.b_algo");return l.length===0?"":Array.from(l).slice(0,10).map(u=>{const g=u.querySelector("h2 > a"),m=g?.getAttribute("href")||"",o=g?.textContent||"",c=u.querySelector('p[class^="b_lineclamp"]')?.textContent||"";return`## [${o}](${m})
${c}`}).join(`

`)};return await St(`https://www.bing.com/search?q=${encodeURIComponent(e)}&first=${1+10*(n-1)}`,s)}default:throw new Error(`Unsupported search engine: ${a}`)}};if(t)return await r(t);{const a=["duckduckgo","brave","bing"];for(const s of a)try{const i=await r(s);if(i)return i}catch{N.warn(`Failed to search with ${s}`)}}return"Failed to search. Maybe search engine is not available temporarily."});On({name:"visitWeb",description:["Visit the given URL web page.",'If user request "visit", "open site", "go to link", etc., you may used this function first.',"The result is a HTML, removing unnecessary elements.","When you rephrase the result, you should show link and image using markdown grammar. (e.g. [link](url), ![image](url))"].join(`
`),parameters:{type:"object",properties:{url:{type:"string",description:"The URL to visit."}},required:["url"]}},async e=>{const t=async a=>{a.querySelectorAll("style, script, link, meta, noscript, iframe, embed, object, svg").forEach(l=>l.remove()),a.querySelectorAll("*").forEach(l=>{for(let u=0;u<l.childNodes.length;u++){const g=l.childNodes[u];g.nodeType===Node.COMMENT_NODE&&(l.removeChild(g),u--)}for(const u of l.attributes)(u.name.startsWith("on")||u.name.startsWith("data-"))&&l.removeAttribute(u.name),l.removeAttribute("style")});const s=a.body.innerHTML.replace(/>\s+</g,"><");return yn.turndown(s)};let n=e.url;return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n),await St(n,t)});const qo=1,ca=2;class qt extends Error{level=2}class ot extends qt{constructor(t){super("400 Bad Request: "+t),this.level=ca}}class lt extends qt{constructor(t){super("413 Request Entity Too Large: "+t),this.level=ca}}class ct extends qt{constructor(t){super("429 Too Many Requests: "+t),this.level=qo}}const ua=async(e,t)=>{const n=new TextDecoder;let r="",a="",s=!0;for(;s;){const{done:i,value:l}=await e.read();if(i)break;if(!l)continue;a+=n.decode(l,{stream:!0});const u=a.split(`
`);a=u.pop()||"";for(const g of u){const m=g.indexOf(":");if(m<0)continue;const o=g.slice(0,m),c=g.slice(m+1).trim();switch(o){case"event":r=c;break;case"data":if(c==="DONE"||c==="[DONE]"){s=!1;break}try{const h=JSON.parse(c);await t(h,r)}catch(h){console.warn("Failed to parse chunk",h)}break;default:console.warn("Unknown field",o)}}}e.releaseLock()};class Ho{config;functions=[];isMistral;constructor(t){if(t.clientType!=="OpenAI")throw new Error("Invalid client type");this.config=t,this.config.endpoint.includes("api.mistral.ai")&&(this.isMistral=!0)}setFunctions(t){this.functions=t}convertHistory(t){const n=[];for(const r of t){if(typeof r.content=="string"){n.push({role:r.role,content:r.content});continue}const a=[],s=[];for(const m of r.content)switch(m.type){case"function_call":s.push(m);break;case"image_url":default:a.push(m);break}let i;const l=[];r.role==="assistant"&&s.length>0&&(i=s.map(m=>(m.result&&l.push({role:"tool",tool_call_id:m.id,content:m.result}),{type:"function",id:m.id,function:{name:m.name,arguments:m.args}})));let u=a;a.length===0?u="":a.every(m=>m.type==="text")&&(u=a.map(m=>m.text).join(`

`));const g={role:r.role,content:u,tool_calls:i};n.push(g,...l)}return n}async packChatResponse(t,n){return n.length===0?X.assistant(t):X.assistant([{type:"text",text:t},...n.map(r=>({type:"function_call",id:r.id,name:r.name,args:r.args}))])}chatCompletionBody(t,n,r){const a=this.isMistral?void 0:!0,s=this.functions.map(i=>({type:"function",function:{name:i.name,parameters:i.parameters},strict:a}));return JSON.stringify({model:this.config.model,messages:[{role:"system",content:t},...this.convertHistory(n)],tools:(!this.config.toolCallStyle||this.config.toolCallStyle==="builtin")&&s.length>0?s:void 0,stream:r})}async chat(t,n){const r=`${this.config.endpoint}/chat/completions`,a={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,Accept:"application/json"},i=await(await st()).fetch(r,{method:"POST",headers:a,body:this.chatCompletionBody(t,n)});if(!i.ok){const o=await i.text();switch(i.status){case 400:throw new ot(o);case 413:throw new lt(o);case 429:throw new ct(o)}throw new Error(`Failed to chat stream: ${i.status} ${i.statusText}
${o}`)}const u=(await i.json()).choices[0],g=u.message.content,m=(u.message.tool_calls||[]).map(o=>({id:o.id||"",name:o.function.name,args:o.function.arguments}));return this.packChatResponse(g,m)}async chatStream(t,n,r){const a=`${this.config.endpoint}/chat/completions`,s={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},l=await(await st()).fetch(a,{method:"POST",headers:s,body:this.chatCompletionBody(t,n,!0)});if(!l.ok){const o=await l.text();switch(l.status){case 400:throw new ot(o);case 413:throw new lt(o);case 429:throw new ct(o)}throw new Error(`Failed to chat stream: ${l.status} ${l.statusText}
${o}`)}r.onStart?.();const u=l.body?.getReader();if(!u)throw new Error("Failed to get response reader");let g="";const m=[];return await ua(u,o=>{if(!o.choices||o.choices.length===0){N.warn("No choices in chunk",JSON.stringify(o));return}const c=o.choices[0].delta;if(c.content&&(g+=c.content,r.onText?.(c.content)),c.tool_calls)for(const h of c.tool_calls)m[h.index]=Zi(m[h.index],{id:h.id||"",name:h.function.name||"",args:h.function.arguments||""}),r.onFunctionCall?.(h.index,h.id,h.function.name,h.function.arguments);r.isCancelled?.()&&(u.cancel(),N.info("[chat/SingleChatAction/generate] Stream Cancelled"))}),this.packChatResponse(g,m)}async listModels(){const t=`${this.config.endpoint}/models`,n={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},r=await fetch(t,{method:"GET",headers:n});if(!r.ok)throw new Error(`Failed to list models: ${r.status} ${r.statusText}
${await r.text()}`);const a=await r.json();let s=[];return Array.isArray(a.data)?s=a.data:Array.isArray(a)&&(s=a),s.map(i=>{let l=i.id;return i.id.startsWith("azureml://")&&(l=l.split("/")[5]),{id:l,object:i.object,ownedBy:i.owned_by,created:i.created}})}}class Zo{config;functions=[];constructor(t){if(t.clientType!=="Gemini")throw new Error("Invalid client type");this.config=t}setFunctions(t){this.functions=t}convertMessagesForGemini(t){const n={system:"user",user:"user",assistant:"model"},r=[];for(const a of t){(r.length===0||r[r.length-1].role!==n[a.role])&&r.push({parts:[],role:n[a.role]});const s=r[r.length-1],i=[];if(typeof a.content=="string"){if(a.content.length===0)continue;s.parts.push({text:a.content})}else for(const l of a.content)switch(l.type){case"text":s.parts.push({text:l.text});break;case"image_url":{const[u,g]=l.image_url.url.split(",",2),m=u.match(/^data:([^;]+)(;base64)?/);if(!m)throw new Error("Invalid data URL");const o=m[1],c=m[2]===";base64";s.parts.push({inline_data:{mime_type:o,data:c?g:l.image_url.url}})}break;case"function_call":s.parts.push({functionCall:{name:l.name,args:JSON.parse(l.args)}}),l.result!==void 0&&i.push({functionResponse:{name:l.name,response:{name:l.name,content:l.result}}});break}i.length>0&&((r.length===0||r[r.length-1].role!=="user")&&r.push({parts:[],role:"user"}),r[r.length-1].parts.push(...i))}return r.filter(a=>a.parts.length>0)}supportSystemInstruction(){return!(this.config.model.includes("image-generation")||this.config.model.includes("gemma"))}responseModalities(){return this.config.model.includes("image-generation")?["Text","Image"]:["Text"]}chatCompletionBody(t,n){let r;this.config.toolCallStyle&&this.functions.length>0&&(r=[{function_declarations:this.functions}]);const a=this.convertMessagesForGemini(n);return this.supportSystemInstruction()?JSON.stringify({contents:a,system_instruction:{parts:[{text:t}]},tools:r}):(a.unshift({parts:[{text:t}],role:"user"}),JSON.stringify({contents:a,generationConfig:{responseModalities:this.responseModalities()}}))}geminiPartToTypedContent(t){if("text"in t)return{type:"text",text:t.text};if("data"in t)return{type:"image_url",image_url:{url:t.data}};if("functionCall"in t)return{type:"function_call",id:t.functionCall.name,name:t.functionCall.name,args:JSON.stringify(t.functionCall.args)};throw new Error("Invalid part")}async chat(t,n){const r=`${this.config.endpoint}/models/${this.config.model}:generateContent?key=${this.config.apiKey}`,a={"Content-Type":"application/json"},i=await(await st()).fetch(r,{method:"POST",headers:a,body:this.chatCompletionBody(t,n)});if(!i.ok)throw new Error(`Failed to chat: ${i.status} ${i.statusText}
${await i.text()}`);let g=(await i.json()).candidates[0].content.parts.map(this.geminiPartToTypedContent);return g.length===1&&g[0].type==="text"&&(g=g[0].text),X.assistant(g)}async chatStream(t,n,r){const a=`${this.config.endpoint}/models/${this.config.model}:streamGenerateContent?alt=sse&key=${this.config.apiKey}`,i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:this.chatCompletionBody(t,n)});if(!i.ok){const m=await i.text();switch(i.status){case 400:throw new ot(m);case 413:throw new lt(m);case 429:throw new ct(m)}throw new Error(`Failed to chat stream: ${i.status} ${i.statusText}
${m}`)}r.onStart?.();const l=i.body?.getReader();if(!l)throw new Error("Failed to get reader");let u="";const g=[];return await ua(l,m=>{const o=m.candidates[0].content;if(o.parts===void 0)return;let c="";for(const h of o.parts)if("text"in h)c+=h.text;else{const d=this.geminiPartToTypedContent(h);g.push(d),d.type==="function_call"&&r.onFunctionCall?.(0,d.name,d.name,d.args)}u+=c,r.onText?.(c),r.isCancelled?.()&&(l.cancel(),N.info("[chat/SingleChatAction/generate] Stream Cancelled"))}),g.length>0&&(u=[{type:"text",text:u},...g]),X.assistant(u)}async listModels(){const t=`${this.config.endpoint}/models?key=${this.config.apiKey}`,r=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){const s=await r.text();switch(r.status){case 400:throw new ot(s);case 413:throw new lt(s);case 429:throw new ct(s)}throw new Error(`Failed to chat stream: ${r.status} ${r.statusText}
${s}`)}return(await r.json()).models.map(s=>{let i=s.name;return i.startsWith("models/")&&(i=i.slice(7)),{id:i,object:s.displayName,ownedBy:"",created:0}})}}const pu=()=>({id:Ut(),name:"New Model",clientType:"OpenAI",endpoint:"",apiKey:"",model:"",systemPrompt:"",toolCallStyle:"builtin"}),Wo=[{name:"Ollama",clientType:"OpenAI",apiKeyURL:"",endpoint:"http://localhost:11434/v1",models:["llama3.3","deepseek-r1","phi4","llama3.1","llama3.2","mistral","qwen2.5","gemma"]},{name:"Gemini",clientType:"Gemini",apiKeyURL:"https://aistudio.google.com/apikey",endpoint:"https://generativelanguage.googleapis.com/v1beta",models:["gemini-2.0-flash-lite","gemini-2.0-flash","gemini-1.5-flash","gemini-1.5-flash-8b","gemini-1.5-pro"]},{name:"Groq",clientType:"OpenAI",apiKeyURL:"https://console.groq.com/keys",endpoint:"https://api.groq.com/openai/v1",models:["deepseek-r1-distill-llama-70b","deepseek-r1-distill-qwen-32b","qwen-2.5-32b","gemma2-9b-it","llama-3.3-70b-versatile"]},{name:"OpenAI",clientType:"OpenAI",apiKeyURL:"https://platform.openai.com/api-keys",endpoint:"https://api.openai.com/v1",models:["gpt-4o-mini","gpt-4o","o3","o3-mini"]},{name:"Anthropic",clientType:"Anthropic",apiKeyURL:"https://console.anthropic.com/settings/keys",endpoint:"https://api.anthropic.com/v1",models:["claude-3-7-sonnet-latest","claude-3-5-haiku-latest","claude-3-5-sonnet-latest","claude-3-5-opus-latest"]},{name:"OpenRouter",clientType:"OpenAI",apiKeyURL:"https://openrouter.ai/settings/keys",endpoint:"https://openrouter.ai/api/v1",models:["deepseek/deepseek-r1:free","meta-llama/llama-3.3-70b-instruct:free","deepseek/deepseek-r1-distill-llama-70b:free","nvidia/llama-3.1-nemotron-70b-instruct:free","qwen/qwen2.5-vl-72b-instruct:free","google/gemma-2-9b-it:free"]},{name:"Mistral",clientType:"OpenAI",apiKeyURL:"https://console.mistral.ai/api-keys",endpoint:"https://api.mistral.ai/v1",models:["mistral-large-latest","codestral-latest","pixtral-large-latest","mistral-saba-latest","ministral-8b-latest","ministral-3b-latest"]},{name:"Github",clientType:"OpenAI",apiKeyURL:"https://github.com/settings/tokens",endpoint:"https://models.inference.ai.azure.com",models:["gpt-4o-mini","gpt-4o","Phi-3.5-MoE-instruct","Phi-3.5-mini-instruct","Phi-4","Phi-4-mini-instruct","DeepSeek-R1","DeepSeek-V3","Mistral-Nemo","Mistral-large","Mistral-small"]}],Go=[[["o4","o3","o2","o1"],{contextLength:2e5,maxOutputTokens:1e5,toolCallStyle:"builtin"}],[["gpt-4.1"],{contextLength:1047576,maxOutputTokens:32768,toolCallStyle:"builtin"}],[["gpt-4o"],{contextLength:128e3,maxOutputTokens:16384,toolCallStyle:"builtin"}],[["gemini-2.5"],{contextLength:1048576,maxOutputTokens:65536,toolCallStyle:"builtin"}],[["gemini-2.0","gemini-1.5"],{contextLength:1048576,maxOutputTokens:8192,toolCallStyle:"builtin"}],[["gemma3"],{contextLength:128e3,maxOutputTokens:8192,toolCallStyle:"gemma"}],[["llama4-scout"],{contextLength:1048576,maxOutputTokens:8192,toolCallStyle:"builtin"}],[["llama-3.3"],{contextLength:128e3,toolCallStyle:"builtin"}],[["deepseek-r1"],{contextLength:128e3,toolCallStyle:"builtin"}],[["mixtral"],{contextLength:32768,toolCallStyle:"builtin"}],[["qwen3"],{contextLength:32768,thinkOpen:"<think>",thinkClose:"</think>",toolCallStyle:"builtin"}],[["qwen2.5"],{contextLength:1e6,thinkOpen:"<think>",thinkClose:"</think>",toolCallStyle:"builtin"}],[["phi4"],{contextLength:16384,toolCallStyle:"builtin"}]],yu=e=>{for(const[t,n]of Go)if(t.some(r=>e.startsWith(r)))return n},fa=e=>{switch(e.clientType){case"OpenAI":return new Ho(e);case"Anthropic":throw new Error("Anthropic client not implemented");case"Gemini":return new Zo(e);default:throw new Error("Invalid client type")}};class Yo{modelConfigs;toolConfigs;history;enableFallback=!1;cancelled=!1;onStart;onChunk;onUpdate;onLLMFallback;constructor(t,n,r){this.modelConfigs=t,this.toolConfigs=n,this.history=r}cancel(){this.cancelled=!0}pushUserMessage(t,n){this.history.msgPairs.push({user:{...n,role:"user",parts:t,timestamp:Date.now()}}),this.onUpdate?.(this.history.msgPairs.length-1)}pushAssistantMessage(t){const n=this.history.msgPairs[this.history.msgPairs.length-1];n.assistant?this.history.msgPairs.push({assistant:At(t)}):this.history.msgPairs[this.history.msgPairs.length-1]={...n,assistant:At(t)},this.onUpdate?.(this.history.msgPairs.length-1)}async generate(t){const n=No(this.toolConfigs),r=fa(t);r.setFunctions(n);const a=await this.systemPrompt(t,n),s=new Ge(t),i=await s.format(this.history);N.info("[chat/SingleChatAction/generate] Stream Start");const l=await r.chatStream(a,i,{onStart:()=>{this.onStart?.()},onText:c=>(s.inputToParse(c),this.onChunk?.(c,...s.parseState()),!this.cancelled),isCancelled:()=>this.cancelled});N.info("[chat/SingleChatAction/generate] Stream End");const u=s.finishParsing(),g=l.functionCalls(),m=[...u,...g.map(c=>({type:Re,content:JSON.stringify(c)}))];this.pushAssistantMessage(m);const o=m.filter(c=>c.type===Re).map(c=>{const h=JSON.parse(c.content);return{type:"function_call",id:h.id,name:h.name,args:h.args}});if(!this.cancelled&&o.length>0){const c=new Map;await Promise.all(o.map(async d=>{try{const f=to(d.args),p=await oa[la(d.name)](f);c.set(d.id,p)}catch(f){c.set(d.id,`Tool Error:
${f}`)}}));const h=m.map(d=>{if(d.type!==Re)return d;const f=JSON.parse(d.content);let p=c.get(f.id);return p===void 0?p="<RESULT DOES NOT EXIST>":p.length===0&&(p="<EMPTY>"),{type:Re,content:JSON.stringify({...f,result:p})}});return this.history.msgPairs[this.history.msgPairs.length-1]={...this.history.msgPairs[this.history.msgPairs.length-1],assistant:At(h)},this.onUpdate?.(this.history.msgPairs.length-1),await this.run()}}async run(){let t;for(let n=0;n<this.modelConfigs.length;n++){if(this.cancelled){N.info("[chat/SingleChatAction/run] Cancelled");return}const r=this.modelConfigs[n];try{await this.generate(r);return}catch(a){const s=a instanceof Error?a:new Error(`${a}`);if(N.warn(`[chat/SingleChatAction/run] Failed to chat completion with model '${r.name}', use fallback`,a),a instanceof qt&&(t===void 0||a.level<t.level)&&(t=a),this.onLLMFallback?.(s,n,r)===!1){N.info("[chat/SingleChatAction/run] Fallback is disabled");break}}}throw N.error("[chat/SingleChatAction/run] All fallbacks are failed"),t??new Error("All fallbacks are failed")}async runWithUserMessage(t,n){N.info("[chat/SingleChatAction/run] ",t),this.pushUserMessage(t,n);try{await this.run()}catch(r){throw this.history.msgPairs.pop(),r}}}class Ko extends Yo{async systemPrompt(t,n){return await Ki(t.systemPrompt,t.toolCallStyle||"builtin",n,F(Lt))}}const Jo=["_id","title","createdAt","updatedAt","checkedAt"],Xo=e=>e.checkedAt===void 0||e.updatedAt>e.checkedAt,Qo=e=>Object.fromEntries(Jo.map(t=>[t,e[t]])),Ht=async(e,t,n)=>{const r=e.modelConfigs[0];if(!r)throw new Error("No model config");const a=fa(r);let i=await new Ge(r).format(t);n.historyProcess&&(i=await n.historyProcess(i));const l=await a.chat(n.systemPrompt,i);return await n.postProcess(l)},ar=async(e,t)=>Ht(e,t,{systemPrompt:`
You are a title generator.
Based on the following conversation, please generate a title for this chat.
- Language should be short and clear (At least 2 words, at most 10 words. Single sentence)
- Should be relevant to the conversation
- Use the most used language in the conversation
- DO NOT answer except the title. You ONLY give a title in plain text.
`.trim(),historyProcess:async n=>(n.push(X.user("[Give me a title for the above conversation]")),n),postProcess:async n=>n.extractText().split(`
`).map(r=>r.trim()).filter(r=>r).pop()||""}),el=async(e,t,n)=>Ht(e,t,{systemPrompt:`
You are a conversation management agent, 'UpHurry'.
You should achieve a mission/goal for user, by asking to other LLM.
You should generate a next prompt which will be given to the AI Assistant 'Unhurry'.

YOU MUST use the same language as the goal comment.

## Goal Achieved

If the chat history includes everything for the goal,
the goal is achieved and just responsd as <DONE>.

## Giving Next Question

If the goal is not achieved yet, you should find the next message which will be sent to AI Assistant.

- You MUST say as a human in casual sentences, since you are a agent for human.
- Give a short instruction / question. About 1-2 sentences.
- You may give a guide to encourage AI (e.g. use xxx tools, think step by step)
- 'Unhurry' can use useful tools, such as runJS (code execution), web search, etc.
  - When you think a tool is useful, you must suggest it.
  - Unhurry may not have precise knowledge, so you may recommend web search.
- If the next task is clear, just instruct to "Unhurry" to do it.
- If the next task is not clear, you should give a question to derive the solution.
- If AI requested you to decide something, you MUST decide to the best way to achieve goal.
  (Or request more options).

## Something Goes Wrong

If the conversation goes off topic, you should try to get back on track.
But if you think it's hard, just say '<DONE>' to stop the conversation.

# Current Goal
${n}

# Current Conversation
`.trim(),historyProcess:async r=>(r.push(X.user(`# Goal
${n}

# The next question (or <DONE>)?
`)),r),postProcess:async r=>{const a=r.extractText().trim();return a.toLowerCase()==="<done>"?null:a}}),tl=async(e,t)=>Ht(e,t,{systemPrompt:`
You are a conversation agent.
You should read the previous chat history, and generate a summary report which should be remembered.
When user give '[COMPACT]', then generate a note for you.

- The summary should be short (about 5~10 sentences)
- You should keep all information so the LLM can be talk with user only with the note not full chat history
- You may keep the flow of the conversation (e.g., which user asked and how you answered, then what is request and which tools are used.)
- You may omit unimportant things, but keep the topic, keywords, which tool used and the result.
- You may keep result / example (e.g. if there are 5 example you gave, at least one should be kept)
- You can use English, but keywords / topic should be the same language.
`.trim(),historyProcess:async n=>(n.push(X.user("[COMPACT]")),n),postProcess:async n=>n.extractText()}),nl=async(e,t)=>Ht(e,t,{systemPrompt:`
You are a conversation helper.
You will read a conversation and memory.
You should generate changes of memory in diff format.

- You should find facts to remember / forget.
- Your answer should contain differences of memory.
  - Lines starting with '+' will be added to the memory.
  - Lines starting with '-' will be removed from the memory.
- For example, if 'USER have a pen, not a paper', but the old memory is 'USER has a paper', then you should answer as

\`\`\`example
- USER has a paper.
+ USER has a pen.
\`\`\`

- System will apply changes to the memory based on your answer.
- Each fact should be a short and clear single sentence.
- Facts can bb in English, but it's recommended to use original language for keywords.
- Use a word 'USER' to represent the user (counterpart), and 'AI' to represent YOU (AI Assistant, Unhurry).
- If nothing to change, just say 'No changes.'
- You do not need to keep all conversation to history. Find only important facts / personal information.
- DO NOT USE relative time format (e.g. today, 10 minutes ago, etc.). Use absolute time format and durations.

## Current Time

Current time is '${new Date().toLocaleString()}'.

For memory, you should use duration with absolute time format, instead of relative time format.

## Memory

The below is a memory you currently have.

\`\`\`memory
${Lt()?.contents}
\`\`\`
`.trim(),historyProcess:async n=>(n.push(X.assistant("[END OF CONVERSATION]")),n.push(X.user("[GIVE MEMORY DIFF]")),console.log("History",n),n),postProcess:async n=>{const r=Lt();if(!r)return"";const a=ji(r,n.extractText());return qi(a),console.log("Memory",r,n,a),"a"}});class rl extends Error{constructor(t){super(`[ChatManager] Chat ${t} not found`),this.name="ChatNotFoundError"}}class al extends Error{constructor(t){super(`[ChatManager] Chat ${t} is already processing`),this.name="ChatAlreadyProcessingError"}}const sl=new Me("chat-manager","manager",1),sr=async()=>await sl.transaction("readwrite");class _n{static instance=null;checkInterval=null;checkIntervalDelay=5e3;maxRetries=10;chats=new Map;onChatProcessingChange=()=>{};onUphurryProgressChange=()=>{};onContextUpdate=()=>!1;onWarning=()=>{};onChunk=()=>{};onMessage=()=>{};onFinish=()=>{};constructor(){}static getInstance(){return this.instance||(this.instance=new _n),this.instance}chat(t){const n=this.chats.get(t);if(!n)throw new rl(t);return n}tryLock(t){if(t.processing)throw new al(t.meta.id);t.processing=!0,this.onChatProcessingChange(t.meta.id,!0)}unlock(t){t.processing=!1,this.onChatProcessingChange(t.meta.id,!1)}async saveState(){const t=await sr(),n={_id:"chat-manager",updatedAt:Date.now(),ongoings:Array.from(this.chats.values()).map(r=>r.meta)};await t.put(n)}async loadState(t){const r=await(await sr()).get("chat-manager");if(!r)throw new Error("Chat manager state not found");for(const a of r.ongoings)this.chats.has(a.id)||(await this.loadChat(a.id,t),a.request&&this.setChatRequest(a.id,a.request));return r}getEmptyChatCtx(){return{_id:Ut(),title:"",createdAt:Date.now(),updatedAt:Date.now(),history:{msgPairs:[]}}}makeOngoing(t,n){const r={meta:{id:t._id,startedAt:Date.now()},ctx:t,opts:n,retries:0,warnings:[]};this.chats.set(t._id,r),this.saveState()}emptyChat(t){const n=this.getEmptyChatCtx();return this.makeOngoing(n,t),n}async loadChat(t,n){if(this.chats.has(t))return this.chat(t).ctx;const a=await(await _t()).get(t);if(!a)return this.emptyChat(n);const i=await(await en(t)).getAll(),l={...a,history:{msgPairs:i}};return this.makeOngoing(l,n),Xo(l)&&(l.checkedAt=Date.now(),this.saveChatMeta(t)),l}async unloadChat(t){this.cancelChat(t),this.chats.delete(t),await this.saveState()}async saveChatMeta(t){const n=this.chat(t),r=await _t();n.ctx.updatedAt=Date.now(),this.onContextUpdate(n.ctx)&&(n.ctx.checkedAt=Date.now());const a=Qo(n.ctx);await r.put(a)}async saveMessage(t,n){const r=this.chat(t),a=await en(t),s=r.ctx.history.msgPairs[n];await a.put({...s,_id:n})}async clearMessagesDB(t){this.chat(t),await(await en(t)).clear()}pushWarning(t,...n){const r=this.chat(t);r.warnings.push(...n),this.onWarning(t,r.warnings)}clearWarnings(t){const n=this.chat(t);n.warnings.length>0&&(n.warnings=[],this.onWarning(t,n.warnings))}resetFailures(t){const n=this.chat(t);n.retries=0,this.clearWarnings(t),this.saveState()}setChatRequest(t,n){const r=this.chat(t);return this.tryLock(r),r.meta.request=n,this.resetFailures(t),this.saveState(),this.checkChat(r).catch(()=>{}),!0}setChatOpts(t,n){const r=this.chat(t);r.opts={...r.opts,...n},this.saveState()}getProgress(t){const n=this.chat(t);return{llm:n.action!==void 0,uphurry:n.meta.request?.type==="uphurry"}}finishRequest(t){const n=this.chat(t);n.meta.request&&(n.meta.request=void 0,this.unlock(n),this.saveChatMeta(t),this.onFinish(t,n.ctx))}cancelChat(t){const n=this.chat(t);n.action&&n.action.cancel(),n.meta.request=void 0,this.unlock(n),this.saveChatMeta(t)}updateChatMeta(t,n){const r=this.chat(t);r.ctx={...r.ctx,...n},this.saveChatMeta(t)}getOngoings(){return Array.from(this.chats.values()).map(t=>({meta:t.meta,ctx:t.ctx,progressing:t.meta.request!==void 0||!!t.processing}))}async generateChatTitle(t){const n=this.chat(t);this.tryLock(n);try{const r=await ar(n.opts,n.ctx.history);this.updateChatMeta(t,{title:r})}finally{this.unlock(n)}}async compactChat(t,n){const r=this.chat(t);this.tryLock(r);try{const a=await tl(r.opts,r.ctx.history);n&&(await this.clearMessagesDB(t),r.ctx.history.msgPairs=[]),r.ctx.history.msgPairs.push({user:ro(`# Note
Old messages are clipped, the below is summary of the last chat:
${a}`),assistant:At("OK.")}),this.onMessage(t,r.ctx.history.msgPairs),await Promise.all([this.saveMessage(t,r.ctx.history.msgPairs.length-1),this.saveChatMeta(t)])}finally{this.unlock(r)}}onLLMFallback(t,n,r,a){const s=this.chat(t);let i=`<${a.name}> error.`;return n instanceof ot?i+="(400) Maybe inputs are invalid or include unsupported items. (e.g. Image, ToolCall)":n instanceof lt?i+="(413) Maybe chat history is too long.":n instanceof ct?i+="(429) Rate limit.":i+=`(${n.message})`,i+=`(retries: ${s.retries})`,this.pushWarning(t,i),this.chats.get(t)?.opts.enableLLMFallback?(N.info(`[ChatManager] LLM fallback enabled, error: ${n.message}; ${i}`),!0):(N.warn(`[ChatManager] LLM fallback disabled, error: ${n.message}; ${i}`),!1)}callbackOnUpdate(t){return async n=>{const r=this.chat(t);this.onMessage(t,r.ctx.history.msgPairs),await Promise.all([this.saveMessage(t,n),this.saveChatMeta(t)])}}async checkChatInner(t){const n=t.meta.id,r=t.meta.request;if(!r)return;const a=t.ctx.history.msgPairs.length===0;a&&this.saveChatMeta(n);const s=()=>{const i=new Ko(t.opts.modelConfigs,t.opts.toolConfigs,t.ctx.history);return i.onStart=()=>{this.clearWarnings(n)},i.onChunk=(l,u,g)=>this.onChunk(n,u,g),i.onLLMFallback=(l,u,g)=>this.onLLMFallback(n,l,u,g),i.onUpdate=this.callbackOnUpdate(t.meta.id),t.action=i,i};try{switch(r.type){case"user-msg":if(Lt()?.enabled){const i={msgPairs:[...t.ctx.history.msgPairs,{user:{role:"user",parts:r.message,timestamp:Date.now()}}]};nl(t.opts,i)}await s().runWithUserMessage(r.message),this.finishRequest(n);break;case"uphurry":{this.onUphurryProgressChange(n,!0);const i=await el(t.opts,t.ctx.history,r.comment);this.onUphurryProgressChange(n,!1),i===null?this.finishRequest(n):await s().runWithUserMessage(Ge.parse(i),{uphurry:!0})}break}}finally{t.action=void 0,this.onUphurryProgressChange(n,!1)}if(a){const i=await ar(t.opts,t.ctx.history);t.ctx.title=i,this.saveChatMeta(t.meta.id)}}async checkChat(t){if(typeof t=="string"&&(t=this.chat(t)),!(t.checkingLock||t.retries>this.maxRetries)){t.checkingLock=!0;try{await this.checkChatInner(t),this.resetFailures(t.ctx._id)}catch(n){if(t.retries=(t.retries||0)+1,t.retries>this.maxRetries){const r=t.ctx.title||"untitled";N.error("[ChatManager] Error checking chat",n),z.error(`[chat '${r}'] ${n}`),this.cancelChat(t.meta.id)}}t.checkingLock=!1}}checkAll(){for(const t of this.chats.values())this.checkChat(t).catch(()=>{})}isRunning(){return this.checkInterval!==null}start(){this.checkInterval||(this.checkInterval=window.setInterval(()=>this.checkAll(),this.checkIntervalDelay))}stop(){this.checkInterval&&(window.clearInterval(this.checkInterval),this.checkInterval=null)}}const I=_n.getInstance(),[il,be]=T(void 0,{equals:!1});pe(()=>{const e=qe();if(!e)return;e.fontFamily==="sans-serif"?document.querySelector(":root")?.classList.remove("font-serif"):document.querySelector(":root")?.classList.add("font-serif");const t=Q();I.setChatOpts(t._id,{modelConfigs:e.models.slice(e.currentModelIdx),toolConfigs:e.tools,enableLLMFallback:e.enableLLMFallback})});const Ln=()=>{const e=qe();return e?{modelConfigs:e.models.slice(e.currentModelIdx),toolConfigs:e.tools,enableLLMFallback:e.enableLLMFallback}:{modelConfigs:[],toolConfigs:{},enableLLMFallback:!1}},[Q,Zt]=T(I.emptyChat({modelConfigs:[],toolConfigs:{},enableLLMFallback:!1})),[wu,ol]=T(!1),[vu,ll]=T([],{equals:!1}),[bu,da]=T([]),[xu,ha]=T(""),Rn=()=>{da([]),ha("")},[Au,zn]=T(!1),[Su,ma]=T(!1),[Cu,cl]=T(!1);var ul=M("<a href=# class=text-sm>New message: <b class=is-underlined>");const fl=async e=>{const t=await st();F(qe)?.enableVibration&&t.vibrate(e)},ga=()=>{He(()=>{Zt({...I.emptyChat(Ln())}),Rn(),zn(!1)}),di()},dl=async e=>{const t=await I.loadChat(e,Ln()),n=I.getProgress(e);He(()=>{Zt({...t}),Rn(),zn(n.llm),ma(n.uphurry)}),I.checkChat(e),jr()},ku=e=>{const t=Q();if(!t)throw new Error("No chat context");I.updateChatMeta(t._id,{title:e})},hl=async()=>{const e=Q();if(!e)throw new Error("No chat context");await z.promise(I.generateChatTitle(e._id),{loading:"Generating title...",success:"Title generated",error:"Failed to generate title"})},ir=async e=>{const t=Q();if(!t)throw new Error("No chat context");await z.promise(I.compactChat(t._id,e),{loading:"Compacting chat...",success:"Chat compacted",error:"Failed to compact chat"})},Eu=async(e,t,n)=>{if(!qe())throw new Error("No user config");const a=Q();if(!a)throw new Error("No chat context");const s=Ge.parse(e);if(t)for(const l of t)s.push({type:Jr,content:l});const i=await I.loadChat(a._id,Ln());n?I.setChatRequest(i._id,{type:"uphurry",comment:s[0]?.content}):I.setChatRequest(i._id,{type:"user-msg",message:s}),I.checkChat(i._id)},Tu=()=>{const e=Q();I.cancelChat(e._id)},ml=()=>{be("/"),ga(),z.success("New notebook created")},pa=async e=>{await z.promise(dl(e),{loading:"opening chat...",success:"Opened",error:"Error during open chat"}),be("/")};I.onContextUpdate=e=>e._id!==Q()._id?!1:(Zt({...e}),!0);I.onWarning=(e,t)=>{F(Q)._id===e&&ll(t)};I.onChunk=(e,t,n)=>{F(Q)._id===e&&(fl(4),He(()=>{da(t),ha(n)}))};I.onMessage=async(e,t)=>{F(Q)._id===e&&(Rn(),Zt(r=>({...r,history:{msgPairs:[...t]}})),setTimeout(()=>{jr()},33))};I.onChatProcessingChange=(e,t)=>{F(Q)._id===e&&zn(t)};I.onUphurryProgressChange=(e,t)=>{F(Q)._id===e&&ma(t)};I.onFinish=(e,t)=>{if(F(Q)._id===e)return;const r=t.title||"untitled";z.success(a=>{const s=()=>z.promise((async()=>(z.dismiss(a.id),await pa(e),!0))(),{loading:"Loading...",success:"Chat loaded",error:"Failed to load chat"});return(()=>{var i=ul(),l=i.firstChild,u=l.nextSibling;return i.$$click=s,k(u,r),i})()})};I.start();Te(["click"]);var gl=M('<svg><title>OpenAI</title><path d="M21.55 10.004a5.416 5.416 0 00-.478-4.501c-1.217-2.09-3.662-3.166-6.05-2.66A5.59 5.59 0 0010.831 1C8.39.995 6.224 2.546 5.473 4.838A5.553 5.553 0 001.76 7.496a5.487 5.487 0 00.691 6.5 5.416 5.416 0 00.477 4.502c1.217 2.09 3.662 3.165 6.05 2.66A5.586 5.586 0 0013.168 23c2.443.006 4.61-1.546 5.361-3.84a5.553 5.553 0 003.715-2.66 5.488 5.488 0 00-.693-6.497v.001zm-8.381 11.558a4.199 4.199 0 01-2.675-.954c.034-.018.093-.05.132-.074l4.44-2.53a.71.71 0 00.364-.623v-6.176l1.877 1.069c.02.01.033.029.036.05v5.115c-.003 2.274-1.87 4.118-4.174 4.123zM4.192 17.78a4.059 4.059 0 01-.498-2.763c.032.02.09.055.131.078l4.44 2.53c.225.13.504.13.73 0l5.42-3.088v2.138a.068.068 0 01-.027.057L9.9 19.288c-1.999 1.136-4.552.46-5.707-1.51h-.001zM3.023 8.216A4.15 4.15 0 015.198 6.41l-.002.151v5.06a.711.711 0 00.364.624l5.42 3.087-1.876 1.07a.067.067 0 01-.063.005l-4.489-2.559c-1.995-1.14-2.679-3.658-1.53-5.63h.001zm15.417 3.54l-5.42-3.088L14.896 7.6a.067.067 0 01.063-.006l4.489 2.557c1.998 1.14 2.683 3.662 1.529 5.633a4.163 4.163 0 01-2.174 1.807V12.38a.71.71 0 00-.363-.623zm1.867-2.773a6.04 6.04 0 00-.132-.078l-4.44-2.53a.731.731 0 00-.729 0l-5.42 3.088V7.325a.068.068 0 01.027-.057L14.1 4.713c2-1.137 4.555-.46 5.707 1.513.487.833.664 1.809.499 2.757h.001zm-11.741 3.81l-1.877-1.068a.065.065 0 01-.036-.051V6.559c.001-2.277 1.873-4.122 4.181-4.12.976 0 1.92.338 2.671.954-.034.018-.092.05-.131.073l-4.44 2.53a.71.71 0 00-.365.623l-.003 6.173v.002zm1.02-2.168L12 9.25l2.414 1.375v2.75L12 14.75l-2.415-1.375v-2.75z">'),pl=M('<svg><title>Gemini</title><path d="M12 24A14.304 14.304 0 000 12 14.304 14.304 0 0012 0a14.305 14.305 0 0012 12 14.305 14.305 0 00-12 12">'),yl=M('<svg><title>Mistral</title><path clip-rule=evenodd d="M3.428 3.4h3.429v3.428h3.429v3.429h-.002 3.431V6.828h3.427V3.4h3.43v13.714H24v3.429H13.714v-3.428h-3.428v-3.429h-3.43v3.428h3.43v3.429H0v-3.429h3.428V3.4zm10.286 13.715h3.428v-3.429h-3.427v3.429z">'),wl=M('<svg><title>Ollama</title><path d="M7.905 1.09c.216.085.411.225.588.41.295.306.544.744.734 1.263.191.522.315 1.1.362 1.68a5.054 5.054 0 012.049-.636l.051-.004c.87-.07 1.73.087 2.48.474.101.053.2.11.297.17.05-.569.172-1.134.36-1.644.19-.52.439-.957.733-1.264a1.67 1.67 0 01.589-.41c.257-.1.53-.118.796-.042.401.114.745.368 1.016.737.248.337.434.769.561 1.287.23.934.27 2.163.115 3.645l.053.04.026.019c.757.576 1.284 1.397 1.563 2.35.435 1.487.216 3.155-.534 4.088l-.018.021.002.003c.417.762.67 1.567.724 2.4l.002.03c.064 1.065-.2 2.137-.814 3.19l-.007.01.01.024c.472 1.157.62 2.322.438 3.486l-.006.039a.651.651 0 01-.747.536.648.648 0 01-.54-.742c.167-1.033.01-2.069-.48-3.123a.643.643 0 01.04-.617l.004-.006c.604-.924.854-1.83.8-2.72-.046-.779-.325-1.544-.8-2.273a.644.644 0 01.18-.886l.009-.006c.243-.159.467-.565.58-1.12a4.229 4.229 0 00-.095-1.974c-.205-.7-.58-1.284-1.105-1.683-.595-.454-1.383-.673-2.38-.61a.653.653 0 01-.632-.371c-.314-.665-.772-1.141-1.343-1.436a3.288 3.288 0 00-1.772-.332c-1.245.099-2.343.801-2.67 1.686a.652.652 0 01-.61.425c-1.067.002-1.893.252-2.497.703-.522.39-.878.935-1.066 1.588a4.07 4.07 0 00-.068 1.886c.112.558.331 1.02.582 1.269l.008.007c.212.207.257.53.109.785-.36.622-.629 1.549-.673 2.44-.05 1.018.186 1.902.719 2.536l.016.019a.643.643 0 01.095.69c-.576 1.236-.753 2.252-.562 3.052a.652.652 0 01-1.269.298c-.243-1.018-.078-2.184.473-3.498l.014-.035-.008-.012a4.339 4.339 0 01-.598-1.309l-.005-.019a5.764 5.764 0 01-.177-1.785c.044-.91.278-1.842.622-2.59l.012-.026-.002-.002c-.293-.418-.51-.953-.63-1.545l-.005-.024a5.352 5.352 0 01.093-2.49c.262-.915.777-1.701 1.536-2.269.06-.045.123-.09.186-.132-.159-1.493-.119-2.73.112-3.67.127-.518.314-.95.562-1.287.27-.368.614-.622 1.015-.737.266-.076.54-.059.797.042zm4.116 9.09c.936 0 1.8.313 2.446.855.63.527 1.005 1.235 1.005 1.94 0 .888-.406 1.58-1.133 2.022-.62.375-1.451.557-2.403.557-1.009 0-1.871-.259-2.493-.734-.617-.47-.963-1.13-.963-1.845 0-.707.398-1.417 1.056-1.946.668-.537 1.55-.849 2.485-.849zm0 .896a3.07 3.07 0 00-1.916.65c-.461.37-.722.835-.722 1.25 0 .428.21.829.61 1.134.455.347 1.124.548 1.943.548.799 0 1.473-.147 1.932-.426.463-.28.7-.686.7-1.257 0-.423-.246-.89-.683-1.256-.484-.405-1.14-.643-1.864-.643zm.662 1.21l.004.004c.12.151.095.37-.056.49l-.292.23v.446a.375.375 0 01-.376.373.375.375 0 01-.376-.373v-.46l-.271-.218a.347.347 0 01-.052-.49.353.353 0 01.494-.051l.215.172.22-.174a.353.353 0 01.49.051zm-5.04-1.919c.478 0 .867.39.867.871a.87.87 0 01-.868.871.87.87 0 01-.867-.87.87.87 0 01.867-.872zm8.706 0c.48 0 .868.39.868.871a.87.87 0 01-.868.871.87.87 0 01-.867-.87.87.87 0 01.867-.872zM7.44 2.3l-.003.002a.659.659 0 00-.285.238l-.005.006c-.138.189-.258.467-.348.832-.17.692-.216 1.631-.124 2.782.43-.128.899-.208 1.404-.237l.01-.001.019-.034c.046-.082.095-.161.148-.239.123-.771.022-1.692-.253-2.444-.134-.364-.297-.65-.453-.813a.628.628 0 00-.107-.09L7.44 2.3zm9.174.04l-.002.001a.628.628 0 00-.107.09c-.156.163-.32.45-.453.814-.29.794-.387 1.776-.23 2.572l.058.097.008.014h.03a5.184 5.184 0 011.466.212c.086-1.124.038-2.043-.128-2.722-.09-.365-.21-.643-.349-.832l-.004-.006a.659.659 0 00-.285-.239h-.004z">'),vl=M('<svg><title>OpenRouter</title><path d="M16.804 1.957l7.22 4.105v.087L16.73 10.21l.017-2.117-.821-.03c-1.059-.028-1.611.002-2.268.11-1.064.175-2.038.577-3.147 1.352L8.345 11.03c-.284.195-.495.336-.68.455l-.515.322-.397.234.385.23.53.338c.476.314 1.17.796 2.701 1.866 1.11.775 2.083 1.177 3.147 1.352l.3.045c.694.091 1.375.094 2.825.033l.022-2.159 7.22 4.105v.087L16.589 22l.014-1.862-.635.022c-1.386.042-2.137.002-3.138-.162-1.694-.28-3.26-.926-4.881-2.059l-2.158-1.5a21.997 21.997 0 00-.755-.498l-.467-.28a55.927 55.927 0 00-.76-.43C2.908 14.73.563 14.116 0 14.116V9.888l.14.004c.564-.007 2.91-.622 3.809-1.124l1.016-.58.438-.274c.428-.28 1.072-.726 2.686-1.853 1.621-1.133 3.186-1.78 4.881-2.059 1.152-.19 1.974-.213 3.814-.138l.02-1.907z">'),bl=M('<svg><title>Groq</title><path d="M12.036 2c-3.853-.035-7 3-7.036 6.781-.035 3.782 3.055 6.872 6.908 6.907h2.42v-2.566h-2.292c-2.407.028-4.38-1.866-4.408-4.23-.029-2.362 1.901-4.298 4.308-4.326h.1c2.407 0 4.358 1.915 4.365 4.278v6.305c0 2.342-1.944 4.25-4.323 4.279a4.375 4.375 0 01-3.033-1.252l-1.851 1.818A7 7 0 0012.029 22h.092c3.803-.056 6.858-3.083 6.879-6.816v-6.5C18.907 4.963 15.817 2 12.036 2z">'),xl=M('<svg><title>Anthropic</title><path d="M13.827 3.52h3.603L24 20h-3.603l-6.57-16.48zm-7.258 0h3.767L16.906 20h-3.674l-1.343-3.461H5.017l-1.344 3.46H0L6.57 3.522zm4.132 9.959L8.453 7.687 6.205 13.48H10.7z">'),Al=M('<svg><title>Github</title><path d="M12 0c6.63 0 12 5.276 12 11.79-.001 5.067-3.29 9.567-8.175 11.187-.6.118-.825-.25-.825-.56 0-.398.015-1.665.015-3.242 0-1.105-.375-1.813-.81-2.181 2.67-.295 5.475-1.297 5.475-5.822 0-1.297-.465-2.344-1.23-3.169.12-.295.54-1.503-.12-3.125 0 0-1.005-.324-3.3 1.209a11.32 11.32 0 00-3-.398c-1.02 0-2.04.133-3 .398-2.295-1.518-3.3-1.209-3.3-1.209-.66 1.622-.24 2.83-.12 3.125-.765.825-1.23 1.887-1.23 3.169 0 4.51 2.79 5.527 5.46 5.822-.345.294-.66.81-.765 1.577-.69.31-2.415.81-3.495-.973-.225-.354-.9-1.223-1.845-1.209-1.005.015-.405.56.015.781.51.28 1.095 1.327 1.23 1.666.24.663 1.02 1.93 4.035 1.385 0 .988.015 1.916.015 2.196 0 .31-.225.664-.825.56C3.303 21.374-.003 16.867 0 11.791 0 5.276 5.37 0 12 0z">');const Sl=e=>(()=>{var t=gl();return H(t,V(e,{fill:"currentColor","fill-rule":"evenodd",height:"1em",style:"flex:none;line-height:1",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),t})(),Cl=e=>(()=>{var t=pl();return H(t,V(e,{fill:"currentColor","fill-rule":"evenodd",height:"1em",style:"flex:none;line-height:1",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),t})(),kl=e=>(()=>{var t=yl();return H(t,V(e,{fill:"currentColor","fill-rule":"evenodd",height:"1em",style:"flex:none;line-height:1",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),t})(),El=e=>(()=>{var t=wl();return H(t,V(e,{fill:"currentColor","fill-rule":"evenodd",height:"1em",style:"flex:none;line-height:1",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),t})(),Tl=e=>(()=>{var t=vl();return H(t,V(e,{fill:"currentColor","fill-rule":"evenodd",height:"1em",style:"flex:none;line-height:1",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),t})(),$l=e=>(()=>{var t=bl();return H(t,V(e,{fill:"currentColor","fill-rule":"evenodd",height:"1em",style:"flex:none;line-height:1",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),t})(),Ml=e=>(()=>{var t=xl();return H(t,V(e,{fill:"currentColor","fill-rule":"evenodd",height:"1em",style:"flex:none;line-height:1",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),t})(),Pl=e=>(()=>{var t=Al();return H(t,V(e,{fill:"currentColor","fill-rule":"evenodd",height:"1em",style:"flex:none;line-height:1",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"}),!0,!0),t})(),Fl=new Map([["openai",Sl],["anthropic",Ml],["gemini",Cl],["groq",$l],["openrouter",Tl],["mistral",kl],["github",Pl]]),Ol=e=>Fl.get(e.toLowerCase())||El;var _l=M('<div class="control has-icons-left"><div class=select><select></select></div><span class="icon is-left">'),Ll=M("<option>");const Rl=()=>{const e=()=>qe()?.models||[],t=()=>qe()?.currentModelIdx||0,n=i=>{const l=Wo.find(u=>u.endpoint===i);if(l)return Ol(l.name)},[r,a]=T(),s=i=>{Kr(u=>({...u,currentModelIdx:i}));const l=e()[i]?.endpoint||"";a(()=>n(l))};return pe(()=>{const i=e()[t()]?.endpoint||"";a(()=>n(i))}),(()=>{var i=_l(),l=i.firstChild,u=l.firstChild,g=l.nextSibling;return u.addEventListener("change",m=>s(Number(m.target.value))),k(u,x(jt,{get each(){return e()},children:(m,o)=>(()=>{var c=Ll();return k(c,()=>m.name),R(()=>c.selected=o()===t()),R(()=>c.value=o()),c})()})),k(g,x(Cn,{get component(){return r()}})),i})()};var zl=M('<svg width=512 height=512 viewBox="0 0 135.46666 135.46667"><use>'),Il=M("<span class=is-hidden-mobile>Chats"),Dl=M('<nav class="navbar is-fixed-top"role=navigation aria-label="main navigation"><div class=navbar-brand><a class=navbar-item><span class=is-hidden-mobile>New</span></a><a role=button aria-label=menu aria-expanded=false data-target=navbarTarget><span></span><span></span><span></span><span></span></a></div><div id=navbarTarget><div class=navbar-end><div class=navbar-item></div><div class="navbar-item has-dropdown is-hoverable"><a class=navbar-link>Menu</a><div class="navbar-dropdown is-boxed is-right">');const Nl=()=>{let e,t,n;const[r,a]=T(!1),s=g=>{e.contains(g.target)||i(!1)},i=g=>{a(g)?window.addEventListener("click",s,{}):window.removeEventListener("click",s)},l=()=>{i(g=>!g)},u=()=>{console.log("Close"),i(!1)};return Dt(()=>{n.querySelectorAll("a").forEach(g=>{g.href&&g.addEventListener("click",u)})}),Ee(()=>{window.removeEventListener("click",s)}),(()=>{var g=Dl(),m=g.firstChild,o=m.firstChild,c=o.firstChild,h=o.nextSibling,d=m.nextSibling,f=d.firstChild,p=f.firstChild,y=p.nextSibling,w=y.firstChild,v=w.nextSibling,b=e;typeof b=="function"?ge(b,g):e=g,k(m,x(_e,{class:"navbar-item",href:`${Y}/`,get children(){var D=zl(),K=D.firstChild;return te(K,"href",`${Y}/icon_mono.svg#icon`),D}}),o),o.$$click=()=>ml(),k(o,x(bi,{}),c),k(m,x(_e,{class:"navbar-item",href:"/chats",get children(){return[x(vi,{}),Il()]}}),h),h.$$click=l;var A=t;typeof A=="function"?ge(A,h):t=h;var _=n;return typeof _=="function"?ge(_,d):n=d,k(p,x(Rl,{})),k(v,x(_e,{class:"navbar-item",href:`${Y}/artifacts`,get children(){return[x(Ai,{}),"Artifacts"]}}),null),k(v,x(_e,{class:"navbar-item",href:`${Y}/settings`,get children(){return[x(wi,{}),"Settings"]}}),null),k(v,x(_e,{class:"navbar-item",href:`${Y}/about`,get children(){return[x(xi,{}),"About"]}}),null),k(v,x(_e,{class:"navbar-item",href:`${Y}/logs`,children:"Logs"}),null),R(D=>{var K="navbar-burger"+(r()?" is-active":""),re="navbar-menu no-user-select"+(r()?" is-active":"");return K!==D.e&&ke(h,D.e=K),re!==D.t&&ke(d,D.t=re),D},{e:void 0,t:void 0}),g})()};Te(["click"]);const Bl=new Me("recent-commands","commands",1),ya=async()=>await Bl.transaction("readwrite"),wa=()=>Date.now().toString(36).padStart(12,"0"),jl=e=>{const t=[],n=new Set;for(let r=e.length-1;r>=0;r--){const a=e[r].ids;for(const s of a)n.has(s)||(n.add(s),t.push(s))}return t},Ul=async()=>{const e=await ya(),t=await e.getAll(),n=jl(t);return await e.clear(),await e.put({_id:wa(),ids:n}),n},Vl=async e=>{await(await ya()).put({_id:wa(),ids:[e]})},ql="",Hl="",Zl="",Wl=e=>{let t=e.key;return(e.metaKey||e.ctrlKey)&&(t=Zl+t),e.shiftKey&&(t=Hl+t),e.altKey&&(t=ql+t),t},Ce=new Map,In=new Map,Gl=e=>{Ce.set(e.id,{...e,q:e.id.toLowerCase()+" "+e.name.toLowerCase()})},Yl=e=>{In.set(e.key,e)},Kl=e=>Ce.get(e),Jl=(e,t)=>{let n=0,r=0;for(;n<e.length&&r<t.length;)e[n]===t[r]?(n++,r++):n++;return r>=t.length},or=e=>{const t=In.get(Wl(e));if(t){const n=Ce.get(t.id);n&&(e.preventDefault(),e.stopPropagation(),n.action(t.args))}};let Ne=[];const Xl=e=>{Vl(e);const t=Ne.indexOf(e);t>=0&&(Ne.splice(t,1),Ne.unshift(e))},Ql=async()=>{In.forEach(n=>{if(n.args)return;const r=Ce.get(n.id);r&&(r.shortcut=n.key)});const e=[],t=new Set;try{const n=await Ul();for(const r of n){const a=Ce.get(r);a&&(e.push(a.id),t.add(r))}}catch(n){N.warn("Error loading recent commands",n)}for(const n of Ce.values())t.has(n.id)||e.push(n.id);Ne=e},ec=e=>{const t=e.trim().toLowerCase(),n=[];for(let r=0;r<Ne.length;r++){const a=Ce.get(Ne[r]);!a||!Jl(a.q,t)||n.push(a)}return n};function tc(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevrons-right",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7l5 5l-5 5"/><path d="M13 7l5 5l-5 5"/>'},e)}function nc(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-folder",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2"/>'},e)}function rc(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-list",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l11 0"/><path d="M9 12l11 0"/><path d="M9 18l11 0"/><path d="M5 6l0 .01"/><path d="M5 12l0 .01"/><path d="M5 18l0 .01"/>'},e)}function ac(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-markdown",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M7 15v-6l2 2l2 -2v6"/><path d="M14 13l2 2l2 -2m-2 2v-6"/>'},e)}function sc(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-minimize",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 19v-2a2 2 0 0 1 2 -2h2"/><path d="M15 5v2a2 2 0 0 0 2 2h2"/><path d="M5 15h2a2 2 0 0 1 2 2v2"/><path d="M5 9h2a2 2 0 0 0 2 -2v-2"/>'},e)}function ic(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14"/><path d="M5 12l14 0"/>'},e)}function oc(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-refresh",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"/><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/>'},e)}function lc(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-settings",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"/><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"/>'},e)}function $u(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-sparkles",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z"/>'},e)}function cc(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0"/><path d="M10 11l0 6"/><path d="M14 11l0 6"/><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"/><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>'},e)}function Mu(e){return C({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12"/><path d="M6 6l12 12"/>'},e)}const[lr,tt]=T(!1),cr=e=>tt(t=>t===!1?e||"":!1),uc=[{id:"chat.new",name:"New Chat",icon:ic,action:()=>{ga(),be("/"),z.success("New chat created!")}},{id:"chat.focusToInput",name:"Focus to Chat Input",action:()=>{const e=document.querySelector(".bottom-input textarea");e&&e.focus()}},{id:"chat.genTitle",name:"Generate Chat Title",action:hl},{id:"chat.compact",name:"Compact Chat History",icon:sc,action:()=>ir(!1)},{id:"chat.compactAndClear",name:"Compact Chat History and Clear",icon:cc,action:()=>ir(!0)},{id:"options.toggleUphurry",name:"Toggle Uphurry Mode",icon:tc,action:()=>{const e=ol(t=>!t);z.success(e?"Uphurry enabled!":"Uphurry disabled!")}},{id:"options.toggleAutoSend",name:"Toggle Auto Send",icon:oc,action:()=>{const e=Kr(t=>({...t,enableAutoSend:!t.enableAutoSend}));z.success(e.enableAutoSend?"Auto send enabled!":"Auto send disabled!")}},{id:"page.currentChat",name:"Open Current Chat",action:()=>be("/")},{id:"page.chatList",name:"Open Chat List",icon:rc,action:()=>be("/chats")},{id:"page.artifactList",name:"Open Artifact List",icon:nc,action:()=>be("/artifacts")},{id:"page.settings",name:"Open Settings",icon:lc,action:()=>be("/settings")},{id:"other.toggleCommandPalette",name:"Toggle Command Palette",action:()=>cr("/")},{id:"other.toggleGotoPalette",name:"Toggle Goto Palette",action:()=>cr("")},{id:"options.toggleRawMessage",name:"Toggle Show Raw Message",icon:ac,action:()=>{const e=cl(t=>!t);z.success(e?"Raw message enabled!":"Raw message disabled!")}}],fc=[{key:"o",id:"page.chatList"},{key:"o",id:"page.artifactList"},{key:"n",id:"chat.new"},{key:"p",id:"other.toggleGotoPalette"},{key:"/",id:"other.toggleCommandPalette"},{key:"p",id:"other.toggleCommandPalette"},{key:"u",id:"options.toggleUphurry"},{key:"i",id:"chat.focusToInput"},{key:"1",id:"page.currentChat"},{key:"k",id:"chat.compact"},{key:"k",id:"chat.compactAndClear"},{key:"`",id:"options.toggleRawMessage"}];for(const e of uc)Gl(e);for(const e of fc)Yl(e);Ql();var dc=M("<span class=plt-shortcut>"),hc=M("<div><span class=plt-icon></span><span>"),mc=M('<div class="plt is-rounded has-shadow"><input class=plt-input type=text placeholder=Search...><div class=plt-items>');const gc=e=>(()=>{var t=hc(),n=t.firstChild,r=n.nextSibling;return xr(t,"click",e.onClick,!0),k(n,x(Be,{get when(){return e.cmd.icon},get children(){return x(Cn,{get component(){return e.cmd.icon}})}})),k(r,()=>e.cmd.name),k(t,x(Be,{get when(){return e.cmd.shortcut},get children(){var a=dc();return k(a,()=>e.cmd.shortcut),a}}),null),R(()=>ke(t,`plt-item ${e.selected?"selected":""}`)),t})(),pc=e=>{let t,n;const[r,a]=T([]),[s,i]=T(0),l=o=>{const c=i(o),h=document.querySelector(`div.plt-item:nth-child(${c+1})`);if(h){const d=n.clientHeight;n.scrollTo(0,h.offsetTop-d/2)}return c},u=o=>{const c=r()[o];console.log(c),c&&(Xl(c.id),tt(!1),c.action())},g=o=>{let c=!0;switch(o.key){case"ArrowUp":l(h=>Math.max(0,h-1));break;case"ArrowDown":l(h=>Math.min(r().length-1,h+1));break;case"Escape":tt(!1);break;case"Enter":u(s());break;default:c=!1}c&&(o.preventDefault(),o.stopPropagation())},m=()=>{const o=t.value;He(()=>{let c=[];if(o.startsWith("/")){const h=ec(o.slice(1));c=a(h)}else{const h=I.getOngoings().filter(d=>d.ctx.title.includes(o.trim()));c=a([Kl("chat.new"),...h.map(d=>({id:d.ctx._id,name:d.ctx.title||"<Untitled>",action:()=>{pa(d.ctx._id)}}))])}l(h=>Math.max(0,Math.min(c.length-1,h)))})};return Dt(()=>{t.focus(),m()}),(()=>{var o=mc(),c=o.firstChild,h=c.nextSibling;c.addEventListener("blur",()=>{setTimeout(()=>{tt(!1)},100)}),c.$$input=m,c.$$keydown=g;var d=t;typeof d=="function"?ge(d,c):t=c;var f=n;return typeof f=="function"?ge(f,h):n=h,k(h,x(jt,{get each(){return r()},children:(p,y)=>x(gc,{cmd:p,get selected(){return y()===s()},onClick:()=>u(y())})})),R(()=>c.value=e.init),o})()};Te(["click","keydown","input"]);var yc=M("<div class=plt-container>");const wc=()=>x(Be,{get when(){return lr()!==!1},get children(){var e=yc();return e.$$click=()=>tt(!1),k(e,x(pc,{get init(){return lr()||""}})),e}});Te(["click"]);const vc=e=>{const t=Mr();return pe(()=>{const n=il();N.info("goto",n),n&&t(`${Y}${n}`)}),Dt(()=>{window.addEventListener("keydown",or)}),Ee(()=>{window.removeEventListener("keydown",or)}),[x(Qs,{toastOptions:{className:"toast-item"},containerClassName:"toaster",position:"top-center"}),x(pi,{}),x(wc,{}),x(Nl,{}),Sn(()=>e.children)]},bc=ye(()=>ue(()=>import("./About-nkxEY2qi.js"),__vite__mapDeps([4,5,1,2,3,6]))),xc=ye(()=>ue(()=>import("./ArtifactListPage-EFUC-EZR.js"),__vite__mapDeps([7,5,8,9,2,1,3]))),Ac=ye(()=>ue(()=>import("./CanvasImagePage-CjQwRvOl.js"),__vite__mapDeps([10,1,2,3]))),Sc=ye(()=>ue(()=>import("./CanvasTextPage-BfvEJCsI.js"),__vite__mapDeps([11,1,2,3]))),Cc=ye(()=>ue(()=>import("./ChatPage-CkEkpJ7y.js"),__vite__mapDeps([12,9,5,2,1,3,13,14]))),kc=ye(()=>ue(()=>import("./ChatListPage-BzgamiT6.js"),__vite__mapDeps([15,5,8,1,2,3]))),Ec=ye(()=>ue(()=>import("./LogsPage-CU9TNxdN.js"),__vite__mapDeps([16,1,2,3]))),Tc=ye(()=>ue(()=>import("./SettingsPage-C2ay_qQC.js"),__vite__mapDeps([17,5,13,1,2,3]))),$c=document.getElementById("root");qa(()=>x(Ps,{root:vc,get children(){return[x(he,{path:`${Y}/`,component:Cc}),x(he,{path:`${Y}/about`,component:bc}),x(he,{path:`${Y}/artifacts`,component:xc}),x(he,{path:`${Y}/canvas/:artifactID/image`,component:Ac}),x(he,{path:`${Y}/canvas/:artifactID/text`,component:Sc}),x(he,{path:`${Y}/chats`,component:kc}),x(he,{path:`${Y}/settings`,component:Tc}),x(he,{path:`${Y}/logs`,component:Ec})]}}),$c);export{Ic as $,Mu as A,nu as B,ml as C,I as D,_t as E,jt as F,ou as G,Xo as H,Q as I,ke as J,Dc as K,Cn as L,mt as M,pa as N,Ni as O,Ee as P,pe as Q,Zc as R,_a as S,cc as T,Xc as U,te as V,V as W,An as X,H as Y,zc as Z,st as _,x as a,Jc as a$,Vr as a0,Si as a1,qe as a2,Kr as a3,qi as a4,Lt as a5,Wo as a6,Wc as a7,Qc as a8,tu as a9,Tu as aA,Eu as aB,cu as aC,C as aD,su as aE,Ut as aF,to as aG,Sn as aH,Cu as aI,Ge as aJ,ie as aK,Re as aL,Jr as aM,tn as aN,$u as aO,ku as aP,hl as aQ,$ as aR,jr as aS,At as aT,bu as aU,xu as aV,Su as aW,vu as aX,du as aY,jc as aZ,Uc as a_,Ol as aa,yu as ab,fa as ac,pu as ad,He as ae,Fi as af,No as ag,fl as ah,lu as ai,Yc as aj,eu as ak,Au as al,S as am,ze as an,mr as ao,cr as ap,ru as aq,Gc as ar,so as as,ao as at,Bc as au,Hc as av,Vc as aw,Ai as ax,Kc as ay,wu as az,bi as b,hu as b0,iu as b1,T as c,qc as d,ge as e,xr as f,be as g,Nc as h,k as i,z as j,mu as k,fu as l,Tn as m,gu as n,Dt as o,Te as p,Lc as q,$n as r,R as s,M as t,Rc as u,Be as v,au as w,Gn as x,uu as y,N as z};
